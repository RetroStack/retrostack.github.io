(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},93733,e=>{"use strict";var t=e.i(43476);let r={pink:"neon-pink",cyan:"neon-cyan",violet:"neon-violet"};function a({className:e="",color:a="pink",as:s="span",pulse:i=!1,children:n,...l}){return(0,t.jsx)(s,{className:`${r[a]} ${i?"animate-pulse":""} ${e}`,...l,children:n})}e.s(["NeonText",()=>a])},59544,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let a={pink:"btn-neon btn-neon-pink",cyan:"btn-neon btn-neon-cyan",ghost:"bg-transparent text-retro-cyan hover:text-retro-pink transition-colors"},s={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},i=(0,r.forwardRef)(({className:e="",variant:r="pink",size:i="md",children:n,href:l,...o},c)=>{let d=`inline-flex items-center justify-center font-ui font-semibold uppercase tracking-wider rounded transition-all duration-300 ${a[r]} ${s[i]} ${e}`;return l?(0,t.jsx)("a",{href:l,className:d,children:n}):(0,t.jsx)("button",{ref:c,className:d,...o,children:n})});i.displayName="Button",e.s(["Button",0,i])},77119,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(22016),i=e.i(3374),n=e.i(58234),l=e.i(28540),o=e.i(59544),c=e.i(93733);e.i(3813);var d=e.i(25544),x=e.i(29493),h=e.i(15558),m=e.i(63427);e.i(7259);var u=e.i(66811);e.i(79086);var g=e.i(33712),p=e.i(38152),b=e.i(92921);let y=["Upload","Metadata","Configure"];function j(){let e=(0,a.useRouter)(),{save:j}=(0,u.useCharacterLibrary)(),[f,v]=(0,r.useState)(1),[N,k]=(0,r.useState)(null),[C,w]=(0,r.useState)(null),[S,B]=(0,r.useState)(null),[M,$]=(0,r.useState)(""),[F,R]=(0,r.useState)(""),[I,L]=(0,r.useState)(""),[O,D]=(0,r.useState)(""),[z,P]=(0,r.useState)(""),[T,A]=(0,r.useState)((0,g.createDefaultConfig)()),[W,U]=(0,r.useState)(!1),[H,E]=(0,r.useState)(null),K=(0,r.useMemo)(()=>{if(!C)return[];try{return(0,p.parseCharacterRom)(C,T)}catch{return[]}},[C,T]),_=(0,r.useMemo)(()=>N?.size?(0,b.calculateCharacterCount)(N.size,T):0,[N?.size,T]),V=(0,r.useMemo)(()=>Math.ceil(T.width/8)*T.height,[T.width,T.height]),Z=N&&C,q=M.trim().length>0,G=Z&&q&&K.length>0,J=(0,r.useCallback)((e,t)=>{k(e),w(t),B(null),$(e.name.replace(/\.[^/.]+$/,""))},[]),Q=(0,r.useCallback)(()=>{f<3&&v(f+1)},[f]),X=(0,r.useCallback)(()=>{f>1&&v(f-1)},[f]),Y=(0,r.useCallback)(e=>{let t=parseInt(e.target.value,10);!isNaN(t)&&t>=1&&t<=16&&A(e=>({...e,width:t}))},[]),ee=(0,r.useCallback)(e=>{let t=parseInt(e.target.value,10);!isNaN(t)&&t>=1&&t<=16&&A(e=>({...e,height:t}))},[]),et=(0,r.useCallback)(e=>{A(t=>({...t,padding:e}))},[]),er=(0,r.useCallback)(e=>{A(t=>({...t,bitDirection:e}))},[]),ea=(0,r.useCallback)((e,t)=>{A(r=>({...r,width:e,height:t}))},[]),es=(0,r.useCallback)(async(t=!1)=>{if(!C||!M.trim())return void E("Please provide a name for the character set");try{U(!0),E(null);let r=Date.now(),a=(0,g.generateId)(),s={metadata:{id:a,name:M.trim(),description:F.trim(),source:z.trim()||"yourself",maker:I.trim(),system:O.trim(),createdAt:r,updatedAt:r,isBuiltIn:!1},config:T,characters:K};await j(s),t?e.push(`/tools/character-rom-editor/edit?id=${a}`):e.push("/tools/character-rom-editor")}catch(e){E(e instanceof Error?e.message:"Failed to save character set")}finally{U(!1)}},[C,M,F,z,I,O,T,K,j,e]);return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col safe-top",children:[(0,t.jsx)(i.Header,{}),(0,t.jsx)("main",{className:"flex-1 bg-retro-dark pt-24 pb-12",children:(0,t.jsxs)(l.Container,{size:"default",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)(s.default,{href:"/tools/character-rom-editor",className:"text-xs text-gray-500 hover:text-retro-cyan transition-colors mb-2 inline-flex items-center gap-1",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Library"]}),(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-display",children:(0,t.jsx)(c.NeonText,{color:"cyan",children:"Import Character ROM"})})]}),(0,t.jsx)(m.ImportStepIndicator,{currentStep:f,totalSteps:3,labels:y}),(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[1===f&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-200 mb-2",children:"Upload ROM File"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Select a binary ROM file containing character data"})]}),(0,t.jsx)(d.ImportDropZone,{onFileSelect:J,selectedFile:N,loading:!1,error:S}),N&&(0,t.jsxs)("div",{className:"text-center text-sm text-gray-400",children:[(0,t.jsx)("span",{className:"text-retro-cyan",children:N.name}),(0,t.jsx)("span",{className:"mx-2",children:"-"}),(0,t.jsx)("span",{children:(0,b.formatFileSize)(N.size)})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4",children:(0,t.jsx)(o.Button,{onClick:Q,disabled:!Z,variant:"cyan",children:"Next"})})]}),2===f&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-200 mb-2",children:"Character Set Details"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Add information about this character set"})]}),(0,t.jsxs)("div",{className:"card-retro p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-1.5",children:["Name ",(0,t.jsx)("span",{className:"text-retro-pink",children:"*"})]}),(0,t.jsx)("input",{type:"text",id:"name",value:M,onChange:e=>$(e.target.value),placeholder:"My Character Set",className:"w-full px-4 py-2 bg-retro-navy/50 border border-retro-grid/50 rounded-lg text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:border-retro-cyan/50"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Description"}),(0,t.jsx)("textarea",{id:"description",value:F,onChange:e=>R(e.target.value),placeholder:"Optional description...",rows:2,className:"w-full px-4 py-2 bg-retro-navy/50 border border-retro-grid/50 rounded-lg text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:border-retro-cyan/50 resize-none"})]}),(0,t.jsx)(h.MakerSystemSelect,{maker:I,system:O,onMakerChange:L,onSystemChange:D}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"source",className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Source"}),(0,t.jsx)("input",{type:"text",id:"source",value:z,onChange:e=>P(e.target.value),placeholder:"Where did this ROM come from?",className:"w-full px-4 py-2 bg-retro-navy/50 border border-retro-grid/50 rounded-lg text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:border-retro-cyan/50"})]})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,t.jsx)(o.Button,{onClick:X,variant:"ghost",children:"Back"}),(0,t.jsx)(o.Button,{onClick:Q,disabled:!q,variant:"cyan",children:"Next"})]})]}),3===f&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-200 mb-2",children:"Configure Binary Format"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Adjust settings until the preview looks correct"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"card-retro p-4 space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Character Dimensions"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"width",className:"block text-xs text-gray-500 mb-1",children:"Width (pixels)"}),(0,t.jsx)("input",{type:"number",id:"width",min:1,max:16,value:T.width,onChange:Y,className:"w-full px-3 py-2 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"height",className:"block text-xs text-gray-500 mb-1",children:"Height (pixels)"}),(0,t.jsx)("input",{type:"number",id:"height",min:1,max:16,value:T.height,onChange:ee,className:"w-full px-3 py-2 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50"})]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:[{label:"8x8",width:8,height:8},{label:"8x16",width:8,height:16},{label:"5x7",width:5,height:7},{label:"5x8",width:5,height:8},{label:"6x8",width:6,height:8}].map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>ea(e.width,e.height),className:`
                              px-2 py-1 text-xs rounded border transition-colors
                              ${T.width===e.width&&T.height===e.height?"border-retro-pink bg-retro-pink/10 text-retro-pink":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
                            `,children:e.label},e.label))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Bit Padding"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>et("right"),className:`
                            flex-1 px-3 py-1.5 text-xs rounded border transition-colors
                            ${"right"===T.padding?"border-retro-cyan bg-retro-cyan/10 text-retro-cyan":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
                          `,children:"Right"}),(0,t.jsx)("button",{type:"button",onClick:()=>et("left"),className:`
                            flex-1 px-3 py-1.5 text-xs rounded border transition-colors
                            ${"left"===T.padding?"border-retro-cyan bg-retro-cyan/10 text-retro-cyan":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
                          `,children:"Left"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Bit Direction"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>er("ltr"),className:`
                            flex-1 px-3 py-1.5 text-xs rounded border transition-colors
                            ${"ltr"===T.bitDirection?"border-retro-cyan bg-retro-cyan/10 text-retro-cyan":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
                          `,children:"Left to Right"}),(0,t.jsx)("button",{type:"button",onClick:()=>er("rtl"),className:`
                            flex-1 px-3 py-1.5 text-xs rounded border transition-colors
                            ${"rtl"===T.bitDirection?"border-retro-cyan bg-retro-cyan/10 text-retro-cyan":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
                          `,children:"Right to Left"})]})]}),N&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 pt-2 border-t border-retro-grid/30",children:[V," bytes/char = ",_," characters"]})]}),(0,t.jsxs)("div",{className:"card-retro p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Preview"}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[T.width,"x",T.height]})]}),K.length>0?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"bg-black/50 rounded-lg p-3 overflow-auto max-h-[280px]",children:(0,t.jsx)(x.CharacterPreview,{characters:K,config:T,maxCharacters:256,maxWidth:280,maxHeight:280})}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-3",children:[K.length," character",1!==K.length?"s":""," detected"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"If scrambled, try adjusting dimensions or bit settings."})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,t.jsx)("svg",{className:"w-10 h-10 text-gray-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"No characters detected"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Try adjusting the dimensions"})]})]})]}),H&&(0,t.jsx)("div",{className:"text-sm text-red-400 text-center",children:H}),(0,t.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,t.jsx)(o.Button,{onClick:X,variant:"ghost",children:"Back"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(o.Button,{onClick:()=>es(!1),disabled:!G||W,variant:"cyan",children:W?"Saving...":"Save to Library"}),(0,t.jsx)(o.Button,{onClick:()=>es(!0),disabled:!G||W,variant:"pink",children:W?"Saving...":"Save & Edit"})]})]})]})]})]})}),(0,t.jsx)(n.Footer,{})]})}e.s(["ImportView",()=>j])}]);