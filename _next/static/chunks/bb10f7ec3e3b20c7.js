(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},72547,79724,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(22016);function n(e,t=!0){let a=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!t)return;let r=t=>{a.current&&!a.current.contains(t.target)&&e()},n=t=>{"Escape"===t.key&&e()};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),document.addEventListener("keydown",n),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r),document.removeEventListener("keydown",n)}},[e,t]),a}function s({items:e,trigger:s,align:l="right",className:i="",label:o="More options"}){let[c,d]=(0,r.useState)(!1),u=n((0,r.useCallback)(()=>{d(!1)},[]),c),h=e=>{e.disabled||(e.onClick?.(),d(!1))};return 0===e.length?null:(0,t.jsxs)("div",{ref:u,className:`relative ${i}`,children:[(0,t.jsx)("button",{onClick:()=>{d(!c)},className:"touch-target flex items-center justify-center p-2 text-gray-400 hover:text-retro-cyan transition-colors rounded-md hover:bg-retro-purple/30","aria-label":o,"aria-expanded":c,"aria-haspopup":"menu",children:s||(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),c&&(0,t.jsx)("div",{className:`absolute top-full mt-2 z-50 min-w-[180px] bg-retro-navy/95 backdrop-blur-md border border-retro-grid/50 rounded-lg py-1 shadow-xl shadow-black/50 ${"right"===l?"right-0":"left-0"}`,role:"menu","aria-orientation":"vertical",children:e.map(e=>{let r=`
              w-full flex items-center gap-3 px-4 py-3 text-sm text-left
              transition-colors touch-target
              ${e.disabled?"text-gray-500 cursor-not-allowed":"danger"===e.variant?"text-red-400 hover:bg-red-500/20 hover:text-red-300":"text-gray-200 hover:bg-retro-purple/40 hover:text-retro-cyan"}
            `;return e.href&&!e.disabled?(0,t.jsxs)(a.default,{href:e.href,className:r,role:"menuitem",onClick:()=>d(!1),children:[e.icon&&(0,t.jsx)("span",{className:"w-5 h-5 flex-shrink-0",children:e.icon}),(0,t.jsx)("span",{children:e.label})]},e.id):(0,t.jsxs)("button",{className:r,role:"menuitem",disabled:e.disabled,onClick:()=>h(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),h(e))},children:[e.icon&&(0,t.jsx)("span",{className:"w-5 h-5 flex-shrink-0",children:e.icon}),(0,t.jsx)("span",{children:e.label})]},e.id)})})]})}e.s(["useOutsideClick",()=>n],79724),e.s(["OverflowMenu",()=>s],72547)},16015,(e,t,r)=>{},98547,(e,t,r)=>{var a=e.i(47167);e.r(16015);var n=e.r(71645),s=n&&"object"==typeof n&&"default"in n?n:{default:n},l=void 0!==a.default&&a.default.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,r=t.name,a=void 0===r?"stylesheet":r,n=t.optimizeForSpeed,s=void 0===n?l:n;c(i(a),"`name` must be a string"),this._name=a,this._deletedRulePlaceholder="#"+a+"-deleted-rule____{}",c("boolean"==typeof s,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=s,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(l||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){if(c(i(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return l||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var a=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,a))}return this._rulesCount++},r.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var r="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(a){l||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var a=this._tags[e];c(a,"old rule at index `"+e+"` not found"),a.textContent=t}return e},r.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},r.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},r.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},r.makeStyleTag=function(e,t,r){t&&c(i(t),"makeStyleTag accepts only strings as second parameter");var a=document.createElement("style");this._nonce&&a.setAttribute("nonce",this._nonce),a.type="text/css",a.setAttribute("data-"+e,""),t&&a.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return r?n.insertBefore(a,r):n.appendChild(a),a},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},u={};function h(e,t){if(!t)return"jsx-"+e;var r=String(t),a=e+r;return u[a]||(u[a]="jsx-"+d(e+"-"+r)),u[a]}function x(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var r=e+t;return u[r]||(u[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[r]}var m=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,a=void 0===r?null:r,n=t.optimizeForSpeed,s=void 0!==n&&n;this._sheet=a||new o({name:"styled-jsx",optimizeForSpeed:s}),this._sheet.inject(),a&&"boolean"==typeof s&&(this._sheet.setOptimizeForSpeed(s),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),a=r.styleId,n=r.rules;if(a in this._instancesCounts){this._instancesCounts[a]+=1;return}var s=n.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[a]=s,this._instancesCounts[a]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var a=this._fromServer&&this._fromServer[r];a?(a.parentNode.removeChild(a),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],a=e[1];return s.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:a}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,a=e.id;if(r){var n=h(a,r);return{styleId:n,rules:Array.isArray(t)?t.map(function(e){return x(n,e)}):[x(n,t)]}}return{styleId:h(a),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),f=n.createContext(null);function p(){return new m}function g(){return n.useContext(f)}f.displayName="StyleSheetContext";var b=s.default.useInsertionEffect||s.default.useLayoutEffect,y="undefined"!=typeof window?p():void 0;function v(e){var t=y||g();return t&&("undefined"==typeof window?t.add(e):b(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}v.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},r.StyleRegistry=function(e){var t=e.registry,r=e.children,a=n.useContext(f),l=n.useState(function(){return a||t||p()})[0];return s.default.createElement(f.Provider,{value:l},r)},r.createStyleRegistry=p,r.style=v,r.useStyleRegistry=g},37902,(e,t,r)=>{t.exports=e.r(98547).style},89043,49738,7506,32267,29493,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function a({pixels:e,scale:a=1,showGrid:n=!1,gridColor:s="#333333",gridThickness:l=1,foregroundColor:i="#ffffff",backgroundColor:o="#000000",onPixelClick:c,onPixelDrag:d,onDragEnd:u,onPixelHover:h,onPixelLeave:x,className:m="",interactive:f=!0,mixedPixels:p,mixedColor:g="#666666"}){let b=(0,r.useRef)(null),[y,v]=(0,r.useState)(!1),j=(0,r.useRef)(null),X=e.length,w=e[0]?.length||0,C=n?l:0,k=w*a+(n?(w+1)*l:0),N=X*a+(n?(X+1)*l:0);(0,r.useEffect)(()=>{let t=b.current;if(!t)return;let r=t.getContext("2d");if(r){r.fillStyle=n?s:o,r.fillRect(0,0,k,N);for(let t=0;t<X;t++)for(let s=0;s<w;s++){let c=n?s*(a+l)+l:s*a,d=n?t*(a+l)+l:t*a,u=`${t},${s}`,h=p?.has(u),x=e[t]?.[s]||!1;if(h){let e=Math.floor(a/2);r.fillStyle=i,r.fillRect(c,d,e,e),r.fillRect(c+e,d+e,a-e,a-e),r.fillStyle=o,r.fillRect(c+e,d,a-e,e),r.fillRect(c,d+e,e,a-e)}else r.fillStyle=x?i:o,r.fillRect(c,d,a,a)}}},[e,a,n,s,l,i,o,k,N,w,X,p,g]);let S=(0,r.useCallback)(e=>{let t,r,s=b.current;if(!s)return null;let i=s.getBoundingClientRect();if("touches"in e){if(0===e.touches.length)return null;t=e.touches[0].clientX,r=e.touches[0].clientY}else t=e.clientX,r=e.clientY;let o=t-i.left,c=r-i.top,d=s.width/i.width,u=s.height/i.height,h=a+(n?l:0),x=Math.floor((o*d-C)/h),m=Math.floor((c*u-C)/h);return m>=0&&m<X&&x>=0&&x<w?{row:m,col:x}:null},[a,n,l,C,X,w]),M=(0,r.useCallback)(e=>{if(!f)return;2===e.button&&e.preventDefault();let t=S(e);t&&c&&(c(t.row,t.col,2===e.button),j.current=t,v(!0))},[f,S,c]),L=(0,r.useCallback)(e=>{f&&e.preventDefault()},[f]),E=(0,r.useCallback)(e=>{if(!f)return;let t=S(e);t&&h&&h(t.row,t.col),y&&d&&t&&(!j.current||j.current.row!==t.row||j.current.col!==t.col)&&(d(t.row,t.col),j.current=t)},[f,y,S,d,h]),R=(0,r.useCallback)(()=>{y&&(v(!1),j.current=null,u?.())},[y,u]),D=(0,r.useCallback)(()=>{y&&(v(!1),j.current=null,u?.()),x?.()},[y,u,x]),A=(0,r.useCallback)(e=>{if(!f)return;e.preventDefault();let t=S(e);t&&c&&(c(t.row,t.col),j.current=t,v(!0))},[f,S,c]),I=(0,r.useCallback)(e=>{if(!f||!y||!d)return;e.preventDefault();let t=S(e);t&&(!j.current||j.current.row!==t.row||j.current.col!==t.col)&&(d(t.row,t.col),j.current=t)},[f,y,S,d]),B=(0,r.useCallback)(()=>{y&&(v(!1),j.current=null,u?.())},[y,u]);return(0,t.jsx)("canvas",{ref:b,width:k,height:N,className:`${f?"cursor-crosshair":""} ${m}`,style:{imageRendering:"pixelated",touchAction:"none"},onMouseDown:M,onMouseMove:E,onMouseUp:R,onMouseLeave:D,onContextMenu:L,onTouchStart:A,onTouchMove:I,onTouchEnd:B})}function n({character:e,mode:n="small",scale:s=20,smallScale:l=2,selected:i=!1,batchSelected:o=!1,onClick:c,onPixelClick:d,onPixelDrag:u,onDragEnd:h,onPixelHover:x,onPixelLeave:m,foregroundColor:f="#ffffff",backgroundColor:p="#000000",gridColor:g="#333333",gridThickness:b=1,interactive:y=!0,className:v="",mixedPixels:j,index:X,showIndex:w=!1}){let C="large"===n,k=C?s:l,N=["relative inline-block",!C&&y?"cursor-pointer":"",!C&&y?"hover:opacity-80 transition-opacity":"",(0,r.useMemo)(()=>i?"ring-2 ring-retro-cyan ring-offset-2 ring-offset-retro-dark":o?"ring-2 ring-retro-pink/50 ring-offset-1 ring-offset-retro-dark":"",[i,o]),v].filter(Boolean).join(" ");return(0,t.jsxs)("div",{className:N,onClick:e=>{c&&!C&&(e.stopPropagation(),c())},onKeyDown:e=>{c&&!C&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c())},role:!C&&y?"button":void 0,tabIndex:!C&&y?0:void 0,"aria-pressed":i||o,"aria-label":void 0!==X?`Character ${X}`:"Character",children:[(0,t.jsx)(a,{pixels:e.pixels,scale:k,showGrid:C,gridColor:g,gridThickness:C?b:0,foregroundColor:f,backgroundColor:p,onPixelClick:C?d:void 0,onPixelDrag:C?u:void 0,onDragEnd:C?h:void 0,onPixelHover:C?x:void 0,onPixelLeave:C?m:void 0,interactive:C&&y,mixedPixels:j}),w&&void 0!==X&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 bg-retro-navy/90 text-[8px] text-gray-400 px-1 rounded font-mono",children:X})]})}function s({width:e,height:r,mode:a="small",scale:n=20,smallScale:s=2,onClick:l,className:i=""}){let o="large"===a,c=o?n:s;return(0,t.jsx)("div",{className:`relative inline-flex items-center justify-center bg-retro-navy/50 border border-dashed border-retro-grid/50 cursor-pointer hover:border-retro-cyan/50 transition-colors ${i}`,style:{width:e*c+(o?(e+1)*1:0),height:r*c+(o?(r+1)*1:0)},onClick:l,role:"button",tabIndex:0,onKeyDown:e=>{l&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),l())},"aria-label":"Add new character",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}function l(e){let t=(0,r.useRef)(null),[a,n]=(0,r.useState)({width:0,height:0}),s=(0,r.useCallback)(t=>{for(let r of t){let{width:t,height:a}=r.contentRect,s={width:t,height:a};n(s),e?.(s)}},[e]);return(0,r.useEffect)(()=>{let e=t.current;if(!e)return;let r=new ResizeObserver(s);r.observe(e);let a=e.getBoundingClientRect();return n({width:a.width,height:a.height}),()=>{r.disconnect()}},[s]),{ref:t,size:a}}function i({characters:e,config:r,maxCharacters:a=16,foregroundColor:s="#ffffff",backgroundColor:l="#000000",smallScale:i=1,className:o=""}){let c=e.slice(0,a),d=e.length-a,u=Math.ceil(Math.sqrt(a)),h=r.width*i;return(0,t.jsxs)("div",{className:`relative ${o}`,children:[(0,t.jsx)("div",{className:"grid gap-0.5",style:{gridTemplateColumns:`repeat(${u}, ${h}px)`},children:c.map((e,r)=>(0,t.jsx)(n,{character:e,mode:"small",smallScale:i,foregroundColor:s,backgroundColor:l,interactive:!1},r))}),d>0&&(0,t.jsxs)("div",{className:"absolute bottom-0 right-0 bg-retro-navy/90 text-[10px] text-gray-400 px-1 rounded",children:["+",d]})]})}function o({characters:e,config:a,selectedIndex:i,batchSelection:o,onSelect:c,showAddButton:d=!1,onAdd:u,foregroundColor:h="#ffffff",backgroundColor:x="#000000",showIndices:m=!1,minColumns:f=8,maxColumns:p=32,gap:g=4,className:b="",smallScale:y=2,onContextMenu:v}){let j=(0,r.useRef)(null),{size:X}=l(),w=a.width*y,C=(0,r.useMemo)(()=>{if(!X.width)return f;let e=w+g+8;return Math.max(f,Math.min(p,Math.floor((X.width-g)/e)))},[X.width,w,g,f,p]);return(0,t.jsx)("div",{ref:j,className:`overflow-auto p-2 ${b}`,role:"listbox","aria-label":"Character selection grid",children:(0,t.jsxs)("div",{className:"grid",style:{gridTemplateColumns:`repeat(${C}, auto)`,gap:`${g}px`},children:[e.map((e,r)=>(0,t.jsx)("div",{onClick:e=>c?.(r,e.shiftKey,e.metaKey||e.ctrlKey),onContextMenu:e=>{v&&(e.preventDefault(),i===r||o?.has(r)||c?.(r,!1,!1),v(e.clientX,e.clientY,r))},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c?.(r,e.shiftKey,e.metaKey||e.ctrlKey))},role:"option","aria-selected":i===r||o?.has(r),tabIndex:0,className:"focus:outline-none focus-visible:ring-1 focus-visible:ring-retro-cyan rounded",children:(0,t.jsx)(n,{character:e,mode:"small",smallScale:y,selected:i===r,batchSelected:o?.has(r)&&i!==r,foregroundColor:h,backgroundColor:x,interactive:!1,index:r,showIndex:m})},r)),d&&(0,t.jsx)(s,{width:a.width,height:a.height,mode:"small",smallScale:y,onClick:u})]})})}function c({characters:e,config:n,maxCharacters:s=32,maxWidth:l=128,maxHeight:i=64,scale:o=1,foregroundColor:c="#ffffff",backgroundColor:d="#000000",className:u="",forceColumns:h}){let{displayChars:x,columns:m,rows:f}=(0,r.useMemo)(()=>{let t=n.width*o,r=n.height*o;if(h){let t=Math.min(s,e.length),r=Math.ceil(t/h),a=Math.min(h*r,t);return{displayChars:e.slice(0,a),columns:h,rows:r}}let a=Math.floor(l/t),c=Math.floor(i/r),d=[64,32,16,8,4].find(e=>e<=a)||Math.min(a,4);d=Math.max(d,1);let u=Math.min(s,e.length),x=Math.ceil(u/d);if(x>c){let t=Math.ceil(u/(d=a)),r=Math.min(d*Math.min(t,c),u);return{displayChars:e.slice(0,r),columns:d,rows:Math.min(t,c)}}return{displayChars:e.slice(0,u),columns:d,rows:x}},[e,n,s,l,i,h,o]),p=(0,r.useMemo)(()=>{let{width:e,height:t}=n,r=m*e,a=Array.from({length:f*t},()=>Array(r).fill(!1));return x.forEach((r,n)=>{let s=n%m*e,l=Math.floor(n/m)*t;for(let n=0;n<t;n++)for(let t=0;t<e;t++)r.pixels[n]?.[t]&&(a[l+n][s+t]=!0)}),a},[x,n,m,f]),g=e.length-x.length;return(0,t.jsxs)("div",{className:`relative inline-block ${u}`,children:[(0,t.jsx)(a,{pixels:p,scale:o,showGrid:!1,foregroundColor:c,backgroundColor:d,interactive:!1}),g>0&&(0,t.jsxs)("div",{className:"absolute bottom-0 right-0 bg-retro-dark/90 text-[9px] text-gray-400 px-1 rounded-tl font-mono",children:["+",g]})]})}e.s(["PixelGrid",()=>a],89043),e.s(["CharacterDisplay",()=>n,"EmptyCharacterDisplay",()=>s],49738),e.i(37902),e.s(["useResizeObserver",()=>l],7506),e.s(["CharacterPreviewGrid",()=>i,"InteractiveCharacterGrid",()=>o],32267),e.s(["CharacterPreview",()=>c],29493)},38794,33712,38152,20371,82906,92921,16205,84227,40979,44824,79086,4941,93949,25544,73581,60441,59160,42187,95879,87355,45835,3573,43237,99401,87188,16244,46628,38910,56859,23079,45497,66811,83621,54750,69771,80184,7259,78071,35052,55361,48026,64721,53444,1164,e=>{"use strict";let t;var r,a,n,s,l,i,o,c,d,u,h,x,m,f,p,g,b,y,v,j=e.i(43476),X=e.i(71645),w=e.i(29493),C=e.i(72547);function k(e){return Math.ceil(e/8)}function N(e){return k(e.width)*e.height}function S(e,t){let r=[];for(let a=0;a<t;a++)r.push(Array(e).fill(!1));return{pixels:r}}function M(e){return{pixels:e.pixels.map(e=>[...e])}}function L(){return{width:8,height:8,padding:"right",bitDirection:"ltr"}}function E(){return crypto.randomUUID()}function R(e,t){let{width:r,height:a,padding:n,bitDirection:s}=t,l=k(r),i=new Uint8Array(a*l);for(let t=0;t<a;t++){let a=8*l,o=a-r,c=Array(a).fill(!1);if("left"===n)for(let a=0;a<r;a++)c[o+a]=e.pixels[t]?.[a]||!1;else for(let a=0;a<r;a++)c[a]=e.pixels[t]?.[a]||!1;for(let e=0;e<l;e++){let r=0;for(let t=0;t<8;t++)c[8*e+t]&&(r|=1<<("ltr"===s?7-t:t));i[t*l+e]=r}}return i}function D(e,t){let r=e instanceof Uint8Array?e:new Uint8Array(e),a=N(t),n=Math.floor(r.length/a),s=[];for(let e=0;e<n;e++){let n=r.slice(e*a,(e+1)*a);s.push(function(e,t){let{width:r,height:a,padding:n,bitDirection:s}=t,l=k(r),i=[];for(let t=0;t<a;t++){let a=[],o=t*l,c=[];for(let t=0;t<l;t++){let r=e[o+t]||0;for(let e=0;e<8;e++){let t=(r&1<<("ltr"===s?7-e:e))!=0;c.push(t)}}let d=8*l,u=d-r;if("left"===n)for(let e=u;e<d;e++)a.push(c[e]);else for(let e=0;e<r;e++)a.push(c[e]);i.push(a)}return{pixels:i}}(n,t))}return s}function A(e,t){let r=N(t),a=new Uint8Array(e.length*r);for(let n=0;n<e.length;n++){let s=R(e[n],t);a.set(s,n*r)}return a}function I(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function B(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function T(e){let t=A(e.characters,e.config);return{metadata:e.metadata,config:e.config,binaryData:I(t)}}function z(e){let t=D(B(e.binaryData),e.config);return{metadata:e.metadata,config:e.config,characters:t}}function $(e,t,r){return new Blob([A(e,{...t,...r}).buffer],{type:"application/octet-stream"})}function P(e,t){let r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}e.s(["bytesPerCharacter",()=>N,"bytesPerLine",()=>k,"cloneCharacter",()=>M,"createDefaultConfig",()=>L,"createEmptyCharacter",()=>S,"generateId",()=>E],33712),e.s(["base64ToBinary",()=>B,"binaryToBase64",()=>I,"characterToBytes",()=>R,"createDownloadBlob",()=>$,"deserializeCharacterSet",()=>z,"downloadBlob",()=>P,"parseCharacterRom",()=>D,"serializeCharacterRom",()=>A,"serializeCharacterSet",()=>T],38152);let F="character-sets",O="retrostack-character-sets",W=new class{db=null;initialized=!1;initPromise=null;async initialize(){if(!this.initialized){if(this.initPromise)return this.initPromise;this.initPromise=this._initialize(),await this.initPromise,this.initialized=!0}}async _initialize(){return!function(){try{return!!window.indexedDB}catch{return!1}}()?void console.log("IndexedDB not available, using localStorage fallback"):new Promise(e=>{let t=indexedDB.open("retrostack-character-editor",3);t.onerror=()=>{console.error("Failed to open IndexedDB, using localStorage fallback"),e()},t.onsuccess=()=>{this.db=t.result,e()},t.onupgradeneeded=e=>{let t=e.target.result,r=e.target.transaction,a=e.oldVersion;if(t.objectStoreNames.contains(F)){if(a<2){let e=r.objectStore(F);e.indexNames.contains("by-manufacturer")||e.createIndex("by-manufacturer","metadata.manufacturer",{unique:!1}),e.indexNames.contains("by-system")||e.createIndex("by-system","metadata.system",{unique:!1}),e.openCursor().onsuccess=e=>{let t=e.target.result;if(t){let e=t.value;e.metadata&&void 0===e.metadata.manufacturer&&(e.metadata.manufacturer=""),e.metadata&&void 0===e.metadata.system&&(e.metadata.system=""),t.update(e),t.continue()}}}a<3&&(r.objectStore(F).openCursor().onsuccess=e=>{let t=e.target.result;if(t){let e=t.value;e.metadata&&void 0===e.metadata.isPinned&&(e.metadata.isPinned=!1),t.update(e),t.continue()}})}else{let e=t.createObjectStore(F,{keyPath:"metadata.id"});e.createIndex("by-name","metadata.name",{unique:!1}),e.createIndex("by-updated","metadata.updatedAt",{unique:!1}),e.createIndex("by-size","sizeKey",{unique:!1}),e.createIndex("by-manufacturer","metadata.manufacturer",{unique:!1}),e.createIndex("by-system","metadata.system",{unique:!1})}}})}useFallback(){return null===this.db}fallbackGetAll(){try{let e=localStorage.getItem(O);if(!e)return[];return JSON.parse(e).map(e=>({...e,metadata:{...e.metadata,manufacturer:e.metadata.manufacturer??"",system:e.metadata.system??"",isPinned:e.metadata.isPinned??!1}}))}catch{return[]}}fallbackSaveAll(e){try{localStorage.setItem(O,JSON.stringify(e))}catch(e){throw console.error("Failed to save to localStorage:",e),Error("Storage quota exceeded")}}async getAll(){return(await this.initialize(),this.useFallback())?this.fallbackGetAll():new Promise((e,t)=>{let r=this.db.transaction([F],"readonly").objectStore(F).getAll();r.onsuccess=()=>{let t=r.result;t.sort((e,t)=>{let r=+!!e.metadata.isPinned,a=+!!t.metadata.isPinned;return r!==a?a-r:t.metadata.updatedAt-e.metadata.updatedAt}),e(t)},r.onerror=()=>{t(Error("Failed to get character sets"))}})}async getById(e){return(await this.initialize(),this.useFallback())?this.fallbackGetAll().find(t=>t.metadata.id===e)||null:new Promise((t,r)=>{let a=this.db.transaction([F],"readonly").objectStore(F).get(e);a.onsuccess=()=>{t(a.result||null)},a.onerror=()=>{r(Error("Failed to get character set"))}})}async save(e){await this.initialize();let t={...e,sizeKey:`${e.config.width}x${e.config.height}`};if(this.useFallback()){let t=this.fallbackGetAll(),r=t.findIndex(t=>t.metadata.id===e.metadata.id);return r>=0?t[r]=e:t.push(e),this.fallbackSaveAll(t),e.metadata.id}return new Promise((r,a)=>{let n=this.db.transaction([F],"readwrite").objectStore(F).put(t);n.onsuccess=()=>{r(e.metadata.id)},n.onerror=()=>{a(Error("Failed to save character set"))}})}async saveAs(e,t){let r=E(),a=Date.now(),n={...e,metadata:{...e.metadata,id:r,name:t,createdAt:a,updatedAt:a,isBuiltIn:!1,source:"yourself"}};return await this.save(n),r}async togglePinned(e){await this.initialize();let t=await this.getById(e);if(!t)throw Error("Character set not found");let r=!t.metadata.isPinned,a={...t,metadata:{...t.metadata,isPinned:r}};return await this.save(a),r}async delete(e){if(await this.initialize(),this.useFallback()){let t=this.fallbackGetAll().filter(t=>t.metadata.id!==e);this.fallbackSaveAll(t);return}return new Promise((t,r)=>{let a=this.db.transaction([F],"readwrite").objectStore(F).delete(e);a.onsuccess=()=>{t()},a.onerror=()=>{r(Error("Failed to delete character set"))}})}async search(e){let t=await this.getAll(),r=e.toLowerCase();return t.filter(e=>e.metadata.name.toLowerCase().includes(r)||e.metadata.description.toLowerCase().includes(r)||e.metadata.source.toLowerCase().includes(r)||e.metadata.manufacturer.toLowerCase().includes(r)||e.metadata.system.toLowerCase().includes(r))}async filterBySize(e,t){return(await this.getAll()).filter(r=>(null===e||r.config.width===e)&&(null===t||r.config.height===t))}async filterByManufacturers(e){if(0===e.length)return this.getAll();let t=await this.getAll(),r=e.map(e=>e.toLowerCase());return t.filter(e=>r.includes(e.metadata.manufacturer.toLowerCase()))}async filterBySystems(e){if(0===e.length)return this.getAll();let t=await this.getAll(),r=e.map(e=>e.toLowerCase());return t.filter(e=>r.includes(e.metadata.system.toLowerCase()))}async getAvailableManufacturers(){let e=await this.getAll(),t=new Set;for(let r of e)r.metadata.manufacturer&&t.add(r.metadata.manufacturer);return Array.from(t).sort()}async getAvailableSystems(){let e=await this.getAll(),t=new Set;for(let r of e)r.metadata.system&&t.add(r.metadata.system);return Array.from(t).sort()}async getAvailableSizes(){let e=await this.getAll(),t=new Map;for(let r of e){let e=`${r.config.width}x${r.config.height}`;t.has(e)||t.set(e,{width:r.config.width,height:r.config.height})}return Array.from(t.values()).sort((e,t)=>e.width!==t.width?e.width-t.width:e.height-t.height)}async nameExists(e,t){return(await this.getAll()).some(r=>r.metadata.name.toLowerCase()===e.toLowerCase()&&r.metadata.id!==t)}async count(){return(await this.getAll()).length}async isEmpty(){return 0===(await this.getAll()).length}async clear(){return(await this.initialize(),this.useFallback())?void localStorage.removeItem(O):new Promise((e,t)=>{let r=this.db.transaction([F],"readwrite").objectStore(F).clear();r.onsuccess=()=>{e()},r.onerror=()=>{t(Error("Failed to clear storage"))}})}};function _(e,t){let r=e.pixels.length,a=e.pixels[0]?.length||0,n=[];for(let s=0;s<r;s++){let l=[];for(let n=0;n<a;n++){let i,o;"right"===t?(i=a-1-n,o=s):(i=n,o=r-1-s),i>=0&&i<r&&o>=0&&o<a?l.push(e.pixels[i]?.[o]||!1):l.push(!1)}n.push(l)}return{pixels:n}}function H(e,t,r=!0){let a=e.pixels.length,n=e.pixels[0]?.length||0,s=[];for(let l=0;l<a;l++){let i=[];for(let s=0;s<n;s++){let o=l,c=s;switch(t){case"up":if((o=l+1)>=a&&(o=r?0:a-1,!r)){i.push(!1);continue}break;case"down":if((o=l-1)<0&&(o=r?a-1:0,!r)){i.push(!1);continue}break;case"left":if((c=s+1)>=n&&(c=r?0:n-1,!r)){i.push(!1);continue}break;case"right":if((c=s-1)<0&&(c=r?n-1:0,!r)){i.push(!1);continue}}i.push(e.pixels[o]?.[c]||!1)}s.push(i)}return{pixels:s}}function U(e,t,r,a){let n=e.pixels.length,s=e.pixels[0]?.length||0,l=0,i=0;a.endsWith("l")?l=0:a.endsWith("c")?l=Math.floor((t-s)/2):a.endsWith("r")&&(l=t-s),a.startsWith("t")?i=0:a.startsWith("m")?i=Math.floor((r-n)/2):a.startsWith("b")&&(i=r-n);let o=[];for(let a=0;a<r;a++){let r=[];for(let o=0;o<t;o++){let t=a-i,c=o-l;t>=0&&t<n&&c>=0&&c<s?r.push(e.pixels[t][c]):r.push(!1)}o.push(r)}return{pixels:o}}function K(e){return{pixels:e.pixels.map(e=>e.map(e=>!e))}}function G(e){return{pixels:e.pixels.map(e=>[...e].reverse())}}function V(e){return{pixels:[...e.pixels].reverse().map(e=>[...e])}}function Y(e,t){return S(e,t)}function q(e,t){let r=[];for(let a=0;a<t;a++)r.push(Array(e).fill(!0));return{pixels:r}}function J(e,t,r){return{pixels:e.pixels.map((e,a)=>a===t?e.map((e,t)=>t===r?!e:e):[...e])}}function Z(e,t,r,a){return{pixels:e.pixels.map((e,n)=>n===t?e.map((e,t)=>t===r?a:e):[...e])}}function Q(e,t,r){return e.map((e,a)=>t.has(a)?r(e):e)}function ee(e,t,r,a){let n=Array.from(t).map(t=>e[t]);if(0===n.length)return"same-off";let s=n[0]?.pixels[r]?.[a]||!1;for(let e=1;e<n.length;e++)if((n[e]?.pixels[r]?.[a]||!1)!==s)return"mixed";return s?"same-on":"same-off"}function et(e,t,r,a){let n="same-on"!==ee(e,t,r,a);return e.map((e,s)=>t.has(s)?Z(e,r,a,n):e)}function er(e){let t=e.pixels.length,r=e.pixels[0]?.length||0,a=function(e){let t=e.pixels.length,r=e.pixels[0]?.length||0,a=t,n=-1,s=r,l=-1;for(let i=0;i<t;i++)for(let t=0;t<r;t++)e.pixels[i][t]&&(a=Math.min(a,i),n=Math.max(n,i),s=Math.min(s,t),l=Math.max(l,t));return -1===n?null:{minRow:a,maxRow:n,minCol:s,maxCol:l}}(e);if(!a)return e;let n=a.maxCol-a.minCol+1,s=Math.floor((t-(a.maxRow-a.minRow+1))/2),l=Math.floor((r-n)/2)-a.minCol,i=s-a.minRow;if(0===l&&0===i)return e;let o=[];for(let a=0;a<t;a++){let n=[];for(let s=0;s<r;s++){let o=a-i,c=s-l;o>=0&&o<t&&c>=0&&c<r?n.push(e.pixels[o][c]):n.push(!1)}o.push(n)}return{pixels:o}}function ea(e,t,r,a){return 1===t?e:"nearest"===a?function(e,t,r){let a=e.pixels.length,n=e.pixels[0]?.length||0,s=Math.round(n*t),l=Math.round(a*t),i=[];for(let r=0;r<l;r++){let l=[];for(let i=0;i<s;i++){let s=Math.min(Math.floor(r/t),a-1),o=Math.min(Math.floor(i/t),n-1);l.push(e.pixels[s]?.[o]||!1)}i.push(l)}let o=n-s,c=a-l,d=0,u=0;r.endsWith("l")?d=0:r.endsWith("c")?d=Math.floor(o/2):r.endsWith("r")&&(d=o),r.startsWith("t")?u=0:r.startsWith("m")?u=Math.floor(c/2):r.startsWith("b")&&(u=c);let h=[];for(let e=0;e<a;e++){let t=[];for(let r=0;r<n;r++){let a=e-u,n=r-d;a>=0&&a<l&&n>=0&&n<s?t.push(i[a][n]):t.push(!1)}h.push(t)}return{pixels:h}}(e,t,r):function(e,t,r,a=.5){let n=e.pixels.length,s=e.pixels[0]?.length||0,l=Math.round(s*t),i=Math.round(n*t),o=[];for(let r=0;r<i;r++){let n=[];for(let s=0;s<l;s++){let l=r/t,i=(r+1)/t,o=s/t,c=(s+1)/t,d=function(e,t,r,a,n){let s=e.length,l=e[0]?.length||0,i=0,o=0,c=Math.max(0,Math.floor(t)),d=Math.min(s-1,Math.floor(r)),u=Math.max(0,Math.floor(a)),h=Math.min(l-1,Math.floor(n));for(let s=c;s<=d;s++)for(let l=u;l<=h;l++){let c=Math.max(s,t),d=Math.max(l,a),u=(Math.min(s+1,r)-c)*(Math.min(l+1,n)-d);i+=u,e[s][l]&&(o+=u)}return 0===i?0:o/i}(e.pixels,l,i,o,c);n.push(d>=a)}o.push(n)}let c=s-l,d=n-i,u=0,h=0;r.endsWith("l")?u=0:r.endsWith("c")?u=Math.floor(c/2):r.endsWith("r")&&(u=c),r.startsWith("t")?h=0:r.startsWith("m")?h=Math.floor(d/2):r.startsWith("b")&&(h=d);let x=[];for(let e=0;e<n;e++){let t=[];for(let r=0;r<s;r++){let a=e-h,n=r-u;a>=0&&a<i&&n>=0&&n<l?t.push(o[a][n]):t.push(!1)}x.push(t)}return{pixels:x}}(e,t,r)}e.s(["batchTogglePixel",()=>et,"batchTransform",()=>Q,"centerCharacter",()=>er,"clearCharacter",()=>Y,"fillCharacter",()=>q,"flipHorizontal",()=>G,"flipVertical",()=>V,"getPixelState",()=>ee,"invertCharacter",()=>K,"resizeCharacter",()=>U,"rotateCharacter",()=>_,"scaleCharacter",()=>ea,"setPixel",()=>Z,"shiftCharacter",()=>H,"togglePixel",()=>J],20371);let en=[{id:"classic",name:"White Phosphor",foreground:"#ffffff",background:"#000000",gridColor:"#333333"},{id:"green",name:"Green Phosphor",foreground:"#33ff33",background:"#001100",gridColor:"#004400"},{id:"amber",name:"Amber Phosphor",foreground:"#ffb000",background:"#1a0a00",gridColor:"#4d2e00"},{id:"c64-blue",name:"C64 Blue",foreground:"#6c5eb5",background:"#40318d",gridColor:"#2e2266"},{id:"c64-cyan",name:"C64 Light Blue",foreground:"#70a4b2",background:"#352879",gridColor:"#493f99"},{id:"apple-green",name:"Apple II Green",foreground:"#14f53c",background:"#000000",gridColor:"#0a4d15"},{id:"zx-spectrum",name:"ZX Spectrum",foreground:"#ffffff",background:"#0000d7",gridColor:"#0000aa"},{id:"ibm-cga",name:"IBM CGA Cyan",foreground:"#55ffff",background:"#000000",gridColor:"#005555"},{id:"vt100",name:"VT100",foreground:"#00ff00",background:"#000000",gridColor:"#003300"},{id:"custom",name:"Custom...",foreground:"",background:"",gridColor:""}],es="character-editor-color-preset",el="character-editor-custom-colors";function ei(e){return en.find(t=>t.id===e)}function eo(e){try{localStorage.setItem(es,e)}catch{}}function ec(){try{return localStorage.getItem(es)||"classic"}catch{return"classic"}}function ed(e){try{localStorage.setItem(el,JSON.stringify(e))}catch{}}function eu(){try{let e=localStorage.getItem(el);if(e)return JSON.parse(e)}catch{}return{foreground:"#ffffff",background:"#000000",gridColor:"#333333"}}function eh(){let e=ec();if("custom"===e)return eu();let t=ei(e);return t?{foreground:t.foreground,background:t.background,gridColor:t.gridColor}:{foreground:"#ffffff",background:"#000000",gridColor:"#333333"}}function ex(){let e=[];e.push(["........","........","........","........","........","........","........","........"]),e.push(["...XX...","...XX...","...XX...","...XX...","...XX...","........","...XX...","........"]),e.push([".XX..XX.",".XX..XX.",".XX..XX.","........","........","........","........","........"]),e.push([".XX..XX.","XXXXXXXX",".XX..XX.",".XX..XX.","XXXXXXXX",".XX..XX.","........","........"]),e.push(["...XX...",".XXXXXX.","XX......",".XXXXX..","....XX..","XXXXXX..","...XX...","........"]),e.push(["XX....XX","XX...XX.","....XX..","...XX...","..XX....",".XX...XX","XX....XX","........"]),e.push(["..XXX...",".XX.XX..","..XXX...",".XXX.XX.","XX..XX..","XX..XX..",".XXX.XX.","........"]),e.push(["...XX...","...XX...","..XX....","........","........","........","........","........"]),e.push(["....XX..","...XX...","..XX....","..XX....","..XX....","...XX...","....XX..","........"]),e.push(["..XX....","...XX...","....XX..","....XX..","....XX..","...XX...","..XX....","........"]),e.push(["........","..X..X..","...XX...",".XXXXXX.","...XX...","..X..X..","........","........"]),e.push(["........","...XX...","...XX...",".XXXXXX.","...XX...","...XX...","........","........"]),e.push(["........","........","........","........","........","...XX...","...XX...","..XX...."]),e.push(["........","........","........",".XXXXXX.","........","........","........","........"]),e.push(["........","........","........","........","........","...XX...","...XX...","........"]),e.push(["......XX",".....XX.","....XX..","...XX...","..XX....",".XX.....","XX......","........"]),e.push([".XXXXX..","XX...XX.","XX..XXX.","XX.X.XX.","XXX..XX.","XX...XX.",".XXXXX..","........"]),e.push(["...XX...","..XXX...","...XX...","...XX...","...XX...","...XX...",".XXXXXX.","........"]),e.push([".XXXXX..","XX...XX.",".....XX.","...XXX..","..XX....",".XX.....","XXXXXXX.","........"]),e.push([".XXXXX..","XX...XX.",".....XX.","..XXXX..",".....XX.","XX...XX.",".XXXXX..","........"]),e.push(["....XXX.","...XXXX.","..XX.XX.",".XX..XX.","XXXXXXX.",".....XX.",".....XX.","........"]),e.push(["XXXXXXX.","XX......","XXXXXX..",".....XX.",".....XX.","XX...XX.",".XXXXX..","........"]),e.push(["..XXXX..",".XX.....","XX......","XXXXXX..","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XXXXXXX.",".....XX.","....XX..","...XX...","..XX....","..XX....","..XX....","........"]),e.push([".XXXXX..","XX...XX.","XX...XX.",".XXXXX..","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push([".XXXXX..","XX...XX.","XX...XX.",".XXXXXX.",".....XX.","....XX..",".XXXX...","........"]),e.push(["........","...XX...","...XX...","........","...XX...","...XX...","........","........"]),e.push(["........","...XX...","...XX...","........","...XX...","...XX...","..XX....","........"]),e.push([".....XX.","....XX..","...XX...","..XX....","...XX...","....XX..",".....XX.","........"]),e.push(["........","........",".XXXXXX.","........",".XXXXXX.","........","........","........"]),e.push([".XX.....","..XX....","...XX...","....XX..","...XX...","..XX....",".XX.....","........"]),e.push([".XXXXX..","XX...XX.",".....XX.","...XXX..","...XX...","........","...XX...","........"]),e.push([".XXXXX..","XX...XX.","XX.XXXX.","XX.XXXX.","XX.XXX..","XX......",".XXXXX..","........"]),e.push(["..XXX...",".XX.XX..","XX...XX.","XXXXXXX.","XX...XX.","XX...XX.","XX...XX.","........"]),e.push(["XXXXXX..","XX...XX.","XX...XX.","XXXXXX..","XX...XX.","XX...XX.","XXXXXX..","........"]),e.push([".XXXXX..","XX...XX.","XX......","XX......","XX......","XX...XX.",".XXXXX..","........"]),e.push(["XXXXX...","XX..XX..","XX...XX.","XX...XX.","XX...XX.","XX..XX..","XXXXX...","........"]),e.push(["XXXXXXX.","XX......","XX......","XXXXX...","XX......","XX......","XXXXXXX.","........"]),e.push(["XXXXXXX.","XX......","XX......","XXXXX...","XX......","XX......","XX......","........"]),e.push([".XXXXX..","XX...XX.","XX......","XX..XXX.","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XX...XX.","XX...XX.","XX...XX.","XXXXXXX.","XX...XX.","XX...XX.","XX...XX.","........"]),e.push([".XXXXXX.","...XX...","...XX...","...XX...","...XX...","...XX...",".XXXXXX.","........"]),e.push(["...XXXX.",".....XX.",".....XX.",".....XX.","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XX...XX.","XX..XX..","XX.XX...","XXXX....","XX.XX...","XX..XX..","XX...XX.","........"]),e.push(["XX......","XX......","XX......","XX......","XX......","XX......","XXXXXXX.","........"]),e.push(["XX...XX.","XXX.XXX.","XXXXXXX.","XX.X.XX.","XX...XX.","XX...XX.","XX...XX.","........"]),e.push(["XX...XX.","XXX..XX.","XXXX.XX.","XX.XXXX.","XX..XXX.","XX...XX.","XX...XX.","........"]),e.push([".XXXXX..","XX...XX.","XX...XX.","XX...XX.","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XXXXXX..","XX...XX.","XX...XX.","XXXXXX..","XX......","XX......","XX......","........"]),e.push([".XXXXX..","XX...XX.","XX...XX.","XX...XX.","XX.X.XX.","XX..XX..",".XXX.XX.","........"]),e.push(["XXXXXX..","XX...XX.","XX...XX.","XXXXXX..","XX.XX...","XX..XX..","XX...XX.","........"]),e.push([".XXXXX..","XX...XX.","XX......",".XXXXX..",".....XX.","XX...XX.",".XXXXX..","........"]),e.push(["XXXXXXX.","...XX...","...XX...","...XX...","...XX...","...XX...","...XX...","........"]),e.push(["XX...XX.","XX...XX.","XX...XX.","XX...XX.","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XX...XX.","XX...XX.","XX...XX.","XX...XX.",".XX.XX..","..XXX...","...X....","........"]),e.push(["XX...XX.","XX...XX.","XX...XX.","XX.X.XX.","XXXXXXX.","XXX.XXX.","XX...XX.","........"]),e.push(["XX...XX.",".XX.XX..","..XXX...","...X....","..XXX...",".XX.XX..","XX...XX.","........"]),e.push(["XX...XX.",".XX.XX..","..XXX...","...XX...","...XX...","...XX...","...XX...","........"]),e.push(["XXXXXXX.",".....XX.","....XX..","...XX...","..XX....",".XX.....","XXXXXXX.","........"]),e.push(["..XXXX..","..XX....","..XX....","..XX....","..XX....","..XX....","..XXXX..","........"]),e.push(["XX......",".XX.....","..XX....","...XX...","....XX..",".....XX.","......XX","........"]),e.push(["..XXXX..","....XX..","....XX..","....XX..","....XX..","....XX..","..XXXX..","........"]),e.push(["...X....","..XXX...",".XX.XX..","XX...XX.","........","........","........","........"]),e.push(["........","........","........","........","........","........","XXXXXXXX","........"]);let t=new Uint8Array(8*e.length);for(let r=0;r<e.length;r++){let a=function(e){let t=new Uint8Array(8);for(let r=0;r<8&&r<e.length;r++){let a=0;for(let t=0;t<8;t++){let n=e[r]?.[t]||".";("X"===n||"#"===n||"*"===n)&&(a|=1<<7-t)}t[r]=a}return t}(e[r]);t.set(a,8*r)}return t}e.s(["COLOR_PRESETS",0,en,"getActiveColors",()=>eh,"getCustomColors",()=>eu,"getPresetById",()=>ei,"getSavedPresetId",()=>ec,"saveCustomColors",()=>ed,"saveSelectedPreset",()=>eo],82906);let em=[{system:"C64",manufacturer:"Commodore",characterRom:{width:8,height:8,characterCount:256}},{system:"VIC-20",manufacturer:"Commodore",characterRom:{width:8,height:8,characterCount:256}},{system:"PET",manufacturer:"Commodore",characterRom:{width:8,height:8,characterCount:256}},{system:"C128",manufacturer:"Commodore"},{system:"Plus/4",manufacturer:"Commodore"},{system:"C16",manufacturer:"Commodore"},{system:"Amiga",manufacturer:"Commodore"},{system:"Apple II",manufacturer:"Apple",characterRom:{width:8,height:8,characterCount:256}},{system:"Apple IIe",manufacturer:"Apple"},{system:"Apple IIc",manufacturer:"Apple"},{system:"Apple IIgs",manufacturer:"Apple"},{system:"Apple III",manufacturer:"Apple"},{system:"ZX80",manufacturer:"Sinclair",characterRom:{width:8,height:8,characterCount:64}},{system:"ZX81",manufacturer:"Sinclair",characterRom:{width:8,height:8,characterCount:64}},{system:"ZX Spectrum",manufacturer:"Sinclair",characterRom:{width:8,height:8,characterCount:96}},{system:"QL",manufacturer:"Sinclair"},{system:"Atari 400/800",manufacturer:"Atari",characterRom:{width:8,height:8,characterCount:128}},{system:"Atari ST",manufacturer:"Atari"},{system:"Atari 2600",manufacturer:"Atari"},{system:"Atari 7800",manufacturer:"Atari"},{system:"Atari Lynx",manufacturer:"Atari"},{system:"PC CGA",manufacturer:"IBM",characterRom:{width:8,height:8,characterCount:256}},{system:"PC EGA",manufacturer:"IBM",characterRom:{width:8,height:14,characterCount:256}},{system:"PC VGA",manufacturer:"IBM",characterRom:{width:8,height:16,characterCount:256}},{system:"PC MDA",manufacturer:"IBM"},{system:"PC Hercules",manufacturer:"IBM"},{system:"NES/Famicom",manufacturer:"Nintendo",characterRom:{width:8,height:8,characterCount:512}},{system:"SNES",manufacturer:"Nintendo"},{system:"Game Boy",manufacturer:"Nintendo"},{system:"Game Boy Color",manufacturer:"Nintendo"},{system:"Game Boy Advance",manufacturer:"Nintendo"},{system:"Master System",manufacturer:"Sega"},{system:"Genesis/Mega Drive",manufacturer:"Sega"},{system:"Game Gear",manufacturer:"Sega"},{system:"Saturn",manufacturer:"Sega"},{system:"CPC 464",manufacturer:"Amstrad",characterRom:{width:8,height:8,characterCount:256}},{system:"CPC 6128",manufacturer:"Amstrad",characterRom:{width:8,height:8,characterCount:256}},{system:"CPC 664",manufacturer:"Amstrad"},{system:"PCW",manufacturer:"Amstrad"},{system:"TI-99/4A",manufacturer:"Texas Instruments",characterRom:{width:8,height:8,characterCount:256}},{system:"TRS-80 Model I",manufacturer:"Tandy",characterRom:{width:8,height:8,characterCount:128}},{system:"TRS-80 Model III",manufacturer:"Tandy"},{system:"TRS-80 Color Computer",manufacturer:"Tandy"},{system:"TRS-80 Model 4",manufacturer:"Tandy"},{system:"MSX",manufacturer:"MSX",characterRom:{width:8,height:8,characterCount:256}},{system:"MSX2",manufacturer:"MSX"},{system:"MSX2+",manufacturer:"MSX"},{system:"MSX turbo R",manufacturer:"MSX"},{system:"BBC Micro",manufacturer:"Acorn",characterRom:{width:8,height:8,characterCount:256}},{system:"Electron",manufacturer:"Acorn"},{system:"Archimedes",manufacturer:"Acorn"},{system:"ColecoVision",manufacturer:"Coleco"},{system:"Adam",manufacturer:"Coleco"},{system:"Intellivision",manufacturer:"Mattel"},{system:"PC Engine/TurboGrafx-16",manufacturer:"NEC"},{system:"PC-8801",manufacturer:"NEC"},{system:"PC-9801",manufacturer:"NEC"},{system:"MZ-80",manufacturer:"Sharp"},{system:"X1",manufacturer:"Sharp"},{system:"X68000",manufacturer:"Sharp"}],ef=(()=>{let e=new Map;for(let t of em)e.has(t.manufacturer)||e.set(t.manufacturer,[]),e.get(t.manufacturer).push(t.system);return Array.from(e.entries()).map(([e,t])=>({manufacturer:e,systems:t}))})(),ep=em.filter(e=>void 0!==e.characterRom),eg=ep.map(e=>({system:e.system,manufacturer:e.manufacturer,width:e.characterRom.width,height:e.characterRom.height})),eb=ep.map(e=>({system:e.system,manufacturer:e.manufacturer,count:e.characterRom.characterCount}));function ey(e,t){return ep.filter(r=>r.characterRom.width===e&&r.characterRom.height===t).map(e=>e.system)}function ev(e){return ep.filter(t=>t.characterRom.characterCount===e).map(e=>e.system)}let ej=[{name:"8x8 (Standard)",width:8,height:8,systems:ey(8,8)},{name:"8x16 (Extended)",width:8,height:16,systems:ey(8,16)},{name:"8x14 (VGA Text)",width:8,height:14,systems:ey(8,14)},{name:"8x10 (Apple II Lores)",width:8,height:10,systems:["Apple II"]},{name:"5x7 (LED Matrix)",width:5,height:7,systems:["LED Displays","Dot Matrix"]},{name:"6x8 (C64 Hires)",width:6,height:8,systems:["C64"]},{name:"4x8 (VIC-20 Multicolor)",width:4,height:8,systems:["VIC-20"]}],eX=[{name:"64 (Quarter ROM)",count:64,systems:ev(64)},{name:"96 (ZX Spectrum)",count:96,systems:ev(96)},{name:"128 (Half ROM)",count:128,systems:ev(128)},{name:"256 (Full Set)",count:256,systems:ev(256)},{name:"512 (Extended)",count:512,systems:ev(512)}];function ew(e){let t=ef.find(t=>t.manufacturer.toLowerCase()===e.toLowerCase());return t?.systems||[]}let eC={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"HT",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"DC1",18:"DC2",19:"DC3",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US",127:"DEL"};function ek(e){return eC[e]||null}function eN(e){return e>=32&&e<=126}function eS(e){return e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`}function eM(e){return`${e.width}x${e.height}`}function eL(e){let t=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");return`${t||"charset"}.bin`}function eE(e){let t=e.name.toLowerCase().substring(e.name.lastIndexOf("."));return[".bin",".rom",".chr",".fnt",".dat"].includes(t)||!t||t===e.name.toLowerCase()}function eR(e,t){return Math.floor(e/(Math.ceil(t.width/8)*t.height))}function eD(e){let t=new Date(e),r=Math.floor((new Date().getTime()-e)/864e5);return 0===r?"Today":1===r?"Yesterday":r<7?`${r} days ago`:t.toLocaleDateString()}function eA(){return{charWidth:8,charHeight:8,offsetX:0,offsetY:0,threshold:128,invert:!1,maxCharacters:256}}async function eI(e){return new Promise((t,r)=>{let a=new Image,n=URL.createObjectURL(e);a.onload=()=>{URL.revokeObjectURL(n);let e=document.createElement("canvas");e.width=a.width,e.height=a.height;let s=e.getContext("2d");s?(s.fillStyle="white",s.fillRect(0,0,e.width,e.height),s.drawImage(a,0,0),t(s.getImageData(0,0,e.width,e.height))):r(Error("Failed to create canvas context"))},a.onerror=()=>{URL.revokeObjectURL(n),r(Error("Failed to load image"))},a.src=n})}function eB(e,t){let{charWidth:r,charHeight:a,offsetX:n,offsetY:s,threshold:l,invert:i,maxCharacters:o=256}=t,c=e.width-n,d=e.height-s,u=Math.floor(c/r),h=Math.floor(d/a),x=[];for(let t=0;t<h&&x.length<o;t++)for(let c=0;c<u&&x.length<o;c++){let o=function(e,t,r,a,n,s,l){let i=[];for(let o=0;o<n;o++){let n=[];for(let i=0;i<a;i++){let a=t+i,c=r+o;if(a<0||a>=e.width||c<0||c>=e.height){n.push(!1);continue}let d=function(e,t,r){let a=(r*e.width+t)*4,n=e.data[a],s=e.data[a+1],l=e.data[a+2];return 0===e.data[a+3]?255:Math.round(.299*n+.587*s+.114*l)}(e,a,c)<s;l&&(d=!d),n.push(d)}i.push(n)}return{pixels:i}}(e,n+c*r,s+t*a,r,a,l,i);x.push(o)}return{characters:x,columns:u,rows:h,imageWidth:e.width,imageHeight:e.height}}function eT(e,t){let r=[];for(let[a,n]of[[8,8],[8,16],[6,8],[8,10],[8,12],[16,16]]){let s=Math.floor(e/a),l=Math.floor(t/n);if(s>0&&l>0){let e=s*l;128===e||256===e||96===e||64===e||16===e?r.unshift({width:a,height:n,columns:s,rows:l}):e>=16&&e<=512&&r.push({width:a,height:n,columns:s,rows:l})}}if(0===r.length){let a=Math.floor(e/8),n=Math.floor(t/8);r.push({width:8,height:8,columns:a,rows:n})}return r}function ez(e){return["image/png","image/jpeg","image/gif","image/webp"].includes(e.type)}function e$(){return".png, .jpg, .jpeg, .gif, .webp"}function eP(){return{charWidth:8,charHeight:8,startCode:32,endCode:126,fontSize:8,threshold:128,centerGlyphs:!0,baselineOffset:0}}async function eF(e){let t;try{t=await (()=>{let e=Error("Cannot find module 'opentype.js'");throw e.code="MODULE_NOT_FOUND",e})()}catch{throw Error("Font import requires the opentype.js library. Please install it with: npm install opentype.js")}return new Promise((r,a)=>{let n=new FileReader;n.onload=e=>{try{let a=e.target?.result,n=t.parse(a);r(n)}catch(e){a(Error(`Failed to parse font: ${e}`))}},n.onerror=()=>a(Error("Failed to read font file")),n.readAsArrayBuffer(e)})}function eO(e,t){let r=[];for(let a=0;a<t;a++)r.push(Array(e).fill(!1));return{pixels:r}}async function eW(e,t){let r=await eF(e),a=r.names?.fontFamily?.en||r.names?.fullName?.en||"Unknown Font",n=[],s=0,l=0;for(let e=t.startCode;e<=t.endCode;e++){let a=function(e,t,r){let{charWidth:a,charHeight:n,fontSize:s,threshold:l,centerGlyphs:i,baselineOffset:o}=r,c=document.createElement("canvas");c.width=a,c.height=n;let d=c.getContext("2d");if(!d)return eO(a,n);d.fillStyle="white",d.fillRect(0,0,a,n);let u=e.charToGlyph(String.fromCharCode(t));if(!u||0===u.index)return eO(a,n);let h=s/e.unitsPerEm,x=u.advanceWidth*h,m=(e.ascender-e.descender)*h,f=0,p=n- -(e.descender*h*1)+o;if(i){f=(a-x)/2;let t=(n-m)/2;p=n- -(e.descender*h*1)-t+o}d.fillStyle="black";let g=u.getPath(f,p,s);g.fill="black",g.draw(d);let b=d.getImageData(0,0,a,n),y=[];for(let e=0;e<n;e++){let t=[];for(let r=0;r<a;r++){let n=(e*a+r)*4,s=.299*b.data[n]+.587*b.data[n+1]+.114*b.data[n+2];t.push(s<l)}y.push(t)}return{pixels:y}}(r,e,t);n.push(a),a.pixels.some(e=>e.some(e=>e))?s++:e>=33&&l++}return{characters:n,fontFamily:a,importedCount:s,missingCount:l}}function e_(e){return!!["font/ttf","font/otf","font/woff","font/woff2","application/x-font-ttf","application/x-font-otf","application/font-woff","application/font-woff2"].includes(e.type)||["ttf","otf","woff","woff2"].includes(e.name.toLowerCase().split(".").pop()||"")}function eH(){return".ttf, .otf, .woff, .woff2"}function eU(e,t){let r=[];for(let a=e;a<=t&&r.length<20;a++)a>=32&&a<=126?r.push(String.fromCharCode(a)):a<32?r.push(""):r.push(String.fromCharCode(a));return t-e>=20&&r.push("..."),r}e.s(["calculateCharacterCount",()=>eR,"formatFileSize",()=>eS,"formatSize",()=>eM,"formatTimestamp",()=>eD,"getSuggestedFilename",()=>eL,"isValidBinaryFile",()=>eE],92921),e.s(["detectCharacterDimensions",()=>eT,"getDefaultImageImportOptions",()=>eA,"getSupportedImageExtensions",()=>e$,"isValidImageFile",()=>ez,"loadImageData",()=>eI,"parseImageToCharacters",()=>eB],16205),e.s(["CHARACTER_RANGES",0,[{name:"Printable ASCII",startCode:32,endCode:126,count:95},{name:"Extended ASCII",startCode:32,endCode:255,count:224},{name:"Uppercase Only",startCode:65,endCode:90,count:26},{name:"Lowercase Only",startCode:97,endCode:122,count:26},{name:"Digits Only",startCode:48,endCode:57,count:10},{name:"Full 256 (with blanks)",startCode:0,endCode:255,count:256}],"getCharacterRangePreview",()=>eU,"getDefaultFontImportOptions",()=>eP,"getSupportedFontExtensions",()=>eH,"isValidFontFile",()=>e_,"parseFontToCharacters",()=>eW],84227);let eK="snapshots";function eG(){return new Promise((e,t)=>{if(!function(){try{return!!window.indexedDB}catch{return!1}}())return void t(Error("IndexedDB not available"));let r=indexedDB.open("retrostack-character-editor",4);r.onerror=()=>{t(Error("Failed to open database"))},r.onsuccess=()=>{e(r.result)},r.onupgradeneeded=e=>{let t=e.target.result;if(!t.objectStoreNames.contains(eK)){let e=t.createObjectStore(eK,{keyPath:"id"});e.createIndex("by-character-set","characterSetId",{unique:!1}),e.createIndex("by-created","createdAt",{unique:!1})}}})}async function eV(e){let t=await eG();if((await eY(e.characterSetId)).length>=10)throw Error("Maximum of 10 snapshots per character set. Delete an existing snapshot first.");return new Promise((r,a)=>{let n=t.transaction([eK],"readwrite").objectStore(eK).put(e);n.onsuccess=()=>r(),n.onerror=()=>a(Error("Failed to save snapshot"))})}async function eY(e){let t=await eG();return new Promise((r,a)=>{let n=t.transaction([eK],"readonly").objectStore(eK).index("by-character-set").getAll(e);n.onsuccess=()=>{let e=n.result;e.sort((e,t)=>t.createdAt-e.createdAt),r(e)},n.onerror=()=>{a(Error("Failed to get snapshots"))}})}async function eq(e){let t=await eG();return new Promise((r,a)=>{let n=t.transaction([eK],"readonly").objectStore(eK).get(e);n.onsuccess=()=>{r(n.result||null)},n.onerror=()=>{a(Error("Failed to get snapshot"))}})}async function eJ(e){let t=await eG();return new Promise((r,a)=>{let n=t.transaction([eK],"readwrite").objectStore(eK).delete(e);n.onsuccess=()=>r(),n.onerror=()=>a(Error("Failed to delete snapshot"))})}async function eZ(e,t){let r=await eG(),a=await eq(e);if(!a)throw Error("Snapshot not found");let n={...a,name:t};return new Promise((e,t)=>{let a=r.transaction([eK],"readwrite").objectStore(eK).put(n);a.onsuccess=()=>e(),a.onerror=()=>t(Error("Failed to rename snapshot"))})}function eQ(e,t,r,a){let n=I(A(r,a));return btoa(encodeURIComponent(JSON.stringify({v:1,n:e,d:t,c:[a.width,a.height,a.padding,a.bitDirection],b:n})).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(parseInt(t,16))))}function e0(e){try{let t=decodeURIComponent(atob(e).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")),r=JSON.parse(t);if(1!==r.v)throw Error("Unsupported share format version");let a={width:r.c[0],height:r.c[1],padding:r.c[2],bitDirection:r.c[3]},n=B(r.b),s=D(n,a);return{name:r.n,description:r.d,characters:s,config:a}}catch(e){throw Error(`Failed to decode shared character set: ${e}`)}}function e1(e){let t=`${window.location.origin}/tools/character-rom-editor/shared`;return`${t}#${e}`}function e2(){let e=window.location.hash;return e?e.slice(1):null}function e4(e){return e.length<=2e3?"ok":e.length<=8e3?"warning":"error"}function e5(e,t,r){let a=Math.ceil(e*Math.ceil(t*r/8)*1.37)+100+100;return a<=2e3?{canShare:!0,estimatedLength:a,status:"ok",message:"Character set can be shared"}:a<=8e3?{canShare:!0,estimatedLength:a,status:"warning",message:"URL may be too long for some platforms. Consider reducing characters."}:{canShare:!1,estimatedLength:a,status:"error",message:`Character set is too large to share (${e} characters). Maximum shareable size depends on character dimensions.`}}function e3(e){return{arrayName:e.replace(/[^a-zA-Z0-9_]/g,"_").replace(/^[0-9]/,"_$&").toUpperCase()||"CHARSET",includeGuards:!0,includeComments:!0,bytesPerLine:8}}function e6(e){return{labelName:e.replace(/[^a-zA-Z0-9_]/g,"_").replace(/^[0-9]/,"_$&").toLowerCase()||"charset",directive:".byte",useHex:!0,includeComments:!0,bytesPerLine:8}}function e8(){return{columns:16,scale:4,showGrid:!0,gridColor:"#333333",foregroundColor:"#ffffff",backgroundColor:"#000000",transparent:!1}}function e9(e){return{columns:16,scale:3,showHex:!0,showDecimal:!1,showAscii:!0,foregroundColor:"#ffffff",backgroundColor:"#000000",labelColor:"#888888",title:e||"Character Set",showTitle:!0}}function e7(e,t,r){let a=[],n=`${r.arrayName}_H`,s=N(t);r.includeComments&&(a.push("/**"),a.push(` * ${r.arrayName} - Character ROM Data`),a.push(" * Generated by RetroStack Character ROM Editor"),a.push(" * "),a.push(` * Character dimensions: ${t.width}x${t.height}`),a.push(` * Total characters: ${e.length}`),a.push(` * Bytes per character: ${s}`),a.push(" */"),a.push("")),r.includeGuards&&(a.push(`#ifndef ${n}`),a.push(`#define ${n}`),a.push(""));let l=e.length*s;a.push(`const unsigned char ${r.arrayName}[${l}] = {`);for(let n=0;n<e.length;n++){let s=R(e[n],t),l=[];for(let e=0;e<s.length;e++)l.push(`0x${s[e].toString(16).padStart(2,"0").toUpperCase()}`);for(let t=0;t<l.length;t+=r.bytesPerLine){let s=l.slice(t,t+r.bytesPerLine),i=n===e.length-1&&t+r.bytesPerLine>=l.length,o=`  ${s.join(", ")}${i?"":","}`;r.includeComments&&0===t?a.push(`${o}  /* Char ${n} */`):a.push(o)}}return a.push("};"),a.push(""),r.includeGuards&&(a.push(`#endif /* ${n} */`),a.push("")),a.join("\n")}function te(e,t,r){let a=[],n=N(t);r.includeComments&&(a.push("; "+"=".repeat(60)),a.push(`; ${r.labelName} - Character ROM Data`),a.push("; Generated by RetroStack Character ROM Editor"),a.push("; "),a.push(`; Character dimensions: ${t.width}x${t.height}`),a.push(`; Total characters: ${e.length}`),a.push(`; Bytes per character: ${n}`),a.push("; "+"=".repeat(60)),a.push("")),a.push(`${r.labelName}:`);for(let n=0;n<e.length;n++){let s=R(e[n],t),l=[];for(let e=0;e<s.length;e++)r.useHex?l.push(`$${s[e].toString(16).padStart(2,"0").toUpperCase()}`):l.push(s[e].toString());for(let e=0;e<l.length;e+=r.bytesPerLine){let t=l.slice(e,e+r.bytesPerLine),s=`    ${r.directive} ${t.join(", ")}`;r.includeComments&&0===e?a.push(`${s}  ; Char ${n}`):a.push(s)}}return a.push(""),a.join("\n")}async function tt(e,t,r){let{columns:a,scale:n,showGrid:s,gridColor:l,foregroundColor:i,backgroundColor:o,transparent:c}=r,d=Math.ceil(e.length/a),u=t.width,h=t.height,x=+!!s,m=a*u*n+(s?(a+1)*x:0),f=d*h*n+(s?(d+1)*x:0),p=document.createElement("canvas");p.width=m,p.height=f;let g=p.getContext("2d");if(!g)throw Error("Could not create canvas context");if(c?g.clearRect(0,0,m,f):(g.fillStyle=o,g.fillRect(0,0,m,f)),s){g.fillStyle=l;for(let e=0;e<=a;e++){let t=e*(u*n+x);g.fillRect(t,0,x,f)}for(let e=0;e<=d;e++){let t=e*(h*n+x);g.fillRect(0,t,m,x)}}for(let t=0;t<e.length;t++){let r=e[t],l=t%a,d=Math.floor(t/a),m=s?l*(u*n+x)+x:l*u*n,f=s?d*(h*n+x)+x:d*h*n;for(let e=0;e<h;e++)for(let t=0;t<u;t++)r.pixels[e]?.[t]?(g.fillStyle=i,g.fillRect(m+t*n,f+e*n,n,n)):c||(g.fillStyle=o,g.fillRect(m+t*n,f+e*n,n,n))}return new Promise((e,t)=>{p.toBlob(r=>{r?e(r):t(Error("Failed to create PNG blob"))},"image/png")})}async function tr(e,t,r){let{columns:a,scale:n,showHex:s,showDecimal:l,showAscii:i,foregroundColor:o,backgroundColor:c,labelColor:d,title:u,showTitle:h}=r,x=Math.ceil(e.length/a),m=t.width,f=t.height,p=m*n+8,g=f*n+8+14*Math.max(1,+!!s+ +!!l+ +!!i),b=40*!!h,y=40+a*p+4,v=b+20+x*g+4,j=document.createElement("canvas");j.width=y,j.height=v;let X=j.getContext("2d");if(!X)throw Error("Could not create canvas context");X.fillStyle="#1a1a2e",X.fillRect(0,0,y,v),h&&u&&(X.fillStyle=o,X.font="bold 16px monospace",X.textAlign="center",X.fillText(u,y/2,26),X.fillStyle=d,X.font="10px monospace",X.fillText(`${e.length} characters, ${m}x${f} pixels`,y/2,38)),X.fillStyle=d,X.font="10px monospace",X.textAlign="center";for(let e=0;e<a;e++){let t=40+e*p+p/2,r=b+20-6;X.fillText(e.toString(16).toUpperCase(),t,r)}X.textAlign="right";for(let e=0;e<x;e++){let t=b+20+e*g+g/2,r=e*a;X.fillText(r.toString(16).toUpperCase().padStart(2,"0")+"_",32,t)}for(let t=0;t<e.length;t++){let r=e[t],u=40+t%a*p,h=b+20+Math.floor(t/a)*g;X.fillStyle=c,X.fillRect(u+1,h+1,p-2,f*n+8-2);let x=u+4,y=h+4;for(let e=0;e<f;e++)for(let t=0;t<m;t++)(r.pixels[e]?.[t]||0)&&(X.fillStyle=o,X.fillRect(x+t*n,y+e*n,n,n));X.fillStyle=d,X.font="9px monospace",X.textAlign="center";let v=h+4+f*n+12,j=u+p/2;if(s&&(X.fillText("$"+t.toString(16).toUpperCase().padStart(2,"0"),j,v),v+=10),l&&(X.fillText(t.toString(),j,v),v+=10),i){var w;let e=(w=t)>=32&&w<=126?String.fromCharCode(w):({0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"TAB",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"DC1",18:"DC2",19:"DC3",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US",127:"DEL"})[w]||"";e&&(X.fillStyle=t>=32&&t<=126?o:"#666666",X.fillText(e,j,v))}}return X.strokeStyle=d,X.lineWidth=1,X.strokeRect(.5,.5,y-1,v-1),X.fillStyle="#444444",X.font="8px monospace",X.textAlign="right",X.fillText("Generated by RetroStack Character ROM Editor",y-8,v-4),new Promise((e,t)=>{j.toBlob(r=>{r?e(r):t(Error("Failed to create PNG blob"))},"image/png")})}function ta(e,t,r=16){if(0===e.length)return"";let a=[],n=0;for(;a.length<r&&n<e.length;){let s=R(e[n],t);for(let e=0;e<s.length&&a.length<r;e++)a.push(s[e]);n++}return a.map(e=>e.toString(16).padStart(2,"0").toUpperCase()).join(" ")}function tn(e,t,r=0){let a=R(e,t),n=k(t.width),s=a.slice(r*n,(r+1)*n),l="";for(let e of s)l+=e.toString(2).padStart(8,"0");let i=8*n-t.width,o="";return o="left"===t.padding?"P".repeat(i)+"D".repeat(t.width):"D".repeat(t.width)+"P".repeat(i),{bits:l,hex:Array.from(s).map(e=>e.toString(16).padStart(2,"0").toUpperCase()).join(" "),padding:o}}function ts({characterSet:e,onEdit:t,onExport:r,onDelete:a,onDuplicate:n,onRename:s,onTogglePinned:l}){let{metadata:i,config:o}=e,c=(0,X.useMemo)(()=>{try{return z(e).characters}catch{return[]}},[e]),d=c.length,u=(0,X.useMemo)(()=>{let e=[];return l&&e.push({id:"pin",label:i.isPinned?"Unpin":"Pin to top",onClick:l}),t&&e.push({id:"edit",label:"Edit",onClick:t}),s&&!i.isBuiltIn&&e.push({id:"rename",label:"Rename",onClick:s}),r&&e.push({id:"export",label:"Export",onClick:r}),n&&e.push({id:"duplicate",label:"Duplicate",onClick:n}),a&&!i.isBuiltIn&&e.push({id:"delete",label:"Delete",onClick:a,variant:"danger"}),e},[t,s,r,n,a,l,i.isBuiltIn,i.isPinned]);return(0,j.jsxs)("div",{className:`card-retro p-4 flex flex-col gap-3 hover-glow-cyan transition-all h-full relative has-[[aria-expanded=true]]:z-50 ${i.isPinned?"ring-1 ring-retro-yellow/50":""}`,children:[(0,j.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,j.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,j.jsxs)("h3",{className:"text-sm font-semibold text-retro-cyan truncate flex items-center gap-1.5",children:[i.isPinned&&(0,j.jsx)("svg",{className:"w-3.5 h-3.5 text-retro-yellow flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{d:"M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2z"})}),i.name]}),(i.manufacturer||i.system)&&(0,j.jsxs)("p",{className:"text-[10px] text-gray-500 mt-0.5",children:[i.manufacturer,i.manufacturer&&i.system?" ":"",i.system]}),i.description&&(0,j.jsx)("p",{className:"text-xs text-gray-400 line-clamp-2 mt-0.5",children:i.description})]}),(0,j.jsx)("div",{className:"flex-shrink-0",children:u.length>0&&(0,j.jsx)(C.OverflowMenu,{items:u,align:"right",label:"Character set actions"})})]}),(0,j.jsx)("div",{className:"flex justify-center py-2 bg-black/30 rounded",children:(0,j.jsx)(w.CharacterPreview,{characters:c,config:o,maxCharacters:512,maxWidth:256,maxHeight:4096})}),(0,j.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-retro-grid/30 text-[10px] mt-auto",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("span",{className:"px-1.5 py-0.5 bg-retro-purple/30 text-retro-pink rounded",children:eM(o)}),(0,j.jsxs)("span",{className:"text-gray-500",children:[d," char",1!==d?"s":""]}),i.isBuiltIn&&(0,j.jsx)("span",{className:"px-1.5 py-0.5 bg-retro-navy text-gray-400 rounded",children:"Built-in"})]}),t&&(0,j.jsx)("button",{onClick:t,className:"px-2 py-1 text-xs bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Edit"})]})]})}function tl({characterSet:e,selected:t=!1,onClick:r}){let{metadata:a,config:n}=e,s=(0,X.useMemo)(()=>{try{return z(e).characters}catch{return[]}},[e]);return(0,j.jsx)("button",{onClick:r,className:`
        w-full p-3 rounded border text-left transition-all
        ${t?"border-retro-cyan bg-retro-cyan/10":"border-retro-grid/30 bg-retro-navy/30 hover:border-retro-grid/50"}
      `,children:(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("div",{className:"flex-shrink-0 bg-black/30 p-1 rounded",children:(0,j.jsx)(w.CharacterPreview,{characters:s,config:n,maxCharacters:8,maxWidth:48,maxHeight:24})}),(0,j.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,j.jsx)("div",{className:"text-sm font-medium text-gray-200 truncate",children:a.name}),(0,j.jsxs)("div",{className:"text-[10px] text-gray-500",children:[eM(n)," - ",s.length," chars"]})]}),t&&(0,j.jsx)("svg",{className:"w-4 h-4 text-retro-cyan flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})})]})})}function ti({onImport:e,onCreate:t}){return(0,j.jsxs)("div",{className:"card-retro p-6 flex flex-col items-center justify-center gap-4 border-dashed",children:[(0,j.jsx)("div",{className:"w-12 h-12 rounded-full bg-retro-purple/20 flex items-center justify-center",children:(0,j.jsx)("svg",{className:"w-6 h-6 text-retro-pink",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("p",{className:"text-sm text-gray-300",children:"Add a character set"}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Import a ROM file or create from scratch"})]}),(0,j.jsxs)("div",{className:"flex gap-2",children:[t&&(0,j.jsx)("button",{onClick:t,className:"px-3 py-1.5 text-xs bg-retro-pink/20 text-retro-pink rounded hover:bg-retro-pink/30 transition-colors",children:"Add"}),e&&(0,j.jsx)("button",{onClick:e,className:"px-3 py-1.5 text-xs bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Import"})]})]})}function to({characterSets:e,loading:t=!1,onEdit:r,onExport:a,onDelete:n,onDuplicate:s,onRename:l,onTogglePinned:i,onImport:o,onCreate:c,className:d=""}){return t?(0,j.jsx)("div",{className:`grid-fluid gap-4 ${d}`,children:Array.from({length:4}).map((e,t)=>(0,j.jsx)(tc,{},t))}):0===e.length?(0,j.jsx)("div",{className:`flex flex-col items-center justify-center py-12 ${d}`,children:(0,j.jsx)(ti,{onImport:o,onCreate:c})}):(0,j.jsx)("div",{className:`grid-fluid gap-4 ${d}`,children:e.map(e=>(0,j.jsx)(ts,{characterSet:e,onEdit:r?()=>r(e.metadata.id):void 0,onExport:a?()=>a(e.metadata.id):void 0,onDelete:n?()=>n(e.metadata.id):void 0,onDuplicate:s?()=>s(e.metadata.id):void 0,onRename:l?()=>l(e.metadata.id):void 0,onTogglePinned:i?()=>i(e.metadata.id):void 0},e.metadata.id))})}function tc(){return(0,j.jsxs)("div",{className:"card-retro p-4 animate-pulse",children:[(0,j.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-3",children:[(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("div",{className:"h-4 bg-retro-grid/30 rounded w-3/4"}),(0,j.jsx)("div",{className:"h-3 bg-retro-grid/20 rounded w-full mt-2"})]}),(0,j.jsx)("div",{className:"w-6 h-6 bg-retro-grid/20 rounded"})]}),(0,j.jsx)("div",{className:"h-16 bg-black/30 rounded mb-3"}),(0,j.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,j.jsx)("div",{className:"h-4 w-12 bg-retro-grid/20 rounded"}),(0,j.jsx)("div",{className:"h-4 w-16 bg-retro-grid/20 rounded"})]}),(0,j.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-retro-grid/30",children:[(0,j.jsx)("div",{className:"h-3 w-20 bg-retro-grid/20 rounded"}),(0,j.jsxs)("div",{className:"flex gap-1",children:[(0,j.jsx)("div",{className:"h-6 w-12 bg-retro-grid/20 rounded"}),(0,j.jsx)("div",{className:"h-6 w-14 bg-retro-grid/20 rounded"})]})]})]})}function td({onClearFilters:e}){return(0,j.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,j.jsx)("div",{className:"w-16 h-16 rounded-full bg-retro-navy/50 flex items-center justify-center mb-4",children:(0,j.jsx)("svg",{className:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No results found"}),(0,j.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Try adjusting your search or filters"}),e&&(0,j.jsx)("button",{onClick:e,className:"px-4 py-2 text-sm bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Clear all filters"})]})}function tu({error:e,onRetry:t}){return(0,j.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,j.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mb-4",children:(0,j.jsx)("svg",{className:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,j.jsx)("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Failed to load library"}),(0,j.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:e}),t&&(0,j.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Try again"})]})}e.s(["canShare",()=>e5,"createShareUrl",()=>e1,"decodeCharacterSet",()=>e0,"encodeCharacterSet",()=>eQ,"getHashFromUrl",()=>e2,"getUrlLengthStatus",()=>e4],40979),e.s(["EXPORT_FORMATS",0,[{id:"binary",name:"Binary ROM",description:"Raw binary data for direct ROM programming",extension:".bin",mimeType:"application/octet-stream"},{id:"c-header",name:"C/C++ Header",description:"Byte array for embedded development",extension:".h",mimeType:"text/x-c"},{id:"assembly",name:"Assembly Include",description:"Data bytes for 6502/Z80 assembly",extension:".asm",mimeType:"text/plain"},{id:"png",name:"PNG Image",description:"Character sheet image",extension:".png",mimeType:"image/png"},{id:"reference-sheet",name:"Reference Sheet",description:"Printable reference with character codes",extension:".png",mimeType:"image/png"}],"exportToAssembly",()=>te,"exportToCHeader",()=>e7,"exportToPng",()=>tt,"exportToReferenceSheet",()=>tr,"getBitLayoutVisualization",()=>tn,"getDefaultAssemblyOptions",()=>e6,"getDefaultCHeaderOptions",()=>e3,"getDefaultPngOptions",()=>e8,"getDefaultReferenceSheetOptions",()=>e9,"getHexPreview",()=>ta],44824),e.s([],79086),e.s(["LibraryCard",()=>ts,"LibraryCardCompact",()=>tl,"LibraryCardEmpty",()=>ti],38794),e.s(["LibraryGrid",()=>to,"LibraryGridEmptyResults",()=>td,"LibraryGridError",()=>tu],4941);var th=e.i(79724);function tx({label:e,options:t,selected:r,onChange:a,placeholder:n="All",className:s="",showAllOption:l=!0,allOptionLabel:i="All"}){let[o,c]=(0,X.useState)(!1),d=(0,th.useOutsideClick)(()=>c(!1),o),u=(0,X.useCallback)(e=>{r.includes(e)?a(r.filter(t=>t!==e)):a([...r,e])},[r,a]),h=(0,X.useCallback)(()=>{a([])},[a]),x=(0,X.useCallback)((e,t)=>{t.stopPropagation(),a(r.filter(t=>t!==e))},[r,a]),m=e=>{let r=t.find(t=>t.value===e);return r?.label??String(e)},f=r.length>0;return(0,j.jsxs)("div",{className:`relative ${s}`,ref:d,children:[(0,j.jsxs)("button",{type:"button",onClick:()=>c(!o),className:`
          flex items-center justify-between gap-2 w-full px-3 py-1.5
          bg-retro-dark border rounded text-sm text-left
          transition-colors
          ${o?"border-retro-cyan":"border-retro-grid/50 hover:border-retro-grid"}
          ${f?"text-white":"text-gray-400"}
        `,"aria-expanded":o,"aria-haspopup":"listbox",children:[(0,j.jsx)("span",{className:"truncate",children:f?`${e} (${r.length})`:n}),(0,j.jsx)("svg",{className:`w-4 h-4 flex-shrink-0 transition-transform ${o?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&(0,j.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:r.map(e=>(0,j.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-retro-cyan/20 text-retro-cyan rounded text-xs",children:[m(e),(0,j.jsx)("button",{type:"button",onClick:t=>x(e,t),className:"hover:text-white transition-colors","aria-label":`Remove ${m(e)}`,children:(0,j.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},String(e)))}),o&&(0,j.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl overflow-hidden",children:(0,j.jsxs)("div",{className:"max-h-60 overflow-y-auto py-1",children:[l&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("button",{type:"button",onClick:h,className:`
                    w-full flex items-center gap-2 px-3 py-2 text-sm text-left
                    transition-colors
                    ${!f?"bg-retro-cyan/10 text-retro-cyan":"text-gray-300 hover:bg-retro-purple/20"}
                  `,children:[(0,j.jsx)("span",{className:"w-4 h-4 flex items-center justify-center",children:!f&&(0,j.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})})}),i]}),(0,j.jsx)("div",{className:"h-px bg-retro-grid/30 mx-2 my-1"})]}),t.map(e=>{let t=r.includes(e.value);return(0,j.jsxs)("button",{type:"button",onClick:()=>u(e.value),className:`
                    w-full flex items-center gap-2 px-3 py-2 text-sm text-left
                    transition-colors
                    ${t?"bg-retro-cyan/10 text-retro-cyan":"text-gray-300 hover:bg-retro-purple/20"}
                  `,role:"option","aria-selected":t,children:[(0,j.jsx)("span",{className:`
                      w-4 h-4 flex items-center justify-center rounded border
                      ${t?"bg-retro-cyan border-retro-cyan":"border-gray-500"}
                    `,children:t&&(0,j.jsx)("svg",{className:"w-3 h-3 text-retro-dark",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.label]},String(e.value))}),0===t.length&&(0,j.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No options available"})]})})]})}function tm({searchQuery:e,onSearchChange:t,availableSizes:r,widthFilters:a,heightFilters:n,onSizeFilterChange:s,availableManufacturers:l=[],availableSystems:i=[],manufacturerFilters:o=[],systemFilters:c=[],onManufacturerFilterChange:d,onSystemFilterChange:u,totalCount:h,filteredCount:x}){let m=(0,X.useMemo)(()=>Array.from(new Set([...ef.map(e=>e.manufacturer),...l])).sort(),[l]),f=(0,X.useMemo)(()=>{if(0===o.length)return i.sort();let e=new Set;return o.forEach(t=>{ew(t).forEach(t=>e.add(t))}),i.forEach(t=>e.add(t)),Array.from(e).sort()},[o,i]),p=(0,X.useMemo)(()=>Array.from(new Set(r.map(e=>e.width))).sort((e,t)=>e-t),[r]),g=(0,X.useMemo)(()=>Array.from(new Set(r.map(e=>e.height))).sort((e,t)=>e-t),[r]),b=(0,X.useCallback)(()=>{t(""),s([],[]),d?.([]),u?.([])},[t,s,d,u]),y=e.length>0||a.length>0||n.length>0||o.length>0||c.length>0;return(0,j.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,j.jsxs)("div",{className:"relative",children:[(0,j.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search character sets...",className:"w-full px-4 py-2 pl-10 bg-retro-navy/50 border border-retro-grid/50 rounded-lg text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:border-retro-cyan/50 transition-colors","aria-label":"Search character sets"}),(0,j.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e&&(0,j.jsx)("button",{type:"button",onClick:()=>t(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300","aria-label":"Clear search",children:(0,j.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,j.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,j.jsx)(tx,{label:"Width",options:p.map(e=>({value:e,label:`${e}px`})),selected:a,onChange:e=>s(e,n),placeholder:"Width",allOptionLabel:"Any width"}),(0,j.jsx)(tx,{label:"Height",options:g.map(e=>({value:e,label:`${e}px`})),selected:n,onChange:e=>s(a,e),placeholder:"Height",allOptionLabel:"Any height"}),d&&(0,j.jsx)(tx,{label:"Manufacturer",options:m.map(e=>({value:e,label:e})),selected:o,onChange:d,placeholder:"Manufacturer",allOptionLabel:"Any manufacturer"}),u&&(0,j.jsx)(tx,{label:"System",options:f.map(e=>({value:e,label:e})),selected:c,onChange:u,placeholder:"System",allOptionLabel:"Any system"})]}),(0,j.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,j.jsx)("span",{children:y?`Showing ${x} of ${h} character sets`:`${h} character set${1!==h?"s":""}`}),y&&(0,j.jsx)("button",{onClick:b,className:"text-retro-cyan hover:text-retro-pink transition-colors",children:"Clear filters"})]})]})}function tf({onFileSelect:e,selectedFile:t,loading:r=!1,error:a=null,className:n=""}){let[s,l]=(0,X.useState)(!1),[i,o]=(0,X.useState)(null),c=(0,X.useRef)(null),d=a||i,u=(0,X.useCallback)(async t=>{if(o(null),!eE(t))return void o("Invalid file type. Please select a binary ROM file (.bin, .rom, .chr, .fnt, .dat)");if(t.size>1048576)return void o("File too large. Maximum size is 1MB.");try{let r=await t.arrayBuffer();e(t,r)}catch{o("Failed to read file. Please try again.")}},[e]),h=(0,X.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),l(!1);let t=e.dataTransfer.files;t.length>0&&u(t[0])},[u]),x=(0,X.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),l(!0)},[]),m=(0,X.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),l(!1)},[]),f=(0,X.useCallback)(()=>{c.current?.click()},[]),p=(0,X.useCallback)(e=>{let t=e.target.files;t&&t.length>0&&u(t[0])},[u]),g=(0,X.useCallback)(e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),f())},[f]);return(0,j.jsxs)("div",{className:n,children:[(0,j.jsx)("input",{ref:c,type:"file",accept:".bin,.rom,.chr,.fnt,.dat",onChange:p,className:"hidden","aria-hidden":"true"}),(0,j.jsx)("div",{onClick:f,onDrop:h,onDragOver:x,onDragLeave:m,onKeyDown:g,role:"button",tabIndex:0,"aria-label":"Drop a ROM file or click to browse",className:`
          relative flex flex-col items-center justify-center
          p-8 sm:p-12
          border-2 border-dashed rounded-lg
          cursor-pointer
          transition-all
          ${s?"border-retro-cyan bg-retro-cyan/10":t?"border-retro-pink/50 bg-retro-pink/5":"border-retro-grid/50 hover:border-retro-cyan/50 bg-retro-navy/30"}
          ${d?"border-red-500/50 bg-red-500/5":""}
          ${r?"pointer-events-none opacity-50":""}
        `,children:r?(0,j.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,j.jsx)("div",{className:"w-12 h-12 border-2 border-retro-cyan border-t-transparent rounded-full animate-spin"}),(0,j.jsx)("span",{className:"text-sm text-gray-400",children:"Reading file..."})]}):t?(0,j.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,j.jsx)("div",{className:"w-16 h-16 rounded-lg bg-retro-pink/20 flex items-center justify-center",children:(0,j.jsx)("svg",{className:"w-8 h-8 text-retro-pink",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("p",{className:"text-sm font-medium text-gray-200 truncate max-w-[200px]",children:t.name}),(0,j.jsx)("p",{className:"text-xs text-gray-500",children:eS(t.size)})]}),(0,j.jsx)("button",{type:"button",className:"text-xs text-retro-cyan hover:text-retro-pink transition-colors",children:"Choose a different file"})]}):(0,j.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,j.jsx)("div",{className:"w-16 h-16 rounded-full bg-retro-purple/20 flex items-center justify-center",children:(0,j.jsx)("svg",{className:"w-8 h-8 text-retro-pink",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("p",{className:"text-sm text-gray-300",children:"Drag and drop a ROM file here"}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"or click to browse"})]}),(0,j.jsx)("div",{className:"text-[10px] text-gray-500",children:"Accepts: .bin, .rom, .chr, .fnt, .dat"})]})}),d&&(0,j.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm text-red-400",children:[(0,j.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,j.jsx)("span",{children:d})]})]})}e.s(["LibraryFilters",()=>tm],93949),e.s(["ImportDropZone",()=>tf],25544),e.s([],73581);var tp=e.i(49738);function tg({character:e,config:t,onPixelToggle:r,onPixelSet:a,onDragEnd:n,getPixelState:s,batchMode:l=!1,foregroundColor:i="#ffffff",backgroundColor:o="#000000",gridColor:c="#333333",gridThickness:d=1,zoom:u=20,minZoom:h=8,maxZoom:x=40,onZoomChange:m,onPixelHover:f,onPixelLeave:p,className:g=""}){let b=(0,X.useRef)(null),[y,v]=(0,X.useState)(!1),[w,C]=(0,X.useState)(null),k=(0,X.useRef)(null),N=(0,X.useMemo)(()=>{if(!l||!s||!e)return;let r=new Set;for(let e=0;e<t.height;e++)for(let a=0;a<t.width;a++)"mixed"===s(e,a)&&r.add(`${e},${a}`);return r.size>0?r:void 0},[l,s,e,t.height,t.width]),S=(0,X.useCallback)((t,n,s)=>{y||(s?(a?.(t,n,!1),C(!1)):(r?.(t,n),C(!e?.pixels[t]?.[n])),v(!0))},[y,r,a,e]),M=(0,X.useCallback)((e,t)=>{y&&null!==w&&a&&a(e,t,w)},[y,w,a]),L=(0,X.useCallback)(()=>{y&&(v(!1),C(null),n?.())},[y,n]),E=(0,X.useCallback)(e=>{if((e.ctrlKey||e.metaKey)&&(e.preventDefault(),m)){let t=Math.min(x,Math.max(h,u+(e.deltaY>0?-4:4)));t!==u&&m(t)}},[u,h,x,m]),R=(0,X.useCallback)(e=>{if(e.length<2)return null;let t=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+r*r)},[]),D=(0,X.useCallback)(e=>{2===e.touches.length&&(e.preventDefault(),k.current=R(e.touches))},[R]),A=(0,X.useCallback)(e=>{if(2===e.touches.length&&null!==k.current&&m){e.preventDefault();let t=R(e.touches);if(null!==t){let e=Math.min(x,Math.max(h,u+(t-k.current)/20));Math.abs(e-u)>=1&&(m(Math.round(e)),k.current=t)}}},[R,u,h,x,m]),I=(0,X.useCallback)(()=>{k.current=null},[]);return((0,X.useEffect)(()=>{let e=b.current;if(!e)return;let t=e=>{2===e.touches.length&&e.preventDefault()};return e.addEventListener("touchmove",t,{passive:!1}),()=>{e.removeEventListener("touchmove",t)}},[]),e)?(0,j.jsx)("div",{ref:b,className:`flex items-center justify-center h-full overflow-hidden bg-black/20 ${g}`,tabIndex:0,onWheel:E,onTouchStart:D,onTouchMove:A,onTouchEnd:I,children:(0,j.jsx)("div",{className:"inline-block",onMouseLeave:L,onMouseUp:L,children:(0,j.jsx)(tp.CharacterDisplay,{character:e,mode:"large",scale:u,foregroundColor:i,backgroundColor:o,gridColor:c,gridThickness:d,onPixelClick:S,onPixelDrag:M,onDragEnd:L,onPixelHover:f,onPixelLeave:p,interactive:!0,mixedPixels:N})})}):(0,j.jsx)("div",{className:`flex items-center justify-center h-full ${g}`,children:(0,j.jsxs)("div",{className:"text-center text-gray-500",children:[(0,j.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6z"})}),(0,j.jsx)("p",{children:"No character selected"})]})})}e.s(["EditorCanvas",()=>tg],60441);var tb=e.i(32267);function ty({characters:e,config:t,selectedIndex:r,batchSelection:a,onSelect:n,foregroundColor:s="#ffffff",backgroundColor:l="#000000",selectionColor:i="#00ffff",batchSelectionColor:o="#ff69b4",maxWidth:c=200,pixelScale:d=1,gap:u=1,collapsible:h=!0,defaultCollapsed:x=!1,className:m=""}){let f=(0,X.useRef)(null),p=(0,X.useRef)(null),[g,b]=(0,X.useState)(x),[y,v]=(0,X.useState)(null),w=t.width*d,C=t.height*d,k=w+u,N=C+u,S=Math.max(1,Math.floor(c/k)),M=Math.ceil(e.length/S),L=S*k-u,E=M*N-u;(0,X.useEffect)(()=>{let t=f.current;if(!t||g)return;let n=t.getContext("2d");n&&(t.width=L,t.height=E,n.fillStyle=l,n.fillRect(0,0,L,E),e.forEach((e,t)=>{let c=t%S*k,u=Math.floor(t/S)*N;n.fillStyle=l,n.fillRect(c,u,w,C),n.fillStyle=s,e.pixels.forEach((e,t)=>{e.forEach((e,r)=>{e&&n.fillRect(c+r*d,u+t*d,d,d)})}),a?.has(t)&&t!==r&&(n.strokeStyle=o,n.lineWidth=1,n.globalAlpha=.7,n.strokeRect(c+.5,u+.5,w-1,C-1),n.globalAlpha=1),t===r?(n.strokeStyle=i,n.lineWidth=2,n.strokeRect(c+1,u+1,w-2,C-2)):t!==y||a?.has(t)||(n.strokeStyle=i,n.lineWidth=1,n.globalAlpha=.5,n.strokeRect(c+.5,u+.5,w-1,C-1),n.globalAlpha=1)}))},[e,t,r,a,y,s,l,i,o,d,u,S,L,E,w,C,k,N,g]);let R=(0,X.useCallback)(t=>{if(!n)return;let r=f.current;if(!r)return;let a=r.getBoundingClientRect(),s=t.clientX-a.left,l=t.clientY-a.top,i=r.width/a.width,o=Math.floor(l*(r.height/a.height)/N)*S+Math.floor(s*i/k);o>=0&&o<e.length&&n(o)},[n,k,N,S,e.length]),D=(0,X.useCallback)(t=>{let r=f.current;if(!r)return;let a=r.getBoundingClientRect(),n=t.clientX-a.left,s=t.clientY-a.top,l=r.width/a.width,i=Math.floor(s*(r.height/a.height)/N)*S+Math.floor(n*l/k);i>=0&&i<e.length?v(i):v(null)},[k,N,S,e.length]),A=(0,X.useCallback)(()=>{v(null)},[]),I=(0,X.useCallback)(()=>{b(e=>!e)},[]);return(0,j.jsxs)("div",{className:`${m}`,ref:p,children:[h&&(0,j.jsxs)("button",{onClick:I,className:"w-full flex items-center justify-between p-2 text-sm text-gray-300 hover:text-retro-cyan transition-colors",children:[(0,j.jsx)("span",{className:"font-medium",children:"Overview"}),(0,j.jsx)("svg",{className:`w-4 h-4 transition-transform ${g?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!g&&(0,j.jsx)("div",{className:"p-2 bg-black/30 rounded overflow-auto",style:{maxHeight:"150px"},children:(0,j.jsx)("canvas",{ref:f,onClick:R,onMouseMove:D,onMouseLeave:A,className:"cursor-pointer",style:{width:L,height:E,imageRendering:"pixelated"}})})]})}function tv({characters:e,config:t,selectedIndex:r,batchSelection:a,onSelect:n,onAddCharacter:s,onDeleteSelected:l,onSelectAll:i,onSelectNone:o,onContextMenu:c,showAddButton:d=!0,foregroundColor:u="#ffffff",backgroundColor:h="#000000",className:x=""}){let m=a.size+1,f=m>1,[p,g]=(0,X.useState)(!1),b=(0,X.useCallback)(t=>{let a=e.length;if(0!==a)switch(t.key){case"ArrowUp":case"ArrowLeft":t.preventDefault(),n(r>0?r-1:a-1,t.shiftKey,t.metaKey||t.ctrlKey);break;case"ArrowDown":case"ArrowRight":t.preventDefault(),n(r<a-1?r+1:0,t.shiftKey,t.metaKey||t.ctrlKey);break;case"Delete":case"Backspace":t.preventDefault(),l?.();break;case"a":case"A":(t.ctrlKey||t.metaKey)&&t.preventDefault()}},[e.length,r,n,l]);return(0,j.jsxs)("div",{className:`flex flex-col h-full overflow-hidden ${x}`,onKeyDown:b,children:[(0,j.jsxs)("div",{className:"flex-shrink-0 p-3 border-b border-retro-grid/30",children:[(0,j.jsx)("div",{className:"flex items-center justify-between",children:(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Characters"}),(0,j.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.length,")"]})]})}),f&&(0,j.jsxs)("div",{className:"mt-1 text-xs text-retro-pink",children:[m," characters selected"]})]}),(0,j.jsxs)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:[(0,j.jsx)("div",{className:"border-b border-retro-grid/30",children:(0,j.jsx)(ty,{characters:e,config:t,selectedIndex:r,batchSelection:a,onSelect:e=>n(e,!1),foregroundColor:u,backgroundColor:h,maxWidth:200,pixelScale:1,collapsible:!0,defaultCollapsed:!1})}),(0,j.jsxs)("div",{className:"border-b border-retro-grid/30",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("span",{className:"font-medium text-sm text-gray-300",children:"Characters"}),i&&(0,j.jsx)("button",{onClick:e=>{e.stopPropagation(),i()},className:"text-[10px] text-gray-500 hover:text-retro-cyan transition-colors",children:"All"}),o&&f&&(0,j.jsx)("button",{onClick:e=>{e.stopPropagation(),o()},className:"text-[10px] text-gray-500 hover:text-retro-pink transition-colors",children:"None"})]}),(0,j.jsx)("button",{onClick:()=>g(!p),className:"p-1 text-gray-400 hover:text-retro-cyan transition-colors","aria-label":p?"Expand characters":"Collapse characters",children:(0,j.jsx)("svg",{className:`w-4 h-4 transition-transform ${p?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),!p&&(0,j.jsx)("div",{className:"p-2",children:(0,j.jsx)(tb.InteractiveCharacterGrid,{characters:e,config:t,selectedIndex:r,batchSelection:a,onSelect:n,showAddButton:d&&!!s,onAdd:s,foregroundColor:u,backgroundColor:h,showIndices:!1,smallScale:2,minColumns:8,maxColumns:10,gap:4,className:"max-h-[400px] overflow-y-auto",onContextMenu:c})})]})]})]})}function tj({colors:e,onColorsChange:t,className:r=""}){let[a,n]=(0,X.useState)(!1),[s,l]=(0,X.useState)(()=>ec()),[i,o]=(0,X.useState)(()=>eu()),[c,d]=(0,X.useState)(!1),u=(0,th.useOutsideClick)(()=>{n(!1),d(!1)},a),h=(0,X.useCallback)(e=>{"custom"===e.id?d(!0):(l(e.id),eo(e.id),t({foreground:e.foreground,background:e.background,gridColor:e.gridColor}),n(!1))},[t]),x=(0,X.useCallback)((e,r)=>{let a={...i,[e]:r};o(a),ed(a),l("custom"),eo("custom"),t(a)},[i,t]),m=ei(s),f=m?.name||"Custom";return(0,j.jsxs)("div",{className:`relative ${r}`,ref:u,children:[(0,j.jsxs)("button",{onClick:()=>n(!a),className:"flex items-center gap-2 px-3 py-1.5 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-300 hover:border-retro-grid transition-colors","aria-expanded":a,"aria-haspopup":"listbox",children:[(0,j.jsxs)("div",{className:"flex gap-0.5",children:[(0,j.jsx)("div",{className:"w-3 h-3 rounded-sm border border-white/20",style:{backgroundColor:e.foreground}}),(0,j.jsx)("div",{className:"w-3 h-3 rounded-sm border border-white/20",style:{backgroundColor:e.background}})]}),(0,j.jsx)("span",{className:"hidden sm:inline",children:f}),(0,j.jsx)("svg",{className:`w-3 h-3 transition-transform ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&(0,j.jsx)("div",{className:"absolute right-0 mt-1 w-64 bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl z-50 overflow-hidden",children:c?(0,j.jsxs)("div",{className:"p-3 space-y-3",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)("span",{className:"text-sm text-gray-300",children:"Custom Colors"}),(0,j.jsx)("button",{onClick:()=>d(!1),className:"text-xs text-gray-500 hover:text-gray-300",children:"Back"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Foreground"}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("input",{type:"color",value:i.foreground,onChange:e=>x("foreground",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0 bg-transparent"}),(0,j.jsx)("input",{type:"text",value:i.foreground,onChange:e=>x("foreground",e.target.value),className:"flex-1 px-2 py-1 bg-retro-dark border border-retro-grid/50 rounded text-xs text-gray-300 font-mono"})]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Background"}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("input",{type:"color",value:i.background,onChange:e=>x("background",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0 bg-transparent"}),(0,j.jsx)("input",{type:"text",value:i.background,onChange:e=>x("background",e.target.value),className:"flex-1 px-2 py-1 bg-retro-dark border border-retro-grid/50 rounded text-xs text-gray-300 font-mono"})]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Grid Lines"}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("input",{type:"color",value:i.gridColor,onChange:e=>x("gridColor",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0 bg-transparent"}),(0,j.jsx)("input",{type:"text",value:i.gridColor,onChange:e=>x("gridColor",e.target.value),className:"flex-1 px-2 py-1 bg-retro-dark border border-retro-grid/50 rounded text-xs text-gray-300 font-mono"})]})]})]}):(0,j.jsx)("div",{className:"py-1 max-h-80 overflow-y-auto",children:en.map(e=>(0,j.jsxs)("button",{onClick:()=>h(e),className:`
                    w-full flex items-center gap-3 px-3 py-2 text-left text-sm
                    transition-colors
                    ${s===e.id?"bg-retro-cyan/10 text-retro-cyan":"text-gray-300 hover:bg-retro-purple/20"}
                  `,role:"option","aria-selected":s===e.id,children:["custom"!==e.id?(0,j.jsxs)("div",{className:"flex gap-0.5 flex-shrink-0",children:[(0,j.jsx)("div",{className:"w-4 h-4 rounded-sm border border-white/20",style:{backgroundColor:e.foreground}}),(0,j.jsx)("div",{className:"w-4 h-4 rounded-sm border border-white/20",style:{backgroundColor:e.background}})]}):(0,j.jsx)("div",{className:"w-[34px] h-4 flex items-center justify-center",children:(0,j.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})}),(0,j.jsx)("span",{className:"flex-1",children:e.name}),s===e.id&&(0,j.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})})]},e.id))})})]})}function tX({children:e,content:t,shortcut:r,position:a="top",delay:n=300,disabled:s=!1}){let[l,i]=(0,X.useState)(!1),[o,c]=(0,X.useState)(a),d=(0,X.useRef)(null),u=(0,X.useRef)(null),h=(0,X.useRef)(null),x=(0,X.useCallback)(()=>{s||(d.current=setTimeout(()=>{i(!0)},n))},[n,s]),m=(0,X.useCallback)(()=>{d.current&&(clearTimeout(d.current),d.current=null),i(!1)},[]);return(0,X.useEffect)(()=>{if(!l||!u.current||!h.current)return;let e=u.current,t=h.current.getBoundingClientRect(),r=e.getBoundingClientRect(),n=window.innerWidth,s=window.innerHeight,i=a;"top"===a&&t.top-r.height<8?i="bottom":"bottom"===a&&t.bottom+r.height>s-8?i="top":"left"===a&&t.left-r.width<8?i="right":"right"===a&&t.right+r.width>n-8&&(i="left"),i!==o&&c(i)},[l,a,o]),(0,X.useEffect)(()=>()=>{d.current&&clearTimeout(d.current)},[]),(0,j.jsxs)("div",{ref:h,className:"relative inline-flex",onMouseEnter:x,onMouseLeave:m,onFocus:x,onBlur:m,children:[e,l&&(0,j.jsxs)("div",{ref:u,role:"tooltip",className:`
            absolute z-[60] px-2.5 py-1.5 text-xs font-ui
            bg-gray-800/95 text-gray-100 rounded-md shadow-lg
            border border-gray-700/50 backdrop-blur-sm
            pointer-events-none
            animate-in fade-in duration-150
            ${"string"==typeof t?"whitespace-nowrap":""}
            ${{top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"}[o]}
          `,children:["string"==typeof t?(0,j.jsx)("span",{children:t}):t,r&&"string"==typeof t&&(0,j.jsx)("span",{className:"ml-2 text-gray-400 font-mono text-[10px] bg-gray-700/50 px-1.5 py-0.5 rounded",children:r}),(0,j.jsx)("div",{className:`absolute w-0 h-0 border-4 ${{top:"top-full left-1/2 -translate-x-1/2 border-t-gray-800 border-l-transparent border-r-transparent border-b-transparent",bottom:"bottom-full left-1/2 -translate-x-1/2 border-b-gray-800 border-l-transparent border-r-transparent border-t-transparent",left:"left-full top-1/2 -translate-y-1/2 border-l-gray-800 border-t-transparent border-b-transparent border-r-transparent",right:"right-full top-1/2 -translate-y-1/2 border-r-gray-800 border-t-transparent border-b-transparent border-l-transparent"}[o]}`})]})]})}function tw({characterSetName:e,isDirty:t,characterIndex:r,totalCharacters:a,batchMode:n=!1,zoom:s,minZoom:l=8,maxZoom:i=40,zoomStep:o=4,onZoomChange:c,colors:d,onColorsChange:u,onBack:h,hoverCoords:x,className:m=""}){let f=eN(r),p=ek(r);return(0,j.jsxs)("div",{className:`flex items-center gap-4 px-4 py-2 bg-retro-navy/50 border-b border-retro-grid/50 ${m}`,children:[(0,j.jsxs)("button",{onClick:h,className:"flex items-center gap-1 text-xs text-gray-400 hover:text-retro-cyan transition-colors whitespace-nowrap",children:[(0,j.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,j.jsx)("span",{className:"hidden sm:inline",children:"Back"})]}),(0,j.jsx)("div",{className:"w-px h-4 bg-retro-grid/50"}),(0,j.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300 min-w-0",children:[(0,j.jsx)("span",{className:"truncate max-w-[150px] sm:max-w-[200px]",title:e,children:e}),t&&(0,j.jsxs)("span",{className:"flex items-center gap-1.5 flex-shrink-0",title:"Unsaved changes",children:[(0,j.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,j.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-retro-pink opacity-75"}),(0,j.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-retro-pink"})]}),(0,j.jsx)("span",{className:"hidden sm:inline text-xs text-retro-pink font-medium",children:"Unsaved"})]})]}),(0,j.jsx)("div",{className:"w-px h-4 bg-retro-grid/50 hidden sm:block"}),(0,j.jsxs)("div",{className:"hidden sm:flex items-center gap-2 text-sm text-gray-400",children:[(0,j.jsxs)("span",{className:"whitespace-nowrap",children:["Char ",(0,j.jsx)("span",{className:"text-retro-cyan",children:r}),(0,j.jsxs)("span",{className:"text-gray-500",children:["/",a]})]}),f&&(0,j.jsxs)("span",{className:"px-1.5 py-0.5 bg-retro-purple/30 text-retro-cyan rounded text-xs font-mono",title:"Printable ASCII Character",children:["'",String.fromCharCode(r),"'"]}),p&&(0,j.jsxs)("span",{className:"px-1.5 py-0.5 text-xs bg-retro-pink/20 text-retro-pink rounded",title:"ASCII Control Character",children:[" ","(",p,")"]}),n&&(0,j.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-retro-pink/20 text-retro-pink rounded",children:"Batch"})]}),x&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"w-px h-4 bg-retro-grid/50 hidden sm:block"}),(0,j.jsxs)("div",{className:"hidden sm:flex items-center gap-1 text-xs text-gray-500 font-mono",children:[(0,j.jsx)("span",{className:"text-gray-400",children:"Pixel:"}),(0,j.jsxs)("span",{className:"text-retro-cyan",children:["(",x.x,", ",x.y,")"]})]})]}),(0,j.jsx)("div",{className:"flex-1"}),(0,j.jsxs)("div",{className:"flex items-center gap-1",children:[(0,j.jsx)(tX,{content:"Zoom out",shortcut:"-",children:(0,j.jsx)("button",{onClick:()=>{s>l&&c(Math.max(s-o,l))},disabled:s<=l,className:"p-1 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",children:(0,j.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})})}),(0,j.jsxs)("span",{className:"text-xs text-gray-500 w-10 text-center",children:[s,"x"]}),(0,j.jsx)(tX,{content:"Zoom in",shortcut:"+",children:(0,j.jsx)("button",{onClick:()=>{s<i&&c(Math.min(s+o,i))},disabled:s>=i,className:"p-1 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",children:(0,j.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})})]}),(0,j.jsx)("div",{className:"w-px h-4 bg-retro-grid/50"}),(0,j.jsx)(tj,{colors:d,onColorsChange:u})]})}function tC({className:e=""}){return(0,j.jsx)("div",{className:`flex items-center justify-center gap-4 px-4 py-1.5 bg-retro-navy/50 border-t border-retro-grid/50 ${e}`,children:(0,j.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-x-4 gap-y-1 text-[10px] text-gray-500",children:[{keys:"Arrow keys",action:"Navigate"},{keys:"Click",action:"Select"},{keys:"Shift+Click",action:"Multi-select"},{keys:"Del",action:"Delete"},{keys:"Ctrl+S",action:"Save"},{keys:"Ctrl+Z/Y",action:"Undo/Redo"},{keys:"?",action:"Help"}].map(({keys:e,action:t},r)=>(0,j.jsxs)("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[(0,j.jsx)("span",{className:"text-gray-400",children:e}),(0,j.jsxs)("span",{className:"hidden sm:inline",children:[": ",t]})]},r))})})}function tk(e,t={}){let{enabled:r=!0,target:a=null}=t,n=(0,X.useRef)(e);(0,X.useEffect)(()=>{n.current=e},[e]);let s=(0,X.useCallback)(e=>{let t=e.target?.tagName?.toLowerCase();if("input"!==t&&"textarea"!==t&&"select"!==t||e.ctrlKey||e.metaKey)for(let t of n.current){let r=e.key.toLowerCase()===t.key.toLowerCase(),a=!!t.ctrl===(e.ctrlKey||e.metaKey),n=!!t.shift===e.shiftKey,s=!!t.alt===e.altKey;if(r&&a&&n&&s){e.preventDefault(),t.action();return}}},[]);(0,X.useEffect)(()=>{if(!r)return;let e=a||window;return e.addEventListener("keydown",s),()=>{e.removeEventListener("keydown",s)}},[r,a,s])}function tN(e){let t=[],r="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);e.ctrl&&t.push(r?"":"Ctrl"),e.alt&&t.push(r?"":"Alt"),e.shift&&t.push(r?"":"Shift");let a=e.key;return t.push(a=" "===a?"Space":"ArrowUp"===a?"":"ArrowDown"===a?"":"ArrowLeft"===a?"":"ArrowRight"===a?"":"Escape"===a?"Esc":"Delete"===a?"Del":"Backspace"===a?"":a.toUpperCase()),t.join(r?"":"+")}function tS(e){return[{key:"z",ctrl:!0,action:e.undo,description:"Undo",context:"Editor"},{key:"z",ctrl:!0,shift:!0,action:e.redo,description:"Redo",context:"Editor"},{key:"y",ctrl:!0,action:e.redo,description:"Redo",context:"Editor"},{key:"s",ctrl:!0,action:e.save,description:"Save",context:"Editor"},{key:"r",action:e.rotateRight,description:"Rotate right",context:"Editor"},{key:"r",shift:!0,action:e.rotateLeft,description:"Rotate left",context:"Editor"},{key:"w",action:e.shiftUp,description:"Shift up",context:"Editor"},{key:"s",action:e.shiftDown,description:"Shift down",context:"Editor"},{key:"a",action:e.shiftLeft,description:"Shift left",context:"Editor"},{key:"d",action:e.shiftRight,description:"Shift right",context:"Editor"},{key:"i",action:e.invert,description:"Invert colors",context:"Editor"},{key:"h",action:e.flipHorizontal,description:"Flip horizontal",context:"Editor"},{key:"v",action:e.flipVertical,description:"Flip vertical",context:"Editor"},{key:"a",ctrl:!0,action:e.selectAll,description:"Select all",context:"Sidebar"},{key:"Delete",action:e.deleteSelected,description:"Delete selected",context:"Sidebar"},{key:"Backspace",action:e.deleteSelected,description:"Delete selected",context:"Sidebar"},{key:"n",ctrl:!0,action:e.addCharacter,description:"Add new character",context:"Editor"},{key:"?",action:e.showHelp,description:"Show keyboard shortcuts",context:"Global"},...e.navigatePrev?[{key:"ArrowUp",action:e.navigatePrev,description:"Previous character",context:"Navigation"}]:[],...e.navigateNext?[{key:"ArrowDown",action:e.navigateNext,description:"Next character",context:"Navigation"}]:[],...e.navigatePageUp?[{key:"PageUp",action:e.navigatePageUp,description:"Jump 16 characters up",context:"Navigation"}]:[],...e.navigatePageDown?[{key:"PageDown",action:e.navigatePageDown,description:"Jump 16 characters down",context:"Navigation"}]:[],...e.navigateFirst?[{key:"Home",action:e.navigateFirst,description:"First character",context:"Navigation"}]:[],...e.navigateLast?[{key:"End",action:e.navigateLast,description:"Last character",context:"Navigation"}]:[],...e.goToCharacter?[{key:"g",action:e.goToCharacter,description:"Go to character",context:"Navigation"}]:[],...e.showAsciiMap?[{key:"m",action:e.showAsciiMap,description:"Show ASCII map",context:"Navigation"}]:[],...e.showTextPreview?[{key:"t",action:e.showTextPreview,description:"Text preview",context:"View"}]:[],...e.showSnapshots?[{key:"s",ctrl:!0,shift:!0,action:e.showSnapshots,description:"Snapshots",context:"Editor"}]:[]]}function tM({isOpen:e,onClose:t,shortcuts:r}){if((0,X.useEffect)(()=>{if(!e)return;let r=e=>{"Escape"===e.key&&(e.preventDefault(),t())};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e,t]),(0,X.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),!e)return null;let a=r.reduce((e,t)=>{let r=t.context||"General";return e[r]||(e[r]=[]),e[r].push(t),e},{}),n=["Editor","Sidebar","Global"],s=Object.keys(a).sort((e,t)=>{let r=n.indexOf(e),a=n.indexOf(t);return -1===r&&-1===a?e.localeCompare(t):-1===r?1:-1===a?-1:r-a});return(0,j.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,j.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,j.jsxs)("div",{className:"relative w-full max-w-lg bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl overflow-hidden",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-retro-grid/30",children:[(0,j.jsx)("h2",{className:"text-lg font-medium text-white",children:"Keyboard Shortcuts"}),(0,j.jsx)("button",{onClick:t,className:"p-1 text-gray-400 hover:text-white transition-colors","aria-label":"Close",children:(0,j.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,j.jsx)("div",{className:"p-4 max-h-[60vh] overflow-y-auto space-y-6",children:s.map(e=>(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{className:"text-sm font-medium text-retro-cyan mb-2",children:e}),(0,j.jsx)("div",{className:"space-y-1",children:a[e].map((t,r)=>(0,j.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2 rounded hover:bg-retro-purple/10",children:[(0,j.jsx)("span",{className:"text-sm text-gray-300",children:t.description}),(0,j.jsx)("kbd",{className:"px-2 py-0.5 text-xs font-mono bg-retro-dark border border-retro-grid/50 rounded text-gray-400",children:tN(t)})]},`${e}-${r}`))})]},e))}),(0,j.jsx)("div",{className:"px-4 py-3 border-t border-retro-grid/30 text-center",children:(0,j.jsxs)("span",{className:"text-xs text-gray-500",children:["Press ",(0,j.jsx)("kbd",{className:"px-1 py-0.5 bg-retro-dark border border-retro-grid/50 rounded text-gray-400",children:"Esc"})," or ",(0,j.jsx)("kbd",{className:"px-1 py-0.5 bg-retro-dark border border-retro-grid/50 rounded text-gray-400",children:"?"})," to close"]})})]})]})}function tL({pixels:e,label:t,foregroundColor:r="#ffffff",backgroundColor:a="#000000"}){let n=e.length,s=e[0]?.length||0;return(0,j.jsxs)("div",{className:"flex flex-col items-center gap-0.5",children:[(0,j.jsx)("span",{className:"text-[9px] text-gray-400 uppercase",children:t}),(0,j.jsx)("div",{className:"border border-gray-600",style:{width:3*s,height:3*n,display:"grid",gridTemplateColumns:`repeat(${s}, 3px)`,gridTemplateRows:`repeat(${n}, 3px)`},children:e.flat().map((e,t)=>(0,j.jsx)("div",{style:{backgroundColor:e?r:a,width:3,height:3}},t))})]})}function tE({before:e,after:t,label:r,shortcut:a}){return(0,j.jsxs)("div",{className:"flex flex-col gap-1.5 p-1",children:[(0,j.jsxs)("div",{className:"flex items-center gap-1",children:[(0,j.jsx)("span",{className:"text-xs font-medium",children:r}),a&&(0,j.jsx)("span",{className:"text-gray-400 font-mono text-[10px] bg-gray-700/50 px-1.5 py-0.5 rounded",children:a})]}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(tL,{pixels:e,label:"Before"}),(0,j.jsx)("span",{className:"text-gray-500",children:""}),(0,j.jsx)(tL,{pixels:t,label:"After"})]})]})}function tR({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}function tD({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}function tA({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}function tI({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}function tB({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}function tT({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{transform:"scaleX(-1)"},children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}function tz({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h8M8 12h8m-8 5h8M4 3v18m16-18v18"})})}function t$({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8v8M12 8v8m5-8v8M3 4h18M3 20h18"})})}function tP({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}function tF({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"1",strokeWidth:2})})}function tO({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,viewBox:"0 0 24 24",children:(0,j.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"1",fill:"currentColor"})})}function tW({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}function t_({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}function tH({className:e="w-4 h-4"}){return(0,j.jsxs)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,j.jsx)("circle",{cx:"12",cy:"12",r:"3",strokeWidth:2}),(0,j.jsx)("path",{strokeLinecap:"round",strokeWidth:2,d:"M12 2v4m0 12v4M2 12h4m12 0h4"})]})}function tU({className:e="w-4 h-4"}){return(0,j.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4l4 4m0-4H4v4m16-4l-4 4m4 0V4h-4m-12 16l4-4m-4 0v4h4m12 0l-4-4m4 0v4h-4"})})}function tK({onClick:e,disabled:t,tooltip:r,shortcut:a,previewContent:n,children:s,className:l=""}){return(0,j.jsx)(tX,{content:n||r,shortcut:n?void 0:a,position:"left",children:(0,j.jsx)("button",{onClick:e,disabled:t,className:`
          p-2 rounded transition-colors
          ${t?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-retro-cyan hover:bg-retro-purple/30"}
          ${l}
        `,children:s})})}function tG(){return(0,j.jsx)("div",{className:"w-full h-px bg-retro-grid/30 my-2"})}function tV({children:e}){return(0,j.jsx)("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider text-center mb-1",children:e})}function tY({character:e,characterWidth:t=8,characterHeight:r=8,onShift:a,onRotate:n,onFlipHorizontal:s,onFlipVertical:l,onInvert:i,onClear:o,onFill:c,onCenter:d,onScale:u,onDelete:h,onCopy:x,disabled:m=!1,className:f=""}){let p=(0,X.useCallback)(()=>a("up"),[a]),g=(0,X.useCallback)(()=>a("down"),[a]),b=(0,X.useCallback)(()=>a("left"),[a]),y=(0,X.useCallback)(()=>a("right"),[a]),v=(0,X.useCallback)(()=>n("left"),[n]),w=(0,X.useCallback)(()=>n("right"),[n]),C=(0,X.useMemo)(()=>{if(!e)return null;let a=e.pixels;return{shiftUp:(0,j.jsx)(tE,{before:a,after:H(e,"up").pixels,label:"Shift Up",shortcut:"W"}),shiftDown:(0,j.jsx)(tE,{before:a,after:H(e,"down").pixels,label:"Shift Down",shortcut:"S"}),shiftLeft:(0,j.jsx)(tE,{before:a,after:H(e,"left").pixels,label:"Shift Left",shortcut:"A"}),shiftRight:(0,j.jsx)(tE,{before:a,after:H(e,"right").pixels,label:"Shift Right",shortcut:"D"}),rotateLeft:(0,j.jsx)(tE,{before:a,after:_(e,"left").pixels,label:"Rotate Left",shortcut:"Shift+R"}),rotateRight:(0,j.jsx)(tE,{before:a,after:_(e,"right").pixels,label:"Rotate Right",shortcut:"R"}),flipHorizontal:(0,j.jsx)(tE,{before:a,after:G(e).pixels,label:"Flip Horizontal",shortcut:"H"}),flipVertical:(0,j.jsx)(tE,{before:a,after:V(e).pixels,label:"Flip Vertical",shortcut:"V"}),invert:(0,j.jsx)(tE,{before:a,after:K(e).pixels,label:"Invert Colors",shortcut:"I"}),center:(0,j.jsx)(tE,{before:a,after:er(e).pixels,label:"Center Content"}),clear:(0,j.jsx)(tE,{before:a,after:S(t,r).pixels,label:"Clear"}),fill:(0,j.jsx)(tE,{before:a,after:q(t,r).pixels,label:"Fill"})}},[e,t,r]);return(0,j.jsxs)("div",{className:`
        flex flex-col items-center p-2 bg-retro-navy/50 border-l border-retro-grid/30 overflow-hidden
        ${f}
      `,children:[(0,j.jsx)(tV,{children:"Shift"}),(0,j.jsxs)("div",{className:"flex flex-col items-center gap-0.5",children:[(0,j.jsx)(tK,{onClick:p,disabled:m,tooltip:"Shift Up",shortcut:"W",previewContent:C?.shiftUp,children:(0,j.jsx)(tR,{})}),(0,j.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,j.jsx)(tK,{onClick:b,disabled:m,tooltip:"Shift Left",shortcut:"A",previewContent:C?.shiftLeft,children:(0,j.jsx)(tA,{})}),(0,j.jsx)(tK,{onClick:d||(()=>{}),disabled:m||!d,tooltip:"Center Content",previewContent:C?.center,children:(0,j.jsx)(tH,{})}),(0,j.jsx)(tK,{onClick:y,disabled:m,tooltip:"Shift Right",shortcut:"D",previewContent:C?.shiftRight,children:(0,j.jsx)(tI,{})})]}),(0,j.jsx)(tK,{onClick:g,disabled:m,tooltip:"Shift Down",shortcut:"S",previewContent:C?.shiftDown,children:(0,j.jsx)(tD,{})})]}),(0,j.jsx)(tG,{}),(0,j.jsx)(tV,{children:"Rotate"}),(0,j.jsxs)("div",{className:"flex items-center gap-1",children:[(0,j.jsx)(tK,{onClick:v,disabled:m,tooltip:"Rotate Left",shortcut:"Shift+R",previewContent:C?.rotateLeft,children:(0,j.jsx)(tB,{})}),(0,j.jsx)(tK,{onClick:w,disabled:m,tooltip:"Rotate Right",shortcut:"R",previewContent:C?.rotateRight,children:(0,j.jsx)(tT,{})})]}),(0,j.jsx)(tG,{}),(0,j.jsx)(tV,{children:"Flip"}),(0,j.jsxs)("div",{className:"flex items-center gap-1",children:[(0,j.jsx)(tK,{onClick:s,disabled:m,tooltip:"Flip Horizontal",shortcut:"H",previewContent:C?.flipHorizontal,children:(0,j.jsx)(tz,{})}),(0,j.jsx)(tK,{onClick:l,disabled:m,tooltip:"Flip Vertical",shortcut:"V",previewContent:C?.flipVertical,children:(0,j.jsx)(t$,{})})]}),(0,j.jsx)(tG,{}),(0,j.jsx)(tV,{children:"Effects"}),(0,j.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,j.jsx)(tK,{onClick:i,disabled:m,tooltip:"Invert Colors",shortcut:"I",previewContent:C?.invert,children:(0,j.jsx)(tP,{})}),(0,j.jsxs)("div",{className:"flex items-center gap-1",children:[(0,j.jsx)(tK,{onClick:o,disabled:m,tooltip:"Clear",previewContent:C?.clear,children:(0,j.jsx)(tF,{})}),(0,j.jsx)(tK,{onClick:c,disabled:m,tooltip:"Fill",previewContent:C?.fill,children:(0,j.jsx)(tO,{})})]})]}),u&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(tG,{}),(0,j.jsx)(tV,{children:"Scale"}),(0,j.jsx)(tK,{onClick:u,disabled:m,tooltip:"Scale Character",children:(0,j.jsx)(tU,{})})]}),(x||h)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(tG,{}),(0,j.jsx)(tV,{children:"Char"}),(0,j.jsxs)("div",{className:"flex items-center gap-1",children:[x&&(0,j.jsx)(tK,{onClick:x,disabled:m,tooltip:"Copy from character set",shortcut:"C",children:(0,j.jsx)(t_,{})}),h&&(0,j.jsx)(tK,{onClick:h,disabled:m,tooltip:"Delete character",shortcut:"Del",className:"hover:text-red-400",children:(0,j.jsx)(tW,{})})]})]})]})}function tq({manufacturer:e,system:t,onManufacturerChange:r,onSystemChange:a,disabled:n=!1,className:s=""}){let[l,i]=(0,X.useState)(!1),[o,c]=(0,X.useState)(!1),[d,u]=(0,X.useState)(""),[h,x]=(0,X.useState)(""),m=(0,X.useMemo)(()=>ef.map(e=>e.manufacturer),[]),f=(0,X.useMemo)(()=>e?ew(e):[],[e]),p=e&&!m.includes(e),g=t&&!f.includes(t),b=(0,X.useCallback)(e=>{let t=e.target.value;"__custom__"===t?(i(!0),u("")):(r(t),a(""),i(!1))},[r,a]),y=(0,X.useCallback)(()=>{d.trim()&&(r(d.trim()),a(""),i(!1),u(""))},[d,r,a]),v=(0,X.useCallback)(()=>{i(!1),u("")},[]),w=(0,X.useCallback)(e=>{let t=e.target.value;"__custom__"===t?(c(!0),x("")):(a(t),c(!1))},[a]),C=(0,X.useCallback)(()=>{h.trim()&&(a(h.trim()),c(!1),x(""))},[h,a]),k=(0,X.useCallback)(()=>{c(!1),x("")},[]),N=(0,X.useCallback)((e,t)=>{"Enter"===e.key?(e.preventDefault(),t()):"Escape"===e.key&&(e.preventDefault(),l&&v(),o&&k())},[l,o,v,k]),S=`
    w-full px-3 py-2 bg-retro-navy/50 border border-retro-grid/50 rounded-lg
    text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50
    transition-colors disabled:opacity-50 disabled:cursor-not-allowed
  `,M=`
    flex-1 px-3 py-2 bg-retro-navy/50 border border-retro-grid/50 rounded-lg
    text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:border-retro-cyan/50
    transition-colors
  `,L=`
    px-3 py-2 text-sm rounded-lg transition-colors
  `;return(0,j.jsxs)("div",{className:`space-y-4 ${s}`,children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Manufacturer"}),l?(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),onKeyDown:e=>N(e,y),placeholder:"Enter manufacturer name...",className:M,autoFocus:!0,disabled:n}),(0,j.jsx)("button",{onClick:y,disabled:n||!d.trim(),className:`${L} bg-retro-cyan/20 text-retro-cyan hover:bg-retro-cyan/30 disabled:opacity-50`,children:"Add"}),(0,j.jsx)("button",{onClick:v,disabled:n,className:`${L} bg-retro-grid/20 text-gray-400 hover:bg-retro-grid/30`,children:"Cancel"})]}):(0,j.jsxs)("select",{value:p?"":e,onChange:b,disabled:n,className:S,children:[(0,j.jsx)("option",{value:"",children:"Select manufacturer..."}),m.map(e=>(0,j.jsx)("option",{value:e,children:e},e)),(0,j.jsx)("option",{value:"__custom__",children:"Other (custom)..."}),p&&(0,j.jsxs)("option",{value:e,disabled:!0,children:[e," (custom)"]})]}),p&&!l&&(0,j.jsxs)("div",{className:"mt-1.5 flex items-center gap-2",children:[(0,j.jsxs)("span",{className:"text-xs text-gray-500",children:["Custom: ",(0,j.jsx)("span",{className:"text-retro-cyan",children:e})]}),(0,j.jsx)("button",{onClick:()=>{r(""),a("")},className:"text-xs text-gray-500 hover:text-retro-pink",disabled:n,children:"Clear"})]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"System"}),o?(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),onKeyDown:e=>N(e,C),placeholder:"Enter system name...",className:M,autoFocus:!0,disabled:n}),(0,j.jsx)("button",{onClick:C,disabled:n||!h.trim(),className:`${L} bg-retro-cyan/20 text-retro-cyan hover:bg-retro-cyan/30 disabled:opacity-50`,children:"Add"}),(0,j.jsx)("button",{onClick:k,disabled:n,className:`${L} bg-retro-grid/20 text-gray-400 hover:bg-retro-grid/30`,children:"Cancel"})]}):(0,j.jsxs)("select",{value:g?"":t,onChange:w,disabled:n||!e,className:S,children:[(0,j.jsx)("option",{value:"",children:e?"Select system...":"Select a manufacturer first..."}),f.map(e=>(0,j.jsx)("option",{value:e,children:e},e)),e&&(0,j.jsx)("option",{value:"__custom__",children:"Other (custom)..."}),g&&(0,j.jsxs)("option",{value:t,disabled:!0,children:[t," (custom)"]})]}),g&&!o&&(0,j.jsxs)("div",{className:"mt-1.5 flex items-center gap-2",children:[(0,j.jsxs)("span",{className:"text-xs text-gray-500",children:["Custom: ",(0,j.jsx)("span",{className:"text-retro-cyan",children:t})]}),(0,j.jsx)("button",{onClick:()=>a(""),className:"text-xs text-gray-500 hover:text-retro-pink",disabled:n,children:"Clear"})]})]})]})}function tJ({isOpen:e,onClose:t,metadata:r,onSave:a}){let[n,s]=(0,X.useState)(r.name),[l,i]=(0,X.useState)(r.description),[o,c]=(0,X.useState)(r.source),[d,u]=(0,X.useState)(r.manufacturer),[h,x]=(0,X.useState)(r.system),[m,f]=(0,X.useState)(r.isPinned??!1),[p,g]=(0,X.useState)(!1);(0,X.useEffect)(()=>{e&&(s(r.name),i(r.description),c(r.source),u(r.manufacturer),x(r.system),f(r.isPinned??!1))},[e,r]);let b=async()=>{if(n.trim()){g(!0);try{await a({name:n.trim(),description:l.trim(),source:o.trim()||"yourself",manufacturer:d,system:h,isPinned:m}),t()}finally{g(!1)}}};return e?(0,j.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,j.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,j.jsxs)("div",{className:"relative w-full max-w-md bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-retro-grid/30",children:[(0,j.jsx)("h2",{className:"text-lg font-medium text-white",children:"Edit Metadata"}),(0,j.jsx)("button",{onClick:t,className:"p-1 text-gray-400 hover:text-white transition-colors",children:(0,j.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,j.jsxs)("div",{className:"p-4 space-y-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"block text-sm text-gray-300 mb-1",children:["Name ",(0,j.jsx)("span",{className:"text-retro-pink",children:"*"})]}),(0,j.jsx)("input",{type:"text",value:n,onChange:e=>s(e.target.value),placeholder:"Character set name",className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan",autoFocus:!0})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Description"}),(0,j.jsx)("textarea",{value:l,onChange:e=>i(e.target.value),placeholder:"Optional description",rows:2,className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan resize-none"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Manufacturer & System"}),(0,j.jsx)(tq,{manufacturer:d,system:h,onManufacturerChange:u,onSystemChange:x})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Source / Attribution"}),(0,j.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"yourself",className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan"})]}),(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300",children:"Pin to top"}),(0,j.jsx)("p",{className:"text-xs text-gray-500",children:"Pinned items appear first in search results"})]}),(0,j.jsx)("button",{type:"button",onClick:()=>f(!m),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-retro-cyan focus:ring-offset-2 focus:ring-offset-retro-dark ${m?"bg-retro-pink border-retro-pink":"bg-retro-purple/50 border-retro-purple"}`,role:"switch","aria-checked":m,children:(0,j.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full shadow ring-0 transition duration-200 ease-in-out ${m?"translate-x-5 bg-white":"translate-x-0 bg-gray-400"}`})})]})]}),(0,j.jsxs)("div",{className:"flex gap-3 p-4 border-t border-retro-grid/30",children:[(0,j.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,j.jsx)("button",{onClick:b,disabled:!n.trim()||p,className:"flex-1 px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving...":"Save"})]})]})]}):null}e.s(["CharacterSetOverview",()=>ty],59160),e.s(["EditorSidebar",()=>tv],42187),e.s(["ColorPresetSelector",()=>tj],95879),e.s(["EditorHeader",()=>tw],87355),e.s(["EditorFooter",()=>tC],45835),e.s(["createEditorShortcuts",()=>tS,"formatShortcut",()=>tN,"useKeyboardShortcuts",()=>tk],3573),e.s(["KeyboardShortcutsHelp",()=>tM],43237),e.s(["TransformToolbar",()=>tY],99401),e.s(["ManufacturerSystemSelect",()=>tq],87188),e.s(["MetadataEditModal",()=>tJ],16244);let tZ=["tl","tc","tr","ml","mc","mr","bl","bc","br"];function tQ({isOpen:e,onClose:t,currentWidth:r,currentHeight:a,onResize:n}){let[s,l]=(0,X.useState)(r),[i,o]=(0,X.useState)(a),[c,d]=(0,X.useState)("tl"),u=(0,X.useCallback)(()=>{s>0&&i>0&&(n(s,i,c),t())},[s,i,c,n,t]),h=(0,X.useCallback)(e=>{"Escape"===e.key?t():"Enter"===e.key&&u()},[t,u]);if(!e)return null;let x=s!==r||i!==a;return(0,j.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:h,children:[(0,j.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,j.jsxs)("div",{className:"relative w-full max-w-sm bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,j.jsx)("h2",{className:"text-lg font-medium text-white mb-4",children:"Resize Characters"}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Width"}),(0,j.jsx)("input",{type:"number",min:1,max:32,value:s,onChange:e=>l(Math.max(1,Math.min(32,parseInt(e.target.value)||1))),className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan",autoFocus:!0})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Height"}),(0,j.jsx)("input",{type:"number",min:1,max:32,value:i,onChange:e=>o(Math.max(1,Math.min(32,parseInt(e.target.value)||1))),className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]})]}),(0,j.jsxs)("div",{className:"mb-6",children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Anchor Position"}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Select where to anchor existing content when resizing"}),(0,j.jsx)("div",{className:"grid grid-cols-3 gap-1 w-32 mx-auto",children:tZ.map(e=>{let t=c===e;return(0,j.jsx)("button",{type:"button",onClick:()=>d(e),className:`
                    w-10 h-10 rounded border-2 transition-all
                    flex items-center justify-center
                    ${t?"border-retro-cyan bg-retro-cyan/20":"border-retro-grid/50 bg-retro-dark hover:border-retro-grid"}
                  `,title:{tl:"Top Left",tc:"Top Center",tr:"Top Right",ml:"Middle Left",mc:"Middle Center",mr:"Middle Right",bl:"Bottom Left",bc:"Bottom Center",br:"Bottom Right"}[e],children:(0,j.jsx)("div",{className:`
                      w-3 h-3 rounded-sm transition-colors
                      ${t?"bg-retro-cyan":"bg-gray-600"}
                    `})},e)})})]}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mb-4 text-center h-4",children:x?s>r||i>a?"New pixels will be added with background color":s<r||i<a?"Some pixels will be cropped":"No changes":"No changes"}),(0,j.jsxs)("div",{className:"flex gap-3",children:[(0,j.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,j.jsx)("button",{onClick:u,disabled:!x||s<1||i<1,className:"flex-1 px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply"})]})]})]})}function t0({currentWidth:e,currentHeight:t,onSelect:r,className:a=""}){let[n,s]=(0,X.useState)(!1),l=(0,X.useRef)(null);(0,X.useEffect)(()=>{function e(e){l.current&&!l.current.contains(e.target)&&s(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let i=function(){let e={};for(let t of eg)e[t.manufacturer]||(e[t.manufacturer]=[]),e[t.manufacturer].push(t);return e}(),o=(r,a)=>e===r&&t===a;return(0,j.jsxs)("div",{className:`relative ${a}`,ref:l,children:[(0,j.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[[{label:"8x8",width:8,height:8},{label:"8x16",width:8,height:16},{label:"5x7",width:5,height:7}].map(e=>(0,j.jsx)("button",{type:"button",onClick:()=>r(e.width,e.height),className:`
              px-2 py-1 text-xs rounded border transition-colors
              ${o(e.width,e.height)?"border-retro-pink bg-retro-pink/10 text-retro-pink":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
            `,children:e.label},e.label)),(0,j.jsxs)("button",{type:"button",onClick:()=>s(!n),className:"px-2 py-1 text-xs rounded border border-retro-grid/50 text-gray-400 hover:border-retro-grid flex items-center gap-1",children:["More",(0,j.jsx)("svg",{className:`w-3 h-3 transition-transform ${n?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),n&&(0,j.jsxs)("div",{className:"absolute z-10 left-0 top-full mt-1 w-64 max-h-80 overflow-y-auto bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl",children:[(0,j.jsxs)("div",{className:"p-2 border-b border-retro-grid/30",children:[(0,j.jsx)("div",{className:"text-[10px] text-gray-500 uppercase mb-1",children:"Standard Formats"}),(0,j.jsx)("div",{className:"flex flex-wrap gap-1",children:ej.map(e=>(0,j.jsxs)("button",{onClick:()=>{r(e.width,e.height),s(!1)},className:`
                    px-2 py-1 text-xs rounded transition-colors
                    ${o(e.width,e.height)?"bg-retro-pink/20 text-retro-pink":"text-gray-400 hover:bg-retro-grid/20"}
                  `,title:e.systems.join(", "),children:[e.width,"x",e.height]},e.name))})]}),Object.entries(i).filter(([,e])=>e.length>0).map(([e,t])=>(0,j.jsxs)("div",{className:"p-2 border-b border-retro-grid/30 last:border-0",children:[(0,j.jsx)("div",{className:"text-[10px] text-gray-500 uppercase mb-1",children:e}),(0,j.jsx)("div",{className:"flex flex-wrap gap-1",children:t.map(e=>(0,j.jsx)("button",{onClick:()=>{r(e.width,e.height),s(!1)},className:`
                        px-2 py-1 text-xs rounded transition-colors
                        ${o(e.width,e.height)?"bg-retro-cyan/20 text-retro-cyan":"text-gray-400 hover:bg-retro-grid/20"}
                      `,children:e.system},`${e.system}-${e.width}x${e.height}`))})]},e))]})]})}function t1({currentCount:e,onSelect:t,className:r=""}){let[a,n]=(0,X.useState)(!1),s=(0,X.useRef)(null);(0,X.useEffect)(()=>{function e(e){s.current&&!s.current.contains(e.target)&&n(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let l=function(){let e={};for(let t of eb)e[t.manufacturer]||(e[t.manufacturer]=[]),e[t.manufacturer].push(t);return e}();return(0,j.jsxs)("div",{className:`relative ${r}`,ref:s,children:[(0,j.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[[{label:"64",count:64},{label:"128",count:128},{label:"256",count:256},{label:"512",count:512}].map(r=>(0,j.jsx)("button",{type:"button",onClick:()=>t(r.count),className:`
              px-2 py-1 text-xs rounded border transition-colors
              ${e===r.count?"border-retro-cyan bg-retro-cyan/10 text-retro-cyan":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
            `,children:r.label},r.label)),(0,j.jsxs)("button",{type:"button",onClick:()=>n(!a),className:"px-2 py-1 text-xs rounded border border-retro-grid/50 text-gray-400 hover:border-retro-grid flex items-center gap-1",children:["More",(0,j.jsx)("svg",{className:`w-3 h-3 transition-transform ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),a&&(0,j.jsxs)("div",{className:"absolute z-10 left-0 top-full mt-1 w-64 max-h-80 overflow-y-auto bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl",children:[(0,j.jsxs)("div",{className:"p-2 border-b border-retro-grid/30",children:[(0,j.jsx)("div",{className:"text-[10px] text-gray-500 uppercase mb-1",children:"Standard Counts"}),(0,j.jsx)("div",{className:"flex flex-wrap gap-1",children:eX.map(r=>(0,j.jsx)("button",{onClick:()=>{t(r.count),n(!1)},className:`
                    px-2 py-1 text-xs rounded transition-colors
                    ${e===r.count?"bg-retro-cyan/20 text-retro-cyan":"text-gray-400 hover:bg-retro-grid/20"}
                  `,title:r.systems.join(", "),children:r.count},r.name))})]}),Object.entries(l).filter(([,e])=>e.length>0).map(([r,a])=>(0,j.jsxs)("div",{className:"p-2 border-b border-retro-grid/30 last:border-0",children:[(0,j.jsx)("div",{className:"text-[10px] text-gray-500 uppercase mb-1",children:r}),(0,j.jsx)("div",{className:"flex flex-wrap gap-1",children:a.map(r=>(0,j.jsx)("button",{onClick:()=>{t(r.count),n(!1)},className:`
                        px-2 py-1 text-xs rounded transition-colors
                        ${e===r.count?"bg-retro-cyan/20 text-retro-cyan":"text-gray-400 hover:bg-retro-grid/20"}
                      `,title:`${r.count} characters`,children:r.system},`${r.system}-${r.count}`))})]},r))]})]})}function t2(){let[e,t]=(0,X.useState)([]),[r,a]=(0,X.useState)(!0),[n,s]=(0,X.useState)(null),[l,i]=(0,X.useState)([]),o=(0,X.useCallback)(async()=>{try{if(a(!0),s(null),await W.initialize(),await W.isEmpty()){let e,t,r,a;for(let n of[(e=Date.now(),{metadata:{id:"c64-uppercase",name:"C64 Uppercase",description:"Commodore 64 uppercase character set (representative sample)",source:"RetroStack",manufacturer:"Commodore",system:"C64",createdAt:e,updatedAt:e,isBuiltIn:!0},config:{width:8,height:8,padding:"right",bitDirection:"ltr"},binaryData:I(ex())}),(t=Date.now(),{metadata:{id:"apple2-charset",name:"Apple II",description:"Apple II character set (representative sample)",source:"RetroStack",manufacturer:"Apple",system:"Apple II",createdAt:t,updatedAt:t,isBuiltIn:!0},config:{width:8,height:8,padding:"right",bitDirection:"ltr"},binaryData:I(ex())}),(r=Date.now(),{metadata:{id:"zx-spectrum-charset",name:"ZX Spectrum",description:"ZX Spectrum character set (representative sample)",source:"RetroStack",manufacturer:"Sinclair",system:"ZX Spectrum",createdAt:r,updatedAt:r,isBuiltIn:!0},config:{width:8,height:8,padding:"right",bitDirection:"ltr"},binaryData:I(ex())}),(a=Date.now(),{metadata:{id:"ibm-cga-charset",name:"IBM PC CGA",description:"IBM PC CGA 8x8 character set (representative sample)",source:"RetroStack",manufacturer:"IBM",system:"PC CGA",createdAt:a,updatedAt:a,isBuiltIn:!0},config:{width:8,height:8,padding:"right",bitDirection:"ltr"},binaryData:I(ex())})])await W.save(n)}let e=await W.getAll();t(e);let r=await W.getAvailableSizes();i(r)}catch(e){s(e instanceof Error?e.message:"Failed to load library")}finally{a(!1)}},[]);(0,X.useEffect)(()=>{o()},[o]);let c=(0,X.useCallback)(async()=>{await o()},[o]),d=(0,X.useCallback)(async e=>{try{let t=await W.getById(e);if(!t)return null;return z(t)}catch(e){return console.error("Failed to get character set:",e),null}},[]),u=(0,X.useCallback)(async e=>{try{let t=T(e),r=await W.save(t);return await c(),r}catch(e){throw Error(e instanceof Error?e.message:"Failed to save character set")}},[c]),h=(0,X.useCallback)(async(e,t)=>{try{let r={...e,metadata:{...e.metadata,id:E(),name:t,createdAt:Date.now(),updatedAt:Date.now(),isBuiltIn:!1,source:"yourself"}},a=T(r),n=await W.save(a);return await c(),n}catch(e){throw Error(e instanceof Error?e.message:"Failed to save character set")}},[c]),x=(0,X.useCallback)(async(e,t)=>{try{let r=await W.getById(e);if(!r)throw Error("Character set not found");let a={...r,metadata:{...r.metadata,name:t,updatedAt:Date.now()}};await W.save(a),await c()}catch(e){throw Error(e instanceof Error?e.message:"Failed to rename character set")}},[c]),m=(0,X.useCallback)(async e=>{try{await W.delete(e),await c()}catch(e){throw Error(e instanceof Error?e.message:"Failed to delete character set")}},[c]),f=(0,X.useCallback)(async e=>{try{await W.togglePinned(e),await c()}catch(e){throw Error(e instanceof Error?e.message:"Failed to toggle pinned state")}},[c]),p=(0,X.useCallback)(async t=>t.trim()?W.search(t):e,[e]),g=(0,X.useCallback)(async(t,r)=>null===t&&null===r?e:W.filterBySize(t,r),[e]);return{characterSets:e,loading:r,error:n,refresh:c,getById:d,save:u,saveAs:h,rename:x,deleteSet:m,togglePinned:f,search:p,filterBySize:g,availableSizes:l,nameExists:(0,X.useCallback)(async(e,t)=>W.nameExists(e,t),[])}}function t4(e){return JSON.parse(JSON.stringify(e))}function t5(e){let{state:t,setState:r,resetState:a,undo:n,redo:s,canUndo:l,canRedo:i}=function(e,t=1/0){let[r,a]=(0,X.useState)([]),[n,s]=(0,X.useState)([]),[l,i]=(0,X.useState)(e),o=(0,X.useCallback)(e=>{a(e=>{let r=[...e,l];return r.length>t&&(r=r.slice(-t)),r}),s([]),i(e)},[l,t]),c=(0,X.useCallback)(e=>{a([]),s([]),i(e)},[]),d=(0,X.useCallback)(()=>{a(e=>{if(0===e.length)return e;let t=e[e.length-1],r=e.slice(0,-1);return s(e=>[l,...e]),i(t),r})},[l]),u=(0,X.useCallback)(()=>{s(e=>{if(0===e.length)return e;let t=e[0],r=e.slice(1);return a(e=>[...e,l]),i(t),r})},[l]),h=(0,X.useCallback)(()=>{a([]),s([])},[]);return{state:l,setState:o,resetState:c,undo:d,redo:u,canUndo:r.length>0,canRedo:n.length>0,historyLength:r.length+n.length,clearHistory:h}}(e?{characters:e.characters.map(M),config:{...e.config}}:{characters:[],config:{width:8,height:8,padding:"right",bitDirection:"ltr"}}),[o,c]=(0,X.useState)(0),[d,u]=(0,X.useState)(new Set),[h,x]=(0,X.useState)(!1),[,m]=(0,X.useState)(null),f=(0,X.useMemo)(()=>{let e=new Set(d);return e.add(o),e},[o,d]),p=(0,X.useCallback)(e=>{r(e(t4(t))),x(!0)},[t,r]),[g,b]=(0,X.useState)(null),y=(0,X.useCallback)((e,t,r=!1)=>{if(r)u(t=>{let r=new Set(t);if(e===o){if(r.size>0){let[e]=r;r.delete(e),r.add(o),c(e)}}else r.has(e)?r.delete(e):r.add(e);return r});else if(t){let t=g??o,r=Math.min(t,e),a=Math.max(t,e),n=new Set;for(let e=r;e<=a;e++)n.add(e);c(e),n.delete(e),u(n)}else c(e),b(e),u(new Set)},[o,g]),v=(0,X.useCallback)(()=>{u(new Set)},[]),j=(0,X.useCallback)(()=>{u(new Set(Array.from({length:t.characters.length},(e,t)=>t)))},[t.characters.length]),w=(0,X.useCallback)((e,t)=>{p(r=>{if(f.size>1)r.characters=et(r.characters,f,e,t);else{let a=r.characters[o];a&&(r.characters[o]=J(a,e,t))}return r})},[p,o,f]),C=(0,X.useCallback)((e,t,r)=>{p(a=>{for(let n of f){let s=a.characters[n];s&&(a.characters[n]=Z(s,e,t,r))}return a})},[p,f]),k=(0,X.useCallback)((e,r)=>ee(t.characters,f,e,r),[t.characters,f]),N=(0,X.useCallback)(e=>{p(t=>(t.characters=Q(t.characters,f,t=>_(t,e)),t))},[p,f]),L=(0,X.useCallback)((e,t=!0)=>{p(r=>(r.characters=Q(r.characters,f,r=>H(r,e,t)),r))},[p,f]),E=(0,X.useCallback)(()=>{p(e=>(e.characters=Q(e.characters,f,K),e))},[p,f]),R=(0,X.useCallback)(()=>{p(e=>(e.characters=Q(e.characters,f,G),e))},[p,f]),D=(0,X.useCallback)(()=>{p(e=>(e.characters=Q(e.characters,f,V),e))},[p,f]),A=(0,X.useCallback)(()=>{p(e=>{let{width:t,height:r}=e.config;return e.characters=Q(e.characters,f,()=>S(t,r)),e})},[p,f]),I=(0,X.useCallback)(()=>{p(e=>{let{width:t,height:r}=e.config;return e.characters=Q(e.characters,f,()=>({pixels:Array.from({length:r},()=>Array(t).fill(!0))})),e})},[p,f]),B=(0,X.useCallback)(()=>{p(e=>(e.characters=Q(e.characters,f,er),e))},[p,f]),T=(0,X.useCallback)((e,t,r)=>{p(a=>(a.characters=Q(a.characters,f,a=>ea(a,e,t,r)),a))},[p,f]),z=(0,X.useCallback)(()=>{p(e=>{let{width:t,height:r}=e.config;return e.characters=[...e.characters,S(t,r)],e}),c(t.characters.length),u(new Set)},[p,t.characters.length]),$=(0,X.useCallback)(e=>{0!==e.length&&(p(t=>(t.characters=[...t.characters,...e.map(e=>M(e))],t)),c(t.characters.length),u(new Set))},[p,t.characters.length]),P=(0,X.useCallback)(()=>{t.characters.length<=1||(p(e=>(e.characters=e.characters.filter((e,t)=>!f.has(t)),e)),c(Math.min(o,t.characters.length-f.size-1)),u(new Set))},[p,f,t.characters.length,o]),F=(0,X.useCallback)((e,t)=>{p(r=>{let a=r.characters[e];return a&&t>=0&&t<r.characters.length&&(r.characters[t]=M(a)),r})},[p]),O=(0,X.useCallback)((e,t,r)=>{p(a=>(a.characters=a.characters.map(a=>U(a,e,t,r)),a.config={...a.config,width:e,height:t},a))},[p]),W=(0,X.useCallback)((e,t)=>{p(r=>(e>=0&&e<r.characters.length&&(r.characters[e]=M(t)),r))},[p]),Y=(0,X.useCallback)(e=>{p(t=>(t.characters=e.map(M),t))},[p]),q=(0,X.useCallback)(()=>{x(!1),m(t4(t))},[t]),en=(0,X.useCallback)(e=>{a({characters:e.characters.map(M),config:{...e.config}}),c(0),b(null),u(new Set),x(!1),m(null)},[a]);return{characters:t.characters,config:t.config,selectedIndex:o,setSelectedIndex:c,batchSelection:d,toggleBatchSelection:y,clearBatchSelection:v,selectAll:j,toggleSelectedPixel:w,setSelectedPixel:C,getSelectedPixelState:k,rotateSelected:N,shiftSelected:L,invertSelected:E,flipSelectedHorizontal:R,flipSelectedVertical:D,clearSelected:A,fillSelected:I,centerSelected:B,scaleSelected:T,selectedIndices:f,addCharacter:z,addCharacters:$,deleteSelected:P,copyCharacter:F,resizeCharacters:O,updateCharacter:W,setCharacters:Y,undo:n,redo:s,canUndo:l,canRedo:i,isDirty:h,markSaved:q,reset:en}}e.s(["ResizeModal",()=>tQ],46628),e.s(["SizePresetDropdown",()=>t0],38910),e.s(["CharacterCountPresetDropdown",()=>t1],56859),e.s([],23079),e.s([],45497),e.s(["useCharacterLibrary",()=>t2],66811),e.s(["useCharacterEditor",()=>t5],83621);let t3="character-editor-autosave";function t6(e){let{characterSetId:t,characters:r,config:a,selectedIndex:n,isDirty:s,enabled:l=!0}=e,[i,o]=(0,X.useState)(null),c=(0,X.useRef)(0),d=(0,X.useRef)(null);(0,X.useEffect)(()=>{if(t)try{let e=localStorage.getItem(t3);if(e){let r=JSON.parse(e);r.characterSetId===t&&r.isDirty&&o(r)}}catch{}},[t]);let u=(0,X.useCallback)(()=>{if(t&&l&&0!==r.length)try{let e=I(A(r,a)),l={characterSetId:t,binaryData:e,config:a,selectedIndex:n,timestamp:Date.now(),isDirty:s};localStorage.setItem(t3,JSON.stringify(l)),c.current=Date.now()}catch(e){console.error("Auto-save failed:",e)}},[t,r,a,n,s,l]);(0,X.useEffect)(()=>{if(l&&s&&t)return d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{u()},Math.max(0,3e4-(Date.now()-c.current))),()=>{d.current&&clearTimeout(d.current)}},[l,s,t,u]),(0,X.useEffect)(()=>{if(!l||!s)return;let e=e=>{u(),e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[l,s,u]);let h=(0,X.useCallback)(()=>(o(null),i),[i]);return{hasRecoveryData:null!==i,recoveryData:i,recover:h,discard:(0,X.useCallback)(()=>{o(null);try{localStorage.removeItem(t3)}catch{}},[]),clearAutoSave:(0,X.useCallback)(()=>{try{localStorage.removeItem(t3)}catch{}},[]),saveNow:u}}function t8(e){let{characterSetId:t,enabled:r=!0}=e,[a,n]=(0,X.useState)([]),[s,l]=(0,X.useState)(!1),[i,o]=(0,X.useState)(null),c=(0,X.useCallback)(async()=>{if(!t||!r)return void n([]);l(!0),o(null);try{let e=await eY(t);n(e)}catch(e){console.error("Failed to load snapshots:",e),o(e instanceof Error?e.message:"Failed to load snapshots"),n([])}finally{l(!1)}},[t,r]);(0,X.useEffect)(()=>{c()},[c]);let d=(0,X.useCallback)(async(e,r,a)=>{if(!t)return o("No character set ID"),!1;try{let n,s=(n=I(A(r,a)),{id:E(),characterSetId:t,name:e,createdAt:Date.now(),binaryData:n,config:a,characterCount:r.length});return await eV(s),await c(),!0}catch(e){return console.error("Failed to save snapshot:",e),o(e instanceof Error?e.message:"Failed to save snapshot"),!1}},[t,c]),u=(0,X.useCallback)(async e=>{try{let t=a.find(t=>t.id===e);if(!t)return o("Snapshot not found"),null;return D(B(t.binaryData),t.config)}catch(e){return console.error("Failed to restore snapshot:",e),o(e instanceof Error?e.message:"Failed to restore snapshot"),null}},[a]);return{snapshots:a,loading:s,error:i,saveNewSnapshot:d,restore:u,remove:(0,X.useCallback)(async e=>{try{return await eJ(e),await c(),!0}catch(e){return console.error("Failed to delete snapshot:",e),o(e instanceof Error?e.message:"Failed to delete snapshot"),!1}},[c]),rename:(0,X.useCallback)(async(e,t)=>{try{return await eZ(e,t),await c(),!0}catch(e){return console.error("Failed to rename snapshot:",e),o(e instanceof Error?e.message:"Failed to rename snapshot"),!1}},[c]),refresh:c,isAtCapacity:a.length>=10,maxSnapshots:10}}function t9(e={}){let{maxEntries:t=100,enabled:r=!0}=e,[a,n]=(0,X.useState)([]),s=(0,X.useRef)(0),l=(0,X.useCallback)((e,a,l=[],i)=>{if(!r)return;let o={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}-`+s.current++,timestamp:Date.now(),type:e,description:a,affectedIndices:l,details:i};n(e=>{let r=[o,...e];return r.length>t?r.slice(0,t):r})},[r,t]),i=(0,X.useCallback)(()=>{n([])},[]),o=(0,X.useCallback)(()=>{if(0===a.length)return"No changes logged.";let e=["Character ROM Editor - Change Log",`Exported: ${new Date().toLocaleString()}`,`Total entries: ${a.length}`,"","---",""];for(let t of[...a].reverse()){let r=new Date(t.timestamp).toLocaleTimeString(),a=new Date(t.timestamp).toLocaleDateString();if(e.push(`[${a} ${r}] ${t.type.toUpperCase()}`),e.push(`  ${t.description}`),t.affectedIndices.length>0){let r=t.affectedIndices.length<=5?t.affectedIndices.map(e=>`#${e}`).join(", "):`${t.affectedIndices.slice(0,5).map(e=>`#${e}`).join(", ")} +${t.affectedIndices.length-5} more`;e.push(`  Affected: ${r}`)}t.details&&e.push(`  Details: ${t.details}`),e.push("")}return e.join("\n")},[a]),c=(0,X.useCallback)(e=>a.find(t=>t.id===e),[a]);return{entries:a,log:l,clear:i,exportAsText:o,getEntry:c,count:a.length}}function t7(e){return({edit:"Edit",add:"Add",delete:"Delete",transform:"Transform",resize:"Resize",import:"Import",restore:"Restore",copy:"Copy",reorder:"Reorder",batch:"Batch"})[e]||e}function re(e){return({edit:"text-retro-cyan",add:"text-green-400",delete:"text-red-400",transform:"text-retro-pink",resize:"text-orange-400",import:"text-blue-400",restore:"text-yellow-400",copy:"text-purple-400",reorder:"text-emerald-400",batch:"text-indigo-400"})[e]||"text-gray-400"}function rt(e){return({edit:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",add:"M12 6v6m0 0v6m0-6h6m-6 0H6",delete:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",transform:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",resize:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4",import:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12",restore:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",copy:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z",reorder:"M4 6h16M4 10h16M4 14h16M4 18h16",batch:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})[e]||"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}e.s(["useAutoSave",()=>t6],54750),e.s(["useSnapshots",()=>t8],69771),e.s(["getOperationColor",()=>re,"getOperationDisplayName",()=>t7,"getOperationIcon",()=>rt,"useChangeLog",()=>t9],80184),e.s([],7259);let rr=["tl","tc","tr","ml","mc","mr","bl","bc","br"];function ra({isOpen:e,onClose:t,currentConfig:r,onImport:a}){let{characterSets:n,loading:s}=t2(),[l,i]=(0,X.useState)("select-set"),[o,c]=(0,X.useState)(null),[d,u]=(0,X.useState)(""),[h,x]=(0,X.useState)(new Set),[m,f]=(0,X.useState)(null),[p,g]=(0,X.useState)("tl");(0,X.useEffect)(()=>{e||(i("select-set"),c(null),u(""),x(new Set),f(null),g("tl"))},[e]);let b=(0,X.useMemo)(()=>o&&n.find(e=>e.metadata.id===o)||null,[n,o]),y=(0,X.useMemo)(()=>{if(!b)return[];try{return z(b).characters}catch{return[]}},[b]),v=(0,X.useMemo)(()=>!!b&&(r.width!==b.config.width||r.height!==b.config.height),[b,r]),w=(0,X.useMemo)(()=>{if(!d.trim())return n;let e=d.toLowerCase();return n.filter(t=>t.metadata.name.toLowerCase().includes(e)||t.metadata.description.toLowerCase().includes(e))},[n,d]),C=(0,X.useCallback)(e=>{c(e.metadata.id)},[]),k=(0,X.useCallback)((e,t,r)=>{x(a=>{let n=new Set(a);if(t&&null!==m){let t=Math.min(m,e),r=Math.max(m,e);for(let e=t;e<=r;e++)n.add(e)}else r?n.has(e)?n.delete(e):n.add(e):(n.clear(),n.add(e));return n}),f(e)},[m]),N=(0,X.useCallback)(()=>{x(new Set(y.map((e,t)=>t)))},[y]),S=(0,X.useCallback)(()=>{x(new Set)},[]),M=(0,X.useCallback)(()=>{"resize"===l?i("select-chars"):"select-chars"===l&&(i("select-set"),x(new Set))},[l]),L=(0,X.useCallback)(()=>{"select-set"===l&&o?i("select-chars"):"select-chars"===l&&h.size>0&&(v?i("resize"):(a(Array.from(h).sort((e,t)=>e-t).map(e=>y[e])),t()))},[l,o,h,v,y,a,t]),E=(0,X.useCallback)(()=>{let e=Array.from(h).sort((e,t)=>e-t).map(e=>y[e]);v&&(e=e.map(e=>U(e,r.width,r.height,p))),a(e),t()},[h,y,v,r,p,a,t]),R=(0,X.useCallback)(e=>{"Escape"===e.key&&t()},[t]);return e?(0,j.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:R,children:[(0,j.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,j.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[80vh] bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl flex flex-col overflow-hidden",children:[(0,j.jsxs)("div",{className:"flex-shrink-0 p-4 border-b border-retro-grid/30",children:[(0,j.jsx)("h2",{className:"text-lg font-medium text-white",children:"Import Characters"}),(0,j.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["select-set"===l&&"Select a character set to import from","select-chars"===l&&`Select characters to import (${h.size} selected)`,"resize"===l&&"Configure resize settings"]})]}),(0,j.jsxs)("div",{className:"flex-1 overflow-hidden p-4 flex flex-col min-h-0",children:["select-set"===l&&(0,j.jsxs)("div",{className:"flex flex-col flex-1 min-h-0 gap-4",children:[(0,j.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,j.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:"Search...",className:"w-full px-3 py-2 pl-9 bg-retro-dark border border-retro-grid/50 rounded text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:border-retro-cyan/50",autoFocus:!0}),(0,j.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,j.jsx)("div",{className:"space-y-2 flex-1 overflow-y-auto min-h-0",children:s?(0,j.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading..."}):0===w.length?(0,j.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No character sets found"}):w.map(e=>(0,j.jsx)(tl,{characterSet:e,selected:o===e.metadata.id,onClick:()=>C(e)},e.metadata.id))}),b&&(0,j.jsxs)("div",{className:"flex-shrink-0 text-xs text-gray-500 text-center pt-2 border-t border-retro-grid/30",children:["Source: ",eM(b.config)," (",y.length," chars)",v&&(0,j.jsxs)("span",{className:"text-yellow-500 ml-2",children:["(will be resized to ",eM(r),")"]})]})]}),"select-chars"===l&&b&&(0,j.jsxs)("div",{className:"flex flex-col flex-1 min-h-0 gap-4",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0",children:[(0,j.jsx)("div",{className:"text-xs text-gray-500",children:"Click to select, Shift+click for range, Ctrl+click to toggle"}),(0,j.jsxs)("div",{className:"flex gap-2",children:[(0,j.jsx)("button",{onClick:N,className:"text-xs text-retro-cyan hover:underline",children:"Select All"}),(0,j.jsx)("button",{onClick:S,className:"text-xs text-gray-400 hover:underline",children:"Clear"})]})]}),(0,j.jsx)("div",{className:"bg-black/30 rounded-lg p-3 flex-1 overflow-y-auto min-h-0",children:(0,j.jsx)("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${Math.max(3*b.config.width,24)+8}px, 1fr))`},children:y.map((e,t)=>{let r=h.has(t);return(0,j.jsx)("button",{onClick:e=>k(t,e.shiftKey,e.ctrlKey||e.metaKey),className:`
                          p-1 rounded border-2 transition-all
                          ${r?"border-retro-cyan bg-retro-cyan/20":"border-transparent hover:border-retro-grid/50"}
                        `,title:`Character ${t}`,children:(0,j.jsx)(tp.CharacterDisplay,{character:e,mode:"small",smallScale:3})},t)})})})]}),"resize"===l&&b&&(0,j.jsxs)("div",{className:"space-y-6",children:[(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:"Source dimensions differ from target"}),(0,j.jsxs)("p",{className:"text-xs text-gray-500",children:[eM(b.config),"  ",eM(r)]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-2 text-center",children:"Anchor Position"}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mb-3 text-center",children:"Select where to anchor content when resizing"}),(0,j.jsx)("div",{className:"grid grid-cols-3 gap-1 w-32 mx-auto",children:rr.map(e=>{let t=p===e;return(0,j.jsx)("button",{type:"button",onClick:()=>g(e),className:`
                          w-10 h-10 rounded border-2 transition-all
                          flex items-center justify-center
                          ${t?"border-retro-cyan bg-retro-cyan/20":"border-retro-grid/50 bg-retro-dark hover:border-retro-grid"}
                        `,title:{tl:"Top Left",tc:"Top Center",tr:"Top Right",ml:"Middle Left",mc:"Middle Center",mr:"Middle Right",bl:"Bottom Left",bc:"Bottom Center",br:"Bottom Right"}[e],children:(0,j.jsx)("div",{className:`
                            w-3 h-3 rounded-sm transition-colors
                            ${t?"bg-retro-cyan":"bg-gray-600"}
                          `})},e)})})]}),(0,j.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:[h.size," character",1!==h.size?"s":""," will be imported and resized"]})]})]}),(0,j.jsxs)("div",{className:"flex-shrink-0 p-4 border-t border-retro-grid/30 flex justify-between",children:["select-set"===l?(0,j.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}):(0,j.jsx)("button",{onClick:M,className:"px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Back"}),"resize"===l?(0,j.jsxs)("button",{onClick:E,className:"px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors",children:["Import (",h.size,")"]}):(0,j.jsx)("button",{onClick:L,disabled:"select-set"===l&&!o||"select-chars"===l&&0===h.size,className:"px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"select-chars"!==l||v?"Next":`Import (${h.size})`})]})]})]}):null}function rn({isOpen:e,onClose:t,characters:r,currentIndex:a,onCopy:n}){let[s,l]=(0,X.useState)(null);(0,X.useEffect)(()=>{e||l(null)},[e]);let i=(0,X.useCallback)(e=>{l(e)},[]),o=(0,X.useCallback)(()=>{null!==s&&(n(s),t())},[s,n,t]),c=(0,X.useCallback)(e=>{"Escape"===e.key?t():"Enter"===e.key&&null!==s&&o()},[t,s,o]);return e?(0,j.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:c,children:[(0,j.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,j.jsxs)("div",{className:"relative w-full max-w-lg max-h-[70vh] bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl flex flex-col overflow-hidden",children:[(0,j.jsxs)("div",{className:"flex-shrink-0 p-4 border-b border-retro-grid/30",children:[(0,j.jsx)("h2",{className:"text-lg font-medium text-white",children:"Copy Character"}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Select a character to copy. It will replace the currently selected character(s)."})]}),(0,j.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[(0,j.jsx)("div",{className:"bg-black/30 rounded-lg p-3",children:(0,j.jsx)("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(40px, 1fr))"},children:r.map((e,t)=>{let r=s===t,n=t===a;return(0,j.jsxs)("button",{onClick:()=>i(t),disabled:n,className:`
                      p-1.5 rounded border-2 transition-all relative
                      ${r?"border-retro-cyan bg-retro-cyan/20":n?"border-retro-pink/30 bg-retro-pink/10 opacity-50 cursor-not-allowed":"border-transparent hover:border-retro-grid/50"}
                    `,title:n?"Current selection":`Character ${t}`,children:[(0,j.jsx)(tp.CharacterDisplay,{character:e,mode:"small",smallScale:3}),n&&(0,j.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,j.jsx)("span",{className:"text-[8px] text-retro-pink bg-retro-dark/80 px-1 rounded",children:"current"})})]},t)})})}),null!==s&&(0,j.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-3",children:["Character ",s," selected"]})]}),(0,j.jsxs)("div",{className:"flex-shrink-0 p-4 border-t border-retro-grid/30 flex justify-between",children:[(0,j.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,j.jsx)("button",{onClick:o,disabled:null===s,className:"px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Copy"})]})]})]}):null}e.s(["ImportCharactersModal",()=>ra],78071),e.s(["CopyCharacterModal",()=>rn],35052);var rs=e.i(74080);let rl="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function ri(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function ro(e){return"nodeType"in e}function rc(e){var t,r;return e?ri(e)?e:ro(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function rd(e){let{Document:t}=rc(e);return e instanceof t}function ru(e){return!ri(e)&&e instanceof rc(e).HTMLElement}function rh(e){return e instanceof rc(e).SVGElement}function rx(e){return e?ri(e)?e.document:ro(e)?rd(e)?e:ru(e)||rh(e)?e.ownerDocument:document:document:document}let rm=rl?X.useLayoutEffect:X.useEffect;function rf(e){let t=(0,X.useRef)(e);return rm(()=>{t.current=e}),(0,X.useCallback)(function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return null==t.current?void 0:t.current(...r)},[])}function rp(e,t){void 0===t&&(t=[e]);let r=(0,X.useRef)(e);return rm(()=>{r.current!==e&&(r.current=e)},t),r}function rg(e,t){let r=(0,X.useRef)();return(0,X.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function rb(e){let t=rf(e),r=(0,X.useRef)(null),a=(0,X.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,a]}function ry(e){let t=(0,X.useRef)();return(0,X.useEffect)(()=>{t.current=e},[e]),t.current}let rv={};function rj(e,t){return(0,X.useMemo)(()=>{if(t)return t;let r=null==rv[e]?0:rv[e]+1;return rv[e]=r,e+"-"+r},[e,t])}function rX(e){return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return a.reduce((t,r)=>{for(let[a,n]of Object.entries(r)){let r=t[a];null!=r&&(t[a]=r+e*n)}return t},{...t})}}let rw=rX(1),rC=rX(-1);function rk(e){if(!e)return!1;let{KeyboardEvent:t}=rc(e.target);return t&&e instanceof t}function rN(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=rc(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let rS=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[rS.Translate.toString(e),rS.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:a}=e;return t+" "+r+"ms "+a}}}),rM="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",rL={display:"none"};function rE(e){let{id:t,value:r}=e;return X.default.createElement("div",{id:t,style:rL},r)}function rR(e){let{id:t,announcement:r,ariaLiveType:a="assertive"}=e;return X.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":a,"aria-atomic":!0},r)}let rD=(0,X.createContext)(null),rA={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},rI={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function rB(e){var t;let r,{announcements:a=rI,container:n,hiddenTextDescribedById:s,screenReaderInstructions:l=rA}=e,{announce:i,announcement:o}=function(){let[e,t]=(0,X.useState)("");return{announce:(0,X.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),c=rj("DndLiveRegion"),[d,u]=(0,X.useState)(!1);if((0,X.useEffect)(()=>{u(!0)},[]),t=(0,X.useMemo)(()=>({onDragStart(e){let{active:t}=e;i(a.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;a.onDragMove&&i(a.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;i(a.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;i(a.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;i(a.onDragCancel({active:t,over:r}))}}),[i,a]),r=(0,X.useContext)(rD),(0,X.useEffect)(()=>{if(!r)throw Error("useDndMonitor must be used within a children of <DndContext>");return r(t)},[t,r]),!d)return null;let h=X.default.createElement(X.default.Fragment,null,X.default.createElement(rE,{id:s,value:l.draggable}),X.default.createElement(rR,{id:c,announcement:o}));return n?(0,rs.createPortal)(h,n):h}function rT(){}function rz(e,t){return(0,X.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}(r=u||(u={})).DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable";let r$=Object.freeze({x:0,y:0});function rP(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function rF(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return r-a}function rO(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return a-r}function rW(e){let{left:t,top:r,height:a,width:n}=e;return[{x:t,y:r},{x:t+n,y:r},{x:t,y:r+a},{x:t+n,y:r+a}]}function r_(e,t){if(!e||0===e.length)return null;let[r]=e;return t?r[t]:r}function rH(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}let rU=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,n=rH(t,t.left,t.top),s=[];for(let e of a){let{id:t}=e,a=r.get(t);if(a){let r=rP(rH(a),n);s.push({id:t,data:{droppableContainer:e,value:r}})}}return s.sort(rF)},rK=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,n=[];for(let e of a){let{id:a}=e,s=r.get(a);if(s){let r=function(e,t){let r=Math.max(t.top,e.top),a=Math.max(t.left,e.left),n=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height);if(a<n&&r<s){let l=t.width*t.height,i=e.width*e.height,o=(n-a)*(s-r);return Number((o/(l+i-o)).toFixed(4))}return 0}(s,t);r>0&&n.push({id:a,data:{droppableContainer:e,value:r}})}}return n.sort(rO)};function rG(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:r$}let rV=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})};function rY(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let rq={ignoreTransform:!1};function rJ(e,t){void 0===t&&(t=rq);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:a}=rc(e).getComputedStyle(e);t&&(r=function(e,t,r){let a=rY(t);if(!a)return e;let{scaleX:n,scaleY:s,x:l,y:i}=a,o=e.left-l-(1-n)*parseFloat(r),c=e.top-i-(1-s)*parseFloat(r.slice(r.indexOf(" ")+1)),d=n?e.width/n:e.width,u=s?e.height/s:e.height;return{width:d,height:u,top:c,right:o+d,bottom:c+u,left:o}}(r,t,a))}let{top:a,left:n,width:s,height:l,bottom:i,right:o}=r;return{top:a,left:n,width:s,height:l,bottom:i,right:o}}function rZ(e){return rJ(e,{ignoreTransform:!0})}function rQ(e,t){let r=[];return e?function a(n){var s,l;let i;if(null!=t&&r.length>=t||!n)return r;if(rd(n)&&null!=n.scrollingElement&&!r.includes(n.scrollingElement))return r.push(n.scrollingElement),r;if(!ru(n)||rh(n)||r.includes(n))return r;let o=rc(e).getComputedStyle(n);return(n!==e&&(void 0===(s=o)&&(s=rc(n).getComputedStyle(n)),i=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=s[e];return"string"==typeof t&&i.test(t)}))&&r.push(n),void 0===(l=o)&&(l=rc(n).getComputedStyle(n)),"fixed"===l.position)?r:a(n.parentNode)}(e):r}function r0(e){let[t]=rQ(e,1);return null!=t?t:null}function r1(e){return rl&&e?ri(e)?e:ro(e)?rd(e)||e===rx(e).scrollingElement?window:ru(e)?e:null:null:null}function r2(e){return ri(e)?e.scrollX:e.scrollLeft}function r4(e){return ri(e)?e.scrollY:e.scrollTop}function r5(e){return{x:r2(e),y:r4(e)}}function r3(e){return!!rl&&!!e&&e===document.scrollingElement}function r6(e){let t={x:0,y:0},r=r3(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},n=e.scrollTop<=t.y,s=e.scrollLeft<=t.x;return{isTop:n,isLeft:s,isBottom:e.scrollTop>=a.y,isRight:e.scrollLeft>=a.x,maxScroll:a,minScroll:t}}(a=h||(h={}))[a.Forward=1]="Forward",a[a.Backward=-1]="Backward";let r8={x:.2,y:.2};function r9(e){return e.reduce((e,t)=>rw(e,r5(t)),r$)}function r7(e,t){if(void 0===t&&(t=rJ),!e)return;let{top:r,left:a,bottom:n,right:s}=t(e);r0(e)&&(n<=0||s<=0||r>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let ae=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+r2(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+r4(t),0)}]];class at{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=rQ(t),a=r9(r);for(const[t,n,s]of(this.rect={...e},this.width=e.width,this.height=e.height,ae))for(const e of n)Object.defineProperty(this,e,{get:()=>{let n=s(r),l=a[t]-n;return this.rect[e]+l},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ar{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var a;null==(a=this.target)||a.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function aa(e,t){let r=Math.abs(e.x),a=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+a**2)>t:"x"in t&&"y"in t?r>t.x&&a>t.y:"x"in t?r>t.x:"y"in t&&a>t.y}function an(e){e.preventDefault()}function as(e){e.stopPropagation()}(n=x||(x={})).Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange",(s=m||(m={})).Space="Space",s.Down="ArrowDown",s.Right="ArrowRight",s.Left="ArrowLeft",s.Up="ArrowUp",s.Esc="Escape",s.Enter="Enter",s.Tab="Tab";let al={start:[m.Space,m.Enter],cancel:[m.Esc],end:[m.Space,m.Enter,m.Tab]},ai=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case m.Right:return{...r,x:r.x+25};case m.Left:return{...r,x:r.x-25};case m.Down:return{...r,y:r.y+25};case m.Up:return{...r,y:r.y-25}}};class ao{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new ar(rx(t)),this.windowListeners=new ar(rc(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(x.Resize,this.handleCancel),this.windowListeners.add(x.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(x.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&r7(r),t(r$)}handleKeyDown(e){if(rk(e)){let{active:t,context:r,options:a}=this.props,{keyboardCodes:n=al,coordinateGetter:s=ai,scrollBehavior:l="smooth"}=a,{code:i}=e;if(n.end.includes(i))return void this.handleEnd(e);if(n.cancel.includes(i))return void this.handleCancel(e);let{collisionRect:o}=r.current,c=o?{x:o.left,y:o.top}:r$;this.referenceCoordinates||(this.referenceCoordinates=c);let d=s(e,{active:t,context:r.current,currentCoordinates:c});if(d){let t=rC(d,c),a={x:0,y:0},{scrollableAncestors:n}=r.current;for(let r of n){let n=e.code,{isTop:s,isRight:i,isLeft:o,isBottom:c,maxScroll:u,minScroll:h}=r6(r),x=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:a,bottom:n}=e.getBoundingClientRect();return{top:t,left:r,right:a,bottom:n,width:e.clientWidth,height:e.clientHeight}}(r),f={x:Math.min(n===m.Right?x.right-x.width/2:x.right,Math.max(n===m.Right?x.left:x.left+x.width/2,d.x)),y:Math.min(n===m.Down?x.bottom-x.height/2:x.bottom,Math.max(n===m.Down?x.top:x.top+x.height/2,d.y))},p=n===m.Right&&!i||n===m.Left&&!o,g=n===m.Down&&!c||n===m.Up&&!s;if(p&&f.x!==d.x){let e=r.scrollLeft+t.x,s=n===m.Right&&e<=u.x||n===m.Left&&e>=h.x;if(s&&!t.y)return void r.scrollTo({left:e,behavior:l});s?a.x=r.scrollLeft-e:a.x=n===m.Right?r.scrollLeft-u.x:r.scrollLeft-h.x,a.x&&r.scrollBy({left:-a.x,behavior:l});break}if(g&&f.y!==d.y){let e=r.scrollTop+t.y,s=n===m.Down&&e<=u.y||n===m.Up&&e>=h.y;if(s&&!t.x)return void r.scrollTo({top:e,behavior:l});s?a.y=r.scrollTop-e:a.y=n===m.Down?r.scrollTop-u.y:r.scrollTop-h.y,a.y&&r.scrollBy({top:-a.y,behavior:l});break}}this.handleMove(e,rw(rC(d,this.referenceCoordinates),a))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function ac(e){return!!(e&&"distance"in e)}function ad(e){return!!(e&&"delay"in e)}ao.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:a=al,onActivation:n}=t,{active:s}=r,{code:l}=e.nativeEvent;if(a.start.includes(l)){let t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==n||n({event:e.nativeEvent}),!0)}return!1}}];class au{constructor(e,t,r){var a;void 0===r&&(r=function(e){let{EventTarget:t}=rc(e);return e instanceof t?e:rx(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:n}=e,{target:s}=n;this.props=e,this.events=t,this.document=rx(s),this.documentListeners=new ar(this.document),this.listeners=new ar(r),this.windowListeners=new ar(rc(s)),this.initialCoordinates=null!=(a=rN(n))?a:r$,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(x.Resize,this.handleCancel),this.windowListeners.add(x.DragStart,an),this.windowListeners.add(x.VisibilityChange,this.handleCancel),this.windowListeners.add(x.ContextMenu,an),this.documentListeners.add(x.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ad(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(ac(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:a}=this.props;a(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(x.Click,as,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(x.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:a,props:n}=this,{onMove:s,options:{activationConstraint:l}}=n;if(!a)return;let i=null!=(t=rN(e))?t:r$,o=rC(a,i);if(!r&&l){if(ac(l)){if(null!=l.tolerance&&aa(o,l.tolerance))return this.handleCancel();if(aa(o,l.distance))return this.handleStart()}return ad(l)&&aa(o,l.tolerance)?this.handleCancel():void this.handlePending(l,o)}e.cancelable&&e.preventDefault(),s(i)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===m.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let ah={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ax extends au{constructor(e){const{event:t}=e;super(e,ah,rx(t.target))}}ax.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return!!r.isPrimary&&0===r.button&&(null==a||a({event:r}),!0)}}];(l=f||(f={}))[l.RightClick=2]="RightClick";(i=p||(p={}))[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect",(o=g||(g={}))[o.TreeOrder=0]="TreeOrder",o[o.ReversedTreeOrder=1]="ReversedTreeOrder";let am={x:{[h.Backward]:!1,[h.Forward]:!1},y:{[h.Backward]:!1,[h.Forward]:!1}};(c=b||(b={}))[c.Always=0]="Always",c[c.BeforeDragging=1]="BeforeDragging",c[c.WhileDragging=2]="WhileDragging",(y||(y={})).Optimized="optimized";let af=new Map;function ap(e,t){return rg(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function ag(e){let{callback:t,disabled:r}=e,a=rf(t),n=(0,X.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(a)},[r]);return(0,X.useEffect)(()=>()=>null==n?void 0:n.disconnect(),[n]),n}function ab(e){return new at(rJ(e),e)}function ay(e,t,r){void 0===t&&(t=ab);let[a,n]=(0,X.useState)(null);function s(){n(a=>{if(!e)return null;if(!1===e.isConnected){var n;return null!=(n=null!=a?a:r)?n:null}let s=t(e);return JSON.stringify(a)===JSON.stringify(s)?a:s})}let l=function(e){let{callback:t,disabled:r}=e,a=rf(t),n=(0,X.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(a)},[a,r]);return(0,X.useEffect)(()=>()=>null==n?void 0:n.disconnect(),[n]),n}({callback(t){if(e)for(let r of t){let{type:t,target:a}=r;if("childList"===t&&a instanceof HTMLElement&&a.contains(e)){s();break}}}}),i=ag({callback:s});return rm(()=>{s(),e?(null==i||i.observe(e),null==l||l.observe(document.body,{childList:!0,subtree:!0})):(null==i||i.disconnect(),null==l||l.disconnect())},[e]),a}let av=[];function aj(e,t){void 0===t&&(t=[]);let r=(0,X.useRef)(null);return(0,X.useEffect)(()=>{r.current=null},t),(0,X.useEffect)(()=>{let t=e!==r$;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?rC(e,r.current):r$}function aX(e){return(0,X.useMemo)(()=>{let t,r;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:r=e.innerHeight,width:t,height:r}):null},[e])}let aw=[];function aC(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return ru(t)?t:e}let ak=[{sensor:ax,options:{}},{sensor:ao,options:{}}],aN={current:{}},aS={draggable:{measure:rZ},droppable:{measure:rZ,strategy:b.WhileDragging,frequency:y.Optimized},dragOverlay:{measure:rJ}};class aM extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let aL={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new aM,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:rT},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:aS,measureDroppableContainers:rT,windowRect:null,measuringScheduled:!1},aE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:rT,draggableNodes:new Map,over:null,measureDroppableContainers:rT},aR=(0,X.createContext)(aE),aD=(0,X.createContext)(aL);function aA(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new aM}}}function aI(e,t){switch(t.type){case u.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case u.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case u.DragEnd:case u.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case u.RegisterDroppable:{let{element:r}=t,{id:a}=r,n=new aM(e.droppable.containers);return n.set(a,r),{...e,droppable:{...e.droppable,containers:n}}}case u.SetDroppableDisabled:{let{id:r,key:a,disabled:n}=t,s=e.droppable.containers.get(r);if(!s||a!==s.key)return e;let l=new aM(e.droppable.containers);return l.set(r,{...s,disabled:n}),{...e,droppable:{...e.droppable,containers:l}}}case u.UnregisterDroppable:{let{id:r,key:a}=t,n=e.droppable.containers.get(r);if(!n||a!==n.key)return e;let s=new aM(e.droppable.containers);return s.delete(r),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function aB(e){let{disabled:t}=e,{active:r,activatorEvent:a,draggableNodes:n}=(0,X.useContext)(aR),s=ry(a),l=ry(null==r?void 0:r.id);return(0,X.useEffect)(()=>{if(!t&&!a&&s&&null!=l){if(!rk(s)||document.activeElement===s.target)return;let e=n.get(l);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(rM)?e:e.querySelector(rM);if(t){t.focus();break}}})}},[a,t,n,l,s]),null}function aT(e,t){let{transform:r,...a}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...a}),r):r}let az=(0,X.createContext)({...r$,scaleX:1,scaleY:1});(d=v||(v={}))[d.Uninitialized=0]="Uninitialized",d[d.Initializing=1]="Initializing",d[d.Initialized=2]="Initialized";let a$=(0,X.memo)(function(e){var t,r,a,n,s,l,i,o;let c,d,x,m,f,y,j,w,{id:C,accessibility:k,autoScroll:N=!0,children:S,sensors:M=ak,collisionDetection:L=rK,measuring:E,modifiers:R,...D}=e,[A,I]=(0,X.useReducer)(aI,void 0,aA),[B,T]=function(){let[e]=(0,X.useState)(()=>new Set),t=(0,X.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,X.useCallback)(t=>{let{type:r,event:a}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,a)})},[e]),t]}(),[z,$]=(0,X.useState)(v.Uninitialized),P=z===v.Initialized,{draggable:{active:F,nodes:O,translate:W},droppable:{containers:_}}=A,H=null!=F?O.get(F):null,U=(0,X.useRef)({initial:null,translated:null}),K=(0,X.useMemo)(()=>{var e;return null!=F?{id:F,data:null!=(e=null==H?void 0:H.data)?e:aN,rect:U}:null},[F,H]),G=(0,X.useRef)(null),[V,Y]=(0,X.useState)(null),[q,J]=(0,X.useState)(null),Z=rp(D,Object.values(D)),Q=rj("DndDescribedBy",C),ee=(0,X.useMemo)(()=>_.getEnabled(),[_]),et=(0,X.useMemo)(()=>({draggable:{...aS.draggable,...null==E?void 0:E.draggable},droppable:{...aS.droppable,...null==E?void 0:E.droppable},dragOverlay:{...aS.dragOverlay,...null==E?void 0:E.dragOverlay}}),[null==E?void 0:E.draggable,null==E?void 0:E.droppable,null==E?void 0:E.dragOverlay]),{droppableRects:er,measureDroppableContainers:ea,measuringScheduled:en}=function(e,t){let{dragging:r,dependencies:a,config:n}=t,[s,l]=(0,X.useState)(null),{frequency:i,measure:o,strategy:c}=n,d=(0,X.useRef)(e),u=function(){switch(c){case b.Always:return!1;case b.BeforeDragging:return r;default:return!r}}(),h=rp(u),x=(0,X.useCallback)(function(e){void 0===e&&(e=[]),h.current||l(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),m=(0,X.useRef)(null),f=rg(t=>{if(u&&!r)return af;if(!t||t===af||d.current!==e||null!=s){let t=new Map;for(let r of e){if(!r)continue;if(s&&s.length>0&&!s.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,a=e?new at(o(e),e):null;r.rect.current=a,a&&t.set(r.id,a)}return t}return t},[e,s,r,u,o]);return(0,X.useEffect)(()=>{d.current=e},[e]),(0,X.useEffect)(()=>{u||x()},[r,u]),(0,X.useEffect)(()=>{s&&s.length>0&&l(null)},[JSON.stringify(s)]),(0,X.useEffect)(()=>{u||"number"!=typeof i||null!==m.current||(m.current=setTimeout(()=>{x(),m.current=null},i))},[i,u,x,...a]),{droppableRects:f,measureDroppableContainers:x,measuringScheduled:null!=s}}(ee,{dragging:P,dependencies:[W.x,W.y],config:et.droppable}),es=rg(e=>{var t;return null==F?null:null!=(t=null!=f?f:e)?t:null},[f=(m=null!=F?O.get(F):void 0)?m.node.current:null,F]),el=(0,X.useMemo)(()=>q?rN(q):null,[q]),ei=(c=(null==V?void 0:V.autoScrollEnabled)===!1,d="object"==typeof N?!1===N.enabled:!1===N,x=P&&!c&&!d,"object"==typeof N?{...N,enabled:x}:{enabled:x}),eo=ap(es,et.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:a,config:n=!0}=e,s=(0,X.useRef)(!1),{x:l,y:i}="boolean"==typeof n?{x:n,y:n}:n;rm(()=>{if(!l&&!i||!t){s.current=!1;return}if(s.current||!a)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let n=rG(r(e),a);if(l||(n.x=0),i||(n.y=0),s.current=!0,Math.abs(n.x)>0||Math.abs(n.y)>0){let t=r0(e);t&&t.scrollBy({top:n.y,left:n.x})}},[t,l,i,a,r])}({activeNode:null!=F?O.get(F):null,config:ei.layoutShiftCompensation,initialRect:eo,measure:et.draggable.measure});let ec=ay(es,et.draggable.measure,eo),ed=ay(es?es.parentElement:null),eu=(0,X.useRef)({activatorEvent:null,active:null,activeNode:es,collisionRect:null,collisions:null,droppableRects:er,draggableNodes:O,draggingNode:null,draggingNodeRect:null,droppableContainers:_,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eh=_.getNodeFor(null==(t=eu.current.over)?void 0:t.id),ex=function(e){let{measure:t}=e,[r,a]=(0,X.useState)(null),n=ag({callback:(0,X.useCallback)(e=>{for(let{target:r}of e)if(ru(r)){a(e=>{let a=t(r);return e?{...e,width:a.width,height:a.height}:a});break}},[t])}),[s,l]=rb((0,X.useCallback)(e=>{let r=aC(e);null==n||n.disconnect(),r&&(null==n||n.observe(r)),a(r?t(r):null)},[t,n]));return(0,X.useMemo)(()=>({nodeRef:s,rect:r,setRef:l}),[r,s,l])}({measure:et.dragOverlay.measure}),em=null!=(r=ex.nodeRef.current)?r:es,ef=P?null!=(a=ex.rect)?a:ec:null,ep=!!(ex.nodeRef.current&&ex.rect),eg=(y=ap(s=ep?null:ec),rG(s,y)),eb=aX(em?rc(em):null),ey=(l=P?null!=eh?eh:es:null,j=(0,X.useRef)(l),w=rg(e=>l?e&&e!==av&&l&&j.current&&l.parentNode===j.current.parentNode?e:rQ(l):av,[l]),(0,X.useEffect)(()=>{j.current=l},[l]),w),ev=function(e,t){void 0===t&&(t=rJ);let[r]=e,a=aX(r?rc(r):null),[n,s]=(0,X.useState)(aw);function l(){s(()=>e.length?e.map(e=>r3(e)?a:new at(t(e),e)):aw)}let i=ag({callback:l});return rm(()=>{null==i||i.disconnect(),l(),e.forEach(e=>null==i?void 0:i.observe(e))},[e]),n}(ey),ej=aT(R,{transform:{x:W.x-eg.x,y:W.y-eg.y,scaleX:1,scaleY:1},activatorEvent:q,active:K,activeNodeRect:ec,containerNodeRect:ed,draggingNodeRect:ef,over:eu.current.over,overlayNodeRect:ex.rect,scrollableAncestors:ey,scrollableAncestorRects:ev,windowRect:eb}),eX=el?rw(el,W):null,ew=function(e){let[t,r]=(0,X.useState)(null),a=(0,X.useRef)(e),n=(0,X.useCallback)(e=>{let t=r1(e.target);t&&r(e=>e?(e.set(t,r5(t)),new Map(e)):null)},[]);return(0,X.useEffect)(()=>{let t=a.current;if(e!==t){s(t);let l=e.map(e=>{let t=r1(e);return t?(t.addEventListener("scroll",n,{passive:!0}),[t,r5(t)]):null}).filter(e=>null!=e);r(l.length?new Map(l):null),a.current=e}return()=>{s(e),s(t)};function s(e){e.forEach(e=>{let t=r1(e);null==t||t.removeEventListener("scroll",n)})}},[n,e]),(0,X.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>rw(e,t),r$):r9(e):r$,[e,t])}(ey),eC=aj(ew),ek=aj(ew,[ec]),eN=rw(ej,eC),eS=ef?rV(ef,ej):null,eM=K&&eS?L({active:K,collisionRect:eS,droppableRects:er,droppableContainers:ee,pointerCoordinates:eX}):null,eL=r_(eM,"id"),[eE,eR]=(0,X.useState)(null),eD=(i=ep?ej:rw(ej,ek),o=null!=(n=null==eE?void 0:eE.rect)?n:null,{...i,scaleX:o&&ec?o.width/ec.width:1,scaleY:o&&ec?o.height/ec.height:1}),eA=(0,X.useRef)(null),eI=(0,X.useCallback)((e,t)=>{let{sensor:r,options:a}=t;if(null==G.current)return;let n=O.get(G.current);if(!n)return;let s=e.nativeEvent,l=new r({active:G.current,activeNode:n,event:s,options:a,context:eu,onAbort(e){if(!O.get(e))return;let{onDragAbort:t}=Z.current,r={id:e};null==t||t(r),B({type:"onDragAbort",event:r})},onPending(e,t,r,a){if(!O.get(e))return;let{onDragPending:n}=Z.current,s={id:e,constraint:t,initialCoordinates:r,offset:a};null==n||n(s),B({type:"onDragPending",event:s})},onStart(e){let t=G.current;if(null==t)return;let r=O.get(t);if(!r)return;let{onDragStart:a}=Z.current,n={activatorEvent:s,active:{id:t,data:r.data,rect:U}};(0,rs.unstable_batchedUpdates)(()=>{null==a||a(n),$(v.Initializing),I({type:u.DragStart,initialCoordinates:e,active:t}),B({type:"onDragStart",event:n}),Y(eA.current),J(s)})},onMove(e){I({type:u.DragMove,coordinates:e})},onEnd:i(u.DragEnd),onCancel:i(u.DragCancel)});function i(e){return async function(){let{active:t,collisions:r,over:a,scrollAdjustedTranslate:n}=eu.current,l=null;if(t&&n){let{cancelDrop:i}=Z.current;l={activatorEvent:s,active:t,collisions:r,delta:n,over:a},e===u.DragEnd&&"function"==typeof i&&await Promise.resolve(i(l))&&(e=u.DragCancel)}G.current=null,(0,rs.unstable_batchedUpdates)(()=>{I({type:e}),$(v.Uninitialized),eR(null),Y(null),J(null),eA.current=null;let t=e===u.DragEnd?"onDragEnd":"onDragCancel";if(l){let e=Z.current[t];null==e||e(l),B({type:t,event:l})}})}}eA.current=l},[O]),eB=(0,X.useCallback)((e,t)=>(r,a)=>{let n=r.nativeEvent,s=O.get(a);null!==G.current||!s||n.dndKit||n.defaultPrevented||!0===e(r,t.options,{active:s})&&(n.dndKit={capturedBy:t.sensor},G.current=a,eI(r,t))},[O,eI]),eT=(0,X.useMemo)(()=>M.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:eB(e.handler,t)}))]},[]),[M,eB]);(0,X.useEffect)(()=>{if(!rl)return;let e=M.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},M.map(e=>{let{sensor:t}=e;return t})),rm(()=>{ec&&z===v.Initializing&&$(v.Initialized)},[ec,z]),(0,X.useEffect)(()=>{let{onDragMove:e}=Z.current,{active:t,activatorEvent:r,collisions:a,over:n}=eu.current;if(!t||!r)return;let s={active:t,activatorEvent:r,collisions:a,delta:{x:eN.x,y:eN.y},over:n};(0,rs.unstable_batchedUpdates)(()=>{null==e||e(s),B({type:"onDragMove",event:s})})},[eN.x,eN.y]),(0,X.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:a,scrollAdjustedTranslate:n}=eu.current;if(!e||null==G.current||!t||!n)return;let{onDragOver:s}=Z.current,l=a.get(eL),i=l&&l.rect.current?{id:l.id,rect:l.rect.current,data:l.data,disabled:l.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:n.x,y:n.y},over:i};(0,rs.unstable_batchedUpdates)(()=>{eR(i),null==s||s(o),B({type:"onDragOver",event:o})})},[eL]),rm(()=>{eu.current={activatorEvent:q,active:K,activeNode:es,collisionRect:eS,collisions:eM,droppableRects:er,draggableNodes:O,draggingNode:em,draggingNodeRect:ef,droppableContainers:_,over:eE,scrollableAncestors:ey,scrollAdjustedTranslate:eN},U.current={initial:ef,translated:eS}},[K,es,eM,eS,O,em,ef,er,_,eE,ey,eN]),function(e){let t,{acceleration:r,activator:a=p.Pointer,canScroll:n,draggingRect:s,enabled:l,interval:i=5,order:o=g.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:x,threshold:m}=e,f=function(e){let{delta:t,disabled:r}=e,a=ry(t);return rg(e=>{if(r||!a||!e)return am;let n={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[h.Backward]:e.x[h.Backward]||-1===n.x,[h.Forward]:e.x[h.Forward]||1===n.x},y:{[h.Backward]:e.y[h.Backward]||-1===n.y,[h.Forward]:e.y[h.Forward]||1===n.y}}},[r,t,a])}({delta:x,disabled:!l}),[b,y]=(t=(0,X.useRef)(null),[(0,X.useCallback)((e,r)=>{t.current=setInterval(e,r)},[]),(0,X.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),v=(0,X.useRef)({x:0,y:0}),j=(0,X.useRef)({x:0,y:0}),w=(0,X.useMemo)(()=>{switch(a){case p.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case p.DraggableRect:return s}},[a,s,c]),C=(0,X.useRef)(null),k=(0,X.useCallback)(()=>{let e=C.current;if(!e)return;let t=v.current.x*j.current.x,r=v.current.y*j.current.y;e.scrollBy(t,r)},[]),N=(0,X.useMemo)(()=>o===g.TreeOrder?[...d].reverse():d,[o,d]);(0,X.useEffect)(()=>{if(!l||!d.length||!w)return void y();for(let e of N){if((null==n?void 0:n(e))===!1)continue;let t=u[d.indexOf(e)];if(!t)continue;let{direction:a,speed:s}=function(e,t,r,a,n){let{top:s,left:l,right:i,bottom:o}=r;void 0===a&&(a=10),void 0===n&&(n=r8);let{isTop:c,isBottom:d,isLeft:u,isRight:x}=r6(e),m={x:0,y:0},f={x:0,y:0},p={height:t.height*n.y,width:t.width*n.x};return!c&&s<=t.top+p.height?(m.y=h.Backward,f.y=a*Math.abs((t.top+p.height-s)/p.height)):!d&&o>=t.bottom-p.height&&(m.y=h.Forward,f.y=a*Math.abs((t.bottom-p.height-o)/p.height)),!x&&i>=t.right-p.width?(m.x=h.Forward,f.x=a*Math.abs((t.right-p.width-i)/p.width)):!u&&l<=t.left+p.width&&(m.x=h.Backward,f.x=a*Math.abs((t.left+p.width-l)/p.width)),{direction:m,speed:f}}(e,t,w,r,m);for(let e of["x","y"])f[e][a[e]]||(s[e]=0,a[e]=0);if(s.x>0||s.y>0){y(),C.current=e,b(k,i),v.current=s,j.current=a;return}}v.current={x:0,y:0},j.current={x:0,y:0},y()},[r,k,n,y,l,i,JSON.stringify(w),JSON.stringify(f),b,d,N,u,JSON.stringify(m)])}({...ei,delta:W,draggingRect:eS,pointerCoordinates:eX,scrollableAncestors:ey,scrollableAncestorRects:ev});let ez=(0,X.useMemo)(()=>({active:K,activeNode:es,activeNodeRect:ec,activatorEvent:q,collisions:eM,containerNodeRect:ed,dragOverlay:ex,draggableNodes:O,droppableContainers:_,droppableRects:er,over:eE,measureDroppableContainers:ea,scrollableAncestors:ey,scrollableAncestorRects:ev,measuringConfiguration:et,measuringScheduled:en,windowRect:eb}),[K,es,ec,q,eM,ed,ex,O,_,er,eE,ea,ey,ev,et,en,eb]),e$=(0,X.useMemo)(()=>({activatorEvent:q,activators:eT,active:K,activeNodeRect:ec,ariaDescribedById:{draggable:Q},dispatch:I,draggableNodes:O,over:eE,measureDroppableContainers:ea}),[q,eT,K,ec,I,Q,O,eE,ea]);return X.default.createElement(rD.Provider,{value:T},X.default.createElement(aR.Provider,{value:e$},X.default.createElement(aD.Provider,{value:ez},X.default.createElement(az.Provider,{value:eD},S)),X.default.createElement(aB,{disabled:(null==k?void 0:k.restoreFocus)===!1})),X.default.createElement(rB,{...k,hiddenTextDescribedById:Q}))}),aP=(0,X.createContext)(null),aF="button";function aO(){return(0,X.useContext)(aD)}let aW={timeout:25};function a_(e){let{animation:t,children:r}=e,[a,n]=(0,X.useState)(null),[s,l]=(0,X.useState)(null),i=ry(r);return r||a||!i||n(i),rm(()=>{if(!s)return;let e=null==a?void 0:a.key,r=null==a?void 0:a.props.id;null==e||null==r?n(null):Promise.resolve(t(r,s)).then(()=>{n(null)})},[t,a,s]),X.default.createElement(X.default.Fragment,null,r,a?(0,X.cloneElement)(a,{ref:l}):null)}let aH={x:0,y:0,scaleX:1,scaleY:1};function aU(e){let{children:t}=e;return X.default.createElement(aR.Provider,{value:aE},X.default.createElement(az.Provider,{value:aH},t))}let aK={position:"fixed",touchAction:"none"},aG=e=>rk(e)?"transform 250ms ease":void 0,aV=(0,X.forwardRef)((e,t)=>{let{as:r,activatorEvent:a,adjustScale:n,children:s,className:l,rect:i,style:o,transform:c,transition:d=aG}=e;if(!i)return null;let u=n?c:{...c,scaleX:1,scaleY:1},h={...aK,width:i.width,height:i.height,top:i.top,left:i.left,transform:rS.Transform.toString(u),transformOrigin:n&&a?function(e,t){let r=rN(e);if(!r)return"0 0";let a={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}(a,i):void 0,transition:"function"==typeof d?d(a):d,...o};return X.default.createElement(r,{className:l,style:h,ref:t},s)}),aY={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:rS.Transform.toString(t)},{transform:rS.Transform.toString(r)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:r,dragOverlay:a}=e,n={},{styles:s,className:l}=t;if(null!=s&&s.active)for(let[e,t]of Object.entries(s.active))void 0!==t&&(n[e]=r.node.style.getPropertyValue(e),r.node.style.setProperty(e,t));if(null!=s&&s.dragOverlay)for(let[e,t]of Object.entries(s.dragOverlay))void 0!==t&&a.node.style.setProperty(e,t);return null!=l&&l.active&&r.node.classList.add(l.active),null!=l&&l.dragOverlay&&a.node.classList.add(l.dragOverlay),function(){for(let[e,t]of Object.entries(n))r.node.style.setProperty(e,t);null!=l&&l.active&&r.node.classList.remove(l.active)}})},aq=0,aJ=X.default.memo(e=>{var t;let{adjustScale:r=!1,children:a,dropAnimation:n,style:s,transition:l,modifiers:i,wrapperElement:o="div",className:c,zIndex:d=999}=e,{activatorEvent:u,active:h,activeNodeRect:x,containerNodeRect:m,draggableNodes:f,droppableContainers:p,dragOverlay:g,over:b,measuringConfiguration:y,scrollableAncestors:v,scrollableAncestorRects:j,windowRect:w}=aO(),C=(0,X.useContext)(az),k=(t=null==h?void 0:h.id,(0,X.useMemo)(()=>{if(null!=t)return++aq},[t])),N=aT(i,{activatorEvent:u,active:h,activeNodeRect:x,containerNodeRect:m,draggingNodeRect:g.rect,over:b,overlayNodeRect:g.rect,scrollableAncestors:v,scrollableAncestorRects:j,transform:C,windowRect:w}),S=ap(x),M=function(e){let{config:t,draggableNodes:r,droppableContainers:a,measuringConfiguration:n}=e;return rf((e,s)=>{if(null===t)return;let l=r.get(e);if(!l)return;let i=l.node.current;if(!i)return;let o=aC(s);if(!o)return;let{transform:c}=rc(s).getComputedStyle(s),d=rY(c);if(!d)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:a,keyframes:n}={...aY,...e};return e=>{let{active:s,dragOverlay:l,transform:i,...o}=e;if(!t)return;let c={x:l.rect.left-s.rect.left,y:l.rect.top-s.rect.top},d={scaleX:1!==i.scaleX?s.rect.width*i.scaleX/l.rect.width:1,scaleY:1!==i.scaleY?s.rect.height*i.scaleY/l.rect.height:1},u={x:i.x-c.x,y:i.y-c.y,...d},h=n({...o,active:s,dragOverlay:l,transform:{initial:i,final:u}}),[x]=h,m=h[h.length-1];if(JSON.stringify(x)===JSON.stringify(m))return;let f=null==a?void 0:a({active:s,dragOverlay:l,...o}),p=l.node.animate(h,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{p.onfinish=()=>{null==f||f(),e()}})}}(t);return r7(i,n.draggable.measure),u({active:{id:e,data:l.data,node:i,rect:n.draggable.measure(i)},draggableNodes:r,dragOverlay:{node:s,rect:n.dragOverlay.measure(o)},droppableContainers:a,measuringConfiguration:n,transform:d})})}({config:n,draggableNodes:f,droppableContainers:p,measuringConfiguration:y}),L=S?g.setRef:void 0;return X.default.createElement(aU,null,X.default.createElement(a_,{animation:M},h&&k?X.default.createElement(aV,{key:k,id:h.id,ref:L,as:o,activatorEvent:u,adjustScale:r,className:c,transition:l,rect:S,style:{zIndex:d,...s},transform:N},a):null))});function aZ(e,t,r){let a=e.slice();return a.splice(r<0?a.length+r:r,0,a.splice(t,1)[0]),a}function aQ(e){return null!==e&&e>=0}let a0=e=>{let{rects:t,activeIndex:r,overIndex:a,index:n}=e,s=aZ(t,a,r),l=t[n],i=s[n];return i&&l?{x:i.left-l.left,y:i.top-l.top,scaleX:i.width/l.width,scaleY:i.height/l.height}:null},a1="Sortable",a2=X.default.createContext({activeIndex:-1,containerId:a1,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:a0,disabled:{draggable:!1,droppable:!1}});function a4(e){let{children:t,id:r,items:a,strategy:n=a0,disabled:s=!1}=e,{active:l,dragOverlay:i,droppableRects:o,over:c,measureDroppableContainers:d}=aO(),u=rj(a1,r),h=null!==i.rect,x=(0,X.useMemo)(()=>a.map(e=>"object"==typeof e&&"id"in e?e.id:e),[a]),m=null!=l,f=l?x.indexOf(l.id):-1,p=c?x.indexOf(c.id):-1,g=(0,X.useRef)(x),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(x,g.current),y=-1!==p&&-1===f||b,v="boolean"==typeof s?{draggable:s,droppable:s}:s;rm(()=>{b&&m&&d(x)},[b,x,m,d]),(0,X.useEffect)(()=>{g.current=x},[x]);let j=(0,X.useMemo)(()=>({activeIndex:f,containerId:u,disabled:v,disableTransforms:y,items:x,overIndex:p,useDragOverlay:h,sortedRects:x.reduce((e,t,r)=>{let a=o.get(t);return a&&(e[r]=a),e},Array(x.length)),strategy:n}),[f,u,v.draggable,v.droppable,y,x,p,o,h,n]);return X.default.createElement(a2.Provider,{value:j},t)}let a5=e=>{let{id:t,items:r,activeIndex:a,overIndex:n}=e;return aZ(r,a,n).indexOf(t)},a3=e=>{let{containerId:t,isSorting:r,wasDragging:a,index:n,items:s,newIndex:l,previousItems:i,previousContainerId:o,transition:c}=e;return!!c&&!!a&&(i===s||n!==l)&&(!!r||l!==n&&t===o)},a6={duration:200,easing:"ease"},a8="transform",a9=rS.Transition.toString({property:a8,duration:0,easing:"linear"}),a7={roleDescription:"sortable"};function ne(e){if(!e)return!1;let t=e.data.current;return!!t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable}let nt=[m.Down,m.Right,m.Up,m.Left],nr=(e,t)=>{let{context:{active:r,collisionRect:a,droppableRects:n,droppableContainers:s,over:l,scrollableAncestors:i}}=t;if(nt.includes(e.code)){if(e.preventDefault(),!r||!a)return;let t=[];s.getEnabled().forEach(r=>{if(!r||null!=r&&r.disabled)return;let s=n.get(r.id);if(s)switch(e.code){case m.Down:a.top<s.top&&t.push(r);break;case m.Up:a.top>s.top&&t.push(r);break;case m.Left:a.left>s.left&&t.push(r);break;case m.Right:a.left<s.left&&t.push(r)}});let d=(e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,n=rW(t),s=[];for(let e of a){let{id:t}=e,a=r.get(t);if(a){let r=rW(a),l=Number((n.reduce((e,t,a)=>e+rP(r[a],t),0)/4).toFixed(4));s.push({id:t,data:{droppableContainer:e,value:l}})}}return s.sort(rF)})({active:r,collisionRect:a,droppableRects:n,droppableContainers:t,pointerCoordinates:null}),u=r_(d,"id");if(u===(null==l?void 0:l.id)&&d.length>1&&(u=d[1].id),null!=u){let e=s.get(r.id),t=s.get(u),l=t?n.get(t.id):null,d=null==t?void 0:t.node.current;if(d&&l&&e&&t){var o,c;let r=rQ(d).some((e,t)=>i[t]!==e),n=na(e,t),s=(o=e,c=t,!!ne(o)&&!!ne(c)&&!!na(o,c)&&o.data.current.sortable.index<c.data.current.sortable.index),u=r||!n?{x:0,y:0}:{x:s?a.width-l.width:0,y:s?a.height-l.height:0},h={x:l.left,y:l.top};return u.x&&u.y?h:rC(h,u)}}}};function na(e,t){return!!ne(e)&&!!ne(t)&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}function nn({id:e,character:t,index:r}){let{attributes:a,listeners:n,setNodeRef:s,transform:l,transition:i,isDragging:o}=function(e){var t,r,a,n;let{animateLayoutChanges:s=a3,attributes:l,disabled:i,data:o,getNewIndex:c=a5,id:d,strategy:h,resizeObserverConfig:x,transition:m=a6}=e,{items:f,containerId:p,activeIndex:g,disabled:b,disableTransforms:y,sortedRects:v,overIndex:j,useDragOverlay:w,strategy:C}=(0,X.useContext)(a2),k=(t=i,r=b,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(a=null==t?void 0:t.draggable)?a:r.draggable,droppable:null!=(n=null==t?void 0:t.droppable)?n:r.droppable}),N=f.indexOf(d),S=(0,X.useMemo)(()=>({sortable:{containerId:p,index:N,items:f},...o}),[p,o,N,f]),M=(0,X.useMemo)(()=>f.slice(f.indexOf(d)),[f,d]),{rect:L,node:E,isOver:R,setNodeRef:D}=function(e){let{data:t,disabled:r=!1,id:a,resizeObserverConfig:n}=e,s=rj("Droppable"),{active:l,dispatch:i,over:o,measureDroppableContainers:c}=(0,X.useContext)(aR),d=(0,X.useRef)({disabled:r}),h=(0,X.useRef)(!1),x=(0,X.useRef)(null),m=(0,X.useRef)(null),{disabled:f,updateMeasurementsFor:p,timeout:g}={...aW,...n},b=rp(null!=p?p:a),y=ag({callback:(0,X.useCallback)(()=>{if(!h.current){h.current=!0;return}null!=m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{c(Array.isArray(b.current)?b.current:[b.current]),m.current=null},g)},[g]),disabled:f||!l}),[v,j]=rb((0,X.useCallback)((e,t)=>{y&&(t&&(y.unobserve(t),h.current=!1),e&&y.observe(e))},[y])),w=rp(t);return(0,X.useEffect)(()=>{y&&v.current&&(y.disconnect(),h.current=!1,y.observe(v.current))},[v,y]),(0,X.useEffect)(()=>(i({type:u.RegisterDroppable,element:{id:a,key:s,disabled:r,node:v,rect:x,data:w}}),()=>i({type:u.UnregisterDroppable,key:s,id:a})),[a]),(0,X.useEffect)(()=>{r!==d.current.disabled&&(i({type:u.SetDroppableDisabled,id:a,key:s,disabled:r}),d.current.disabled=r)},[a,s,r,i]),{active:l,rect:x,isOver:(null==o?void 0:o.id)===a,node:v,over:o,setNodeRef:j}}({id:d,data:S,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...x}}),{active:A,activatorEvent:I,activeNodeRect:B,attributes:T,setNodeRef:z,listeners:$,isDragging:P,over:F,setActivatorNodeRef:O,transform:W}=function(e){let{id:t,data:r,disabled:a=!1,attributes:n}=e,s=rj("Draggable"),{activators:l,activatorEvent:i,active:o,activeNodeRect:c,ariaDescribedById:d,draggableNodes:u,over:h}=(0,X.useContext)(aR),{role:x=aF,roleDescription:m="draggable",tabIndex:f=0}=null!=n?n:{},p=(null==o?void 0:o.id)===t,g=(0,X.useContext)(p?az:aP),[b,y]=rb(),[v,j]=rb(),w=(0,X.useMemo)(()=>l.reduce((e,r)=>{let{eventName:a,handler:n}=r;return e[a]=e=>{n(e,t)},e},{}),[l,t]),C=rp(r);return rm(()=>(u.set(t,{id:t,key:s,node:b,activatorNode:v,data:C}),()=>{let e=u.get(t);e&&e.key===s&&u.delete(t)}),[u,t]),{active:o,activatorEvent:i,activeNodeRect:c,attributes:(0,X.useMemo)(()=>({role:x,tabIndex:f,"aria-disabled":a,"aria-pressed":!!p&&x===aF||void 0,"aria-roledescription":m,"aria-describedby":d.draggable}),[a,x,f,p,m,d.draggable]),isDragging:p,listeners:a?void 0:w,node:b,over:h,setNodeRef:y,setActivatorNodeRef:j,transform:g}}({id:d,data:S,attributes:{...a7,...l},disabled:k.draggable}),_=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,X.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(D,z),H=!!A,U=H&&!y&&aQ(g)&&aQ(j),K=!w&&P,G=K&&U?W:null,V=U?null!=G?G:(null!=h?h:C)({rects:v,activeNodeRect:B,activeIndex:g,overIndex:j,index:N}):null,Y=aQ(g)&&aQ(j)?c({id:d,items:f,activeIndex:g,overIndex:j}):N,q=null==A?void 0:A.id,J=(0,X.useRef)({activeId:q,items:f,newIndex:Y,containerId:p}),Z=f!==J.current.items,Q=s({active:A,containerId:p,isDragging:P,isSorting:H,id:d,index:N,items:f,newIndex:J.current.newIndex,previousItems:J.current.items,previousContainerId:J.current.containerId,transition:m,wasDragging:null!=J.current.activeId}),ee=function(e){let{disabled:t,index:r,node:a,rect:n}=e,[s,l]=(0,X.useState)(null),i=(0,X.useRef)(r);return rm(()=>{if(!t&&r!==i.current&&a.current){let e=n.current;if(e){let t=rJ(a.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&l(r)}}r!==i.current&&(i.current=r)},[t,r,a,n]),(0,X.useEffect)(()=>{s&&l(null)},[s]),s}({disabled:!Q,index:N,node:E,rect:L});return(0,X.useEffect)(()=>{H&&J.current.newIndex!==Y&&(J.current.newIndex=Y),p!==J.current.containerId&&(J.current.containerId=p),f!==J.current.items&&(J.current.items=f)},[H,Y,p,f]),(0,X.useEffect)(()=>{if(q===J.current.activeId)return;if(null!=q&&null==J.current.activeId){J.current.activeId=q;return}let e=setTimeout(()=>{J.current.activeId=q},50);return()=>clearTimeout(e)},[q]),{active:A,activeIndex:g,attributes:T,data:S,rect:L,index:N,newIndex:Y,items:f,isOver:R,isSorting:H,isDragging:P,listeners:$,node:E,overIndex:j,over:F,setNodeRef:_,setActivatorNodeRef:O,setDroppableNodeRef:D,setDraggableNodeRef:z,transform:null!=ee?ee:V,transition:ee||Z&&J.current.newIndex===N?a9:(!K||rk(I))&&m&&(H||Q)?rS.Transition.toString({...m,property:a8}):void 0}}({id:e}),c={transform:rS.Transform.toString(l),transition:i};return(0,j.jsxs)("div",{ref:s,style:c,...a,...n,className:`
        p-1.5 rounded border-2 transition-all cursor-grab active:cursor-grabbing
        ${o?"border-retro-cyan bg-retro-cyan/20 opacity-50":"border-retro-grid/30 hover:border-retro-grid/50"}
      `,title:`Character ${r}`,children:[(0,j.jsx)(tp.CharacterDisplay,{character:t,mode:"small",smallScale:3}),(0,j.jsx)("div",{className:"text-[8px] text-gray-500 text-center mt-0.5",children:r})]})}function ns({character:e}){return(0,j.jsx)("div",{className:"p-1.5 rounded border-2 border-retro-cyan bg-retro-navy shadow-lg",children:(0,j.jsx)(tp.CharacterDisplay,{character:e,mode:"small",smallScale:3})})}function nl({isOpen:e,onClose:t,characters:r,onReorder:a}){let[n,s]=(0,X.useState)([]),[l,i]=(0,X.useState)(null);(0,X.useEffect)(()=>{e&&s([...r])},[e,r]);let o=(0,X.useMemo)(()=>n.map((e,t)=>`char-${t}`),[n]),c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,X.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(rz(ax,{activationConstraint:{distance:8}}),rz(ao,{coordinateGetter:nr})),d=(0,X.useMemo)(()=>l&&n[parseInt(l.replace("char-",""),10)]||null,[l,n]),u=(0,X.useCallback)(e=>{i(e.active.id)},[]),h=(0,X.useCallback)(e=>{let{active:t,over:r}=e;if(i(null),r&&t.id!==r.id){let e=parseInt(t.id.replace("char-",""),10),a=parseInt(r.id.replace("char-",""),10);s(t=>aZ(t,e,a))}},[]),x=(0,X.useCallback)(()=>{a(n),t()},[n,a,t]),m=(0,X.useCallback)(e=>{"Escape"===e.key&&t()},[t]),f=(0,X.useMemo)(()=>n.length!==r.length||n.some((e,t)=>e!==r[t]),[n,r]);return e?(0,j.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:m,children:[(0,j.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,j.jsxs)("div",{className:"relative w-full max-w-3xl max-h-[80vh] bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl flex flex-col overflow-hidden",children:[(0,j.jsxs)("div",{className:"flex-shrink-0 p-4 border-b border-retro-grid/30",children:[(0,j.jsx)("h2",{className:"text-lg font-medium text-white",children:"Reorder Characters"}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Drag and drop characters to reorder them"})]}),(0,j.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,j.jsxs)(a$,{sensors:c,collisionDetection:rU,onDragStart:u,onDragEnd:h,children:[(0,j.jsx)(a4,{items:o,strategy:a0,children:(0,j.jsx)("div",{className:"grid gap-2 bg-black/30 rounded-lg p-3",style:{gridTemplateColumns:"repeat(auto-fill, minmax(50px, 1fr))"},children:n.map((e,t)=>(0,j.jsx)(nn,{id:o[t],character:e,index:t},o[t]))})}),(0,j.jsx)(aJ,{children:d&&(0,j.jsx)(ns,{character:d})})]})}),(0,j.jsxs)("div",{className:"flex-shrink-0 p-4 border-t border-retro-grid/30 flex justify-between",children:[(0,j.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,j.jsx)("button",{onClick:x,disabled:!f,className:"px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply"})]})]})]}):null}e.s(["ReorderModal",()=>nl],55361);let ni=[{label:"0.5x",value:.5},{label:"0.75x",value:.75},{label:"1.5x",value:1.5},{label:"2x",value:2},{label:"3x",value:3},{label:"4x",value:4}],no=["tl","tc","tr","ml","mc","mr","bl","bc","br"],nc=[{id:"nearest",label:"Nearest Neighbor",description:"Fast, sharp edges"},{id:"threshold",label:"Threshold-based",description:"Smoother, considers pixel coverage"}];function nd({isOpen:e,onClose:t,onScale:r,characters:a,selectedIndices:n,config:s,foregroundColor:l="#ffffff",backgroundColor:i="#000000"}){let[o,c]=(0,X.useState)(2),[d,u]=(0,X.useState)("mc"),[h,x]=(0,X.useState)("nearest"),m=(0,X.useMemo)(()=>Array.from(n).slice(0,16).map(e=>a[e]).filter(e=>void 0!==e),[a,n]),f=(0,X.useMemo)(()=>m.map(e=>ea(e,o,d,h)),[m,o,d,h]),p=Math.max(0,n.size-16),g=(0,X.useCallback)(()=>{r(o,d,h),t()},[o,d,h,r,t]),b=(0,X.useCallback)(e=>{"Escape"===e.key?t():"Enter"===e.key&&g()},[t,g]);if(!e)return null;let y=Math.min(4,m.length);return(0,j.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:b,children:[(0,j.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,j.jsxs)("div",{className:"relative w-full max-w-lg bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,j.jsx)("h2",{className:"text-lg font-medium text-white mb-4",children:"Scale Characters"}),(0,j.jsx)("div",{className:"mb-6",children:(0,j.jsxs)("div",{className:"flex gap-4",children:[(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("label",{className:"block text-xs text-gray-500 mb-2",children:"Before"}),(0,j.jsx)("div",{className:"bg-retro-dark rounded border border-retro-grid/30 p-2 min-h-[80px] flex items-center justify-center",children:(0,j.jsx)("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${y}, ${2*s.width}px)`},children:m.map((e,t)=>(0,j.jsx)(tp.CharacterDisplay,{character:e,mode:"small",smallScale:2,foregroundColor:l,backgroundColor:i,interactive:!1},t))})}),p>0&&(0,j.jsxs)("p",{className:"text-[10px] text-gray-500 mt-1 text-center",children:["+",p," more"]})]}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("label",{className:"block text-xs text-gray-500 mb-2",children:"After"}),(0,j.jsx)("div",{className:"bg-retro-dark rounded border border-retro-grid/30 p-2 min-h-[80px] flex items-center justify-center",children:(0,j.jsx)("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${y}, ${2*s.width}px)`},children:f.map((e,t)=>(0,j.jsx)(tp.CharacterDisplay,{character:e,mode:"small",smallScale:2,foregroundColor:l,backgroundColor:i,interactive:!1},t))})}),p>0&&(0,j.jsxs)("p",{className:"text-[10px] text-gray-500 mt-1 text-center",children:["+",p," more"]})]})]})}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Scale Factor"}),(0,j.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[ni.map(e=>(0,j.jsx)("button",{type:"button",onClick:()=>c(e.value),className:`
                  px-3 py-1.5 text-sm rounded border transition-all
                  ${o===e.value?"border-retro-cyan bg-retro-cyan/20 text-retro-cyan":"border-retro-grid/50 bg-retro-dark text-gray-400 hover:border-retro-grid hover:text-white"}
                `,children:e.label},e.value)),(0,j.jsxs)("div",{className:"flex items-center gap-1.5 ml-2",children:[(0,j.jsx)("span",{className:"text-xs text-gray-500",children:"or"}),(0,j.jsx)("input",{type:"number",min:.1,max:10,step:.1,value:o,onChange:e=>{let t=parseFloat(e.target.value);!isNaN(t)&&t>0&&t<=10&&c(Math.round(100*t)/100)},className:"w-20 px-2 py-1.5 text-sm bg-retro-dark border border-retro-grid/50 rounded text-white text-center focus:outline-none focus:border-retro-cyan"}),(0,j.jsx)("span",{className:"text-xs text-gray-500",children:"x"})]})]})]}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Anchor Position"}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Select where to anchor content when scaling"}),(0,j.jsx)("div",{className:"grid grid-cols-3 gap-1 w-32 mx-auto",children:no.map(e=>{let t=d===e;return(0,j.jsx)("button",{type:"button",onClick:()=>u(e),className:`
                    w-10 h-10 rounded border-2 transition-all
                    flex items-center justify-center
                    ${t?"border-retro-cyan bg-retro-cyan/20":"border-retro-grid/50 bg-retro-dark hover:border-retro-grid"}
                  `,title:{tl:"Top Left",tc:"Top Center",tr:"Top Right",ml:"Middle Left",mc:"Middle Center",mr:"Middle Right",bl:"Bottom Left",bc:"Bottom Center",br:"Bottom Right"}[e],children:(0,j.jsx)("div",{className:`
                      w-3 h-3 rounded-sm transition-colors
                      ${t?"bg-retro-cyan":"bg-gray-600"}
                    `})},e)})})]}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Algorithm"}),(0,j.jsx)("div",{className:"flex gap-2",children:nc.map(e=>(0,j.jsxs)("button",{type:"button",onClick:()=>x(e.id),className:`
                  flex-1 px-3 py-2 text-sm rounded border transition-all text-left
                  ${h===e.id?"border-retro-cyan bg-retro-cyan/20 text-retro-cyan":"border-retro-grid/50 bg-retro-dark text-gray-400 hover:border-retro-grid hover:text-white"}
                `,children:[(0,j.jsx)("div",{className:"font-medium",children:e.label}),(0,j.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:e.description})]},e.id))})]}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mb-4 text-center h-4",children:o>1?"Content will be enlarged and clipped to fit":o<1?"Content will be reduced":"No scaling applied"}),(0,j.jsxs)("div",{className:"flex gap-3",children:[(0,j.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,j.jsx)("button",{onClick:g,disabled:1===o||o<=0||o>10,className:"flex-1 px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply"})]})]})]})}function nu({isOpen:e,onClose:t,totalCharacters:r,currentIndex:a,onGoTo:n}){let[s,l]=(0,X.useState)(""),[i,o]=(0,X.useState)(null);(0,X.useEffect)(()=>{e&&(l(""),o(null))},[e]),(0,X.useEffect)(()=>{o(function(e){let t=e.trim().toLowerCase();if(!t)return null;if(t.startsWith("0x")){let e=parseInt(t.slice(2),16);return isNaN(e)?null:e}if(t.startsWith("$")){let e=parseInt(t.slice(1),16);return isNaN(e)?null:e}if(t.endsWith("h")){let e=parseInt(t.slice(0,-1),16);return isNaN(e)?null:e}let r=parseInt(t,10);return isNaN(r)?null:r}(s))},[s]);let c=null!==i&&i>=0&&i<r,d=(0,X.useCallback)(()=>{c&&null!==i&&(n(i),t())},[c,i,n,t]),u=(0,X.useCallback)(e=>{"Escape"===e.key?t():"Enter"===e.key&&d()},[t,d]);if(!e)return null;let h=null!==i&&eN(i),x=null!==i?ek(i):null;return(0,j.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:u,children:[(0,j.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,j.jsxs)("div",{className:"relative w-full max-w-xs bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,j.jsx)("h2",{className:"text-lg font-medium text-white mb-4",children:"Go to Character"}),(0,j.jsxs)("div",{className:"mb-4",children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Character Index"}),(0,j.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"e.g. 65, 0x41, $41",className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan font-mono",autoFocus:!0}),(0,j.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter decimal (65) or hex (0x41, $41)"})]}),(0,j.jsxs)("div",{className:"mb-4 p-3 bg-retro-dark/50 rounded border border-retro-grid/30 min-h-[60px]",children:[null===i&&s&&(0,j.jsx)("p",{className:"text-xs text-red-400",children:"Invalid number format"}),null!==i&&!c&&(0,j.jsxs)("p",{className:"text-xs text-red-400",children:["Index out of range (0-",r-1,")"]}),c&&null!==i&&(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("span",{className:"text-xs text-gray-400",children:"Decimal:"}),(0,j.jsx)("span",{className:"text-sm text-retro-cyan font-mono",children:i})]}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("span",{className:"text-xs text-gray-400",children:"Hex:"}),(0,j.jsxs)("span",{className:"text-sm text-retro-cyan font-mono",children:["0x",i.toString(16).toUpperCase().padStart(2,"0")]})]}),h&&(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("span",{className:"text-xs text-gray-400",children:"ASCII:"}),(0,j.jsxs)("span",{className:"text-sm text-retro-pink font-mono",children:["'",String.fromCharCode(i),"'"]})]}),x&&(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("span",{className:"text-xs text-gray-400",children:"Control:"}),(0,j.jsx)("span",{className:"text-sm text-retro-pink",children:x})]})]}),!s&&(0,j.jsxs)("p",{className:"text-xs text-gray-500",children:["Current: ",a," (0x",a.toString(16).toUpperCase().padStart(2,"0"),")"]})]}),(0,j.jsxs)("div",{className:"flex gap-3",children:[(0,j.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,j.jsx)("button",{onClick:d,disabled:!c,className:"flex-1 px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Go"})]})]})]})}function nh({character:e,index:t,isSelected:r,onClick:a,foregroundColor:n,backgroundColor:s}){let l=e.pixels.length,i=e.pixels[0]?.length||0,o=eN(t),c=ek(t),d=(0,X.useMemo)(()=>{let e=[`#${t}`,`0x${t.toString(16).toUpperCase().padStart(2,"0")}`];return o?e.push(`'${String.fromCharCode(t)}'`):c&&e.push(c),e.join(" | ")},[t,o,c]);return(0,j.jsxs)("button",{onClick:a,className:`
        relative p-0.5 rounded transition-all
        hover:bg-retro-cyan/20 hover:ring-1 hover:ring-retro-cyan/50
        ${r?"bg-retro-cyan/30 ring-2 ring-retro-cyan":""}
      `,title:d,children:[(0,j.jsx)("div",{className:"grid",style:{gridTemplateColumns:`repeat(${i}, 2px)`,gridTemplateRows:`repeat(${l}, 2px)`,width:2*i,height:2*l},children:e.pixels.flat().map((e,t)=>(0,j.jsx)("div",{style:{backgroundColor:e?n:s,width:2,height:2}},t))}),(0,j.jsx)("span",{className:"absolute inset-0 flex items-center justify-center text-[6px] font-mono text-white opacity-0 hover:opacity-100 bg-black/60 rounded",children:t.toString(16).toUpperCase().padStart(2,"0")})]})}function nx({isOpen:e,onClose:t,characters:r,selectedIndex:a,onSelect:n,foregroundColor:s="#ffffff",backgroundColor:l="#000000"}){let i=(0,X.useCallback)(e=>{"Escape"===e.key&&t()},[t]),o=(0,X.useCallback)(e=>{n(e),t()},[n,t]),c=Math.ceil(r.length/16);return e?(0,j.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:i,children:[(0,j.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,j.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[90vh] bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl flex flex-col",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-retro-grid/30",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h2",{className:"text-lg font-medium text-white",children:"Character Map"}),(0,j.jsxs)("p",{className:"text-xs text-gray-400",children:[r.length," characters  Click to select  Hover for details"]})]}),(0,j.jsx)("button",{onClick:t,className:"p-1 text-gray-400 hover:text-white transition-colors",children:(0,j.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,j.jsxs)("div",{className:"flex p-4 pb-0 gap-1",children:[(0,j.jsx)("div",{className:"w-8"})," ",(0,j.jsx)("div",{className:"flex gap-0.5",children:Array.from({length:16}).map((e,t)=>(0,j.jsx)("div",{className:"w-[18px] text-center text-[8px] font-mono text-gray-500",children:t.toString(16).toUpperCase()},t))})]}),(0,j.jsx)("div",{className:"flex-1 overflow-auto p-4 pt-2",children:(0,j.jsx)("div",{className:"flex flex-col gap-0.5",children:Array.from({length:c}).map((e,t)=>{let n=16*t;return(0,j.jsxs)("div",{className:"flex gap-1",children:[(0,j.jsx)("div",{className:"w-8 flex items-center justify-end pr-1 text-[9px] font-mono text-gray-500",children:(16*t).toString(16).toUpperCase().padStart(2,"0")}),(0,j.jsx)("div",{className:"flex gap-0.5",children:Array.from({length:16}).map((e,t)=>{let i=n+t;return i>=r.length?(0,j.jsx)("div",{className:"w-[18px] h-[18px] bg-retro-dark/30 rounded"},t):(0,j.jsx)(nh,{character:r[i],index:i,isSelected:i===a,onClick:()=>o(i),foregroundColor:s,backgroundColor:l},t)})})]},t)})})}),(0,j.jsxs)("div",{className:"p-3 border-t border-retro-grid/30 flex items-center justify-between text-xs text-gray-400",children:[(0,j.jsxs)("div",{className:"flex items-center gap-4",children:[(0,j.jsxs)("span",{className:"flex items-center gap-1",children:[(0,j.jsx)("span",{className:"w-3 h-3 rounded bg-retro-cyan/30 ring-1 ring-retro-cyan"}),(0,j.jsx)("span",{children:"Selected"})]}),(0,j.jsxs)("span",{children:["Current: #",a," (0x",a.toString(16).toUpperCase().padStart(2,"0"),")",eN(a)&&(0,j.jsxs)("span",{className:"ml-1 text-retro-pink",children:["'",String.fromCharCode(a),"'"]})]})]}),(0,j.jsx)("span",{className:"font-mono",children:"Press M to toggle"})]})]})]}):null}e.s(["ScaleModal",()=>nd],48026),e.s(["GoToCharacterModal",()=>nu],64721),e.s(["AsciiMapModal",()=>nx],53444);let nm=[{label:"Quick Fox",text:"The quick brown fox jumps over the lazy dog."},{label:"Hello World",text:"HELLO WORLD!\nHello World!\nhello world!"},{label:"Numbers",text:"0123456789\nABCDEF abcdef"},{label:"Symbols",text:"!@#$%^&*()_+-=[]{}\\|;':\",./<>?"},{label:"ASCII Art",text:"+------------------+\n|  RETRO COMPUTER  |\n+------------------+"}],nf=[{value:1,label:"1x"},{value:2,label:"2x"},{value:3,label:"3x"},{value:4,label:"4x"}];function np({character:e,scale:t,foregroundColor:r,backgroundColor:a}){let n=(0,X.useRef)(null);return((0,X.useEffect)(()=>{let s=n.current;if(!s||!e)return;let l=s.getContext("2d");if(!l)return;let i=e.pixels[0]?.length||8,o=e.pixels.length;s.width=i*t,s.height=o*t,l.fillStyle=a,l.fillRect(0,0,s.width,s.height),l.fillStyle=r;for(let r=0;r<o;r++)for(let a=0;a<i;a++)e.pixels[r]?.[a]&&l.fillRect(a*t,r*t,t,t)},[e,t,r,a]),e)?(0,j.jsx)("canvas",{ref:n,className:"block"}):(0,j.jsx)("div",{style:{width:8*t,height:8*t,backgroundColor:a}})}function ng({isOpen:e,onClose:t,characters:r,config:a,foregroundColor:n="#ffffff",backgroundColor:s="#000000"}){let[l,i]=(0,X.useState)(nm[0].text),[o,c]=(0,X.useState)(2),[d,u]=(0,X.useState)(n),[h,x]=(0,X.useState)(s),m=(0,X.useRef)(null);(0,X.useEffect)(()=>{u(n),x(s)},[n,s]),(0,X.useEffect)(()=>{e&&m.current&&m.current.focus()},[e]),(0,X.useEffect)(()=>{if(!e)return;let r=e=>{"Escape"===e.key&&(e.preventDefault(),t())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[e,t]);let f=(0,X.useMemo)(()=>l.split("\n").map(e=>{let t=[];for(let a of e){let e=a.charCodeAt(0);e>=0&&e<r.length?t.push(r[e]):t.push(r[32]||r[0]||null)}return t}),[l,r]);return e?(0,j.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,j.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,j.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl flex flex-col",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-retro-grid/30",children:[(0,j.jsx)("h2",{className:"text-lg font-medium text-white",children:"Text Preview"}),(0,j.jsx)("button",{onClick:t,className:"p-1 text-gray-400 hover:text-white transition-colors","aria-label":"Close",children:(0,j.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,j.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,j.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Enter text to preview"}),(0,j.jsx)("textarea",{ref:m,value:l,onChange:e=>i(e.target.value),rows:6,className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white font-mono placeholder-gray-500 focus:outline-none focus:border-retro-cyan resize-none",placeholder:"Type your text here..."})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Sample texts"}),(0,j.jsx)("div",{className:"flex flex-wrap gap-2",children:nm.map(e=>(0,j.jsx)("button",{onClick:()=>i(e.text),className:"px-2 py-1 text-xs bg-retro-dark border border-retro-grid/30 rounded text-gray-400 hover:text-retro-cyan hover:border-retro-cyan/50 transition-colors",children:e.label},e.label))})]}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Scale"}),(0,j.jsx)("div",{className:"flex gap-1",children:nf.map(e=>(0,j.jsx)("button",{onClick:()=>c(e.value),className:`px-3 py-1 text-xs rounded transition-colors ${o===e.value?"bg-retro-cyan/20 border border-retro-cyan text-retro-cyan":"bg-retro-dark border border-retro-grid/30 text-gray-400 hover:text-white"}`,children:e.label},e.value))})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Character Set"}),(0,j.jsxs)("div",{className:"text-xs text-gray-500",children:[a.width,"x",a.height," pixels, ",r.length," chars"]})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Foreground"}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("input",{type:"color",value:d,onChange:e=>u(e.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent"}),(0,j.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),className:"flex-1 px-2 py-1 text-xs bg-retro-dark border border-retro-grid/30 rounded text-gray-300 font-mono"})]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Background"}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("input",{type:"color",value:h,onChange:e=>x(e.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent"}),(0,j.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),className:"flex-1 px-2 py-1 text-xs bg-retro-dark border border-retro-grid/30 rounded text-gray-300 font-mono"})]})]})]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Preview"}),(0,j.jsx)("div",{className:"p-4 rounded border border-retro-grid/30 overflow-auto max-h-[400px]",style:{backgroundColor:h},children:0===f.length||1===f.length&&0===f[0].length?(0,j.jsx)("div",{className:"text-xs text-gray-500 italic",children:"Type something to see the preview..."}):(0,j.jsx)("div",{className:"space-y-0",children:f.map((e,t)=>(0,j.jsx)("div",{className:"flex flex-wrap",style:{minHeight:a.height*o},children:0===e.length?(0,j.jsx)("div",{style:{height:a.height*o,width:a.width*o}}):e.map((e,t)=>(0,j.jsx)(np,{character:e,scale:o,foregroundColor:d,backgroundColor:h},t))},t))})}),(0,j.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[l.length," characters, ",f.length," lines"]})]})]})}),(0,j.jsxs)("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-retro-grid/30",children:[(0,j.jsx)("button",{onClick:()=>i(""),className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition-colors",children:"Clear"}),(0,j.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors",children:"Close"})]})]})]}):null}e.s(["TextPreviewModal",()=>ng],1164)},59544,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let a={pink:"btn-neon btn-neon-pink",cyan:"btn-neon btn-neon-cyan",ghost:"bg-transparent text-retro-cyan hover:text-retro-pink transition-colors"},n={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},s=(0,r.forwardRef)(({className:e="",variant:r="pink",size:s="md",children:l,href:i,...o},c)=>{let d=`inline-flex items-center justify-center font-ui font-semibold uppercase tracking-wider rounded transition-all duration-300 ${a[r]} ${n[s]} ${e}`;return i?(0,t.jsx)("a",{href:i,className:d,children:l}):(0,t.jsx)("button",{ref:c,className:d,...o,children:l})});s.displayName="Button",e.s(["Button",0,s])},3813,35860,73233,28827,80364,26089,75052,63427,91797,e=>{"use strict";e.i(89043),e.i(49738);var t=e.i(32267),r=e.i(29493);e.i(38794),e.i(4941),e.i(93949),e.i(25544),e.i(73581),e.i(60441),e.i(42187),e.i(87355),e.i(45835),e.i(95879),e.i(43237),e.i(99401),e.i(59160),e.i(16244),e.i(46628),e.i(87188),e.i(38910),e.i(56859),e.i(23079),e.i(45497),e.i(78071),e.i(35052),e.i(55361),e.i(48026),e.i(64721),e.i(53444),e.i(1164);var a=e.i(43476),n=e.i(71645),s=e.i(59544),l=e.i(16205);function i({isOpen:e,onClose:t,onImport:i}){let o=(0,n.useRef)(null),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(null),[x,m]=(0,n.useState)(null),[f,p]=(0,n.useState)(!1),[g,b]=(0,n.useState)(null),[y,v]=(0,n.useState)((0,l.getDefaultImageImportOptions)()),[j,X]=(0,n.useState)([]),w=(0,n.useMemo)(()=>u?(0,l.parseImageToCharacters)(u,y):null,[u,y]);(0,n.useEffect)(()=>{e||(d(null),h(null),m(null),b(null),v((0,l.getDefaultImageImportOptions)()),X([]))},[e]);let C=(0,n.useCallback)(async e=>{if(b(null),!(0,l.isValidImageFile)(e))return void b(`Invalid file type. Please select an image file (${(0,l.getSupportedImageExtensions)()})`);if(e.size>0xa00000)return void b("File too large. Maximum size is 10MB.");d(e),p(!0);try{let t=URL.createObjectURL(e);m(t);let r=await (0,l.loadImageData)(e);h(r);let a=(0,l.detectCharacterDimensions)(r.width,r.height);X(a),a.length>0&&v(e=>({...e,charWidth:a[0].width,charHeight:a[0].height}))}catch(e){b(e instanceof Error?e.message:"Failed to load image")}finally{p(!1)}},[]),k=(0,n.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer.files;t.length>0&&C(t[0])},[C]),N=(0,n.useCallback)(e=>{e.preventDefault()},[]),S=(0,n.useCallback)(e=>{let t=e.target.files;t&&t.length>0&&C(t[0])},[C]),M=(0,n.useCallback)(()=>{if(!w||0===w.characters.length)return;let e={width:y.charWidth,height:y.charHeight,padding:"right",bitDirection:"ltr"};i(w.characters,e),t()},[w,y,i,t]),L=(0,n.useCallback)((e,t)=>{v(r=>({...r,[e]:t}))},[]);return e?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:t}),(0,a.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] overflow-hidden bg-retro-dark border border-retro-grid/50 rounded-lg shadow-2xl flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-retro-grid/30",children:[(0,a.jsx)("h2",{className:"text-lg font-display text-gray-200",children:"Import from Image"}),(0,a.jsx)("button",{onClick:t,className:"p-1 text-gray-500 hover:text-gray-300 transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:u?(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"card-retro p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-400",children:"Source Image"}),(0,a.jsx)("button",{onClick:()=>{d(null),h(null),m(null),X([])},className:"text-xs text-retro-cyan hover:text-retro-pink",children:"Change"})]}),x&&(0,a.jsx)("div",{className:"bg-black/50 rounded p-2 flex justify-center",children:(0,a.jsx)("img",{src:x,alt:"Source",className:"max-w-full max-h-48 object-contain",style:{imageRendering:"pixelated"}})}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[c?.name," - ",u.width,"x",u.height," pixels"]})]}),(0,a.jsxs)("div",{className:"card-retro p-4 space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-300",children:"Grid Settings"}),j.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-2",children:"Detected sizes"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:j.slice(0,4).map((e,t)=>(0,a.jsxs)("button",{onClick:()=>{L("charWidth",e.width),L("charHeight",e.height)},className:`
                              px-2 py-1 text-xs rounded border transition-colors
                              ${y.charWidth===e.width&&y.charHeight===e.height?"border-retro-cyan bg-retro-cyan/10 text-retro-cyan":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
                            `,children:[e.width,"x",e.height," (",e.columns*e.rows," chars)"]},t))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Char Width"}),(0,a.jsx)("input",{type:"number",min:1,max:32,value:y.charWidth,onChange:e=>L("charWidth",parseInt(e.target.value)||8),className:"w-full px-3 py-1.5 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Char Height"}),(0,a.jsx)("input",{type:"number",min:1,max:32,value:y.charHeight,onChange:e=>L("charHeight",parseInt(e.target.value)||8),className:"w-full px-3 py-1.5 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Offset X"}),(0,a.jsx)("input",{type:"number",min:0,max:u.width-1,value:y.offsetX,onChange:e=>L("offsetX",parseInt(e.target.value)||0),className:"w-full px-3 py-1.5 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Offset Y"}),(0,a.jsx)("input",{type:"number",min:0,max:u.height-1,value:y.offsetY,onChange:e=>L("offsetY",parseInt(e.target.value)||0),className:"w-full px-3 py-1.5 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("label",{className:"text-xs text-gray-500",children:"Threshold"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:y.threshold})]}),(0,a.jsx)("input",{type:"range",min:0,max:255,value:y.threshold,onChange:e=>L("threshold",parseInt(e.target.value)),className:"w-full accent-retro-cyan"}),(0,a.jsxs)("div",{className:"flex justify-between text-[10px] text-gray-600 mt-1",children:[(0,a.jsx)("span",{children:"Dark (0)"}),(0,a.jsx)("span",{children:"Light (255)"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"invert",checked:y.invert,onChange:e=>L("invert",e.target.checked),className:"rounded border-retro-grid/50 bg-retro-navy/50 text-retro-cyan focus:ring-retro-cyan"}),(0,a.jsx)("label",{htmlFor:"invert",className:"text-xs text-gray-400",children:"Invert colors (treat light as foreground)"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"card-retro p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-400",children:["Preview (",w?.characters.length||0," characters)"]}),w&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[w.columns," x ",w.rows," grid"]})]}),w&&w.characters.length>0?(0,a.jsx)("div",{className:"bg-black/50 rounded p-2 max-h-96 overflow-y-auto",children:(0,a.jsx)(r.CharacterPreview,{characters:w.characters,config:{width:y.charWidth,height:y.charHeight,padding:"right",bitDirection:"ltr"},maxCharacters:256,maxWidth:400,maxHeight:2e3,scale:2})}):(0,a.jsx)("div",{className:"flex items-center justify-center py-12 text-center text-gray-500",children:(0,a.jsx)("p",{className:"text-sm",children:"No characters detected"})})]}),w&&w.characters.length>0&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsxs)("p",{children:["Characters will be imported at ",y.charWidth,"x",y.charHeight," pixels."]}),(0,a.jsx)("p",{children:"Adjust threshold if characters appear too light or too dark."})]})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{ref:o,type:"file",accept:"image/*",onChange:S,className:"hidden"}),(0,a.jsx)("div",{onClick:()=>o.current?.click(),onDrop:k,onDragOver:N,className:`
                  flex flex-col items-center justify-center p-12
                  border-2 border-dashed rounded-lg cursor-pointer
                  transition-colors
                  ${f?"pointer-events-none opacity-50":""}
                  border-retro-grid/50 hover:border-retro-cyan/50 bg-retro-navy/30
                `,children:f?(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-2 border-retro-cyan border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Loading image..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-retro-purple/20 flex items-center justify-center mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-retro-pink",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,a.jsx)("p",{className:"text-sm text-gray-300 mb-1",children:"Drag and drop an image here"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"or click to browse"}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-600",children:["Supports: ",(0,l.getSupportedImageExtensions)()]})]})}),g&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-400",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,a.jsx)("span",{children:g})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Tip:"})," For best results, use a monochrome image with characters arranged in a grid."]}),(0,a.jsx)("p",{children:"The importer will auto-detect common character sizes like 8x8, 8x16, etc."})]})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-retro-grid/30",children:[(0,a.jsx)(s.Button,{variant:"ghost",onClick:t,children:"Cancel"}),(0,a.jsxs)(s.Button,{variant:"cyan",onClick:M,disabled:!w||0===w.characters.length,children:["Import ",w?.characters.length||0," Characters"]})]})]})]}):null}e.s(["ImportFromImageModal",()=>i],35860);var o=e.i(84227);function c({isOpen:e,onClose:t,onImport:l}){let i=(0,n.useRef)(null),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null),[f,p]=(0,n.useState)(null),[g,b]=(0,n.useState)((0,o.getDefaultFontImportOptions)()),y=(0,n.useMemo)(()=>(0,o.getCharacterRangePreview)(g.startCode,g.endCode),[g.startCode,g.endCode]),v=g.endCode-g.startCode+1;(0,n.useEffect)(()=>{e||(d(null),m(null),p(null),b((0,o.getDefaultFontImportOptions)()))},[e]),(0,n.useEffect)(()=>{if(!c)return;let e=!1;return(async()=>{h(!0),m(null);try{let t=await (0,o.parseFontToCharacters)(c,g);e||p(t)}catch(t){if(!e){let e=t instanceof Error?t.message:"Failed to parse font";e.includes("opentype")||e.includes("Cannot find module")?m("Font import requires the opentype.js library. Please install it with: npm install opentype.js"):m(e),p(null)}}finally{e||h(!1)}})(),()=>{e=!0}},[c,g]);let j=(0,n.useCallback)(async e=>{(m(null),p(null),(0,o.isValidFontFile)(e))?e.size>5242880?m("File too large. Maximum size is 5MB."):d(e):m(`Invalid file type. Please select a font file (${(0,o.getSupportedFontExtensions)()})`)},[]),X=(0,n.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer.files;t.length>0&&j(t[0])},[j]),w=(0,n.useCallback)(e=>{e.preventDefault()},[]),C=(0,n.useCallback)(e=>{let t=e.target.files;t&&t.length>0&&j(t[0])},[j]),k=(0,n.useCallback)(()=>{if(!f||0===f.characters.length)return;let e={width:g.charWidth,height:g.charHeight,padding:"right",bitDirection:"ltr"};l(f.characters,e,f.fontFamily),t()},[f,g,l,t]),N=(0,n.useCallback)((e,t)=>{b(r=>({...r,[e]:t}))},[]),S=(0,n.useCallback)((e,t)=>{b(r=>({...r,startCode:e,endCode:t}))},[]);return e?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:t}),(0,a.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] overflow-hidden bg-retro-dark border border-retro-grid/50 rounded-lg shadow-2xl flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-retro-grid/30",children:[(0,a.jsx)("h2",{className:"text-lg font-display text-gray-200",children:"Import from Font"}),(0,a.jsx)("button",{onClick:t,className:"p-1 text-gray-500 hover:text-gray-300 transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:c?(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"card-retro p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-400",children:"Font File"}),(0,a.jsx)("button",{onClick:()=>{d(null),p(null)},className:"text-xs text-retro-cyan hover:text-retro-pink",children:"Change"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-200 truncate",children:c.name}),f&&(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:f.fontFamily})]}),(0,a.jsxs)("div",{className:"card-retro p-4 space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-300",children:"Character Size"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Width"}),(0,a.jsx)("input",{type:"number",min:4,max:32,value:g.charWidth,onChange:e=>N("charWidth",parseInt(e.target.value)||8),className:"w-full px-3 py-1.5 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Height"}),(0,a.jsx)("input",{type:"number",min:4,max:32,value:g.charHeight,onChange:e=>N("charHeight",parseInt(e.target.value)||8),className:"w-full px-3 py-1.5 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Font Size"}),(0,a.jsx)("input",{type:"number",min:4,max:48,value:g.fontSize,onChange:e=>N("fontSize",parseInt(e.target.value)||8),className:"w-full px-3 py-1.5 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50"})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:[{w:8,h:8,f:8,label:"8x8"},{w:8,h:16,f:14,label:"8x16"},{w:6,h:8,f:7,label:"6x8"},{w:16,h:16,f:14,label:"16x16"}].map(e=>(0,a.jsx)("button",{onClick:()=>{N("charWidth",e.w),N("charHeight",e.h),N("fontSize",e.f)},className:`
                          px-2 py-1 text-xs rounded border transition-colors
                          ${g.charWidth===e.w&&g.charHeight===e.h?"border-retro-cyan bg-retro-cyan/10 text-retro-cyan":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
                        `,children:e.label},e.label))})]}),(0,a.jsxs)("div",{className:"card-retro p-4 space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-300",children:"Character Range"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:o.CHARACTER_RANGES.slice(0,4).map(e=>(0,a.jsx)("button",{onClick:()=>S(e.startCode,e.endCode),className:`
                          px-2 py-1 text-xs rounded border transition-colors
                          ${g.startCode===e.startCode&&g.endCode===e.endCode?"border-retro-cyan bg-retro-cyan/10 text-retro-cyan":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
                        `,children:e.name},e.name))}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Start Code"}),(0,a.jsx)("input",{type:"number",min:0,max:65535,value:g.startCode,onChange:e=>N("startCode",parseInt(e.target.value)||0),className:"w-full px-3 py-1.5 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"End Code"}),(0,a.jsx)("input",{type:"number",min:0,max:65535,value:g.endCode,onChange:e=>N("endCode",parseInt(e.target.value)||255),className:"w-full px-3 py-1.5 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50"})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"text-gray-400",children:[v," characters:"]})," ",(0,a.jsx)("span",{className:"font-mono",children:y.join("")})]})]}),(0,a.jsxs)("div",{className:"card-retro p-4 space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-300",children:"Rendering Options"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("label",{className:"text-xs text-gray-500",children:"Threshold"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:g.threshold})]}),(0,a.jsx)("input",{type:"range",min:0,max:255,value:g.threshold,onChange:e=>N("threshold",parseInt(e.target.value)),className:"w-full accent-retro-cyan"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("label",{className:"text-xs text-gray-500",children:"Baseline Offset"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:g.baselineOffset})]}),(0,a.jsx)("input",{type:"range",min:-8,max:8,value:g.baselineOffset,onChange:e=>N("baselineOffset",parseInt(e.target.value)),className:"w-full accent-retro-cyan"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"centerGlyphs",checked:g.centerGlyphs,onChange:e=>N("centerGlyphs",e.target.checked),className:"rounded border-retro-grid/50 bg-retro-navy/50 text-retro-cyan focus:ring-retro-cyan"}),(0,a.jsx)("label",{htmlFor:"centerGlyphs",className:"text-xs text-gray-400",children:"Center glyphs in cells"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"card-retro p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-400",children:"Preview"}),u&&(0,a.jsx)("span",{className:"text-xs text-retro-cyan",children:"Processing..."}),f&&!u&&(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[f.importedCount," glyphs, ",f.missingCount," missing"]})]}),x?(0,a.jsxs)("div",{className:"flex items-start gap-2 text-sm text-red-400 py-8",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,a.jsx)("span",{children:x})]}):u?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)("div",{className:"w-10 h-10 border-2 border-retro-cyan border-t-transparent rounded-full animate-spin mb-3"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Rendering font..."})]}):f&&f.characters.length>0?(0,a.jsx)("div",{className:"bg-black/50 rounded p-2 max-h-96 overflow-y-auto",children:(0,a.jsx)(r.CharacterPreview,{characters:f.characters,config:{width:g.charWidth,height:g.charHeight,padding:"right",bitDirection:"ltr"},maxCharacters:256,maxWidth:400,maxHeight:2e3,scale:2})}):(0,a.jsx)("div",{className:"flex items-center justify-center py-12 text-center text-gray-500",children:(0,a.jsx)("p",{className:"text-sm",children:"Upload a font to see preview"})})]}),f&&!u&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsxs)("p",{children:["Characters will be created at ",g.charWidth,"x",g.charHeight," pixels."]}),(0,a.jsx)("p",{children:"Adjust font size and threshold for best results."})]})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{ref:i,type:"file",accept:".ttf,.otf,.woff,.woff2",onChange:C,className:"hidden"}),(0,a.jsxs)("div",{onClick:()=>i.current?.click(),onDrop:X,onDragOver:w,className:`
                  flex flex-col items-center justify-center p-12
                  border-2 border-dashed rounded-lg cursor-pointer
                  transition-colors
                  border-retro-grid/50 hover:border-retro-cyan/50 bg-retro-navy/30
                `,children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-retro-purple/20 flex items-center justify-center mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-retro-pink",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("p",{className:"text-sm text-gray-300 mb-1",children:"Drag and drop a font file here"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"or click to browse"}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-600",children:["Supports: ",(0,o.getSupportedFontExtensions)()]})]}),x&&(0,a.jsxs)("div",{className:"flex items-start gap-2 text-sm text-red-400",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,a.jsx)("span",{children:x})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Tip:"})," TrueType (.ttf), OpenType (.otf), and Web Open Font Format (.woff) files are supported."]}),(0,a.jsx)("p",{children:"The font will be rasterized at the specified size to create bitmap characters."})]})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-retro-grid/30",children:[(0,a.jsx)(s.Button,{variant:"ghost",onClick:t,children:"Cancel"}),(0,a.jsxs)(s.Button,{variant:"cyan",onClick:k,disabled:!f||0===f.characters.length||u,children:["Import ",f?.characters.length||0," Characters"]})]})]})]}):null}e.s(["ImportFromFontModal",()=>c],73233),e.i(79086);var d=e.i(92921);function u({isOpen:e,onClose:r,snapshots:l,loading:i,isAtCapacity:o,maxSnapshots:c,currentCharacters:u,currentConfig:h,foregroundColor:x,backgroundColor:m,onSave:f,onRestore:p,onDelete:g,onRename:b,onRestoreApply:y}){let[v,j]=(0,n.useState)(""),[X,w]=(0,n.useState)(!1),[C,k]=(0,n.useState)(null),[N,S]=(0,n.useState)(null),[M,L]=(0,n.useState)(null),[E,R]=(0,n.useState)(""),[D,A]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(e){let e=new Date().toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});j(`Snapshot - ${e}`),k(null),S(null),L(null),A(null)}},[e]);let I=(0,n.useCallback)(async()=>{if(!v.trim())return;w(!0);let e=await f(v.trim());if(w(!1),e){let e=new Date().toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});j(`Snapshot - ${e}`)}},[v,f]),B=(0,n.useCallback)(async e=>{if(C===e){k(null),S(null);return}k(e);let t=await p(e);t&&S(t)},[C,p]),T=(0,n.useCallback)(()=>{N&&(y(N),r())},[N,y,r]),z=(0,n.useCallback)(async e=>{await g(e),C===e&&(k(null),S(null)),A(null)},[g,C]),$=(0,n.useCallback)(e=>{L(e.id),R(e.name)},[]),P=(0,n.useCallback)(async()=>{M&&E.trim()&&await b(M,E.trim()),L(null),R("")},[M,E,b]);return e?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:r}),(0,a.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-retro-grid/30",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-white",children:"Snapshots"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:["Save and restore character set states (",l.length,"/",c,")"]})]}),(0,a.jsx)("button",{onClick:r,className:"p-1 text-gray-400 hover:text-white transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 border-r border-retro-grid/30",children:[(0,a.jsxs)("div",{className:"mb-4 p-3 bg-retro-dark/50 rounded border border-retro-grid/30",children:[(0,a.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Create New Snapshot"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),placeholder:"Snapshot name",className:"flex-1 px-2 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan",onKeyDown:e=>{"Enter"===e.key&&v.trim()&&!o&&I()}}),(0,a.jsx)(s.Button,{onClick:I,disabled:!v.trim()||X||o,variant:"cyan",size:"sm",children:X?"Saving...":"Save"})]}),o&&(0,a.jsx)("p",{className:"text-xs text-orange-400 mt-1",children:"Maximum snapshots reached. Delete one to save a new one."})]}),i?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-retro-cyan border-t-transparent rounded-full animate-spin"})}):0===l.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("svg",{className:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),(0,a.jsx)("p",{className:"text-sm",children:"No snapshots yet"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Create one to save your progress"})]}):(0,a.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,a.jsx)("div",{className:`p-3 rounded border transition-colors cursor-pointer ${C===e.id?"bg-retro-cyan/10 border-retro-cyan":"bg-retro-dark/30 border-retro-grid/30 hover:border-retro-grid/50"}`,onClick:()=>B(e.id),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[M===e.id?(0,a.jsx)("input",{type:"text",value:E,onChange:e=>R(e.target.value),className:"w-full px-2 py-1 bg-retro-dark border border-retro-cyan rounded text-sm text-white focus:outline-none",autoFocus:!0,onClick:e=>e.stopPropagation(),onKeyDown:e=>{"Enter"===e.key?P():"Escape"===e.key&&L(null)},onBlur:P}):(0,a.jsx)("h3",{className:"text-sm text-white font-medium truncate",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:(0,d.formatTimestamp)(e.createdAt)}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"|"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.characterCount," chars"]}),(0,a.jsx)("span",{className:"text-xs text-gray-600",children:"|"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.config.width,"x",e.config.height]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),$(e)},className:"p-1 text-gray-500 hover:text-white transition-colors",title:"Rename",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),D===e.id?(0,a.jsxs)("div",{className:"flex items-center gap-1",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{onClick:()=>z(e.id),className:"px-2 py-0.5 text-xs bg-red-500/20 border border-red-500 rounded text-red-400 hover:bg-red-500/30",children:"Delete"}),(0,a.jsx)("button",{onClick:()=>A(null),className:"px-2 py-0.5 text-xs border border-retro-grid/50 rounded text-gray-400 hover:text-white",children:"Cancel"})]}):(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),A(e.id)},className:"p-1 text-gray-500 hover:text-red-400 transition-colors",title:"Delete",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id))})]}),(0,a.jsxs)("div",{className:"w-full md:w-72 p-4 bg-retro-dark/30 flex flex-col",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-3",children:"Preview"}),C&&N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex-1 overflow-auto bg-retro-dark rounded border border-retro-grid/30 p-2 mb-3",children:[(0,a.jsx)(t.CharacterPreviewGrid,{characters:N.slice(0,64),config:h,foregroundColor:x,backgroundColor:m,smallScale:2,maxCharacters:64}),N.length>64&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:["+",N.length-64," more characters"]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(s.Button,{onClick:T,variant:"cyan",size:"sm",className:"flex-1",children:"Restore This Snapshot"})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"This will replace your current work"})]}):(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("svg",{className:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),(0,a.jsx)("p",{className:"text-sm",children:"Select a snapshot to preview"})]})})]})]}),(0,a.jsx)("div",{className:"p-4 border-t border-retro-grid/30 bg-retro-dark/30",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-xs text-gray-400 mb-1",children:"Current State"}),(0,a.jsx)(t.CharacterPreviewGrid,{characters:u.slice(0,16),config:h,foregroundColor:x,backgroundColor:m,smallScale:2,maxCharacters:16})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,a.jsxs)("p",{children:[u.length," characters"]}),(0,a.jsxs)("p",{children:[h.width,"x",h.height," px"]})]})]})})]})]}):null}e.s(["SnapshotsModal",()=>u],28827);var h=e.i(80184);function x(e){let t=Math.floor((Date.now()-e)/1e3),r=Math.floor(t/60),a=Math.floor(r/60);return t<60?"just now":r<60?`${r}m ago`:a<24?`${a}h ago`:new Date(e).toLocaleDateString()}function m({isOpen:e,onClose:t,entries:r,onClear:l,onExport:i}){let[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),m=(0,n.useCallback)(()=>{let e=i();navigator.clipboard.writeText(e).then(()=>{u(!0),setTimeout(()=>u(!1),2e3)})},[i]),f=(0,n.useCallback)(()=>{l(),c(!1)},[l]);if(!e)return null;let p=r.reduce((e,t)=>{let r=new Date(t.timestamp).toLocaleDateString();return e[r]||(e[r]=[]),e[r].push(t),e},{});return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,a.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[80vh] bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-retro-grid/30",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-white",children:"Change Log"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[r.length," ",1===r.length?"entry":"entries"," in this session"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(s.Button,{onClick:m,variant:"ghost",size:"sm",disabled:0===r.length,children:d?"Copied!":"Copy Log"}),o?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:f,className:"px-2 py-1 text-xs bg-red-500/20 border border-red-500 rounded text-red-400 hover:bg-red-500/30",children:"Confirm"}),(0,a.jsx)("button",{onClick:()=>c(!1),className:"px-2 py-1 text-xs border border-retro-grid/50 rounded text-gray-400 hover:text-white",children:"Cancel"})]}):(0,a.jsx)(s.Button,{onClick:()=>c(!0),variant:"ghost",size:"sm",disabled:0===r.length,children:"Clear"}),(0,a.jsx)("button",{onClick:t,className:"p-1 text-gray-400 hover:text-white transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:0===r.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[(0,a.jsx)("svg",{className:"w-16 h-16 mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,a.jsx)("p",{className:"text-sm",children:"No changes logged yet"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Your editing activity will appear here"})]}):(0,a.jsx)("div",{className:"space-y-6",children:Object.entries(p).map(([e,t])=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"sticky top-0 bg-retro-navy/95 backdrop-blur-sm py-1 mb-2",children:(0,a.jsx)("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:e===new Date().toLocaleDateString()?"Today":e})}),(0,a.jsx)("div",{className:"relative pl-6 border-l border-retro-grid/30",children:t.map((r,n)=>(0,a.jsxs)("div",{className:`relative mb-4 ${n===t.length-1?"mb-0":""}`,children:[(0,a.jsx)("div",{className:`absolute -left-[25px] w-4 h-4 rounded-full border-2 ${0===n&&e===new Date().toLocaleDateString()?"border-retro-cyan bg-retro-cyan/20":"border-retro-grid/50 bg-retro-dark"}`}),(0,a.jsxs)("div",{className:"bg-retro-dark/30 rounded border border-retro-grid/20 p-3 hover:border-retro-grid/40 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:(0,h.getOperationColor)(r.type),children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:(0,h.getOperationIcon)(r.type)})})}),(0,a.jsx)("span",{className:`text-xs px-1.5 py-0.5 rounded ${(0,h.getOperationColor)(r.type)} bg-current/10`,children:(0,h.getOperationDisplayName)(r.type)})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",title:new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),children:x(r.timestamp)})]}),(0,a.jsx)("p",{className:"text-sm text-gray-300 mt-2",children:r.description}),r.affectedIndices.length>0&&(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1",children:[r.affectedIndices.slice(0,10).map(e=>(0,a.jsxs)("span",{className:"text-xs px-1.5 py-0.5 rounded bg-retro-dark border border-retro-grid/30 text-gray-400",children:["#",e]},e)),r.affectedIndices.length>10&&(0,a.jsxs)("span",{className:"text-xs px-1.5 py-0.5 text-gray-500",children:["+",r.affectedIndices.length-10," more"]})]}),r.details&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2 italic",children:r.details})]})]},r.id))})]},e))})}),r.length>0&&(0,a.jsx)("div",{className:"p-3 border-t border-retro-grid/30 bg-retro-dark/30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Session started:"," ",r.length>0?new Date(r[r.length-1].timestamp).toLocaleTimeString():"N/A"]}),(0,a.jsxs)("span",{children:["Last change:"," ",r.length>0?x(r[0].timestamp):"N/A"]})]})})]})]})}e.s(["ChangeLogModal",()=>m],80364);var f=e.i(40979);function p({isOpen:e,onClose:t,name:r,description:l,characters:i,config:o}){let[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null),p=(0,f.canShare)(i.length,o.width,o.height);(0,n.useEffect)(()=>{if(!e||!p.canShare)return void d(null);try{let e=(0,f.encodeCharacterSet)(r,l,i,o),t=(0,f.createShareUrl)(e);d(t),m(null)}catch(e){m(e instanceof Error?e.message:"Failed to generate share URL"),d(null)}},[e,r,l,i,o,p.canShare]);let g=(0,n.useCallback)(async()=>{if(c)try{await navigator.clipboard.writeText(c),h(!0),setTimeout(()=>h(!1),2e3)}catch{let e=document.createElement("textarea");e.value=c,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),h(!0),setTimeout(()=>h(!1),2e3)}},[c]);if(!e)return null;let b=c?(0,f.getUrlLengthStatus)(c):"error";return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,a.jsxs)("div",{className:"relative w-full max-w-lg bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-retro-grid/30",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-white",children:"Share Character Set"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Share via URL - no account needed"})]}),(0,a.jsx)("button",{onClick:t,className:"p-1 text-gray-400 hover:text-white transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"mb-4 p-3 bg-retro-dark/50 rounded border border-retro-grid/30",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded bg-retro-cyan/10 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-retro-cyan",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-sm text-white font-medium truncate",children:r}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[i.length," characters | ",o.width,"x",o.height," px"]})]})]})}),!p.canShare&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-red-400 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-red-400",children:p.message}),(0,a.jsx)("p",{className:"text-xs text-red-400/70 mt-1",children:"Try exporting to a file instead, or reduce the number of characters."})]})]})}),p.canShare&&"warning"===b&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-400 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-yellow-400",children:"Long URL Warning"}),(0,a.jsx)("p",{className:"text-xs text-yellow-400/70 mt-1",children:"This URL may not work on all platforms (email, social media). Consider exporting to a file for reliability."})]})]})}),x&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded",children:(0,a.jsx)("p",{className:"text-sm text-red-400",children:x})}),c&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Share URL"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)("input",{type:"text",value:c,readOnly:!0,className:"w-full px-3 py-2 pr-16 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white font-mono truncate focus:outline-none focus:border-retro-cyan",onClick:e=>e.target.select()}),(0,a.jsxs)("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:[c.length," chars"]})]}),(0,a.jsx)(s.Button,{onClick:g,variant:"cyan",size:"sm",className:"whitespace-nowrap",children:u?"Copied!":"Copy"})]})]}),(0,a.jsxs)("div",{className:"mt-4 p-3 bg-retro-dark/30 rounded border border-retro-grid/20",children:[(0,a.jsx)("h4",{className:"text-xs font-medium text-gray-400 mb-2",children:"How sharing works"}),(0,a.jsxs)("ul",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-retro-cyan",children:"1."}),"Your character set is encoded into the URL"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-retro-cyan",children:"2."}),"Anyone with the link can view and import it"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-retro-cyan",children:"3."}),"No data is stored on any server"]})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end gap-2 p-4 border-t border-retro-grid/30 bg-retro-dark/30",children:(0,a.jsx)(s.Button,{onClick:t,variant:"ghost",size:"sm",children:"Close"})})]})]})}function g({x:e,y:t,items:r,onClose:s}){let l=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s()},t=e=>{l.current&&!l.current.contains(e.target)&&s()};return document.addEventListener("keydown",e),document.addEventListener("mousedown",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("mousedown",t)}},[s]),(0,n.useEffect)(()=>{if(!l.current)return;let e=l.current.getBoundingClientRect(),t=window.innerWidth,r=window.innerHeight;e.right>t-8&&(l.current.style.left=`${t-e.width-8}px`),e.bottom>r-8&&(l.current.style.top=`${r-e.height-8}px`)},[e,t]);let i=(0,n.useCallback)(e=>{e.disabled||(e.onClick(),s())},[s]);return(0,a.jsx)("div",{ref:l,className:"fixed z-[100] min-w-[160px] py-1 bg-retro-navy/95 backdrop-blur-sm border border-retro-grid/50 rounded-lg shadow-xl",style:{left:e,top:t},children:r.map((e,t)=>e.divider?(0,a.jsx)("div",{className:"h-px bg-retro-grid/30 my-1"},t):(0,a.jsxs)("button",{onClick:()=>i(e),disabled:e.disabled,className:`
              w-full px-3 py-1.5 text-left text-sm flex items-center justify-between gap-4
              transition-colors
              ${e.disabled?"text-gray-600 cursor-not-allowed":e.danger?"text-red-400 hover:bg-red-500/20":"text-gray-200 hover:bg-retro-cyan/20 hover:text-retro-cyan"}
            `,children:[(0,a.jsx)("span",{children:e.label}),e.shortcut&&(0,a.jsx)("span",{className:"text-[10px] text-gray-500 font-mono",children:e.shortcut})]},t))})}function b(){let[e,t]=(0,n.useState)(null);return{contextMenu:e,showContextMenu:(0,n.useCallback)((e,r,a)=>{t({x:e,y:r,index:a})},[]),hideContextMenu:(0,n.useCallback)(()=>{t(null)},[])}}function y({currentStep:e,totalSteps:t,labels:r}){return(0,a.jsx)("div",{className:"flex items-center justify-center gap-2 mb-8",children:Array.from({length:t},(n,s)=>{let l=s+1,i=l===e,o=l<e;return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:`
                flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium
                transition-colors
                ${i?"bg-retro-cyan text-retro-dark":o?"bg-retro-cyan/30 text-retro-cyan":"bg-retro-grid/30 text-gray-500"}
              `,children:o?(0,a.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}):l}),(0,a.jsx)("span",{className:`
                ml-2 text-sm hidden sm:inline
                ${i?"text-retro-cyan":o?"text-gray-400":"text-gray-500"}
              `,children:r[s]}),l<t&&(0,a.jsx)("div",{className:`
                  w-8 sm:w-12 h-0.5 mx-2 sm:mx-4
                  ${o?"bg-retro-cyan/50":"bg-retro-grid/30"}
                `})]},l)})})}e.s(["ShareModal",()=>p],26089),e.s(["CharacterContextMenu",()=>g,"useContextMenu",()=>b],75052),e.s(["ImportStepIndicator",()=>y],63427);var v=e.i(37902);function j({isActive:e,currentStep:t,stepIndex:r,totalSteps:l,isFirstStep:i,isLastStep:o,onNext:c,onPrev:d,onSkip:u}){let h=(0,n.useCallback)(e=>{"Escape"===e.key?u():"ArrowRight"===e.key||"Enter"===e.key?c():"ArrowLeft"===e.key&&d()},[c,d,u]);return e&&t?(0,a.jsxs)("div",{onKeyDown:h,tabIndex:0,className:"jsx-9adf730429c9eab6 fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,a.jsx)("div",{onClick:u,className:"jsx-9adf730429c9eab6 absolute inset-0 bg-black/80 backdrop-blur-sm"}),(0,a.jsxs)("div",{className:"jsx-9adf730429c9eab6 relative w-full max-w-md bg-retro-navy border border-retro-cyan/50 rounded-lg shadow-2xl overflow-hidden animate-fade-in",children:[(0,a.jsx)("div",{className:"jsx-9adf730429c9eab6 flex gap-1 p-2 bg-retro-dark/30",children:Array.from({length:l}).map((e,t)=>(0,a.jsx)("div",{className:`jsx-9adf730429c9eab6 flex-1 h-1 rounded-full transition-colors ${t<=r?"bg-retro-cyan":"bg-retro-grid"}`},t))}),(0,a.jsxs)("div",{className:"jsx-9adf730429c9eab6 p-6",children:[(0,a.jsxs)("div",{className:"jsx-9adf730429c9eab6 flex items-center justify-between mb-4",children:[(0,a.jsxs)("span",{className:"jsx-9adf730429c9eab6 text-xs text-retro-cyan font-medium uppercase tracking-wide",children:["Step ",r+1," of ",l]}),(0,a.jsx)("button",{onClick:u,className:"jsx-9adf730429c9eab6 text-xs text-gray-500 hover:text-white transition-colors",children:"Skip tour"})]}),(0,a.jsx)("h2",{className:"jsx-9adf730429c9eab6 text-xl font-medium text-white mb-3",children:t.title}),(0,a.jsx)("p",{className:"jsx-9adf730429c9eab6 text-gray-300 leading-relaxed",children:t.description}),(0,a.jsxs)("div",{className:"jsx-9adf730429c9eab6 flex justify-center my-6",children:[0===r&&(0,a.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-retro-cyan/10 border border-retro-cyan/30 flex items-center justify-center",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-retro-cyan",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",className:"jsx-9adf730429c9eab6"})})}),1===r&&(0,a.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-retro-pink/10 border border-retro-pink/30 flex items-center justify-center",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-retro-pink",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",className:"jsx-9adf730429c9eab6"})})}),2===r&&(0,a.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-retro-violet/10 border border-retro-violet/30 flex items-center justify-center",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-retro-violet",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12",className:"jsx-9adf730429c9eab6"})})}),3===r&&(0,a.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-green-500/10 border border-green-500/30 flex items-center justify-center",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-green-400",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",className:"jsx-9adf730429c9eab6"})})}),4===r&&(0,a.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-orange-500/10 border border-orange-500/30 flex items-center justify-center",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-orange-400",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",className:"jsx-9adf730429c9eab6"})})}),5===r&&(0,a.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-blue-500/10 border border-blue-500/30 flex items-center justify-center",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-blue-400",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4",className:"jsx-9adf730429c9eab6"})})}),6===r&&(0,a.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-purple-500/10 border border-purple-500/30 flex items-center justify-center",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-purple-400",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",className:"jsx-9adf730429c9eab6"})})}),7===r&&(0,a.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-retro-cyan/10 border border-retro-cyan/30 flex items-center justify-center",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-retro-cyan",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 13l4 4L19 7",className:"jsx-9adf730429c9eab6"})})})]})]}),(0,a.jsxs)("div",{className:"jsx-9adf730429c9eab6 flex items-center justify-between p-4 border-t border-retro-grid/30 bg-retro-dark/30",children:[(0,a.jsx)(s.Button,{onClick:d,disabled:i,variant:"ghost",size:"sm",children:"Previous"}),(0,a.jsx)(s.Button,{onClick:c,variant:"cyan",size:"sm",children:o?"Get Started":"Next"})]})]}),(0,a.jsx)(v.default,{id:"9adf730429c9eab6",children:"@keyframes fade-in{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.animate-fade-in.jsx-9adf730429c9eab6{animation:.2s ease-out fade-in}"})]}):null}e.s(["OnboardingTour",()=>j],91797),e.s([],3813)}]);