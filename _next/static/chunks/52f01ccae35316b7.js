(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},58234,e=>{"use strict";var t=e.i(43476),r=e.i(22016),n=e.i(28540),a=e.i(85149);function l(){let e=new Date().getFullYear();return(0,t.jsx)("footer",{className:"bg-retro-navy border-t border-retro-grid safe-bottom safe-x",children:(0,t.jsx)(n.Container,{children:(0,t.jsxs)("div",{className:"py-8 sm:py-12",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 mb-8 sm:mb-12",children:[(0,t.jsxs)("div",{className:"sm:col-span-2 lg:col-span-1",children:[(0,t.jsx)(r.default,{href:"/",className:"inline-block touch-target",children:(0,t.jsx)("span",{className:"font-display text-base sm:text-lg text-retro-pink",children:a.SITE_CONFIG.name})}),(0,t.jsx)("p",{className:"mt-3 sm:mt-4 text-sm text-gray-400 max-w-xs",children:a.SITE_CONFIG.description})]}),a.NAV_ITEMS.filter(e=>e.children).map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-ui text-xs sm:text-sm uppercase tracking-wider text-retro-cyan mb-3 sm:mb-4",children:e.label}),(0,t.jsx)("ul",{className:"space-y-1 sm:space-y-2",children:e.children?.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:e.href,className:"inline-flex items-center min-h-[36px] sm:min-h-[32px] text-sm text-gray-400 hover:text-retro-pink transition-colors duration-200",children:e.label})},e.href))})]},e.label))]}),(0,t.jsxs)("div",{className:"pt-6 sm:pt-8 border-t border-retro-grid/50 flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,t.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 text-center sm:text-left",children:["Â© ",e," ",a.SITE_CONFIG.name,". All rights reserved."]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("a",{href:a.SOCIAL_LINKS.github,target:"_blank",rel:"noopener noreferrer",className:"touch-target flex items-center justify-center text-gray-400 hover:text-retro-cyan transition-colors duration-200 rounded-md hover:bg-retro-purple/30","aria-label":"GitHub",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"})})}),(0,t.jsx)("a",{href:a.SOCIAL_LINKS.patreon,target:"_blank",rel:"noopener noreferrer",className:"touch-target flex items-center justify-center text-gray-400 hover:text-retro-pink transition-colors duration-200 rounded-md hover:bg-retro-purple/30","aria-label":"Patreon",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M15.386.524c-4.764 0-8.64 3.876-8.64 8.64 0 4.75 3.876 8.613 8.64 8.613 4.75 0 8.614-3.864 8.614-8.613C24 4.4 20.136.524 15.386.524M.003 23.537h4.22V.524H.003"})})})]})]})]})})})}e.s(["Footer",()=>l])},16015,(e,t,r)=>{},98547,(e,t,r)=>{var n=e.i(47167);e.r(16015);var a=e.r(71645),l=a&&"object"==typeof a&&"default"in a?a:{default:a},s=void 0!==n.default&&n.default.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,r=t.name,n=void 0===r?"stylesheet":r,a=t.optimizeForSpeed,l=void 0===a?s:a;c(i(n),"`name` must be a string"),this._name=n,this._deletedRulePlaceholder="#"+n+"-deleted-rule____{}",c("boolean"==typeof l,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=l,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(s||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){if(c(i(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return s||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var n=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,n))}return this._rulesCount++},r.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var r="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(n){s||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var n=this._tags[e];c(n,"old rule at index `"+e+"` not found"),n.textContent=t}return e},r.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},r.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},r.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},r.makeStyleTag=function(e,t,r){t&&c(i(t),"makeStyleTag accepts only strings as second parameter");var n=document.createElement("style");this._nonce&&n.setAttribute("nonce",this._nonce),n.type="text/css",n.setAttribute("data-"+e,""),t&&n.appendChild(document.createTextNode(t));var a=document.head||document.getElementsByTagName("head")[0];return r?a.insertBefore(n,r):a.appendChild(n),n},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},u={};function h(e,t){if(!t)return"jsx-"+e;var r=String(t),n=e+r;return u[n]||(u[n]="jsx-"+d(e+"-"+r)),u[n]}function m(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var r=e+t;return u[r]||(u[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[r]}var f=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,n=void 0===r?null:r,a=t.optimizeForSpeed,l=void 0!==a&&a;this._sheet=n||new o({name:"styled-jsx",optimizeForSpeed:l}),this._sheet.inject(),n&&"boolean"==typeof l&&(this._sheet.setOptimizeForSpeed(l),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),n=r.styleId,a=r.rules;if(n in this._instancesCounts){this._instancesCounts[n]+=1;return}var l=a.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[n]=l,this._instancesCounts[n]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var n=this._fromServer&&this._fromServer[r];n?(n.parentNode.removeChild(n),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],n=e[1];return l.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:n}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,n=e.id;if(r){var a=h(n,r);return{styleId:a,rules:Array.isArray(t)?t.map(function(e){return m(a,e)}):[m(a,t)]}}return{styleId:h(n),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),x=a.createContext(null);function p(){return new f}function g(){return a.useContext(x)}x.displayName="StyleSheetContext";var X=l.default.useInsertionEffect||l.default.useLayoutEffect,b="undefined"!=typeof window?p():void 0;function y(e){var t=b||g();return t&&("undefined"==typeof window?t.add(e):X(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}y.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},r.StyleRegistry=function(e){var t=e.registry,r=e.children,n=a.useContext(x),s=a.useState(function(){return n||t||p()})[0];return l.default.createElement(x.Provider,{value:s},r)},r.createStyleRegistry=p,r.style=y,r.useStyleRegistry=g},37902,(e,t,r)=>{t.exports=e.r(98547).style},89043,49738,32267,29493,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function n({pixels:e,scale:n=1,showGrid:a=!1,gridColor:l="#333333",gridThickness:s=1,foregroundColor:i="#ffffff",backgroundColor:o="#000000",onPixelClick:c,onPixelDrag:d,onDragEnd:u,className:h="",interactive:m=!0,mixedPixels:f,mixedColor:x="#666666"}){let p=(0,r.useRef)(null),[g,X]=(0,r.useState)(!1),b=(0,r.useRef)(null),y=e.length,v=e[0]?.length||0,w=a?s:0,j=v*n+(a?(v+1)*s:0),C=y*n+(a?(y+1)*s:0);(0,r.useEffect)(()=>{let t=p.current;if(!t)return;let r=t.getContext("2d");if(r){r.fillStyle=a?l:o,r.fillRect(0,0,j,C);for(let t=0;t<y;t++)for(let l=0;l<v;l++){let c=a?l*(n+s)+s:l*n,d=a?t*(n+s)+s:t*n,u=`${t},${l}`,h=f?.has(u),m=e[t]?.[l]||!1;if(h){let e=Math.floor(n/2);r.fillStyle=i,r.fillRect(c,d,e,e),r.fillRect(c+e,d+e,n-e,n-e),r.fillStyle=o,r.fillRect(c+e,d,n-e,e),r.fillRect(c,d+e,e,n-e)}else r.fillStyle=m?i:o,r.fillRect(c,d,n,n)}}},[e,n,a,l,s,i,o,j,C,v,y,f,x]);let k=(0,r.useCallback)(e=>{let t,r,l=p.current;if(!l)return null;let i=l.getBoundingClientRect();if("touches"in e){if(0===e.touches.length)return null;t=e.touches[0].clientX,r=e.touches[0].clientY}else t=e.clientX,r=e.clientY;let o=t-i.left,c=r-i.top,d=l.width/i.width,u=l.height/i.height,h=n+(a?s:0),m=Math.floor((o*d-w)/h),f=Math.floor((c*u-w)/h);return f>=0&&f<y&&m>=0&&m<v?{row:f,col:m}:null},[n,a,s,w,y,v]),N=(0,r.useCallback)(e=>{if(!m)return;let t=k(e);t&&c&&(c(t.row,t.col),b.current=t,X(!0))},[m,k,c]),S=(0,r.useCallback)(e=>{if(!m||!g||!d)return;let t=k(e);t&&(!b.current||b.current.row!==t.row||b.current.col!==t.col)&&(d(t.row,t.col),b.current=t)},[m,g,k,d]),M=(0,r.useCallback)(()=>{g&&(X(!1),b.current=null,u?.())},[g,u]),E=(0,r.useCallback)(()=>{g&&(X(!1),b.current=null,u?.())},[g,u]),R=(0,r.useCallback)(e=>{if(!m)return;e.preventDefault();let t=k(e);t&&c&&(c(t.row,t.col),b.current=t,X(!0))},[m,k,c]),A=(0,r.useCallback)(e=>{if(!m||!g||!d)return;e.preventDefault();let t=k(e);t&&(!b.current||b.current.row!==t.row||b.current.col!==t.col)&&(d(t.row,t.col),b.current=t)},[m,g,k,d]),L=(0,r.useCallback)(()=>{g&&(X(!1),b.current=null,u?.())},[g,u]);return(0,t.jsx)("canvas",{ref:p,width:j,height:C,className:`${m?"cursor-crosshair":""} ${h}`,style:{imageRendering:"pixelated",touchAction:"none"},onMouseDown:N,onMouseMove:S,onMouseUp:M,onMouseLeave:E,onTouchStart:R,onTouchMove:A,onTouchEnd:L})}function a({character:e,mode:a="small",scale:l=20,smallScale:s=2,selected:i=!1,batchSelected:o=!1,onClick:c,onPixelClick:d,onPixelDrag:u,onDragEnd:h,foregroundColor:m="#ffffff",backgroundColor:f="#000000",gridColor:x="#333333",gridThickness:p=1,interactive:g=!0,className:X="",mixedPixels:b,index:y,showIndex:v=!1}){let w="large"===a,j=w?l:s,C=["relative inline-block",!w&&g?"cursor-pointer":"",!w&&g?"hover:opacity-80 transition-opacity":"",(0,r.useMemo)(()=>i?"ring-2 ring-retro-cyan ring-offset-2 ring-offset-retro-dark":o?"ring-2 ring-retro-pink/50 ring-offset-1 ring-offset-retro-dark":"",[i,o]),X].filter(Boolean).join(" ");return(0,t.jsxs)("div",{className:C,onClick:e=>{c&&!w&&(e.stopPropagation(),c())},onKeyDown:e=>{c&&!w&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c())},role:!w&&g?"button":void 0,tabIndex:!w&&g?0:void 0,"aria-pressed":i||o,"aria-label":void 0!==y?`Character ${y}`:"Character",children:[(0,t.jsx)(n,{pixels:e.pixels,scale:j,showGrid:w,gridColor:x,gridThickness:w?p:0,foregroundColor:m,backgroundColor:f,onPixelClick:w?d:void 0,onPixelDrag:w?u:void 0,onDragEnd:w?h:void 0,interactive:w&&g,mixedPixels:b}),v&&void 0!==y&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 bg-retro-navy/90 text-[8px] text-gray-400 px-1 rounded font-mono",children:y})]})}function l({width:e,height:r,mode:n="small",scale:a=20,smallScale:l=2,onClick:s,className:i=""}){let o="large"===n,c=o?a:l;return(0,t.jsx)("div",{className:`relative inline-flex items-center justify-center bg-retro-navy/50 border border-dashed border-retro-grid/50 cursor-pointer hover:border-retro-cyan/50 transition-colors ${i}`,style:{width:e*c+(o?(e+1)*1:0),height:r*c+(o?(r+1)*1:0)},onClick:s,role:"button",tabIndex:0,onKeyDown:e=>{s&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),s())},"aria-label":"Add new character",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}function s({characters:e,config:n,selectedIndex:s,batchSelection:i,onSelect:o,showAddButton:c=!1,onAdd:d,foregroundColor:u="#ffffff",backgroundColor:h="#000000",showIndices:m=!1,minColumns:f=8,maxColumns:x=32,gap:p=4,className:g="",smallScale:X=2}){let b=(0,r.useRef)(null),{size:y}=function(e){let t=(0,r.useRef)(null),[n,a]=(0,r.useState)({width:0,height:0}),l=(0,r.useCallback)(e=>{for(let t of e){let{width:e,height:r}=t.contentRect;a({width:e,height:r})}},[void 0]);return(0,r.useEffect)(()=>{let e=t.current;if(!e)return;let r=new ResizeObserver(l);r.observe(e);let n=e.getBoundingClientRect();return a({width:n.width,height:n.height}),()=>{r.disconnect()}},[l]),{ref:t,size:n}}(),v=n.width*X,w=(0,r.useMemo)(()=>{if(!y.width)return f;let e=v+p+8;return Math.max(f,Math.min(x,Math.floor((y.width-p)/e)))},[y.width,v,p,f,x]);return(0,t.jsx)("div",{ref:b,className:`overflow-auto p-2 ${g}`,role:"listbox","aria-label":"Character selection grid",children:(0,t.jsxs)("div",{className:"grid",style:{gridTemplateColumns:`repeat(${w}, auto)`,gap:`${p}px`},children:[e.map((e,r)=>(0,t.jsx)("div",{onClick:e=>o?.(r,e.shiftKey,e.metaKey||e.ctrlKey),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),o?.(r,e.shiftKey,e.metaKey||e.ctrlKey))},role:"option","aria-selected":s===r||i?.has(r),tabIndex:0,className:"focus:outline-none focus-visible:ring-1 focus-visible:ring-retro-cyan rounded",children:(0,t.jsx)(a,{character:e,mode:"small",smallScale:X,selected:s===r,batchSelected:i?.has(r)&&s!==r,foregroundColor:u,backgroundColor:h,interactive:!1,index:r,showIndex:m})},r)),c&&(0,t.jsx)(l,{width:n.width,height:n.height,mode:"small",smallScale:X,onClick:d})]})})}function i({characters:e,config:a,maxCharacters:l=32,maxWidth:s=128,maxHeight:i=64,scale:o=1,foregroundColor:c="#ffffff",backgroundColor:d="#000000",className:u="",forceColumns:h}){let m=[64,32,16,8,4],{displayChars:f,columns:x,rows:p}=(0,r.useMemo)(()=>{let t=a.width*o,r=a.height*o;if(h){let t=Math.min(l,e.length),r=Math.ceil(t/h),n=Math.min(h*r,t);return{displayChars:e.slice(0,n),columns:h,rows:r}}let n=Math.floor(s/t),c=Math.floor(i/r),d=m.find(e=>e<=n)||Math.min(n,4);d=Math.max(d,1);let u=Math.min(l,e.length),f=Math.ceil(u/d);if(f>c){let t=Math.ceil(u/(d=n)),r=Math.min(d*Math.min(t,c),u);return{displayChars:e.slice(0,r),columns:d,rows:Math.min(t,c)}}return{displayChars:e.slice(0,u),columns:d,rows:f}},[e,a,l,s,i,h,o]),g=(0,r.useMemo)(()=>{let{width:e,height:t}=a,r=x*e,n=Array.from({length:p*t},()=>Array(r).fill(!1));return f.forEach((r,a)=>{let l=a%x*e,s=Math.floor(a/x)*t;for(let a=0;a<t;a++)for(let t=0;t<e;t++)r.pixels[a]?.[t]&&(n[s+a][l+t]=!0)}),n},[f,a,x,p]),X=e.length-f.length;return(0,t.jsxs)("div",{className:`relative inline-block ${u}`,children:[(0,t.jsx)(n,{pixels:g,scale:o,showGrid:!1,foregroundColor:c,backgroundColor:d,interactive:!1}),X>0&&(0,t.jsxs)("div",{className:"absolute bottom-0 right-0 bg-retro-dark/90 text-[9px] text-gray-400 px-1 rounded-tl font-mono",children:["+",X]})]})}e.s(["PixelGrid",()=>n],89043),e.s(["CharacterDisplay",()=>a,"EmptyCharacterDisplay",()=>l],49738),e.i(37902),e.s(["InteractiveCharacterGrid",()=>s],32267),e.s(["CharacterPreview",()=>i],29493)},72547,79724,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(22016);function a(e,t=!0){let n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!t)return;let r=t=>{n.current&&!n.current.contains(t.target)&&e()},a=t=>{"Escape"===t.key&&e()};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),document.addEventListener("keydown",a),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r),document.removeEventListener("keydown",a)}},[e,t]),n}function l({items:e,trigger:l,align:s="right",className:i="",label:o="More options"}){let[c,d]=(0,r.useState)(!1),u=a((0,r.useCallback)(()=>{d(!1)},[]),c),h=e=>{e.disabled||(e.onClick?.(),d(!1))};return 0===e.length?null:(0,t.jsxs)("div",{ref:u,className:`relative ${i}`,children:[(0,t.jsx)("button",{onClick:()=>{d(!c)},className:"touch-target flex items-center justify-center p-2 text-gray-400 hover:text-retro-cyan transition-colors rounded-md hover:bg-retro-purple/30","aria-label":o,"aria-expanded":c,"aria-haspopup":"menu",children:l||(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),c&&(0,t.jsx)("div",{className:`absolute top-full mt-2 z-50 min-w-[180px] bg-retro-navy/95 backdrop-blur-md border border-retro-grid/50 rounded-lg py-1 shadow-xl shadow-black/50 ${"right"===s?"right-0":"left-0"}`,role:"menu","aria-orientation":"vertical",children:e.map(e=>{let r=`
              w-full flex items-center gap-3 px-4 py-3 text-sm text-left
              transition-colors touch-target
              ${e.disabled?"text-gray-500 cursor-not-allowed":"danger"===e.variant?"text-red-400 hover:bg-red-500/20 hover:text-red-300":"text-gray-200 hover:bg-retro-purple/40 hover:text-retro-cyan"}
            `;return e.href&&!e.disabled?(0,t.jsxs)(n.default,{href:e.href,className:r,role:"menuitem",onClick:()=>d(!1),children:[e.icon&&(0,t.jsx)("span",{className:"w-5 h-5 flex-shrink-0",children:e.icon}),(0,t.jsx)("span",{children:e.label})]},e.id):(0,t.jsxs)("button",{className:r,role:"menuitem",disabled:e.disabled,onClick:()=>h(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),h(e))},children:[e.icon&&(0,t.jsx)("span",{className:"w-5 h-5 flex-shrink-0",children:e.icon}),(0,t.jsx)("span",{children:e.label})]},e.id)})})]})}e.s(["useOutsideClick",()=>a],79724),e.s(["OverflowMenu",()=>l],72547)},3813,33712,38152,20371,82906,92921,44824,79086,38794,4941,93949,25544,60441,42187,87355,45835,3573,43237,99401,87188,16244,46628,38910,56859,66811,83621,54750,7259,78071,35052,55361,63427,e=>{"use strict";let t;e.i(89043);var r,n,a,l,s,i,o,c,d,u,h,m,f,x,p,g,X,b,y,v=e.i(49738),w=e.i(32267),j=e.i(29493),C=e.i(43476),k=e.i(71645),N=e.i(72547);function S(e){return Math.ceil(e/8)}function M(e){return S(e.width)*e.height}function E(e,t){let r=[];for(let n=0;n<t;n++)r.push(Array(e).fill(!1));return{pixels:r}}function R(e){return{pixels:e.pixels.map(e=>[...e])}}function A(){return{width:8,height:8,padding:"right",bitDirection:"ltr"}}function L(){return crypto.randomUUID()}function D(e,t){let{width:r,height:n,padding:a,bitDirection:l}=t,s=S(r),i=new Uint8Array(n*s);for(let t=0;t<n;t++){let n=8*s,o=n-r,c=Array(n).fill(!1);if("left"===a)for(let n=0;n<r;n++)c[o+n]=e.pixels[t]?.[n]||!1;else for(let n=0;n<r;n++)c[n]=e.pixels[t]?.[n]||!1;for(let e=0;e<s;e++){let r=0;for(let t=0;t<8;t++)c[8*e+t]&&(r|=1<<("ltr"===l?7-t:t));i[t*s+e]=r}}return i}function I(e,t){let r=e instanceof Uint8Array?e:new Uint8Array(e),n=M(t),a=Math.floor(r.length/n),l=[];for(let e=0;e<a;e++){let a=r.slice(e*n,(e+1)*n);l.push(function(e,t){let{width:r,height:n,padding:a,bitDirection:l}=t,s=S(r),i=[];for(let t=0;t<n;t++){let n=[],o=t*s,c=[];for(let t=0;t<s;t++){let r=e[o+t]||0;for(let e=0;e<8;e++){let t=(r&1<<("ltr"===l?7-e:e))!=0;c.push(t)}}let d=8*s,u=d-r;if("left"===a)for(let e=u;e<d;e++)n.push(c[e]);else for(let e=0;e<r;e++)n.push(c[e]);i.push(n)}return{pixels:i}}(a,t))}return l}function B(e,t){let r=M(t),n=new Uint8Array(e.length*r);for(let a=0;a<e.length;a++){let l=D(e[a],t);n.set(l,a*r)}return n}function _(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function z(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}function T(e){let t=B(e.characters,e.config);return{metadata:e.metadata,config:e.config,binaryData:_(t)}}function $(e){let t=I(z(e.binaryData),e.config);return{metadata:e.metadata,config:e.config,characters:t}}function O(e,t,r){return new Blob([B(e,{...t,...r}).buffer],{type:"application/octet-stream"})}function P(e,t){let r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}e.s(["bytesPerCharacter",()=>M,"bytesPerLine",()=>S,"cloneCharacter",()=>R,"createDefaultConfig",()=>A,"createEmptyCharacter",()=>E,"generateId",()=>L],33712),e.s(["base64ToBinary",()=>z,"binaryToBase64",()=>_,"characterToBytes",()=>D,"createDownloadBlob",()=>O,"deserializeCharacterSet",()=>$,"downloadBlob",()=>P,"parseCharacterRom",()=>I,"serializeCharacterRom",()=>B,"serializeCharacterSet",()=>T],38152);let F="character-sets",W="retrostack-character-sets",K=new class{db=null;initialized=!1;initPromise=null;async initialize(){if(!this.initialized){if(this.initPromise)return this.initPromise;this.initPromise=this._initialize(),await this.initPromise,this.initialized=!0}}async _initialize(){return!function(){try{return!!window.indexedDB}catch{return!1}}()?void console.log("IndexedDB not available, using localStorage fallback"):new Promise((e,t)=>{let r=indexedDB.open("retrostack-character-editor",2);r.onerror=()=>{console.error("Failed to open IndexedDB, using localStorage fallback"),e()},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=e=>{let t=e.target.result,r=e.target.transaction,n=e.oldVersion;if(t.objectStoreNames.contains(F)){if(n<2){let e=r.objectStore(F);e.indexNames.contains("by-manufacturer")||e.createIndex("by-manufacturer","metadata.manufacturer",{unique:!1}),e.indexNames.contains("by-system")||e.createIndex("by-system","metadata.system",{unique:!1}),e.openCursor().onsuccess=e=>{let t=e.target.result;if(t){let e=t.value;e.metadata&&void 0===e.metadata.manufacturer&&(e.metadata.manufacturer=""),e.metadata&&void 0===e.metadata.system&&(e.metadata.system=""),t.update(e),t.continue()}}}}else{let e=t.createObjectStore(F,{keyPath:"metadata.id"});e.createIndex("by-name","metadata.name",{unique:!1}),e.createIndex("by-updated","metadata.updatedAt",{unique:!1}),e.createIndex("by-size","sizeKey",{unique:!1}),e.createIndex("by-manufacturer","metadata.manufacturer",{unique:!1}),e.createIndex("by-system","metadata.system",{unique:!1})}}})}useFallback(){return null===this.db}fallbackGetAll(){try{let e=localStorage.getItem(W);if(!e)return[];return JSON.parse(e).map(e=>({...e,metadata:{...e.metadata,manufacturer:e.metadata.manufacturer??"",system:e.metadata.system??""}}))}catch{return[]}}fallbackSaveAll(e){try{localStorage.setItem(W,JSON.stringify(e))}catch(e){throw console.error("Failed to save to localStorage:",e),Error("Storage quota exceeded")}}async getAll(){return(await this.initialize(),this.useFallback())?this.fallbackGetAll():new Promise((e,t)=>{let r=this.db.transaction([F],"readonly").objectStore(F).getAll();r.onsuccess=()=>{let t=r.result;t.sort((e,t)=>t.metadata.updatedAt-e.metadata.updatedAt),e(t)},r.onerror=()=>{t(Error("Failed to get character sets"))}})}async getById(e){return(await this.initialize(),this.useFallback())?this.fallbackGetAll().find(t=>t.metadata.id===e)||null:new Promise((t,r)=>{let n=this.db.transaction([F],"readonly").objectStore(F).get(e);n.onsuccess=()=>{t(n.result||null)},n.onerror=()=>{r(Error("Failed to get character set"))}})}async save(e){await this.initialize();let t={...e,sizeKey:`${e.config.width}x${e.config.height}`};if(this.useFallback()){let t=this.fallbackGetAll(),r=t.findIndex(t=>t.metadata.id===e.metadata.id);return r>=0?t[r]=e:t.push(e),this.fallbackSaveAll(t),e.metadata.id}return new Promise((r,n)=>{let a=this.db.transaction([F],"readwrite").objectStore(F).put(t);a.onsuccess=()=>{r(e.metadata.id)},a.onerror=()=>{n(Error("Failed to save character set"))}})}async saveAs(e,t){let r=L(),n=Date.now(),a={...e,metadata:{...e.metadata,id:r,name:t,createdAt:n,updatedAt:n,isBuiltIn:!1,source:"yourself"}};return await this.save(a),r}async delete(e){if(await this.initialize(),this.useFallback()){let t=this.fallbackGetAll().filter(t=>t.metadata.id!==e);this.fallbackSaveAll(t);return}return new Promise((t,r)=>{let n=this.db.transaction([F],"readwrite").objectStore(F).delete(e);n.onsuccess=()=>{t()},n.onerror=()=>{r(Error("Failed to delete character set"))}})}async search(e){let t=await this.getAll(),r=e.toLowerCase();return t.filter(e=>e.metadata.name.toLowerCase().includes(r)||e.metadata.description.toLowerCase().includes(r)||e.metadata.source.toLowerCase().includes(r)||e.metadata.manufacturer.toLowerCase().includes(r)||e.metadata.system.toLowerCase().includes(r))}async filterBySize(e,t){return(await this.getAll()).filter(r=>(null===e||r.config.width===e)&&(null===t||r.config.height===t))}async filterByManufacturers(e){if(0===e.length)return this.getAll();let t=await this.getAll(),r=e.map(e=>e.toLowerCase());return t.filter(e=>r.includes(e.metadata.manufacturer.toLowerCase()))}async filterBySystems(e){if(0===e.length)return this.getAll();let t=await this.getAll(),r=e.map(e=>e.toLowerCase());return t.filter(e=>r.includes(e.metadata.system.toLowerCase()))}async getAvailableManufacturers(){let e=await this.getAll(),t=new Set;for(let r of e)r.metadata.manufacturer&&t.add(r.metadata.manufacturer);return Array.from(t).sort()}async getAvailableSystems(){let e=await this.getAll(),t=new Set;for(let r of e)r.metadata.system&&t.add(r.metadata.system);return Array.from(t).sort()}async getAvailableSizes(){let e=await this.getAll(),t=new Map;for(let r of e){let e=`${r.config.width}x${r.config.height}`;t.has(e)||t.set(e,{width:r.config.width,height:r.config.height})}return Array.from(t.values()).sort((e,t)=>e.width!==t.width?e.width-t.width:e.height-t.height)}async nameExists(e,t){return(await this.getAll()).some(r=>r.metadata.name.toLowerCase()===e.toLowerCase()&&r.metadata.id!==t)}async count(){return(await this.getAll()).length}async isEmpty(){return 0===(await this.getAll()).length}async clear(){return(await this.initialize(),this.useFallback())?void localStorage.removeItem(W):new Promise((e,t)=>{let r=this.db.transaction([F],"readwrite").objectStore(F).clear();r.onsuccess=()=>{e()},r.onerror=()=>{t(Error("Failed to clear storage"))}})}};function U(e,t){let r=e.pixels.length,n=e.pixels[0]?.length||0,a=[];for(let l=0;l<r;l++){let s=[];for(let a=0;a<n;a++){let i,o;"right"===t?(i=n-1-a,o=l):(i=a,o=r-1-l),i>=0&&i<r&&o>=0&&o<n?s.push(e.pixels[i]?.[o]||!1):s.push(!1)}a.push(s)}return{pixels:a}}function H(e,t,r=!0){let n=e.pixels.length,a=e.pixels[0]?.length||0,l=[];for(let s=0;s<n;s++){let i=[];for(let l=0;l<a;l++){let o=s,c=l;switch(t){case"up":if((o=s+1)>=n&&(o=r?0:n-1,!r)){i.push(!1);continue}break;case"down":if((o=s-1)<0&&(o=r?n-1:0,!r)){i.push(!1);continue}break;case"left":if((c=l+1)>=a&&(c=r?0:a-1,!r)){i.push(!1);continue}break;case"right":if((c=l-1)<0&&(c=r?a-1:0,!r)){i.push(!1);continue}}i.push(e.pixels[o]?.[c]||!1)}l.push(i)}return{pixels:l}}function G(e,t,r,n){let a=e.pixels.length,l=e.pixels[0]?.length||0,s=0,i=0;n.endsWith("l")?s=0:n.endsWith("c")?s=Math.floor((t-l)/2):n.endsWith("r")&&(s=t-l),n.startsWith("t")?i=0:n.startsWith("m")?i=Math.floor((r-a)/2):n.startsWith("b")&&(i=r-a);let o=[];for(let n=0;n<r;n++){let r=[];for(let o=0;o<t;o++){let t=n-i,c=o-s;t>=0&&t<a&&c>=0&&c<l?r.push(e.pixels[t][c]):r.push(!1)}o.push(r)}return{pixels:o}}function V(e){return{pixels:e.pixels.map(e=>e.map(e=>!e))}}function Y(e){return{pixels:e.pixels.map(e=>[...e].reverse())}}function q(e){return{pixels:[...e.pixels].reverse().map(e=>[...e])}}function J(e,t,r){return{pixels:e.pixels.map((e,n)=>n===t?e.map((e,t)=>t===r?!e:e):[...e])}}function Z(e,t,r,n){return{pixels:e.pixels.map((e,a)=>a===t?e.map((e,t)=>t===r?n:e):[...e])}}function Q(e,t,r){return e.map((e,n)=>t.has(n)?r(e):e)}function ee(e,t,r,n){let a=Array.from(t).map(t=>e[t]);if(0===a.length)return"same-off";let l=a[0]?.pixels[r]?.[n]||!1;for(let e=1;e<a.length;e++)if((a[e]?.pixels[r]?.[n]||!1)!==l)return"mixed";return l?"same-on":"same-off"}function et(e,t,r,n){let a="same-on"!==ee(e,t,r,n);return e.map((e,l)=>t.has(l)?Z(e,r,n,a):e)}e.s(["batchTogglePixel",()=>et,"batchTransform",()=>Q,"flipHorizontal",()=>Y,"flipVertical",()=>q,"getPixelState",()=>ee,"invertCharacter",()=>V,"resizeCharacter",()=>G,"rotateCharacter",()=>U,"setPixel",()=>Z,"shiftCharacter",()=>H,"togglePixel",()=>J],20371);let er=[{id:"classic",name:"Classic (White/Black)",foreground:"#ffffff",background:"#000000",gridColor:"#333333"},{id:"green",name:"Green Phosphor",foreground:"#33ff33",background:"#001100",gridColor:"#004400"},{id:"amber",name:"Amber Phosphor",foreground:"#ffb000",background:"#1a0a00",gridColor:"#4d2e00"},{id:"c64-blue",name:"C64 Blue",foreground:"#6c5eb5",background:"#40318d",gridColor:"#2e2266"},{id:"c64-cyan",name:"C64 Light Blue",foreground:"#70a4b2",background:"#352879",gridColor:"#493f99"},{id:"apple-green",name:"Apple II Green",foreground:"#14f53c",background:"#000000",gridColor:"#0a4d15"},{id:"zx-spectrum",name:"ZX Spectrum",foreground:"#ffffff",background:"#0000d7",gridColor:"#0000aa"},{id:"ibm-cga",name:"IBM CGA Cyan",foreground:"#55ffff",background:"#000000",gridColor:"#005555"},{id:"vt100",name:"VT100",foreground:"#00ff00",background:"#000000",gridColor:"#003300"},{id:"custom",name:"Custom...",foreground:"",background:"",gridColor:""}],en="character-editor-color-preset",ea="character-editor-custom-colors";function el(e){return er.find(t=>t.id===e)}function es(e){try{localStorage.setItem(en,e)}catch{}}function ei(){try{return localStorage.getItem(en)||"classic"}catch{return"classic"}}function eo(e){try{localStorage.setItem(ea,JSON.stringify(e))}catch{}}function ec(){try{let e=localStorage.getItem(ea);if(e)return JSON.parse(e)}catch{}return{foreground:"#ffffff",background:"#000000",gridColor:"#333333"}}function ed(){let e=ei();if("custom"===e)return ec();let t=el(e);return t?{foreground:t.foreground,background:t.background,gridColor:t.gridColor}:{foreground:"#ffffff",background:"#000000",gridColor:"#333333"}}function eu(){let e=[];e.push(["........","........","........","........","........","........","........","........"]),e.push(["...XX...","...XX...","...XX...","...XX...","...XX...","........","...XX...","........"]),e.push([".XX..XX.",".XX..XX.",".XX..XX.","........","........","........","........","........"]),e.push([".XX..XX.","XXXXXXXX",".XX..XX.",".XX..XX.","XXXXXXXX",".XX..XX.","........","........"]),e.push(["...XX...",".XXXXXX.","XX......",".XXXXX..","....XX..","XXXXXX..","...XX...","........"]),e.push(["XX....XX","XX...XX.","....XX..","...XX...","..XX....",".XX...XX","XX....XX","........"]),e.push(["..XXX...",".XX.XX..","..XXX...",".XXX.XX.","XX..XX..","XX..XX..",".XXX.XX.","........"]),e.push(["...XX...","...XX...","..XX....","........","........","........","........","........"]),e.push(["....XX..","...XX...","..XX....","..XX....","..XX....","...XX...","....XX..","........"]),e.push(["..XX....","...XX...","....XX..","....XX..","....XX..","...XX...","..XX....","........"]),e.push(["........","..X..X..","...XX...",".XXXXXX.","...XX...","..X..X..","........","........"]),e.push(["........","...XX...","...XX...",".XXXXXX.","...XX...","...XX...","........","........"]),e.push(["........","........","........","........","........","...XX...","...XX...","..XX...."]),e.push(["........","........","........",".XXXXXX.","........","........","........","........"]),e.push(["........","........","........","........","........","...XX...","...XX...","........"]),e.push(["......XX",".....XX.","....XX..","...XX...","..XX....",".XX.....","XX......","........"]),e.push([".XXXXX..","XX...XX.","XX..XXX.","XX.X.XX.","XXX..XX.","XX...XX.",".XXXXX..","........"]),e.push(["...XX...","..XXX...","...XX...","...XX...","...XX...","...XX...",".XXXXXX.","........"]),e.push([".XXXXX..","XX...XX.",".....XX.","...XXX..","..XX....",".XX.....","XXXXXXX.","........"]),e.push([".XXXXX..","XX...XX.",".....XX.","..XXXX..",".....XX.","XX...XX.",".XXXXX..","........"]),e.push(["....XXX.","...XXXX.","..XX.XX.",".XX..XX.","XXXXXXX.",".....XX.",".....XX.","........"]),e.push(["XXXXXXX.","XX......","XXXXXX..",".....XX.",".....XX.","XX...XX.",".XXXXX..","........"]),e.push(["..XXXX..",".XX.....","XX......","XXXXXX..","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XXXXXXX.",".....XX.","....XX..","...XX...","..XX....","..XX....","..XX....","........"]),e.push([".XXXXX..","XX...XX.","XX...XX.",".XXXXX..","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push([".XXXXX..","XX...XX.","XX...XX.",".XXXXXX.",".....XX.","....XX..",".XXXX...","........"]),e.push(["........","...XX...","...XX...","........","...XX...","...XX...","........","........"]),e.push(["........","...XX...","...XX...","........","...XX...","...XX...","..XX....","........"]),e.push([".....XX.","....XX..","...XX...","..XX....","...XX...","....XX..",".....XX.","........"]),e.push(["........","........",".XXXXXX.","........",".XXXXXX.","........","........","........"]),e.push([".XX.....","..XX....","...XX...","....XX..","...XX...","..XX....",".XX.....","........"]),e.push([".XXXXX..","XX...XX.",".....XX.","...XXX..","...XX...","........","...XX...","........"]),e.push([".XXXXX..","XX...XX.","XX.XXXX.","XX.XXXX.","XX.XXX..","XX......",".XXXXX..","........"]),e.push(["..XXX...",".XX.XX..","XX...XX.","XXXXXXX.","XX...XX.","XX...XX.","XX...XX.","........"]),e.push(["XXXXXX..","XX...XX.","XX...XX.","XXXXXX..","XX...XX.","XX...XX.","XXXXXX..","........"]),e.push([".XXXXX..","XX...XX.","XX......","XX......","XX......","XX...XX.",".XXXXX..","........"]),e.push(["XXXXX...","XX..XX..","XX...XX.","XX...XX.","XX...XX.","XX..XX..","XXXXX...","........"]),e.push(["XXXXXXX.","XX......","XX......","XXXXX...","XX......","XX......","XXXXXXX.","........"]),e.push(["XXXXXXX.","XX......","XX......","XXXXX...","XX......","XX......","XX......","........"]),e.push([".XXXXX..","XX...XX.","XX......","XX..XXX.","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XX...XX.","XX...XX.","XX...XX.","XXXXXXX.","XX...XX.","XX...XX.","XX...XX.","........"]),e.push([".XXXXXX.","...XX...","...XX...","...XX...","...XX...","...XX...",".XXXXXX.","........"]),e.push(["...XXXX.",".....XX.",".....XX.",".....XX.","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XX...XX.","XX..XX..","XX.XX...","XXXX....","XX.XX...","XX..XX..","XX...XX.","........"]),e.push(["XX......","XX......","XX......","XX......","XX......","XX......","XXXXXXX.","........"]),e.push(["XX...XX.","XXX.XXX.","XXXXXXX.","XX.X.XX.","XX...XX.","XX...XX.","XX...XX.","........"]),e.push(["XX...XX.","XXX..XX.","XXXX.XX.","XX.XXXX.","XX..XXX.","XX...XX.","XX...XX.","........"]),e.push([".XXXXX..","XX...XX.","XX...XX.","XX...XX.","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XXXXXX..","XX...XX.","XX...XX.","XXXXXX..","XX......","XX......","XX......","........"]),e.push([".XXXXX..","XX...XX.","XX...XX.","XX...XX.","XX.X.XX.","XX..XX..",".XXX.XX.","........"]),e.push(["XXXXXX..","XX...XX.","XX...XX.","XXXXXX..","XX.XX...","XX..XX..","XX...XX.","........"]),e.push([".XXXXX..","XX...XX.","XX......",".XXXXX..",".....XX.","XX...XX.",".XXXXX..","........"]),e.push(["XXXXXXX.","...XX...","...XX...","...XX...","...XX...","...XX...","...XX...","........"]),e.push(["XX...XX.","XX...XX.","XX...XX.","XX...XX.","XX...XX.","XX...XX.",".XXXXX..","........"]),e.push(["XX...XX.","XX...XX.","XX...XX.","XX...XX.",".XX.XX..","..XXX...","...X....","........"]),e.push(["XX...XX.","XX...XX.","XX...XX.","XX.X.XX.","XXXXXXX.","XXX.XXX.","XX...XX.","........"]),e.push(["XX...XX.",".XX.XX..","..XXX...","...X....","..XXX...",".XX.XX..","XX...XX.","........"]),e.push(["XX...XX.",".XX.XX..","..XXX...","...XX...","...XX...","...XX...","...XX...","........"]),e.push(["XXXXXXX.",".....XX.","....XX..","...XX...","..XX....",".XX.....","XXXXXXX.","........"]),e.push(["..XXXX..","..XX....","..XX....","..XX....","..XX....","..XX....","..XXXX..","........"]),e.push(["XX......",".XX.....","..XX....","...XX...","....XX..",".....XX.","......XX","........"]),e.push(["..XXXX..","....XX..","....XX..","....XX..","....XX..","....XX..","..XXXX..","........"]),e.push(["...X....","..XXX...",".XX.XX..","XX...XX.","........","........","........","........"]),e.push(["........","........","........","........","........","........","XXXXXXXX","........"]);let t=new Uint8Array(8*e.length);for(let r=0;r<e.length;r++){let n=function(e){let t=new Uint8Array(8);for(let r=0;r<8&&r<e.length;r++){let n=0;for(let t=0;t<8;t++){let a=e[r]?.[t]||".";("X"===a||"#"===a||"*"===a)&&(n|=1<<7-t)}t[r]=n}return t}(e[r]);t.set(n,8*r)}return t}e.s(["COLOR_PRESETS",0,er,"getActiveColors",()=>ed,"getCustomColors",()=>ec,"getPresetById",()=>el,"getSavedPresetId",()=>ei,"saveCustomColors",()=>eo,"saveSelectedPreset",()=>es],82906);let eh=[{system:"C64",manufacturer:"Commodore",characterRom:{width:8,height:8,characterCount:256}},{system:"VIC-20",manufacturer:"Commodore",characterRom:{width:8,height:8,characterCount:256}},{system:"PET",manufacturer:"Commodore",characterRom:{width:8,height:8,characterCount:256}},{system:"C128",manufacturer:"Commodore"},{system:"Plus/4",manufacturer:"Commodore"},{system:"C16",manufacturer:"Commodore"},{system:"Amiga",manufacturer:"Commodore"},{system:"Apple II",manufacturer:"Apple",characterRom:{width:8,height:8,characterCount:256}},{system:"Apple IIe",manufacturer:"Apple"},{system:"Apple IIc",manufacturer:"Apple"},{system:"Apple IIgs",manufacturer:"Apple"},{system:"Apple III",manufacturer:"Apple"},{system:"ZX80",manufacturer:"Sinclair",characterRom:{width:8,height:8,characterCount:64}},{system:"ZX81",manufacturer:"Sinclair",characterRom:{width:8,height:8,characterCount:64}},{system:"ZX Spectrum",manufacturer:"Sinclair",characterRom:{width:8,height:8,characterCount:96}},{system:"QL",manufacturer:"Sinclair"},{system:"Atari 400/800",manufacturer:"Atari",characterRom:{width:8,height:8,characterCount:128}},{system:"Atari ST",manufacturer:"Atari"},{system:"Atari 2600",manufacturer:"Atari"},{system:"Atari 7800",manufacturer:"Atari"},{system:"Atari Lynx",manufacturer:"Atari"},{system:"PC CGA",manufacturer:"IBM",characterRom:{width:8,height:8,characterCount:256}},{system:"PC EGA",manufacturer:"IBM",characterRom:{width:8,height:14,characterCount:256}},{system:"PC VGA",manufacturer:"IBM",characterRom:{width:8,height:16,characterCount:256}},{system:"PC MDA",manufacturer:"IBM"},{system:"PC Hercules",manufacturer:"IBM"},{system:"NES/Famicom",manufacturer:"Nintendo",characterRom:{width:8,height:8,characterCount:512}},{system:"SNES",manufacturer:"Nintendo"},{system:"Game Boy",manufacturer:"Nintendo"},{system:"Game Boy Color",manufacturer:"Nintendo"},{system:"Game Boy Advance",manufacturer:"Nintendo"},{system:"Master System",manufacturer:"Sega"},{system:"Genesis/Mega Drive",manufacturer:"Sega"},{system:"Game Gear",manufacturer:"Sega"},{system:"Saturn",manufacturer:"Sega"},{system:"CPC 464",manufacturer:"Amstrad",characterRom:{width:8,height:8,characterCount:256}},{system:"CPC 6128",manufacturer:"Amstrad",characterRom:{width:8,height:8,characterCount:256}},{system:"CPC 664",manufacturer:"Amstrad"},{system:"PCW",manufacturer:"Amstrad"},{system:"TI-99/4A",manufacturer:"Texas Instruments",characterRom:{width:8,height:8,characterCount:256}},{system:"TRS-80 Model I",manufacturer:"Tandy",characterRom:{width:8,height:8,characterCount:128}},{system:"TRS-80 Model III",manufacturer:"Tandy"},{system:"TRS-80 Color Computer",manufacturer:"Tandy"},{system:"TRS-80 Model 4",manufacturer:"Tandy"},{system:"MSX",manufacturer:"MSX",characterRom:{width:8,height:8,characterCount:256}},{system:"MSX2",manufacturer:"MSX"},{system:"MSX2+",manufacturer:"MSX"},{system:"MSX turbo R",manufacturer:"MSX"},{system:"BBC Micro",manufacturer:"Acorn",characterRom:{width:8,height:8,characterCount:256}},{system:"Electron",manufacturer:"Acorn"},{system:"Archimedes",manufacturer:"Acorn"},{system:"ColecoVision",manufacturer:"Coleco"},{system:"Adam",manufacturer:"Coleco"},{system:"Intellivision",manufacturer:"Mattel"},{system:"PC Engine/TurboGrafx-16",manufacturer:"NEC"},{system:"PC-8801",manufacturer:"NEC"},{system:"PC-9801",manufacturer:"NEC"},{system:"MZ-80",manufacturer:"Sharp"},{system:"X1",manufacturer:"Sharp"},{system:"X68000",manufacturer:"Sharp"}],em=(()=>{let e=new Map;for(let t of eh)e.has(t.manufacturer)||e.set(t.manufacturer,[]),e.get(t.manufacturer).push(t.system);return Array.from(e.entries()).map(([e,t])=>({manufacturer:e,systems:t}))})(),ef=eh.filter(e=>void 0!==e.characterRom),ex=ef.map(e=>({system:e.system,manufacturer:e.manufacturer,width:e.characterRom.width,height:e.characterRom.height})),ep=ef.map(e=>({system:e.system,manufacturer:e.manufacturer,count:e.characterRom.characterCount}));function eg(e,t){return ef.filter(r=>r.characterRom.width===e&&r.characterRom.height===t).map(e=>e.system)}function eX(e){return ef.filter(t=>t.characterRom.characterCount===e).map(e=>e.system)}let eb=[{name:"8x8 (Standard)",width:8,height:8,systems:eg(8,8)},{name:"8x16 (Extended)",width:8,height:16,systems:eg(8,16)},{name:"8x14 (VGA Text)",width:8,height:14,systems:eg(8,14)},{name:"8x10 (Apple II Lores)",width:8,height:10,systems:["Apple II"]},{name:"5x7 (LED Matrix)",width:5,height:7,systems:["LED Displays","Dot Matrix"]},{name:"6x8 (C64 Hires)",width:6,height:8,systems:["C64"]},{name:"4x8 (VIC-20 Multicolor)",width:4,height:8,systems:["VIC-20"]}],ey=[{name:"64 (Quarter ROM)",count:64,systems:eX(64)},{name:"96 (ZX Spectrum)",count:96,systems:eX(96)},{name:"128 (Half ROM)",count:128,systems:eX(128)},{name:"256 (Full Set)",count:256,systems:eX(256)},{name:"512 (Extended)",count:512,systems:eX(512)}];function ev(e){let t=em.find(t=>t.manufacturer.toLowerCase()===e.toLowerCase());return t?.systems||[]}let ew={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"HT",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"DC1",18:"DC2",19:"DC3",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US",127:"DEL"};function ej(e){return e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`}function eC(e){return`${e.width}x${e.height}`}function ek(e){let t=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");return`${t||"charset"}.bin`}function eN(e){let t=e.name.toLowerCase().substring(e.name.lastIndexOf("."));return[".bin",".rom",".chr",".fnt",".dat"].includes(t)||!t||t===e.name.toLowerCase()}function eS(e,t){return Math.floor(e/(Math.ceil(t.width/8)*t.height))}function eM(e){return{arrayName:e.replace(/[^a-zA-Z0-9_]/g,"_").replace(/^[0-9]/,"_$&").toUpperCase()||"CHARSET",includeGuards:!0,includeComments:!0,bytesPerLine:8}}function eE(e){return{labelName:e.replace(/[^a-zA-Z0-9_]/g,"_").replace(/^[0-9]/,"_$&").toLowerCase()||"charset",directive:".byte",useHex:!0,includeComments:!0,bytesPerLine:8}}function eR(){return{columns:16,scale:4,showGrid:!0,gridColor:"#333333",foregroundColor:"#ffffff",backgroundColor:"#000000",transparent:!1}}function eA(e,t,r){let n=[],a=`${r.arrayName}_H`,l=M(t);r.includeComments&&(n.push("/**"),n.push(` * ${r.arrayName} - Character ROM Data`),n.push(" * Generated by RetroStack Character ROM Editor"),n.push(" * "),n.push(` * Character dimensions: ${t.width}x${t.height}`),n.push(` * Total characters: ${e.length}`),n.push(` * Bytes per character: ${l}`),n.push(" */"),n.push("")),r.includeGuards&&(n.push(`#ifndef ${a}`),n.push(`#define ${a}`),n.push(""));let s=e.length*l;n.push(`const unsigned char ${r.arrayName}[${s}] = {`);for(let a=0;a<e.length;a++){let l=D(e[a],t),s=[];for(let e=0;e<l.length;e++)s.push(`0x${l[e].toString(16).padStart(2,"0").toUpperCase()}`);for(let t=0;t<s.length;t+=r.bytesPerLine){let l=s.slice(t,t+r.bytesPerLine),i=a===e.length-1&&t+r.bytesPerLine>=s.length,o=`  ${l.join(", ")}${i?"":","}`;r.includeComments&&0===t?n.push(`${o}  /* Char ${a} */`):n.push(o)}}return n.push("};"),n.push(""),r.includeGuards&&(n.push(`#endif /* ${a} */`),n.push("")),n.join("\n")}function eL(e,t,r){let n=[],a=M(t);r.includeComments&&(n.push("; "+"=".repeat(60)),n.push(`; ${r.labelName} - Character ROM Data`),n.push("; Generated by RetroStack Character ROM Editor"),n.push("; "),n.push(`; Character dimensions: ${t.width}x${t.height}`),n.push(`; Total characters: ${e.length}`),n.push(`; Bytes per character: ${a}`),n.push("; "+"=".repeat(60)),n.push("")),n.push(`${r.labelName}:`);for(let a=0;a<e.length;a++){let l=D(e[a],t),s=[];for(let e=0;e<l.length;e++)r.useHex?s.push(`$${l[e].toString(16).padStart(2,"0").toUpperCase()}`):s.push(l[e].toString());for(let e=0;e<s.length;e+=r.bytesPerLine){let t=s.slice(e,e+r.bytesPerLine),l=`    ${r.directive} ${t.join(", ")}`;r.includeComments&&0===e?n.push(`${l}  ; Char ${a}`):n.push(l)}}return n.push(""),n.join("\n")}async function eD(e,t,r){let{columns:n,scale:a,showGrid:l,gridColor:s,foregroundColor:i,backgroundColor:o,transparent:c}=r,d=Math.ceil(e.length/n),u=t.width,h=t.height,m=+!!l,f=n*u*a+(l?(n+1)*m:0),x=d*h*a+(l?(d+1)*m:0),p=document.createElement("canvas");p.width=f,p.height=x;let g=p.getContext("2d");if(!g)throw Error("Could not create canvas context");if(c?g.clearRect(0,0,f,x):(g.fillStyle=o,g.fillRect(0,0,f,x)),l){g.fillStyle=s;for(let e=0;e<=n;e++){let t=e*(u*a+m);g.fillRect(t,0,m,x)}for(let e=0;e<=d;e++){let t=e*(h*a+m);g.fillRect(0,t,f,m)}}for(let t=0;t<e.length;t++){let r=e[t],s=t%n,d=Math.floor(t/n),f=l?s*(u*a+m)+m:s*u*a,x=l?d*(h*a+m)+m:d*h*a;for(let e=0;e<h;e++)for(let t=0;t<u;t++)r.pixels[e]?.[t]?(g.fillStyle=i,g.fillRect(f+t*a,x+e*a,a,a)):c||(g.fillStyle=o,g.fillRect(f+t*a,x+e*a,a,a))}return new Promise((e,t)=>{p.toBlob(r=>{r?e(r):t(Error("Failed to create PNG blob"))},"image/png")})}function eI(e,t,r=16){if(0===e.length)return"";let n=[],a=0;for(;n.length<r&&a<e.length;){let l=D(e[a],t);for(let e=0;e<l.length&&n.length<r;e++)n.push(l[e]);a++}return n.map(e=>e.toString(16).padStart(2,"0").toUpperCase()).join(" ")}function eB(e,t,r=0){let n=D(e,t),a=S(t.width),l=n.slice(r*a,(r+1)*a),s="";for(let e of l)s+=e.toString(2).padStart(8,"0");let i=8*a-t.width,o="";return o="left"===t.padding?"P".repeat(i)+"D".repeat(t.width):"D".repeat(t.width)+"P".repeat(i),{bits:s,hex:Array.from(l).map(e=>e.toString(16).padStart(2,"0").toUpperCase()).join(" "),padding:o}}function e_({characterSet:e,onEdit:t,onExport:r,onDelete:n,onDuplicate:a,onRename:l}){let{metadata:s,config:i}=e,o=(0,k.useMemo)(()=>{try{return $(e).characters}catch{return[]}},[e]),c=o.length,d=(0,k.useMemo)(()=>{let e=[];return t&&e.push({id:"edit",label:"Edit",onClick:t}),l&&!s.isBuiltIn&&e.push({id:"rename",label:"Rename",onClick:l}),r&&e.push({id:"export",label:"Export",onClick:r}),a&&e.push({id:"duplicate",label:"Duplicate",onClick:a}),n&&!s.isBuiltIn&&e.push({id:"delete",label:"Delete",onClick:n,variant:"danger"}),e},[t,l,r,a,n,s.isBuiltIn]);return(0,C.jsxs)("div",{className:"card-retro p-4 flex flex-col gap-3 hover-glow-cyan transition-all h-full",children:[(0,C.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,C.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,C.jsx)("h3",{className:"text-sm font-semibold text-retro-cyan truncate",children:s.name}),(s.manufacturer||s.system)&&(0,C.jsxs)("p",{className:"text-[10px] text-gray-500 mt-0.5",children:[s.manufacturer,s.manufacturer&&s.system?" ":"",s.system]}),s.description&&(0,C.jsx)("p",{className:"text-xs text-gray-400 line-clamp-2 mt-0.5",children:s.description})]}),(0,C.jsx)("div",{className:"flex-shrink-0",children:d.length>0&&(0,C.jsx)(N.OverflowMenu,{items:d,align:"right",label:"Character set actions"})})]}),(0,C.jsx)("div",{className:"flex justify-center py-2 bg-black/30 rounded",children:(0,C.jsx)(j.CharacterPreview,{characters:o,config:i,maxCharacters:512,maxWidth:256,maxHeight:4096})}),(0,C.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-retro-grid/30 text-[10px] mt-auto",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("span",{className:"px-1.5 py-0.5 bg-retro-purple/30 text-retro-pink rounded",children:eC(i)}),(0,C.jsxs)("span",{className:"text-gray-500",children:[c," char",1!==c?"s":""]}),s.isBuiltIn&&(0,C.jsx)("span",{className:"px-1.5 py-0.5 bg-retro-navy text-gray-400 rounded",children:"Built-in"})]}),t&&(0,C.jsx)("button",{onClick:t,className:"px-2 py-1 text-xs bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Edit"})]})]})}function ez({characterSet:e,selected:t=!1,onClick:r}){let{metadata:n,config:a}=e,l=(0,k.useMemo)(()=>{try{return $(e).characters}catch{return[]}},[e]);return(0,C.jsx)("button",{onClick:r,className:`
        w-full p-3 rounded border text-left transition-all
        ${t?"border-retro-cyan bg-retro-cyan/10":"border-retro-grid/30 bg-retro-navy/30 hover:border-retro-grid/50"}
      `,children:(0,C.jsxs)("div",{className:"flex items-center gap-3",children:[(0,C.jsx)("div",{className:"flex-shrink-0 bg-black/30 p-1 rounded",children:(0,C.jsx)(j.CharacterPreview,{characters:l,config:a,maxCharacters:8,maxWidth:48,maxHeight:24})}),(0,C.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,C.jsx)("div",{className:"text-sm font-medium text-gray-200 truncate",children:n.name}),(0,C.jsxs)("div",{className:"text-[10px] text-gray-500",children:[eC(a)," - ",l.length," chars"]})]}),t&&(0,C.jsx)("svg",{className:"w-4 h-4 text-retro-cyan flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})})]})})}function eT({onImport:e,onCreate:t}){return(0,C.jsxs)("div",{className:"card-retro p-6 flex flex-col items-center justify-center gap-4 border-dashed",children:[(0,C.jsx)("div",{className:"w-12 h-12 rounded-full bg-retro-purple/20 flex items-center justify-center",children:(0,C.jsx)("svg",{className:"w-6 h-6 text-retro-pink",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)("p",{className:"text-sm text-gray-300",children:"Add a character set"}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Import a ROM file or create from scratch"})]}),(0,C.jsxs)("div",{className:"flex gap-2",children:[t&&(0,C.jsx)("button",{onClick:t,className:"px-3 py-1.5 text-xs bg-retro-pink/20 text-retro-pink rounded hover:bg-retro-pink/30 transition-colors",children:"Add"}),e&&(0,C.jsx)("button",{onClick:e,className:"px-3 py-1.5 text-xs bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Import"})]})]})}function e$({characterSets:e,loading:t=!1,onEdit:r,onExport:n,onDelete:a,onDuplicate:l,onRename:s,onImport:i,onCreate:o,className:c=""}){return t?(0,C.jsx)("div",{className:`grid-fluid gap-4 ${c}`,children:Array.from({length:4}).map((e,t)=>(0,C.jsx)(eO,{},t))}):0===e.length?(0,C.jsx)("div",{className:`flex flex-col items-center justify-center py-12 ${c}`,children:(0,C.jsx)(eT,{onImport:i,onCreate:o})}):(0,C.jsx)("div",{className:`grid-fluid gap-4 ${c}`,children:e.map(e=>(0,C.jsx)(e_,{characterSet:e,onEdit:r?()=>r(e.metadata.id):void 0,onExport:n?()=>n(e.metadata.id):void 0,onDelete:a?()=>a(e.metadata.id):void 0,onDuplicate:l?()=>l(e.metadata.id):void 0,onRename:s?()=>s(e.metadata.id):void 0},e.metadata.id))})}function eO(){return(0,C.jsxs)("div",{className:"card-retro p-4 animate-pulse",children:[(0,C.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-3",children:[(0,C.jsxs)("div",{className:"flex-1",children:[(0,C.jsx)("div",{className:"h-4 bg-retro-grid/30 rounded w-3/4"}),(0,C.jsx)("div",{className:"h-3 bg-retro-grid/20 rounded w-full mt-2"})]}),(0,C.jsx)("div",{className:"w-6 h-6 bg-retro-grid/20 rounded"})]}),(0,C.jsx)("div",{className:"h-16 bg-black/30 rounded mb-3"}),(0,C.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,C.jsx)("div",{className:"h-4 w-12 bg-retro-grid/20 rounded"}),(0,C.jsx)("div",{className:"h-4 w-16 bg-retro-grid/20 rounded"})]}),(0,C.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-retro-grid/30",children:[(0,C.jsx)("div",{className:"h-3 w-20 bg-retro-grid/20 rounded"}),(0,C.jsxs)("div",{className:"flex gap-1",children:[(0,C.jsx)("div",{className:"h-6 w-12 bg-retro-grid/20 rounded"}),(0,C.jsx)("div",{className:"h-6 w-14 bg-retro-grid/20 rounded"})]})]})]})}function eP({onClearFilters:e}){return(0,C.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,C.jsx)("div",{className:"w-16 h-16 rounded-full bg-retro-navy/50 flex items-center justify-center mb-4",children:(0,C.jsx)("svg",{className:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,C.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No results found"}),(0,C.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Try adjusting your search or filters"}),e&&(0,C.jsx)("button",{onClick:e,className:"px-4 py-2 text-sm bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Clear all filters"})]})}function eF({error:e,onRetry:t}){return(0,C.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,C.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mb-4",children:(0,C.jsx)("svg",{className:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,C.jsx)("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Failed to load library"}),(0,C.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:e}),t&&(0,C.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Try again"})]})}e.s(["calculateCharacterCount",()=>eS,"formatFileSize",()=>ej,"formatSize",()=>eC,"getSuggestedFilename",()=>ek,"isValidBinaryFile",()=>eN],92921),e.s(["EXPORT_FORMATS",0,[{id:"binary",name:"Binary ROM",description:"Raw binary data for direct ROM programming",extension:".bin",mimeType:"application/octet-stream"},{id:"c-header",name:"C/C++ Header",description:"Byte array for embedded development",extension:".h",mimeType:"text/x-c"},{id:"assembly",name:"Assembly Include",description:"Data bytes for 6502/Z80 assembly",extension:".asm",mimeType:"text/plain"},{id:"png",name:"PNG Image",description:"Character sheet image",extension:".png",mimeType:"image/png"}],"exportToAssembly",()=>eL,"exportToCHeader",()=>eA,"exportToPng",()=>eD,"getBitLayoutVisualization",()=>eB,"getDefaultAssemblyOptions",()=>eE,"getDefaultCHeaderOptions",()=>eM,"getDefaultPngOptions",()=>eR,"getHexPreview",()=>eI],44824),e.s([],79086),e.s(["LibraryCard",()=>e_,"LibraryCardCompact",()=>ez,"LibraryCardEmpty",()=>eT],38794),e.s(["LibraryGrid",()=>e$,"LibraryGridEmptyResults",()=>eP,"LibraryGridError",()=>eF],4941);var eW=e.i(79724);function eK({label:e,options:t,selected:r,onChange:n,placeholder:a="All",className:l="",showAllOption:s=!0,allOptionLabel:i="All"}){let[o,c]=(0,k.useState)(!1),d=(0,eW.useOutsideClick)(()=>c(!1),o),u=(0,k.useCallback)(e=>{r.includes(e)?n(r.filter(t=>t!==e)):n([...r,e])},[r,n]),h=(0,k.useCallback)(()=>{n([])},[n]),m=(0,k.useCallback)((e,t)=>{t.stopPropagation(),n(r.filter(t=>t!==e))},[r,n]),f=e=>{let r=t.find(t=>t.value===e);return r?.label??String(e)},x=r.length>0;return(0,C.jsxs)("div",{className:`relative ${l}`,ref:d,children:[(0,C.jsxs)("button",{type:"button",onClick:()=>c(!o),className:`
          flex items-center justify-between gap-2 w-full px-3 py-1.5
          bg-retro-dark border rounded text-sm text-left
          transition-colors
          ${o?"border-retro-cyan":"border-retro-grid/50 hover:border-retro-grid"}
          ${x?"text-white":"text-gray-400"}
        `,"aria-expanded":o,"aria-haspopup":"listbox",children:[(0,C.jsx)("span",{className:"truncate",children:x?`${e} (${r.length})`:a}),(0,C.jsx)("svg",{className:`w-4 h-4 flex-shrink-0 transition-transform ${o?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&(0,C.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:r.map(e=>(0,C.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-retro-cyan/20 text-retro-cyan rounded text-xs",children:[f(e),(0,C.jsx)("button",{type:"button",onClick:t=>m(e,t),className:"hover:text-white transition-colors","aria-label":`Remove ${f(e)}`,children:(0,C.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},String(e)))}),o&&(0,C.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl overflow-hidden",children:(0,C.jsxs)("div",{className:"max-h-60 overflow-y-auto py-1",children:[s&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("button",{type:"button",onClick:h,className:`
                    w-full flex items-center gap-2 px-3 py-2 text-sm text-left
                    transition-colors
                    ${!x?"bg-retro-cyan/10 text-retro-cyan":"text-gray-300 hover:bg-retro-purple/20"}
                  `,children:[(0,C.jsx)("span",{className:"w-4 h-4 flex items-center justify-center",children:!x&&(0,C.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})})}),i]}),(0,C.jsx)("div",{className:"h-px bg-retro-grid/30 mx-2 my-1"})]}),t.map(e=>{let t=r.includes(e.value);return(0,C.jsxs)("button",{type:"button",onClick:()=>u(e.value),className:`
                    w-full flex items-center gap-2 px-3 py-2 text-sm text-left
                    transition-colors
                    ${t?"bg-retro-cyan/10 text-retro-cyan":"text-gray-300 hover:bg-retro-purple/20"}
                  `,role:"option","aria-selected":t,children:[(0,C.jsx)("span",{className:`
                      w-4 h-4 flex items-center justify-center rounded border
                      ${t?"bg-retro-cyan border-retro-cyan":"border-gray-500"}
                    `,children:t&&(0,C.jsx)("svg",{className:"w-3 h-3 text-retro-dark",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.label]},String(e.value))}),0===t.length&&(0,C.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No options available"})]})})]})}function eU({searchQuery:e,onSearchChange:t,availableSizes:r,widthFilters:n,heightFilters:a,onSizeFilterChange:l,availableManufacturers:s=[],availableSystems:i=[],manufacturerFilters:o=[],systemFilters:c=[],onManufacturerFilterChange:d,onSystemFilterChange:u,totalCount:h,filteredCount:m}){let[f,x]=(0,k.useState)(e),p=(0,k.useMemo)(()=>Array.from(new Set([...em.map(e=>e.manufacturer),...s])).sort(),[s]),g=(0,k.useMemo)(()=>{if(0===o.length)return i.sort();let e=new Set;return o.forEach(t=>{ev(t).forEach(t=>e.add(t))}),i.forEach(t=>e.add(t)),Array.from(e).sort()},[o,i]),X=(0,k.useMemo)(()=>Array.from(new Set(r.map(e=>e.width))).sort((e,t)=>e-t),[r]),b=(0,k.useMemo)(()=>Array.from(new Set(r.map(e=>e.height))).sort((e,t)=>e-t),[r]),y=(0,k.useCallback)(e=>{e.preventDefault(),t(f)},[f,t]),v=(0,k.useCallback)(e=>{"Enter"===e.key&&t(f)},[f,t]),w=(0,k.useCallback)(()=>{x(""),t(""),l([],[]),d?.([]),u?.([])},[t,l,d,u]),j=e.length>0||n.length>0||a.length>0||o.length>0||c.length>0;return(0,C.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,C.jsx)("form",{onSubmit:y,children:(0,C.jsxs)("div",{className:"relative",children:[(0,C.jsx)("input",{type:"text",value:f,onChange:e=>x(e.target.value),onKeyDown:v,onBlur:()=>t(f),placeholder:"Search character sets...",className:"w-full px-4 py-2 pl-10 bg-retro-navy/50 border border-retro-grid/50 rounded-lg text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:border-retro-cyan/50 transition-colors","aria-label":"Search character sets"}),(0,C.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),f&&(0,C.jsx)("button",{type:"button",onClick:()=>{x(""),t("")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300","aria-label":"Clear search",children:(0,C.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,C.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,C.jsx)(eK,{label:"Width",options:X.map(e=>({value:e,label:`${e}px`})),selected:n,onChange:e=>l(e,a),placeholder:"Width",allOptionLabel:"Any width"}),(0,C.jsx)(eK,{label:"Height",options:b.map(e=>({value:e,label:`${e}px`})),selected:a,onChange:e=>l(n,e),placeholder:"Height",allOptionLabel:"Any height"}),d&&(0,C.jsx)(eK,{label:"Manufacturer",options:p.map(e=>({value:e,label:e})),selected:o,onChange:d,placeholder:"Manufacturer",allOptionLabel:"Any manufacturer"}),u&&(0,C.jsx)(eK,{label:"System",options:g.map(e=>({value:e,label:e})),selected:c,onChange:u,placeholder:"System",allOptionLabel:"Any system"})]}),(0,C.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,C.jsx)("span",{children:j?`Showing ${m} of ${h} character sets`:`${h} character set${1!==h?"s":""}`}),j&&(0,C.jsx)("button",{onClick:w,className:"text-retro-cyan hover:text-retro-pink transition-colors",children:"Clear filters"})]})]})}function eH({onFileSelect:e,selectedFile:t,loading:r=!1,error:n=null,className:a=""}){let[l,s]=(0,k.useState)(!1),[i,o]=(0,k.useState)(null),c=(0,k.useRef)(null),d=n||i,u=(0,k.useCallback)(async t=>{if(o(null),!eN(t))return void o("Invalid file type. Please select a binary ROM file (.bin, .rom, .chr, .fnt, .dat)");if(t.size>1048576)return void o("File too large. Maximum size is 1MB.");try{let r=await t.arrayBuffer();e(t,r)}catch(e){o("Failed to read file. Please try again.")}},[e]),h=(0,k.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),s(!1);let t=e.dataTransfer.files;t.length>0&&u(t[0])},[u]),m=(0,k.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),s(!0)},[]),f=(0,k.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),s(!1)},[]),x=(0,k.useCallback)(()=>{c.current?.click()},[]),p=(0,k.useCallback)(e=>{let t=e.target.files;t&&t.length>0&&u(t[0])},[u]),g=(0,k.useCallback)(e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),x())},[x]);return(0,C.jsxs)("div",{className:a,children:[(0,C.jsx)("input",{ref:c,type:"file",accept:".bin,.rom,.chr,.fnt,.dat",onChange:p,className:"hidden","aria-hidden":"true"}),(0,C.jsx)("div",{onClick:x,onDrop:h,onDragOver:m,onDragLeave:f,onKeyDown:g,role:"button",tabIndex:0,"aria-label":"Drop a ROM file or click to browse",className:`
          relative flex flex-col items-center justify-center
          p-8 sm:p-12
          border-2 border-dashed rounded-lg
          cursor-pointer
          transition-all
          ${l?"border-retro-cyan bg-retro-cyan/10":t?"border-retro-pink/50 bg-retro-pink/5":"border-retro-grid/50 hover:border-retro-cyan/50 bg-retro-navy/30"}
          ${d?"border-red-500/50 bg-red-500/5":""}
          ${r?"pointer-events-none opacity-50":""}
        `,children:r?(0,C.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,C.jsx)("div",{className:"w-12 h-12 border-2 border-retro-cyan border-t-transparent rounded-full animate-spin"}),(0,C.jsx)("span",{className:"text-sm text-gray-400",children:"Reading file..."})]}):t?(0,C.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,C.jsx)("div",{className:"w-16 h-16 rounded-lg bg-retro-pink/20 flex items-center justify-center",children:(0,C.jsx)("svg",{className:"w-8 h-8 text-retro-pink",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)("p",{className:"text-sm font-medium text-gray-200 truncate max-w-[200px]",children:t.name}),(0,C.jsx)("p",{className:"text-xs text-gray-500",children:ej(t.size)})]}),(0,C.jsx)("button",{type:"button",className:"text-xs text-retro-cyan hover:text-retro-pink transition-colors",children:"Choose a different file"})]}):(0,C.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,C.jsx)("div",{className:"w-16 h-16 rounded-full bg-retro-purple/20 flex items-center justify-center",children:(0,C.jsx)("svg",{className:"w-8 h-8 text-retro-pink",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)("p",{className:"text-sm text-gray-300",children:"Drag and drop a ROM file here"}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"or click to browse"})]}),(0,C.jsx)("div",{className:"text-[10px] text-gray-500",children:"Accepts: .bin, .rom, .chr, .fnt, .dat"})]})}),d&&(0,C.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-sm text-red-400",children:[(0,C.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,C.jsx)("span",{children:d})]})]})}function eG({character:e,config:t,onPixelToggle:r,onPixelSet:n,onDragEnd:a,getPixelState:l,batchMode:s=!1,foregroundColor:i="#ffffff",backgroundColor:o="#000000",gridColor:c="#333333",gridThickness:d=1,zoom:u=20,className:h=""}){let m=(0,k.useRef)(null),[f,x]=(0,k.useState)(!1),[p,g]=(0,k.useState)(null),X=(0,k.useMemo)(()=>{if(!s||!l||!e)return;let r=new Set;for(let e=0;e<t.height;e++)for(let n=0;n<t.width;n++)"mixed"===l(e,n)&&r.add(`${e},${n}`);return r.size>0?r:void 0},[s,l,e,t.height,t.width]),b=(0,k.useCallback)((t,n)=>{f||(r?.(t,n),g(!e?.pixels[t]?.[n]),x(!0))},[f,r,e]),y=(0,k.useCallback)((e,t)=>{f&&null!==p&&n&&n(e,t,p)},[f,p,n]),w=(0,k.useCallback)(()=>{f&&(x(!1),g(null),a?.())},[f,a]);return e?(0,C.jsx)("div",{ref:m,className:`flex items-center justify-center h-full overflow-hidden bg-black/20 ${h}`,tabIndex:0,children:(0,C.jsx)("div",{className:"inline-block",onMouseLeave:w,onMouseUp:w,children:(0,C.jsx)(v.CharacterDisplay,{character:e,mode:"large",scale:u,foregroundColor:i,backgroundColor:o,gridColor:c,gridThickness:d,onPixelClick:b,onPixelDrag:y,onDragEnd:w,interactive:!0,mixedPixels:X})})}):(0,C.jsx)("div",{className:`flex items-center justify-center h-full ${h}`,children:(0,C.jsxs)("div",{className:"text-center text-gray-500",children:[(0,C.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6z"})}),(0,C.jsx)("p",{children:"No character selected"})]})})}function eV({characters:e,config:t,selectedIndex:r,batchSelection:n,onSelect:a,foregroundColor:l="#ffffff",backgroundColor:s="#000000",selectionColor:i="#00ffff",batchSelectionColor:o="#ff69b4",maxWidth:c=200,pixelScale:d=1,gap:u=1,collapsible:h=!0,defaultCollapsed:m=!1,className:f=""}){let x=(0,k.useRef)(null),p=(0,k.useRef)(null),[g,X]=(0,k.useState)(m),[b,y]=(0,k.useState)(null),v=t.width*d,w=t.height*d,j=v+u,N=w+u,S=Math.max(1,Math.floor(c/j)),M=Math.ceil(e.length/S),E=S*j-u,R=M*N-u;(0,k.useEffect)(()=>{let t=x.current;if(!t||g)return;let a=t.getContext("2d");a&&(t.width=E,t.height=R,a.fillStyle=s,a.fillRect(0,0,E,R),e.forEach((e,t)=>{let c=t%S*j,u=Math.floor(t/S)*N;a.fillStyle=s,a.fillRect(c,u,v,w),a.fillStyle=l,e.pixels.forEach((e,t)=>{e.forEach((e,r)=>{e&&a.fillRect(c+r*d,u+t*d,d,d)})}),n?.has(t)&&t!==r&&(a.strokeStyle=o,a.lineWidth=1,a.globalAlpha=.7,a.strokeRect(c+.5,u+.5,v-1,w-1),a.globalAlpha=1),t===r?(a.strokeStyle=i,a.lineWidth=2,a.strokeRect(c+1,u+1,v-2,w-2)):t!==b||n?.has(t)||(a.strokeStyle=i,a.lineWidth=1,a.globalAlpha=.5,a.strokeRect(c+.5,u+.5,v-1,w-1),a.globalAlpha=1)}))},[e,t,r,n,b,l,s,i,o,d,u,S,E,R,v,w,j,N,g]);let A=(0,k.useCallback)(t=>{if(!a)return;let r=x.current;if(!r)return;let n=r.getBoundingClientRect(),l=t.clientX-n.left,s=t.clientY-n.top,i=r.width/n.width,o=Math.floor(s*(r.height/n.height)/N)*S+Math.floor(l*i/j);o>=0&&o<e.length&&a(o)},[a,j,N,S,e.length]),L=(0,k.useCallback)(t=>{let r=x.current;if(!r)return;let n=r.getBoundingClientRect(),a=t.clientX-n.left,l=t.clientY-n.top,s=r.width/n.width,i=Math.floor(l*(r.height/n.height)/N)*S+Math.floor(a*s/j);i>=0&&i<e.length?y(i):y(null)},[j,N,S,e.length]),D=(0,k.useCallback)(()=>{y(null)},[]),I=(0,k.useCallback)(()=>{X(e=>!e)},[]);return(0,C.jsxs)("div",{className:`${f}`,ref:p,children:[h&&(0,C.jsxs)("button",{onClick:I,className:"w-full flex items-center justify-between p-2 text-sm text-gray-300 hover:text-retro-cyan transition-colors",children:[(0,C.jsx)("span",{className:"font-medium",children:"Overview"}),(0,C.jsx)("svg",{className:`w-4 h-4 transition-transform ${g?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!g&&(0,C.jsx)("div",{className:"p-2 bg-black/30 rounded overflow-auto",style:{maxHeight:"150px"},children:(0,C.jsx)("canvas",{ref:x,onClick:A,onMouseMove:L,onMouseLeave:D,className:"cursor-pointer",style:{width:E,height:R,imageRendering:"pixelated"}})})]})}function eY({characters:e,config:t,selectedIndex:r,batchSelection:n,onSelect:a,onAddCharacter:l,onDeleteSelected:s,onSelectAll:i,onSelectNone:o,showAddButton:c=!0,foregroundColor:d="#ffffff",backgroundColor:u="#000000",className:h=""}){let m=n.size+1,f=m>1,[x,p]=(0,k.useState)(!1),g=(0,k.useCallback)(t=>{let n=e.length;if(0!==n)switch(t.key){case"ArrowUp":case"ArrowLeft":t.preventDefault(),a(r>0?r-1:n-1,t.shiftKey,t.metaKey||t.ctrlKey);break;case"ArrowDown":case"ArrowRight":t.preventDefault(),a(r<n-1?r+1:0,t.shiftKey,t.metaKey||t.ctrlKey);break;case"Delete":case"Backspace":t.preventDefault(),s?.();break;case"a":case"A":(t.ctrlKey||t.metaKey)&&t.preventDefault()}},[e.length,r,a,s]);return(0,C.jsxs)("div",{className:`flex flex-col h-full overflow-hidden ${h}`,onKeyDown:g,children:[(0,C.jsxs)("div",{className:"flex-shrink-0 p-3 border-b border-retro-grid/30",children:[(0,C.jsx)("div",{className:"flex items-center justify-between",children:(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Characters"}),(0,C.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.length,")"]})]})}),f&&(0,C.jsxs)("div",{className:"mt-1 text-xs text-retro-pink",children:[m," characters selected"]})]}),(0,C.jsxs)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:[(0,C.jsx)("div",{className:"border-b border-retro-grid/30",children:(0,C.jsx)(eV,{characters:e,config:t,selectedIndex:r,batchSelection:n,onSelect:e=>a(e,!1),foregroundColor:d,backgroundColor:u,maxWidth:200,pixelScale:1,collapsible:!0,defaultCollapsed:!1})}),(0,C.jsxs)("div",{className:"border-b border-retro-grid/30",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("span",{className:"font-medium text-sm text-gray-300",children:"Characters"}),i&&(0,C.jsx)("button",{onClick:e=>{e.stopPropagation(),i()},className:"text-[10px] text-gray-500 hover:text-retro-cyan transition-colors",children:"All"}),o&&f&&(0,C.jsx)("button",{onClick:e=>{e.stopPropagation(),o()},className:"text-[10px] text-gray-500 hover:text-retro-pink transition-colors",children:"None"})]}),(0,C.jsx)("button",{onClick:()=>p(!x),className:"p-1 text-gray-400 hover:text-retro-cyan transition-colors","aria-label":x?"Expand characters":"Collapse characters",children:(0,C.jsx)("svg",{className:`w-4 h-4 transition-transform ${x?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),!x&&(0,C.jsx)("div",{className:"p-2",children:(0,C.jsx)(w.InteractiveCharacterGrid,{characters:e,config:t,selectedIndex:r,batchSelection:n,onSelect:a,showAddButton:c&&!!l,onAdd:l,foregroundColor:d,backgroundColor:u,showIndices:!1,smallScale:2,minColumns:8,maxColumns:10,gap:4,className:"max-h-[400px] overflow-y-auto"})})]})]})]})}function eq({colors:e,onColorsChange:t,className:r=""}){let[n,a]=(0,k.useState)(!1),[l,s]=(0,k.useState)(()=>ei()),[i,o]=(0,k.useState)(()=>ec()),[c,d]=(0,k.useState)(!1),u=(0,eW.useOutsideClick)(()=>{a(!1),d(!1)},n),h=(0,k.useCallback)(e=>{"custom"===e.id?d(!0):(s(e.id),es(e.id),t({foreground:e.foreground,background:e.background,gridColor:e.gridColor}),a(!1))},[t]),m=(0,k.useCallback)((e,r)=>{let n={...i,[e]:r};o(n),eo(n),s("custom"),es("custom"),t(n)},[i,t]),f=el(l),x=f?.name||"Custom";return(0,C.jsxs)("div",{className:`relative ${r}`,ref:u,children:[(0,C.jsxs)("button",{onClick:()=>a(!n),className:"flex items-center gap-2 px-3 py-1.5 bg-retro-navy/50 border border-retro-grid/50 rounded text-sm text-gray-300 hover:border-retro-grid transition-colors","aria-expanded":n,"aria-haspopup":"listbox",children:[(0,C.jsxs)("div",{className:"flex gap-0.5",children:[(0,C.jsx)("div",{className:"w-3 h-3 rounded-sm border border-white/20",style:{backgroundColor:e.foreground}}),(0,C.jsx)("div",{className:"w-3 h-3 rounded-sm border border-white/20",style:{backgroundColor:e.background}})]}),(0,C.jsx)("span",{className:"hidden sm:inline",children:x}),(0,C.jsx)("svg",{className:`w-3 h-3 transition-transform ${n?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&(0,C.jsx)("div",{className:"absolute right-0 mt-1 w-64 bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl z-50 overflow-hidden",children:c?(0,C.jsxs)("div",{className:"p-3 space-y-3",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsx)("span",{className:"text-sm text-gray-300",children:"Custom Colors"}),(0,C.jsx)("button",{onClick:()=>d(!1),className:"text-xs text-gray-500 hover:text-gray-300",children:"Back"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Foreground"}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("input",{type:"color",value:i.foreground,onChange:e=>m("foreground",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0 bg-transparent"}),(0,C.jsx)("input",{type:"text",value:i.foreground,onChange:e=>m("foreground",e.target.value),className:"flex-1 px-2 py-1 bg-retro-dark border border-retro-grid/50 rounded text-xs text-gray-300 font-mono"})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Background"}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("input",{type:"color",value:i.background,onChange:e=>m("background",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0 bg-transparent"}),(0,C.jsx)("input",{type:"text",value:i.background,onChange:e=>m("background",e.target.value),className:"flex-1 px-2 py-1 bg-retro-dark border border-retro-grid/50 rounded text-xs text-gray-300 font-mono"})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Grid Lines"}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("input",{type:"color",value:i.gridColor,onChange:e=>m("gridColor",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0 bg-transparent"}),(0,C.jsx)("input",{type:"text",value:i.gridColor,onChange:e=>m("gridColor",e.target.value),className:"flex-1 px-2 py-1 bg-retro-dark border border-retro-grid/50 rounded text-xs text-gray-300 font-mono"})]})]})]}):(0,C.jsx)("div",{className:"py-1 max-h-80 overflow-y-auto",children:er.map(e=>(0,C.jsxs)("button",{onClick:()=>h(e),className:`
                    w-full flex items-center gap-3 px-3 py-2 text-left text-sm
                    transition-colors
                    ${l===e.id?"bg-retro-cyan/10 text-retro-cyan":"text-gray-300 hover:bg-retro-purple/20"}
                  `,role:"option","aria-selected":l===e.id,children:["custom"!==e.id?(0,C.jsxs)("div",{className:"flex gap-0.5 flex-shrink-0",children:[(0,C.jsx)("div",{className:"w-4 h-4 rounded-sm border border-white/20",style:{backgroundColor:e.foreground}}),(0,C.jsx)("div",{className:"w-4 h-4 rounded-sm border border-white/20",style:{backgroundColor:e.background}})]}):(0,C.jsx)("div",{className:"w-[34px] h-4 flex items-center justify-center",children:(0,C.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})}),(0,C.jsx)("span",{className:"flex-1",children:e.name}),l===e.id&&(0,C.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})})]},e.id))})})]})}function eJ({characterSetName:e,isDirty:t,characterIndex:r,totalCharacters:n,batchMode:a=!1,zoom:l,minZoom:s=8,maxZoom:i=40,zoomStep:o=4,onZoomChange:c,colors:d,onColorsChange:u,onBack:h,className:m=""}){let f=r>=32&&r<=126,x=ew[r]||null;return(0,C.jsxs)("div",{className:`flex items-center gap-4 px-4 py-2 bg-retro-navy/50 border-b border-retro-grid/50 ${m}`,children:[(0,C.jsxs)("button",{onClick:h,className:"flex items-center gap-1 text-xs text-gray-400 hover:text-retro-cyan transition-colors whitespace-nowrap",children:[(0,C.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,C.jsx)("span",{className:"hidden sm:inline",children:"Back"})]}),(0,C.jsx)("div",{className:"w-px h-4 bg-retro-grid/50"}),(0,C.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-300 min-w-0",children:[(0,C.jsx)("span",{className:"truncate max-w-[150px] sm:max-w-[200px]",title:e,children:e}),t&&(0,C.jsx)("span",{className:"text-retro-pink flex-shrink-0",children:"*"})]}),(0,C.jsx)("div",{className:"w-px h-4 bg-retro-grid/50 hidden sm:block"}),(0,C.jsxs)("div",{className:"hidden sm:flex items-center gap-2 text-sm text-gray-400",children:[(0,C.jsxs)("span",{className:"whitespace-nowrap",children:["Char ",(0,C.jsx)("span",{className:"text-retro-cyan",children:r}),(0,C.jsxs)("span",{className:"text-gray-500",children:["/",n]})]}),f&&(0,C.jsxs)("span",{className:"px-1.5 py-0.5 bg-retro-purple/30 text-retro-cyan rounded text-xs font-mono",title:"Printable ASCII Character",children:["'",String.fromCharCode(r),"'"]}),x&&(0,C.jsxs)("span",{className:"px-1.5 py-0.5 text-xs bg-retro-pink/20 text-retro-pink rounded",title:"ASCII Control Character",children:[" ","(",x,")"]}),a&&(0,C.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-retro-pink/20 text-retro-pink rounded",children:"Batch"})]}),(0,C.jsx)("div",{className:"flex-1"}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[(0,C.jsx)("button",{onClick:()=>{l>s&&c(Math.max(l-o,s))},disabled:l<=s,className:"p-1 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Zoom out (-)",children:(0,C.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,C.jsxs)("span",{className:"text-xs text-gray-500 w-10 text-center",children:[l,"x"]}),(0,C.jsx)("button",{onClick:()=>{l<i&&c(Math.min(l+o,i))},disabled:l>=i,className:"p-1 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed",title:"Zoom in (+)",children:(0,C.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),(0,C.jsx)("div",{className:"w-px h-4 bg-retro-grid/50"}),(0,C.jsx)(eq,{colors:d,onColorsChange:u})]})}function eZ({className:e=""}){return(0,C.jsx)("div",{className:`flex items-center justify-center gap-4 px-4 py-1.5 bg-retro-navy/50 border-t border-retro-grid/50 ${e}`,children:(0,C.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-x-4 gap-y-1 text-[10px] text-gray-500",children:[{keys:"Arrow keys",action:"Navigate"},{keys:"Click",action:"Select"},{keys:"Shift+Click",action:"Multi-select"},{keys:"Del",action:"Delete"},{keys:"Ctrl+S",action:"Save"},{keys:"Ctrl+Z/Y",action:"Undo/Redo"},{keys:"?",action:"Help"}].map(({keys:e,action:t},r)=>(0,C.jsxs)("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[(0,C.jsx)("span",{className:"text-gray-400",children:e}),(0,C.jsxs)("span",{className:"hidden sm:inline",children:[": ",t]})]},r))})})}function eQ(e,t={}){let{enabled:r=!0,target:n=null}=t,a=(0,k.useRef)(e);a.current=e;let l=(0,k.useCallback)(e=>{let t=e.target?.tagName?.toLowerCase();if("input"!==t&&"textarea"!==t&&"select"!==t||e.ctrlKey||e.metaKey)for(let t of a.current){let r=e.key.toLowerCase()===t.key.toLowerCase(),n=!!t.ctrl===(e.ctrlKey||e.metaKey),a=!!t.shift===e.shiftKey,l=!!t.alt===e.altKey;if(r&&n&&a&&l){e.preventDefault(),t.action();return}}},[]);(0,k.useEffect)(()=>{if(!r)return;let e=n||window;return e.addEventListener("keydown",l),()=>{e.removeEventListener("keydown",l)}},[r,n,l])}function e0(e){let t=[],r="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);e.ctrl&&t.push(r?"â":"Ctrl"),e.alt&&t.push(r?"â¥":"Alt"),e.shift&&t.push(r?"â§":"Shift");let n=e.key;return t.push(n=" "===n?"Space":"ArrowUp"===n?"â":"ArrowDown"===n?"â":"ArrowLeft"===n?"â":"ArrowRight"===n?"â":"Escape"===n?"Esc":"Delete"===n?"Del":"Backspace"===n?"â«":n.toUpperCase()),t.join(r?"":"+")}function e1(e){return[{key:"z",ctrl:!0,action:e.undo,description:"Undo",context:"Editor"},{key:"z",ctrl:!0,shift:!0,action:e.redo,description:"Redo",context:"Editor"},{key:"y",ctrl:!0,action:e.redo,description:"Redo",context:"Editor"},{key:"s",ctrl:!0,action:e.save,description:"Save",context:"Editor"},{key:"r",action:e.rotateRight,description:"Rotate right",context:"Editor"},{key:"r",shift:!0,action:e.rotateLeft,description:"Rotate left",context:"Editor"},{key:"w",action:e.shiftUp,description:"Shift up",context:"Editor"},{key:"s",action:e.shiftDown,description:"Shift down",context:"Editor"},{key:"a",action:e.shiftLeft,description:"Shift left",context:"Editor"},{key:"d",action:e.shiftRight,description:"Shift right",context:"Editor"},{key:"i",action:e.invert,description:"Invert colors",context:"Editor"},{key:"h",action:e.flipHorizontal,description:"Flip horizontal",context:"Editor"},{key:"v",action:e.flipVertical,description:"Flip vertical",context:"Editor"},{key:"a",ctrl:!0,action:e.selectAll,description:"Select all",context:"Sidebar"},{key:"Delete",action:e.deleteSelected,description:"Delete selected",context:"Sidebar"},{key:"Backspace",action:e.deleteSelected,description:"Delete selected",context:"Sidebar"},{key:"n",ctrl:!0,action:e.addCharacter,description:"Add new character",context:"Editor"},{key:"?",action:e.showHelp,description:"Show keyboard shortcuts",context:"Global"}]}function e2({isOpen:e,onClose:t,shortcuts:r}){if((0,k.useEffect)(()=>{if(!e)return;let r=e=>{"Escape"===e.key&&(e.preventDefault(),t())};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e,t]),(0,k.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),!e)return null;let n=r.reduce((e,t)=>{let r=t.context||"General";return e[r]||(e[r]=[]),e[r].push(t),e},{}),a=["Editor","Sidebar","Global"],l=Object.keys(n).sort((e,t)=>{let r=a.indexOf(e),n=a.indexOf(t);return -1===r&&-1===n?e.localeCompare(t):-1===r?1:-1===n?-1:r-n});return(0,C.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,C.jsxs)("div",{className:"relative w-full max-w-lg bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl overflow-hidden",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-retro-grid/30",children:[(0,C.jsx)("h2",{className:"text-lg font-medium text-white",children:"Keyboard Shortcuts"}),(0,C.jsx)("button",{onClick:t,className:"p-1 text-gray-400 hover:text-white transition-colors","aria-label":"Close",children:(0,C.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,C.jsx)("div",{className:"p-4 max-h-[60vh] overflow-y-auto space-y-6",children:l.map(e=>(0,C.jsxs)("div",{children:[(0,C.jsx)("h3",{className:"text-sm font-medium text-retro-cyan mb-2",children:e}),(0,C.jsx)("div",{className:"space-y-1",children:n[e].map((t,r)=>(0,C.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2 rounded hover:bg-retro-purple/10",children:[(0,C.jsx)("span",{className:"text-sm text-gray-300",children:t.description}),(0,C.jsx)("kbd",{className:"px-2 py-0.5 text-xs font-mono bg-retro-dark border border-retro-grid/50 rounded text-gray-400",children:e0(t)})]},`${e}-${r}`))})]},e))}),(0,C.jsx)("div",{className:"px-4 py-3 border-t border-retro-grid/30 text-center",children:(0,C.jsxs)("span",{className:"text-xs text-gray-500",children:["Press ",(0,C.jsx)("kbd",{className:"px-1 py-0.5 bg-retro-dark border border-retro-grid/50 rounded text-gray-400",children:"Esc"})," or ",(0,C.jsx)("kbd",{className:"px-1 py-0.5 bg-retro-dark border border-retro-grid/50 rounded text-gray-400",children:"?"})," to close"]})})]})]})}function e4({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}function e5({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}function e3({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}function e8({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}function e6({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}function e7({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{transform:"scaleX(-1)"},children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}function e9({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h8M8 12h8m-8 5h8M4 3v18m16-18v18"})})}function te({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8v8M12 8v8m5-8v8M3 4h18M3 20h18"})})}function tt({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}function tr({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"1",strokeWidth:2})})}function tn({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,viewBox:"0 0 24 24",children:(0,C.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"1",fill:"currentColor"})})}function ta({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}function tl({className:e="w-4 h-4"}){return(0,C.jsx)("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}function ts({onClick:e,disabled:t,title:r,children:n,className:a=""}){return(0,C.jsx)("button",{onClick:e,disabled:t,title:r,className:`
        p-2 rounded transition-colors
        ${t?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-retro-cyan hover:bg-retro-purple/30"}
        ${a}
      `,children:n})}function ti(){return(0,C.jsx)("div",{className:"w-full h-px bg-retro-grid/30 my-2"})}function to({children:e}){return(0,C.jsx)("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider text-center mb-1",children:e})}function tc({onShift:e,onRotate:t,onFlipHorizontal:r,onFlipVertical:n,onInvert:a,onClear:l,onFill:s,onDelete:i,onCopy:o,disabled:c=!1,className:d=""}){let u=(0,k.useCallback)(()=>e("up"),[e]),h=(0,k.useCallback)(()=>e("down"),[e]),m=(0,k.useCallback)(()=>e("left"),[e]),f=(0,k.useCallback)(()=>e("right"),[e]),x=(0,k.useCallback)(()=>t("left"),[t]),p=(0,k.useCallback)(()=>t("right"),[t]);return(0,C.jsxs)("div",{className:`
        flex flex-col items-center p-2 bg-retro-navy/50 border-l border-retro-grid/30 overflow-hidden
        ${d}
      `,children:[(0,C.jsx)(to,{children:"Shift"}),(0,C.jsxs)("div",{className:"flex flex-col items-center gap-0.5",children:[(0,C.jsx)(ts,{onClick:u,disabled:c,title:"Shift Up (W)",children:(0,C.jsx)(e4,{})}),(0,C.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,C.jsx)(ts,{onClick:m,disabled:c,title:"Shift Left (A)",children:(0,C.jsx)(e3,{})}),(0,C.jsx)("div",{className:"w-8 h-8"}),(0,C.jsx)(ts,{onClick:f,disabled:c,title:"Shift Right (D)",children:(0,C.jsx)(e8,{})})]}),(0,C.jsx)(ts,{onClick:h,disabled:c,title:"Shift Down (S)",children:(0,C.jsx)(e5,{})})]}),(0,C.jsx)(ti,{}),(0,C.jsx)(to,{children:"Rotate"}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[(0,C.jsx)(ts,{onClick:x,disabled:c,title:"Rotate Left (Shift+R)",children:(0,C.jsx)(e6,{})}),(0,C.jsx)(ts,{onClick:p,disabled:c,title:"Rotate Right (R)",children:(0,C.jsx)(e7,{})})]}),(0,C.jsx)(ti,{}),(0,C.jsx)(to,{children:"Flip"}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[(0,C.jsx)(ts,{onClick:r,disabled:c,title:"Flip Horizontal (H)",children:(0,C.jsx)(e9,{})}),(0,C.jsx)(ts,{onClick:n,disabled:c,title:"Flip Vertical (V)",children:(0,C.jsx)(te,{})})]}),(0,C.jsx)(ti,{}),(0,C.jsx)(to,{children:"Effects"}),(0,C.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,C.jsx)(ts,{onClick:a,disabled:c,title:"Invert Colors (I)",children:(0,C.jsx)(tt,{})}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[(0,C.jsx)(ts,{onClick:l,disabled:c,title:"Clear",children:(0,C.jsx)(tr,{})}),(0,C.jsx)(ts,{onClick:s,disabled:c,title:"Fill",children:(0,C.jsx)(tn,{})})]})]}),(o||i)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ti,{}),(0,C.jsx)(to,{children:"Char"}),(0,C.jsxs)("div",{className:"flex items-center gap-1",children:[o&&(0,C.jsx)(ts,{onClick:o,disabled:c,title:"Copy from character set (C)",children:(0,C.jsx)(tl,{})}),i&&(0,C.jsx)(ts,{onClick:i,disabled:c,title:"Delete character (Del)",className:"hover:text-red-400",children:(0,C.jsx)(ta,{})})]})]})]})}function td({manufacturer:e,system:t,onManufacturerChange:r,onSystemChange:n,disabled:a=!1,className:l=""}){let[s,i]=(0,k.useState)(!1),[o,c]=(0,k.useState)(!1),[d,u]=(0,k.useState)(""),[h,m]=(0,k.useState)(""),f=(0,k.useMemo)(()=>em.map(e=>e.manufacturer),[]),x=(0,k.useMemo)(()=>e?ev(e):[],[e]),p=e&&!f.includes(e),g=t&&!x.includes(t),X=(0,k.useCallback)(e=>{let t=e.target.value;"__custom__"===t?(i(!0),u("")):(r(t),n(""),i(!1))},[r,n]),b=(0,k.useCallback)(()=>{d.trim()&&(r(d.trim()),n(""),i(!1),u(""))},[d,r,n]),y=(0,k.useCallback)(()=>{i(!1),u("")},[]),v=(0,k.useCallback)(e=>{let t=e.target.value;"__custom__"===t?(c(!0),m("")):(n(t),c(!1))},[n]),w=(0,k.useCallback)(()=>{h.trim()&&(n(h.trim()),c(!1),m(""))},[h,n]),j=(0,k.useCallback)(()=>{c(!1),m("")},[]),N=(0,k.useCallback)((e,t)=>{"Enter"===e.key?(e.preventDefault(),t()):"Escape"===e.key&&(e.preventDefault(),s&&y(),o&&j())},[s,o,y,j]),S=`
    w-full px-3 py-2 bg-retro-navy/50 border border-retro-grid/50 rounded-lg
    text-sm text-gray-200 focus:outline-none focus:border-retro-cyan/50
    transition-colors disabled:opacity-50 disabled:cursor-not-allowed
  `,M=`
    flex-1 px-3 py-2 bg-retro-navy/50 border border-retro-grid/50 rounded-lg
    text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:border-retro-cyan/50
    transition-colors
  `,E=`
    px-3 py-2 text-sm rounded-lg transition-colors
  `;return(0,C.jsxs)("div",{className:`space-y-4 ${l}`,children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Manufacturer"}),s?(0,C.jsxs)("div",{className:"flex gap-2",children:[(0,C.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),onKeyDown:e=>N(e,b),placeholder:"Enter manufacturer name...",className:M,autoFocus:!0,disabled:a}),(0,C.jsx)("button",{onClick:b,disabled:a||!d.trim(),className:`${E} bg-retro-cyan/20 text-retro-cyan hover:bg-retro-cyan/30 disabled:opacity-50`,children:"Add"}),(0,C.jsx)("button",{onClick:y,disabled:a,className:`${E} bg-retro-grid/20 text-gray-400 hover:bg-retro-grid/30`,children:"Cancel"})]}):(0,C.jsxs)("select",{value:p?"":e,onChange:X,disabled:a,className:S,children:[(0,C.jsx)("option",{value:"",children:"Select manufacturer..."}),f.map(e=>(0,C.jsx)("option",{value:e,children:e},e)),(0,C.jsx)("option",{value:"__custom__",children:"Other (custom)..."}),p&&(0,C.jsxs)("option",{value:e,disabled:!0,children:[e," (custom)"]})]}),p&&!s&&(0,C.jsxs)("div",{className:"mt-1.5 flex items-center gap-2",children:[(0,C.jsxs)("span",{className:"text-xs text-gray-500",children:["Custom: ",(0,C.jsx)("span",{className:"text-retro-cyan",children:e})]}),(0,C.jsx)("button",{onClick:()=>{r(""),n("")},className:"text-xs text-gray-500 hover:text-retro-pink",disabled:a,children:"Clear"})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"System"}),o?(0,C.jsxs)("div",{className:"flex gap-2",children:[(0,C.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),onKeyDown:e=>N(e,w),placeholder:"Enter system name...",className:M,autoFocus:!0,disabled:a}),(0,C.jsx)("button",{onClick:w,disabled:a||!h.trim(),className:`${E} bg-retro-cyan/20 text-retro-cyan hover:bg-retro-cyan/30 disabled:opacity-50`,children:"Add"}),(0,C.jsx)("button",{onClick:j,disabled:a,className:`${E} bg-retro-grid/20 text-gray-400 hover:bg-retro-grid/30`,children:"Cancel"})]}):(0,C.jsxs)("select",{value:g?"":t,onChange:v,disabled:a||!e,className:S,children:[(0,C.jsx)("option",{value:"",children:e?"Select system...":"Select a manufacturer first..."}),x.map(e=>(0,C.jsx)("option",{value:e,children:e},e)),e&&(0,C.jsx)("option",{value:"__custom__",children:"Other (custom)..."}),g&&(0,C.jsxs)("option",{value:t,disabled:!0,children:[t," (custom)"]})]}),g&&!o&&(0,C.jsxs)("div",{className:"mt-1.5 flex items-center gap-2",children:[(0,C.jsxs)("span",{className:"text-xs text-gray-500",children:["Custom: ",(0,C.jsx)("span",{className:"text-retro-cyan",children:t})]}),(0,C.jsx)("button",{onClick:()=>n(""),className:"text-xs text-gray-500 hover:text-retro-pink",disabled:a,children:"Clear"})]})]})]})}function tu({isOpen:e,onClose:t,metadata:r,onSave:n}){let[a,l]=(0,k.useState)(r.name),[s,i]=(0,k.useState)(r.description),[o,c]=(0,k.useState)(r.source),[d,u]=(0,k.useState)(r.manufacturer),[h,m]=(0,k.useState)(r.system),[f,x]=(0,k.useState)(!1);(0,k.useEffect)(()=>{e&&(l(r.name),i(r.description),c(r.source),u(r.manufacturer),m(r.system))},[e,r]);let p=async()=>{if(a.trim()){x(!0);try{await n({name:a.trim(),description:s.trim(),source:o.trim()||"yourself",manufacturer:d,system:h}),t()}finally{x(!1)}}};return e?(0,C.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,C.jsxs)("div",{className:"relative w-full max-w-md bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-retro-grid/30",children:[(0,C.jsx)("h2",{className:"text-lg font-medium text-white",children:"Edit Metadata"}),(0,C.jsx)("button",{onClick:t,className:"p-1 text-gray-400 hover:text-white transition-colors",children:(0,C.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,C.jsxs)("div",{className:"p-4 space-y-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsxs)("label",{className:"block text-sm text-gray-300 mb-1",children:["Name ",(0,C.jsx)("span",{className:"text-retro-pink",children:"*"})]}),(0,C.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Character set name",className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan",autoFocus:!0})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Description"}),(0,C.jsx)("textarea",{value:s,onChange:e=>i(e.target.value),placeholder:"Optional description",rows:2,className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan resize-none"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Manufacturer & System"}),(0,C.jsx)(td,{manufacturer:d,system:h,onManufacturerChange:u,onSystemChange:m})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Source / Attribution"}),(0,C.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"yourself",className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan"})]})]}),(0,C.jsxs)("div",{className:"flex gap-3 p-4 border-t border-retro-grid/30",children:[(0,C.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,C.jsx)("button",{onClick:p,disabled:!a.trim()||f,className:"flex-1 px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Saving...":"Save"})]})]})]}):null}e.s(["LibraryFilters",()=>eU],93949),e.s(["ImportDropZone",()=>eH],25544),e.s(["EditorCanvas",()=>eG],60441),e.s(["EditorSidebar",()=>eY],42187),e.s(["EditorHeader",()=>eJ],87355),e.s(["EditorFooter",()=>eZ],45835),e.s(["createEditorShortcuts",()=>e1,"formatShortcut",()=>e0,"useKeyboardShortcuts",()=>eQ],3573),e.s(["KeyboardShortcutsHelp",()=>e2],43237),e.s(["TransformToolbar",()=>tc],99401),e.s(["ManufacturerSystemSelect",()=>td],87188),e.s(["MetadataEditModal",()=>tu],16244);let th=["tl","tc","tr","ml","mc","mr","bl","bc","br"];function tm({isOpen:e,onClose:t,currentWidth:r,currentHeight:n,onResize:a}){let[l,s]=(0,k.useState)(r),[i,o]=(0,k.useState)(n),[c,d]=(0,k.useState)("tl");(0,k.useCallback)(()=>{s(r),o(n),d("tl")},[r,n]);let u=(0,k.useCallback)(()=>{l>0&&i>0&&(a(l,i,c),t())},[l,i,c,a,t]),h=(0,k.useCallback)(e=>{"Escape"===e.key?t():"Enter"===e.key&&u()},[t,u]);if(!e)return null;let m=l!==r||i!==n;return(0,C.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:h,children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,C.jsxs)("div",{className:"relative w-full max-w-sm bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,C.jsx)("h2",{className:"text-lg font-medium text-white mb-4",children:"Resize Characters"}),(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Width"}),(0,C.jsx)("input",{type:"number",min:1,max:32,value:l,onChange:e=>s(Math.max(1,Math.min(32,parseInt(e.target.value)||1))),className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan",autoFocus:!0})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Height"}),(0,C.jsx)("input",{type:"number",min:1,max:32,value:i,onChange:e=>o(Math.max(1,Math.min(32,parseInt(e.target.value)||1))),className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]})]}),(0,C.jsxs)("div",{className:"mb-6",children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Anchor Position"}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Select where to anchor existing content when resizing"}),(0,C.jsx)("div",{className:"grid grid-cols-3 gap-1 w-32 mx-auto",children:th.map(e=>{let t=c===e;return(0,C.jsx)("button",{type:"button",onClick:()=>d(e),className:`
                    w-10 h-10 rounded border-2 transition-all
                    flex items-center justify-center
                    ${t?"border-retro-cyan bg-retro-cyan/20":"border-retro-grid/50 bg-retro-dark hover:border-retro-grid"}
                  `,title:{tl:"Top Left",tc:"Top Center",tr:"Top Right",ml:"Middle Left",mc:"Middle Center",mr:"Middle Right",bl:"Bottom Left",bc:"Bottom Center",br:"Bottom Right"}[e],children:(0,C.jsx)("div",{className:`
                      w-3 h-3 rounded-sm transition-colors
                      ${t?"bg-retro-cyan":"bg-gray-600"}
                    `})},e)})})]}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mb-4 text-center h-4",children:m?l>r||i>n?"New pixels will be added with background color":l<r||i<n?"Some pixels will be cropped":"No changes":"No changes"}),(0,C.jsxs)("div",{className:"flex gap-3",children:[(0,C.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,C.jsx)("button",{onClick:u,disabled:!m||l<1||i<1,className:"flex-1 px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply"})]})]})]})}function tf({currentWidth:e,currentHeight:t,onSelect:r,className:n=""}){let[a,l]=(0,k.useState)(!1),s=(0,k.useRef)(null);(0,k.useEffect)(()=>{function e(e){s.current&&!s.current.contains(e.target)&&l(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let i=function(){let e={};for(let t of ex)e[t.manufacturer]||(e[t.manufacturer]=[]),e[t.manufacturer].push(t);return e}(),o=(r,n)=>e===r&&t===n;return(0,C.jsxs)("div",{className:`relative ${n}`,ref:s,children:[(0,C.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[[{label:"8x8",width:8,height:8},{label:"8x16",width:8,height:16},{label:"5x7",width:5,height:7}].map(e=>(0,C.jsx)("button",{type:"button",onClick:()=>r(e.width,e.height),className:`
              px-2 py-1 text-xs rounded border transition-colors
              ${o(e.width,e.height)?"border-retro-pink bg-retro-pink/10 text-retro-pink":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
            `,children:e.label},e.label)),(0,C.jsxs)("button",{type:"button",onClick:()=>l(!a),className:"px-2 py-1 text-xs rounded border border-retro-grid/50 text-gray-400 hover:border-retro-grid flex items-center gap-1",children:["More",(0,C.jsx)("svg",{className:`w-3 h-3 transition-transform ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),a&&(0,C.jsxs)("div",{className:"absolute z-10 left-0 top-full mt-1 w-64 max-h-80 overflow-y-auto bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl",children:[(0,C.jsxs)("div",{className:"p-2 border-b border-retro-grid/30",children:[(0,C.jsx)("div",{className:"text-[10px] text-gray-500 uppercase mb-1",children:"Standard Formats"}),(0,C.jsx)("div",{className:"flex flex-wrap gap-1",children:eb.map(e=>(0,C.jsxs)("button",{onClick:()=>{r(e.width,e.height),l(!1)},className:`
                    px-2 py-1 text-xs rounded transition-colors
                    ${o(e.width,e.height)?"bg-retro-pink/20 text-retro-pink":"text-gray-400 hover:bg-retro-grid/20"}
                  `,title:e.systems.join(", "),children:[e.width,"x",e.height]},e.name))})]}),Object.entries(i).filter(([,e])=>e.length>0).map(([e,t])=>(0,C.jsxs)("div",{className:"p-2 border-b border-retro-grid/30 last:border-0",children:[(0,C.jsx)("div",{className:"text-[10px] text-gray-500 uppercase mb-1",children:e}),(0,C.jsx)("div",{className:"flex flex-wrap gap-1",children:t.map(e=>(0,C.jsx)("button",{onClick:()=>{r(e.width,e.height),l(!1)},className:`
                        px-2 py-1 text-xs rounded transition-colors
                        ${o(e.width,e.height)?"bg-retro-cyan/20 text-retro-cyan":"text-gray-400 hover:bg-retro-grid/20"}
                      `,children:e.system},`${e.system}-${e.width}x${e.height}`))})]},e))]})]})}function tx({currentCount:e,onSelect:t,className:r=""}){let[n,a]=(0,k.useState)(!1),l=(0,k.useRef)(null);(0,k.useEffect)(()=>{function e(e){l.current&&!l.current.contains(e.target)&&a(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let s=function(){let e={};for(let t of ep)e[t.manufacturer]||(e[t.manufacturer]=[]),e[t.manufacturer].push(t);return e}();return(0,C.jsxs)("div",{className:`relative ${r}`,ref:l,children:[(0,C.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[[{label:"64",count:64},{label:"128",count:128},{label:"256",count:256},{label:"512",count:512}].map(r=>(0,C.jsx)("button",{type:"button",onClick:()=>t(r.count),className:`
              px-2 py-1 text-xs rounded border transition-colors
              ${e===r.count?"border-retro-cyan bg-retro-cyan/10 text-retro-cyan":"border-retro-grid/50 text-gray-400 hover:border-retro-grid"}
            `,children:r.label},r.label)),(0,C.jsxs)("button",{type:"button",onClick:()=>a(!n),className:"px-2 py-1 text-xs rounded border border-retro-grid/50 text-gray-400 hover:border-retro-grid flex items-center gap-1",children:["More",(0,C.jsx)("svg",{className:`w-3 h-3 transition-transform ${n?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),n&&(0,C.jsxs)("div",{className:"absolute z-10 left-0 top-full mt-1 w-64 max-h-80 overflow-y-auto bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl",children:[(0,C.jsxs)("div",{className:"p-2 border-b border-retro-grid/30",children:[(0,C.jsx)("div",{className:"text-[10px] text-gray-500 uppercase mb-1",children:"Standard Counts"}),(0,C.jsx)("div",{className:"flex flex-wrap gap-1",children:ey.map(r=>(0,C.jsx)("button",{onClick:()=>{t(r.count),a(!1)},className:`
                    px-2 py-1 text-xs rounded transition-colors
                    ${e===r.count?"bg-retro-cyan/20 text-retro-cyan":"text-gray-400 hover:bg-retro-grid/20"}
                  `,title:r.systems.join(", "),children:r.count},r.name))})]}),Object.entries(s).filter(([,e])=>e.length>0).map(([r,n])=>(0,C.jsxs)("div",{className:"p-2 border-b border-retro-grid/30 last:border-0",children:[(0,C.jsx)("div",{className:"text-[10px] text-gray-500 uppercase mb-1",children:r}),(0,C.jsx)("div",{className:"flex flex-wrap gap-1",children:n.map(r=>(0,C.jsx)("button",{onClick:()=>{t(r.count),a(!1)},className:`
                        px-2 py-1 text-xs rounded transition-colors
                        ${e===r.count?"bg-retro-cyan/20 text-retro-cyan":"text-gray-400 hover:bg-retro-grid/20"}
                      `,title:`${r.count} characters`,children:r.system},`${r.system}-${r.count}`))})]},r))]})]})}function tp(){let[e,t]=(0,k.useState)([]),[r,n]=(0,k.useState)(!0),[a,l]=(0,k.useState)(null),[s,i]=(0,k.useState)([]),o=(0,k.useCallback)(async()=>{try{if(n(!0),l(null),await K.initialize(),await K.isEmpty()){let e,t,r,n;for(let a of[(e=Date.now(),{metadata:{id:"c64-uppercase",name:"C64 Uppercase",description:"Commodore 64 uppercase character set (representative sample)",source:"RetroStack",manufacturer:"Commodore",system:"C64",createdAt:e,updatedAt:e,isBuiltIn:!0},config:{width:8,height:8,padding:"right",bitDirection:"ltr"},binaryData:_(eu())}),(t=Date.now(),{metadata:{id:"apple2-charset",name:"Apple II",description:"Apple II character set (representative sample)",source:"RetroStack",manufacturer:"Apple",system:"Apple II",createdAt:t,updatedAt:t,isBuiltIn:!0},config:{width:8,height:8,padding:"right",bitDirection:"ltr"},binaryData:_(eu())}),(r=Date.now(),{metadata:{id:"zx-spectrum-charset",name:"ZX Spectrum",description:"ZX Spectrum character set (representative sample)",source:"RetroStack",manufacturer:"Sinclair",system:"ZX Spectrum",createdAt:r,updatedAt:r,isBuiltIn:!0},config:{width:8,height:8,padding:"right",bitDirection:"ltr"},binaryData:_(eu())}),(n=Date.now(),{metadata:{id:"ibm-cga-charset",name:"IBM PC CGA",description:"IBM PC CGA 8x8 character set (representative sample)",source:"RetroStack",manufacturer:"IBM",system:"PC CGA",createdAt:n,updatedAt:n,isBuiltIn:!0},config:{width:8,height:8,padding:"right",bitDirection:"ltr"},binaryData:_(eu())})])await K.save(a)}let e=await K.getAll();t(e);let r=await K.getAvailableSizes();i(r)}catch(e){l(e instanceof Error?e.message:"Failed to load library")}finally{n(!1)}},[]);(0,k.useEffect)(()=>{o()},[o]);let c=(0,k.useCallback)(async()=>{await o()},[o]),d=(0,k.useCallback)(async e=>{try{let t=await K.getById(e);if(!t)return null;return $(t)}catch(e){return console.error("Failed to get character set:",e),null}},[]),u=(0,k.useCallback)(async e=>{try{let t=T(e),r=await K.save(t);return await c(),r}catch(e){throw Error(e instanceof Error?e.message:"Failed to save character set")}},[c]),h=(0,k.useCallback)(async(e,t)=>{try{let r={...e,metadata:{...e.metadata,id:L(),name:t,createdAt:Date.now(),updatedAt:Date.now(),isBuiltIn:!1,source:"yourself"}},n=T(r),a=await K.save(n);return await c(),a}catch(e){throw Error(e instanceof Error?e.message:"Failed to save character set")}},[c]),m=(0,k.useCallback)(async(e,t)=>{try{let r=await K.getById(e);if(!r)throw Error("Character set not found");let n={...r,metadata:{...r.metadata,name:t,updatedAt:Date.now()}};await K.save(n),await c()}catch(e){throw Error(e instanceof Error?e.message:"Failed to rename character set")}},[c]),f=(0,k.useCallback)(async e=>{try{await K.delete(e),await c()}catch(e){throw Error(e instanceof Error?e.message:"Failed to delete character set")}},[c]),x=(0,k.useCallback)(async t=>t.trim()?K.search(t):e,[e]),p=(0,k.useCallback)(async(t,r)=>null===t&&null===r?e:K.filterBySize(t,r),[e]);return{characterSets:e,loading:r,error:a,refresh:c,getById:d,save:u,saveAs:h,rename:m,deleteSet:f,search:x,filterBySize:p,availableSizes:s,nameExists:(0,k.useCallback)(async(e,t)=>K.nameExists(e,t),[])}}function tg(e){return JSON.parse(JSON.stringify(e))}function tX(e){let{state:t,setState:r,resetState:n,undo:a,redo:l,canUndo:s,canRedo:i}=function(e,t=1/0){let r=(0,k.useRef)([]),n=(0,k.useRef)([]),[a,l]=(0,k.useState)(e),[,s]=(0,k.useState)({}),i=(0,k.useCallback)(e=>{r.current=[...r.current,a],r.current.length>t&&(r.current=r.current.slice(-t)),n.current=[],l(e),s({})},[a,t]),o=(0,k.useCallback)(e=>{r.current=[],n.current=[],l(e),s({})},[]),c=(0,k.useCallback)(()=>{if(0===r.current.length)return;n.current=[a,...n.current];let e=r.current[r.current.length-1];r.current=r.current.slice(0,-1),l(e),s({})},[a]),d=(0,k.useCallback)(()=>{if(0===n.current.length)return;r.current=[...r.current,a];let e=n.current[0];n.current=n.current.slice(1),l(e),s({})},[a]),u=(0,k.useCallback)(()=>{r.current=[],n.current=[],s({})},[]);return{state:a,setState:i,resetState:o,undo:c,redo:d,canUndo:r.current.length>0,canRedo:n.current.length>0,historyLength:r.current.length+n.current.length,clearHistory:u}}(e?{characters:e.characters.map(R),config:{...e.config}}:{characters:[],config:{width:8,height:8,padding:"right",bitDirection:"ltr"}}),[o,c]=(0,k.useState)(0),[d,u]=(0,k.useState)(new Set),[h,m]=(0,k.useState)(!1),[f,x]=(0,k.useState)(null),p=(0,k.useMemo)(()=>{let e=new Set(d);return e.add(o),e},[o,d]),g=(0,k.useCallback)(e=>{r(e(tg(t))),m(!0)},[t,r]),[X,b]=(0,k.useState)(null),y=(0,k.useCallback)((e,t,r=!1)=>{if(r)u(t=>{let r=new Set(t);if(e===o){if(r.size>0){let[e]=r;r.delete(e),r.add(o),c(e)}}else r.has(e)?r.delete(e):r.add(e);return r});else if(t){let t=X??o,r=Math.min(t,e),n=Math.max(t,e),a=new Set;for(let e=r;e<=n;e++)a.add(e);c(e),a.delete(e),u(a)}else c(e),b(e),u(new Set)},[o,X]),v=(0,k.useCallback)(()=>{u(new Set)},[]),w=(0,k.useCallback)(()=>{u(new Set(Array.from({length:t.characters.length},(e,t)=>t)))},[t.characters.length]),j=(0,k.useCallback)((e,t)=>{g(r=>{if(p.size>1)r.characters=et(r.characters,p,e,t);else{let n=r.characters[o];n&&(r.characters[o]=J(n,e,t))}return r})},[g,o,p]),C=(0,k.useCallback)((e,t,r)=>{g(n=>{for(let a of p){let l=n.characters[a];l&&(n.characters[a]=Z(l,e,t,r))}return n})},[g,p]),N=(0,k.useCallback)((e,r)=>ee(t.characters,p,e,r),[t.characters,p]),S=(0,k.useCallback)(e=>{g(t=>(t.characters=Q(t.characters,p,t=>U(t,e)),t))},[g,p]),M=(0,k.useCallback)((e,t=!0)=>{g(r=>(r.characters=Q(r.characters,p,r=>H(r,e,t)),r))},[g,p]),A=(0,k.useCallback)(()=>{g(e=>(e.characters=Q(e.characters,p,V),e))},[g,p]),L=(0,k.useCallback)(()=>{g(e=>(e.characters=Q(e.characters,p,Y),e))},[g,p]),D=(0,k.useCallback)(()=>{g(e=>(e.characters=Q(e.characters,p,q),e))},[g,p]),I=(0,k.useCallback)(()=>{g(e=>{let{width:t,height:r}=e.config;return e.characters=Q(e.characters,p,()=>E(t,r)),e})},[g,p]),B=(0,k.useCallback)(()=>{g(e=>{let{width:t,height:r}=e.config;return e.characters=Q(e.characters,p,()=>({pixels:Array.from({length:r},()=>Array(t).fill(!0))})),e})},[g,p]),_=(0,k.useCallback)(()=>{g(e=>{let{width:t,height:r}=e.config;return e.characters=[...e.characters,E(t,r)],e}),c(t.characters.length),u(new Set)},[g,t.characters.length]),z=(0,k.useCallback)(e=>{0!==e.length&&(g(t=>(t.characters=[...t.characters,...e.map(e=>R(e))],t)),c(t.characters.length),u(new Set))},[g,t.characters.length]),T=(0,k.useCallback)(()=>{t.characters.length<=1||(g(e=>(e.characters=e.characters.filter((e,t)=>!p.has(t)),e)),c(Math.min(o,t.characters.length-p.size-1)),u(new Set))},[g,p,t.characters.length,o]),$=(0,k.useCallback)((e,t)=>{g(r=>{let n=r.characters[e];return n&&t>=0&&t<r.characters.length&&(r.characters[t]=R(n)),r})},[g]),O=(0,k.useCallback)((e,t,r)=>{g(n=>(n.characters=n.characters.map(n=>G(n,e,t,r)),n.config={...n.config,width:e,height:t},n))},[g]),P=(0,k.useCallback)((e,t)=>{g(r=>(e>=0&&e<r.characters.length&&(r.characters[e]=R(t)),r))},[g]),F=(0,k.useCallback)(e=>{g(t=>(t.characters=e.map(R),t))},[g]),W=(0,k.useCallback)(()=>{m(!1),x(tg(t))},[t]),K=(0,k.useCallback)(e=>{n({characters:e.characters.map(R),config:{...e.config}}),c(0),b(null),u(new Set),m(!1),x(null)},[n]);return{characters:t.characters,config:t.config,selectedIndex:o,setSelectedIndex:c,batchSelection:d,toggleBatchSelection:y,clearBatchSelection:v,selectAll:w,toggleSelectedPixel:j,setSelectedPixel:C,getSelectedPixelState:N,rotateSelected:S,shiftSelected:M,invertSelected:A,flipSelectedHorizontal:L,flipSelectedVertical:D,clearSelected:I,fillSelected:B,addCharacter:_,addCharacters:z,deleteSelected:T,copyCharacter:$,resizeCharacters:O,updateCharacter:P,setCharacters:F,undo:a,redo:l,canUndo:s,canRedo:i,isDirty:h,markSaved:W,reset:K}}e.s(["ResizeModal",()=>tm],46628),e.s(["SizePresetDropdown",()=>tf],38910),e.s(["CharacterCountPresetDropdown",()=>tx],56859),e.s(["useCharacterLibrary",()=>tp],66811),e.s(["useCharacterEditor",()=>tX],83621);let tb="character-editor-autosave";function ty(e){let{characterSetId:t,characters:r,config:n,selectedIndex:a,isDirty:l,enabled:s=!0}=e,[i,o]=(0,k.useState)(null),c=(0,k.useRef)(0),d=(0,k.useRef)(null);(0,k.useEffect)(()=>{if(t)try{let e=localStorage.getItem(tb);if(e){let r=JSON.parse(e);r.characterSetId===t&&r.isDirty&&o(r)}}catch{}},[t]);let u=(0,k.useCallback)(()=>{if(t&&s&&0!==r.length)try{let e=_(B(r,n)),s={characterSetId:t,binaryData:e,config:n,selectedIndex:a,timestamp:Date.now(),isDirty:l};localStorage.setItem(tb,JSON.stringify(s)),c.current=Date.now()}catch(e){console.error("Auto-save failed:",e)}},[t,r,n,a,l,s]);(0,k.useEffect)(()=>{if(s&&l&&t)return d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{u()},Math.max(0,3e4-(Date.now()-c.current))),()=>{d.current&&clearTimeout(d.current)}},[s,l,t,u]),(0,k.useEffect)(()=>{if(!s||!l)return;let e=e=>{u(),e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[s,l,u]);let h=(0,k.useCallback)(()=>(o(null),i),[i]);return{hasRecoveryData:null!==i,recoveryData:i,recover:h,discard:(0,k.useCallback)(()=>{o(null);try{localStorage.removeItem(tb)}catch{}},[]),clearAutoSave:(0,k.useCallback)(()=>{try{localStorage.removeItem(tb)}catch{}},[]),saveNow:u}}e.s(["useAutoSave",()=>ty],54750),e.s([],7259);let tv=["tl","tc","tr","ml","mc","mr","bl","bc","br"];function tw({isOpen:e,onClose:t,currentConfig:r,onImport:n}){let{characterSets:a,loading:l}=tp(),[s,i]=(0,k.useState)("select-set"),[o,c]=(0,k.useState)(null),[d,u]=(0,k.useState)(""),[h,m]=(0,k.useState)(new Set),[f,x]=(0,k.useState)(null),[p,g]=(0,k.useState)("tl");(0,k.useEffect)(()=>{e||(i("select-set"),c(null),u(""),m(new Set),x(null),g("tl"))},[e]);let X=(0,k.useMemo)(()=>o&&a.find(e=>e.metadata.id===o)||null,[a,o]),b=(0,k.useMemo)(()=>{if(!X)return[];try{return $(X).characters}catch{return[]}},[X]),y=(0,k.useMemo)(()=>!!X&&(r.width!==X.config.width||r.height!==X.config.height),[X,r]),w=(0,k.useMemo)(()=>{if(!d.trim())return a;let e=d.toLowerCase();return a.filter(t=>t.metadata.name.toLowerCase().includes(e)||t.metadata.description.toLowerCase().includes(e))},[a,d]),j=(0,k.useCallback)(e=>{c(e.metadata.id)},[]),N=(0,k.useCallback)((e,t,r)=>{m(n=>{let a=new Set(n);if(t&&null!==f){let t=Math.min(f,e),r=Math.max(f,e);for(let e=t;e<=r;e++)a.add(e)}else r?a.has(e)?a.delete(e):a.add(e):(a.clear(),a.add(e));return a}),x(e)},[f]),S=(0,k.useCallback)(()=>{m(new Set(b.map((e,t)=>t)))},[b]),M=(0,k.useCallback)(()=>{m(new Set)},[]),E=(0,k.useCallback)(()=>{"resize"===s?i("select-chars"):"select-chars"===s&&(i("select-set"),m(new Set))},[s]),R=(0,k.useCallback)(()=>{"select-set"===s&&o?i("select-chars"):"select-chars"===s&&h.size>0&&(y?i("resize"):(n(Array.from(h).sort((e,t)=>e-t).map(e=>b[e])),t()))},[s,o,h,y,b,n,t]),A=(0,k.useCallback)(()=>{let e=Array.from(h).sort((e,t)=>e-t).map(e=>b[e]);y&&(e=e.map(e=>G(e,r.width,r.height,p))),n(e),t()},[h,b,y,r,p,n,t]),L=(0,k.useCallback)(e=>{"Escape"===e.key&&t()},[t]);return e?(0,C.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:L,children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,C.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[80vh] bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl flex flex-col overflow-hidden",children:[(0,C.jsxs)("div",{className:"flex-shrink-0 p-4 border-b border-retro-grid/30",children:[(0,C.jsx)("h2",{className:"text-lg font-medium text-white",children:"Import Characters"}),(0,C.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["select-set"===s&&"Select a character set to import from","select-chars"===s&&`Select characters to import (${h.size} selected)`,"resize"===s&&"Configure resize settings"]})]}),(0,C.jsxs)("div",{className:"flex-1 overflow-hidden p-4 flex flex-col min-h-0",children:["select-set"===s&&(0,C.jsxs)("div",{className:"flex flex-col flex-1 min-h-0 gap-4",children:[(0,C.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,C.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:"Search...",className:"w-full px-3 py-2 pl-9 bg-retro-dark border border-retro-grid/50 rounded text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:border-retro-cyan/50",autoFocus:!0}),(0,C.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,C.jsx)("div",{className:"space-y-2 flex-1 overflow-y-auto min-h-0",children:l?(0,C.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading..."}):0===w.length?(0,C.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No character sets found"}):w.map(e=>(0,C.jsx)(ez,{characterSet:e,selected:o===e.metadata.id,onClick:()=>j(e)},e.metadata.id))}),X&&(0,C.jsxs)("div",{className:"flex-shrink-0 text-xs text-gray-500 text-center pt-2 border-t border-retro-grid/30",children:["Source: ",eC(X.config)," (",b.length," chars)",y&&(0,C.jsxs)("span",{className:"text-yellow-500 ml-2",children:["(will be resized to ",eC(r),")"]})]})]}),"select-chars"===s&&X&&(0,C.jsxs)("div",{className:"flex flex-col flex-1 min-h-0 gap-4",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0",children:[(0,C.jsx)("div",{className:"text-xs text-gray-500",children:"Click to select, Shift+click for range, Ctrl+click to toggle"}),(0,C.jsxs)("div",{className:"flex gap-2",children:[(0,C.jsx)("button",{onClick:S,className:"text-xs text-retro-cyan hover:underline",children:"Select All"}),(0,C.jsx)("button",{onClick:M,className:"text-xs text-gray-400 hover:underline",children:"Clear"})]})]}),(0,C.jsx)("div",{className:"bg-black/30 rounded-lg p-3 flex-1 overflow-y-auto min-h-0",children:(0,C.jsx)("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${Math.max(3*X.config.width,24)+8}px, 1fr))`},children:b.map((e,t)=>{let r=h.has(t);return(0,C.jsx)("button",{onClick:e=>N(t,e.shiftKey,e.ctrlKey||e.metaKey),className:`
                          p-1 rounded border-2 transition-all
                          ${r?"border-retro-cyan bg-retro-cyan/20":"border-transparent hover:border-retro-grid/50"}
                        `,title:`Character ${t}`,children:(0,C.jsx)(v.CharacterDisplay,{character:e,mode:"small",smallScale:3})},t)})})})]}),"resize"===s&&X&&(0,C.jsxs)("div",{className:"space-y-6",children:[(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:"Source dimensions differ from target"}),(0,C.jsxs)("p",{className:"text-xs text-gray-500",children:[eC(X.config)," â ",eC(r)]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-sm text-gray-300 mb-2 text-center",children:"Anchor Position"}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mb-3 text-center",children:"Select where to anchor content when resizing"}),(0,C.jsx)("div",{className:"grid grid-cols-3 gap-1 w-32 mx-auto",children:tv.map(e=>{let t=p===e;return(0,C.jsx)("button",{type:"button",onClick:()=>g(e),className:`
                          w-10 h-10 rounded border-2 transition-all
                          flex items-center justify-center
                          ${t?"border-retro-cyan bg-retro-cyan/20":"border-retro-grid/50 bg-retro-dark hover:border-retro-grid"}
                        `,title:{tl:"Top Left",tc:"Top Center",tr:"Top Right",ml:"Middle Left",mc:"Middle Center",mr:"Middle Right",bl:"Bottom Left",bc:"Bottom Center",br:"Bottom Right"}[e],children:(0,C.jsx)("div",{className:`
                            w-3 h-3 rounded-sm transition-colors
                            ${t?"bg-retro-cyan":"bg-gray-600"}
                          `})},e)})})]}),(0,C.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:[h.size," character",1!==h.size?"s":""," will be imported and resized"]})]})]}),(0,C.jsxs)("div",{className:"flex-shrink-0 p-4 border-t border-retro-grid/30 flex justify-between",children:["select-set"===s?(0,C.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}):(0,C.jsx)("button",{onClick:E,className:"px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Back"}),"resize"===s?(0,C.jsxs)("button",{onClick:A,className:"px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors",children:["Import (",h.size,")"]}):(0,C.jsx)("button",{onClick:R,disabled:"select-set"===s&&!o||"select-chars"===s&&0===h.size,className:"px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"select-chars"!==s||y?"Next":`Import (${h.size})`})]})]})]}):null}function tj({isOpen:e,onClose:t,characters:r,currentIndex:n,onCopy:a}){let[l,s]=(0,k.useState)(null);(0,k.useEffect)(()=>{e||s(null)},[e]);let i=(0,k.useCallback)(e=>{s(e)},[]),o=(0,k.useCallback)(()=>{null!==l&&(a(l),t())},[l,a,t]),c=(0,k.useCallback)(e=>{"Escape"===e.key?t():"Enter"===e.key&&null!==l&&o()},[t,l,o]);return e?(0,C.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:c,children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,C.jsxs)("div",{className:"relative w-full max-w-lg max-h-[70vh] bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl flex flex-col overflow-hidden",children:[(0,C.jsxs)("div",{className:"flex-shrink-0 p-4 border-b border-retro-grid/30",children:[(0,C.jsx)("h2",{className:"text-lg font-medium text-white",children:"Copy Character"}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Select a character to copy. It will replace the currently selected character(s)."})]}),(0,C.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[(0,C.jsx)("div",{className:"bg-black/30 rounded-lg p-3",children:(0,C.jsx)("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(40px, 1fr))"},children:r.map((e,t)=>{let r=l===t,a=t===n;return(0,C.jsxs)("button",{onClick:()=>i(t),disabled:a,className:`
                      p-1.5 rounded border-2 transition-all relative
                      ${r?"border-retro-cyan bg-retro-cyan/20":a?"border-retro-pink/30 bg-retro-pink/10 opacity-50 cursor-not-allowed":"border-transparent hover:border-retro-grid/50"}
                    `,title:a?"Current selection":`Character ${t}`,children:[(0,C.jsx)(v.CharacterDisplay,{character:e,mode:"small",smallScale:3}),a&&(0,C.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,C.jsx)("span",{className:"text-[8px] text-retro-pink bg-retro-dark/80 px-1 rounded",children:"current"})})]},t)})})}),null!==l&&(0,C.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-3",children:["Character ",l," selected"]})]}),(0,C.jsxs)("div",{className:"flex-shrink-0 p-4 border-t border-retro-grid/30 flex justify-between",children:[(0,C.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,C.jsx)("button",{onClick:o,disabled:null===l,className:"px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Copy"})]})]})]}):null}e.s(["ImportCharactersModal",()=>tw],78071),e.s(["CopyCharacterModal",()=>tj],35052);var tC=e.i(74080);let tk="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function tN(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function tS(e){return"nodeType"in e}function tM(e){var t,r;return e?tN(e)?e:tS(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function tE(e){let{Document:t}=tM(e);return e instanceof t}function tR(e){return!tN(e)&&e instanceof tM(e).HTMLElement}function tA(e){return e instanceof tM(e).SVGElement}function tL(e){return e?tN(e)?e.document:tS(e)?tE(e)?e:tR(e)||tA(e)?e.ownerDocument:document:document:document}let tD=tk?k.useLayoutEffect:k.useEffect;function tI(e){let t=(0,k.useRef)(e);return tD(()=>{t.current=e}),(0,k.useCallback)(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}function tB(e,t){void 0===t&&(t=[e]);let r=(0,k.useRef)(e);return tD(()=>{r.current!==e&&(r.current=e)},t),r}function t_(e,t){let r=(0,k.useRef)();return(0,k.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function tz(e){let t=tI(e),r=(0,k.useRef)(null),n=(0,k.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,n]}function tT(e){let t=(0,k.useRef)();return(0,k.useEffect)(()=>{t.current=e},[e]),t.current}let t$={};function tO(e,t){return(0,k.useMemo)(()=>{if(t)return t;let r=null==t$[e]?0:t$[e]+1;return t$[e]=r,e+"-"+r},[e,t])}function tP(e){return function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((t,r)=>{for(let[n,a]of Object.entries(r)){let r=t[n];null!=r&&(t[n]=r+e*a)}return t},{...t})}}let tF=tP(1),tW=tP(-1);function tK(e){if(!e)return!1;let{KeyboardEvent:t}=tM(e.target);return t&&e instanceof t}function tU(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=tM(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let tH=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[tH.Translate.toString(e),tH.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),tG="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",tV={display:"none"};function tY(e){let{id:t,value:r}=e;return k.default.createElement("div",{id:t,style:tV},r)}function tq(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return k.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}let tJ=(0,k.createContext)(null),tZ={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},tQ={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function t0(e){var t;let r,{announcements:n=tQ,container:a,hiddenTextDescribedById:l,screenReaderInstructions:s=tZ}=e,{announce:i,announcement:o}=function(){let[e,t]=(0,k.useState)("");return{announce:(0,k.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),c=tO("DndLiveRegion"),[d,u]=(0,k.useState)(!1);if((0,k.useEffect)(()=>{u(!0)},[]),t=(0,k.useMemo)(()=>({onDragStart(e){let{active:t}=e;i(n.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;n.onDragMove&&i(n.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;i(n.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;i(n.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;i(n.onDragCancel({active:t,over:r}))}}),[i,n]),r=(0,k.useContext)(tJ),(0,k.useEffect)(()=>{if(!r)throw Error("useDndMonitor must be used within a children of <DndContext>");return r(t)},[t,r]),!d)return null;let h=k.default.createElement(k.default.Fragment,null,k.default.createElement(tY,{id:l,value:s.draggable}),k.default.createElement(tq,{id:c,announcement:o}));return a?(0,tC.createPortal)(h,a):h}function t1(){}function t2(e,t){return(0,k.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}(r=u||(u={})).DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable";let t4=Object.freeze({x:0,y:0});function t5(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function t3(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function t8(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function t6(e){let{left:t,top:r,height:n,width:a}=e;return[{x:t,y:r},{x:t+a,y:r},{x:t,y:r+n},{x:t+a,y:r+n}]}function t7(e,t){if(!e||0===e.length)return null;let[r]=e;return t?r[t]:r}function t9(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}let re=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,a=t9(t,t.left,t.top),l=[];for(let e of n){let{id:t}=e,n=r.get(t);if(n){let r=t5(t9(n),a);l.push({id:t,data:{droppableContainer:e,value:r}})}}return l.sort(t3)},rt=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,a=[];for(let e of n){let{id:n}=e,l=r.get(n);if(l){let r=function(e,t){let r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height);if(n<a&&r<l){let s=t.width*t.height,i=e.width*e.height,o=(a-n)*(l-r);return Number((o/(s+i-o)).toFixed(4))}return 0}(l,t);r>0&&a.push({id:n,data:{droppableContainer:e,value:r}})}}return a.sort(t8)};function rr(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:t4}let rn=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})};function ra(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let rl={ignoreTransform:!1};function rs(e,t){void 0===t&&(t=rl);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:n}=tM(e).getComputedStyle(e);t&&(r=function(e,t,r){let n=ra(t);if(!n)return e;let{scaleX:a,scaleY:l,x:s,y:i}=n,o=e.left-s-(1-a)*parseFloat(r),c=e.top-i-(1-l)*parseFloat(r.slice(r.indexOf(" ")+1)),d=a?e.width/a:e.width,u=l?e.height/l:e.height;return{width:d,height:u,top:c,right:o+d,bottom:c+u,left:o}}(r,t,n))}let{top:n,left:a,width:l,height:s,bottom:i,right:o}=r;return{top:n,left:a,width:l,height:s,bottom:i,right:o}}function ri(e){return rs(e,{ignoreTransform:!0})}function ro(e,t){let r=[];return e?function n(a){var l,s;let i;if(null!=t&&r.length>=t||!a)return r;if(tE(a)&&null!=a.scrollingElement&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!tR(a)||tA(a)||r.includes(a))return r;let o=tM(e).getComputedStyle(a);return(a!==e&&(void 0===(l=o)&&(l=tM(a).getComputedStyle(a)),i=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=l[e];return"string"==typeof t&&i.test(t)}))&&r.push(a),void 0===(s=o)&&(s=tM(a).getComputedStyle(a)),"fixed"===s.position)?r:n(a.parentNode)}(e):r}function rc(e){let[t]=ro(e,1);return null!=t?t:null}function rd(e){return tk&&e?tN(e)?e:tS(e)?tE(e)||e===tL(e).scrollingElement?window:tR(e)?e:null:null:null}function ru(e){return tN(e)?e.scrollX:e.scrollLeft}function rh(e){return tN(e)?e.scrollY:e.scrollTop}function rm(e){return{x:ru(e),y:rh(e)}}function rf(e){return!!tk&&!!e&&e===document.scrollingElement}function rx(e){let t={x:0,y:0},r=rf(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,l=e.scrollLeft<=t.x;return{isTop:a,isLeft:l,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}(n=h||(h={}))[n.Forward=1]="Forward",n[n.Backward=-1]="Backward";let rp={x:.2,y:.2};function rg(e){return e.reduce((e,t)=>tF(e,rm(t)),t4)}function rX(e,t){if(void 0===t&&(t=rs),!e)return;let{top:r,left:n,bottom:a,right:l}=t(e);rc(e)&&(a<=0||l<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let rb=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+ru(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+rh(t),0)}]];class ry{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ro(t),n=rg(r);for(const[t,a,l]of(this.rect={...e},this.width=e.width,this.height=e.height,rb))for(const e of a)Object.defineProperty(this,e,{get:()=>{let a=l(r),s=n[t]-a;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class rv{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function rw(e,t){let r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}function rj(e){e.preventDefault()}function rC(e){e.stopPropagation()}(a=m||(m={})).Click="click",a.DragStart="dragstart",a.Keydown="keydown",a.ContextMenu="contextmenu",a.Resize="resize",a.SelectionChange="selectionchange",a.VisibilityChange="visibilitychange",(l=f||(f={})).Space="Space",l.Down="ArrowDown",l.Right="ArrowRight",l.Left="ArrowLeft",l.Up="ArrowUp",l.Esc="Escape",l.Enter="Enter",l.Tab="Tab";let rk={start:[f.Space,f.Enter],cancel:[f.Esc],end:[f.Space,f.Enter,f.Tab]},rN=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case f.Right:return{...r,x:r.x+25};case f.Left:return{...r,x:r.x-25};case f.Down:return{...r,y:r.y+25};case f.Up:return{...r,y:r.y-25}}};class rS{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new rv(tL(t)),this.windowListeners=new rv(tM(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(m.Resize,this.handleCancel),this.windowListeners.add(m.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(m.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&rX(r),t(t4)}handleKeyDown(e){if(tK(e)){let{active:t,context:r,options:n}=this.props,{keyboardCodes:a=rk,coordinateGetter:l=rN,scrollBehavior:s="smooth"}=n,{code:i}=e;if(a.end.includes(i))return void this.handleEnd(e);if(a.cancel.includes(i))return void this.handleCancel(e);let{collisionRect:o}=r.current,c=o?{x:o.left,y:o.top}:t4;this.referenceCoordinates||(this.referenceCoordinates=c);let d=l(e,{active:t,context:r.current,currentCoordinates:c});if(d){let t=tW(d,c),n={x:0,y:0},{scrollableAncestors:a}=r.current;for(let r of a){let a=e.code,{isTop:l,isRight:i,isLeft:o,isBottom:c,maxScroll:u,minScroll:h}=rx(r),m=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}(r),x={x:Math.min(a===f.Right?m.right-m.width/2:m.right,Math.max(a===f.Right?m.left:m.left+m.width/2,d.x)),y:Math.min(a===f.Down?m.bottom-m.height/2:m.bottom,Math.max(a===f.Down?m.top:m.top+m.height/2,d.y))},p=a===f.Right&&!i||a===f.Left&&!o,g=a===f.Down&&!c||a===f.Up&&!l;if(p&&x.x!==d.x){let e=r.scrollLeft+t.x,l=a===f.Right&&e<=u.x||a===f.Left&&e>=h.x;if(l&&!t.y)return void r.scrollTo({left:e,behavior:s});l?n.x=r.scrollLeft-e:n.x=a===f.Right?r.scrollLeft-u.x:r.scrollLeft-h.x,n.x&&r.scrollBy({left:-n.x,behavior:s});break}if(g&&x.y!==d.y){let e=r.scrollTop+t.y,l=a===f.Down&&e<=u.y||a===f.Up&&e>=h.y;if(l&&!t.x)return void r.scrollTo({top:e,behavior:s});l?n.y=r.scrollTop-e:n.y=a===f.Down?r.scrollTop-u.y:r.scrollTop-h.y,n.y&&r.scrollBy({top:-n.y,behavior:s});break}}this.handleMove(e,tF(tW(d,this.referenceCoordinates),n))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function rM(e){return!!(e&&"distance"in e)}function rE(e){return!!(e&&"delay"in e)}rS.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=rk,onActivation:a}=t,{active:l}=r,{code:s}=e.nativeEvent;if(n.start.includes(s)){let t=l.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==a||a({event:e.nativeEvent}),!0)}return!1}}];class rR{constructor(e,t,r){var n;void 0===r&&(r=function(e){let{EventTarget:t}=tM(e);return e instanceof t?e:tL(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:l}=a;this.props=e,this.events=t,this.document=tL(l),this.documentListeners=new rv(this.document),this.listeners=new rv(r),this.windowListeners=new rv(tM(l)),this.initialCoordinates=null!=(n=tU(a))?n:t4,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(m.Resize,this.handleCancel),this.windowListeners.add(m.DragStart,rj),this.windowListeners.add(m.VisibilityChange,this.handleCancel),this.windowListeners.add(m.ContextMenu,rj),this.documentListeners.add(m.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(rE(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(rM(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(m.Click,rC,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(m.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:n,props:a}=this,{onMove:l,options:{activationConstraint:s}}=a;if(!n)return;let i=null!=(t=tU(e))?t:t4,o=tW(n,i);if(!r&&s){if(rM(s)){if(null!=s.tolerance&&rw(o,s.tolerance))return this.handleCancel();if(rw(o,s.distance))return this.handleStart()}return rE(s)&&rw(o,s.tolerance)?this.handleCancel():void this.handlePending(s,o)}e.cancelable&&e.preventDefault(),l(i)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===f.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let rA={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class rL extends rR{constructor(e){const{event:t}=e;super(e,rA,tL(t.target))}}rL.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!!r.isPrimary&&0===r.button&&(null==n||n({event:r}),!0)}}];(s=x||(x={}))[s.RightClick=2]="RightClick";(i=p||(p={}))[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect",(o=g||(g={}))[o.TreeOrder=0]="TreeOrder",o[o.ReversedTreeOrder=1]="ReversedTreeOrder";let rD={x:{[h.Backward]:!1,[h.Forward]:!1},y:{[h.Backward]:!1,[h.Forward]:!1}};(c=X||(X={}))[c.Always=0]="Always",c[c.BeforeDragging=1]="BeforeDragging",c[c.WhileDragging=2]="WhileDragging",(b||(b={})).Optimized="optimized";let rI=new Map;function rB(e,t){return t_(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function r_(e){let{callback:t,disabled:r}=e,n=tI(t),a=(0,k.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(n)},[r]);return(0,k.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}function rz(e){return new ry(rs(e),e)}function rT(e,t,r){void 0===t&&(t=rz);let[n,a]=(0,k.useState)(null);function l(){a(n=>{if(!e)return null;if(!1===e.isConnected){var a;return null!=(a=null!=n?n:r)?a:null}let l=t(e);return JSON.stringify(n)===JSON.stringify(l)?n:l})}let s=function(e){let{callback:t,disabled:r}=e,n=tI(t),a=(0,k.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(n)},[n,r]);return(0,k.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}({callback(t){if(e)for(let r of t){let{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){l();break}}}}),i=r_({callback:l});return tD(()=>{l(),e?(null==i||i.observe(e),null==s||s.observe(document.body,{childList:!0,subtree:!0})):(null==i||i.disconnect(),null==s||s.disconnect())},[e]),n}let r$=[];function rO(e,t){void 0===t&&(t=[]);let r=(0,k.useRef)(null);return(0,k.useEffect)(()=>{r.current=null},t),(0,k.useEffect)(()=>{let t=e!==t4;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?tW(e,r.current):t4}function rP(e){return(0,k.useMemo)(()=>{let t,r;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:r=e.innerHeight,width:t,height:r}):null},[e])}let rF=[];function rW(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return tR(t)?t:e}let rK=[{sensor:rL,options:{}},{sensor:rS,options:{}}],rU={current:{}},rH={draggable:{measure:ri},droppable:{measure:ri,strategy:X.WhileDragging,frequency:b.Optimized},dragOverlay:{measure:rs}};class rG extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let rV={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rG,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:t1},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:rH,measureDroppableContainers:t1,windowRect:null,measuringScheduled:!1},rY={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:t1,draggableNodes:new Map,over:null,measureDroppableContainers:t1},rq=(0,k.createContext)(rY),rJ=(0,k.createContext)(rV);function rZ(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rG}}}function rQ(e,t){switch(t.type){case u.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case u.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case u.DragEnd:case u.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case u.RegisterDroppable:{let{element:r}=t,{id:n}=r,a=new rG(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case u.SetDroppableDisabled:{let{id:r,key:n,disabled:a}=t,l=e.droppable.containers.get(r);if(!l||n!==l.key)return e;let s=new rG(e.droppable.containers);return s.set(r,{...l,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case u.UnregisterDroppable:{let{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;let l=new rG(e.droppable.containers);return l.delete(r),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function r0(e){let{disabled:t}=e,{active:r,activatorEvent:n,draggableNodes:a}=(0,k.useContext)(rq),l=tT(n),s=tT(null==r?void 0:r.id);return(0,k.useEffect)(()=>{if(!t&&!n&&l&&null!=s){if(!tK(l)||document.activeElement===l.target)return;let e=a.get(s);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(tG)?e:e.querySelector(tG);if(t){t.focus();break}}})}},[n,t,a,s,l]),null}function r1(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...n}),r):r}let r2=(0,k.createContext)({...t4,scaleX:1,scaleY:1});(d=y||(y={}))[d.Uninitialized=0]="Uninitialized",d[d.Initializing=1]="Initializing",d[d.Initialized=2]="Initialized";let r4=(0,k.memo)(function(e){var t,r,n,a,l,s,i,o;let c,d,m,f,x,b,v,w,{id:j,accessibility:C,autoScroll:N=!0,children:S,sensors:M=rK,collisionDetection:E=rt,measuring:R,modifiers:A,...L}=e,[D,I]=(0,k.useReducer)(rQ,void 0,rZ),[B,_]=function(){let[e]=(0,k.useState)(()=>new Set),t=(0,k.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,k.useCallback)(t=>{let{type:r,event:n}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)})},[e]),t]}(),[z,T]=(0,k.useState)(y.Uninitialized),$=z===y.Initialized,{draggable:{active:O,nodes:P,translate:F},droppable:{containers:W}}=D,K=null!=O?P.get(O):null,U=(0,k.useRef)({initial:null,translated:null}),H=(0,k.useMemo)(()=>{var e;return null!=O?{id:O,data:null!=(e=null==K?void 0:K.data)?e:rU,rect:U}:null},[O,K]),G=(0,k.useRef)(null),[V,Y]=(0,k.useState)(null),[q,J]=(0,k.useState)(null),Z=tB(L,Object.values(L)),Q=tO("DndDescribedBy",j),ee=(0,k.useMemo)(()=>W.getEnabled(),[W]),et=(0,k.useMemo)(()=>({draggable:{...rH.draggable,...null==R?void 0:R.draggable},droppable:{...rH.droppable,...null==R?void 0:R.droppable},dragOverlay:{...rH.dragOverlay,...null==R?void 0:R.dragOverlay}}),[null==R?void 0:R.draggable,null==R?void 0:R.droppable,null==R?void 0:R.dragOverlay]),{droppableRects:er,measureDroppableContainers:en,measuringScheduled:ea}=function(e,t){let{dragging:r,dependencies:n,config:a}=t,[l,s]=(0,k.useState)(null),{frequency:i,measure:o,strategy:c}=a,d=(0,k.useRef)(e),u=function(){switch(c){case X.Always:return!1;case X.BeforeDragging:return r;default:return!r}}(),h=tB(u),m=(0,k.useCallback)(function(e){void 0===e&&(e=[]),h.current||s(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),f=(0,k.useRef)(null),x=t_(t=>{if(u&&!r)return rI;if(!t||t===rI||d.current!==e||null!=l){let t=new Map;for(let r of e){if(!r)continue;if(l&&l.length>0&&!l.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,n=e?new ry(o(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t},[e,l,r,u,o]);return(0,k.useEffect)(()=>{d.current=e},[e]),(0,k.useEffect)(()=>{u||m()},[r,u]),(0,k.useEffect)(()=>{l&&l.length>0&&s(null)},[JSON.stringify(l)]),(0,k.useEffect)(()=>{u||"number"!=typeof i||null!==f.current||(f.current=setTimeout(()=>{m(),f.current=null},i))},[i,u,m,...n]),{droppableRects:x,measureDroppableContainers:m,measuringScheduled:null!=l}}(ee,{dragging:$,dependencies:[F.x,F.y],config:et.droppable}),el=t_(e=>{var t;return null==O?null:null!=(t=null!=x?x:e)?t:null},[x=(f=null!=O?P.get(O):void 0)?f.node.current:null,O]),es=(0,k.useMemo)(()=>q?tU(q):null,[q]),ei=(c=(null==V?void 0:V.autoScrollEnabled)===!1,d="object"==typeof N?!1===N.enabled:!1===N,m=$&&!c&&!d,"object"==typeof N?{...N,enabled:m}:{enabled:m}),eo=rB(el,et.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:n,config:a=!0}=e,l=(0,k.useRef)(!1),{x:s,y:i}="boolean"==typeof a?{x:a,y:a}:a;tD(()=>{if(!s&&!i||!t){l.current=!1;return}if(l.current||!n)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let a=rr(r(e),n);if(s||(a.x=0),i||(a.y=0),l.current=!0,Math.abs(a.x)>0||Math.abs(a.y)>0){let t=rc(e);t&&t.scrollBy({top:a.y,left:a.x})}},[t,s,i,n,r])}({activeNode:null!=O?P.get(O):null,config:ei.layoutShiftCompensation,initialRect:eo,measure:et.draggable.measure});let ec=rT(el,et.draggable.measure,eo),ed=rT(el?el.parentElement:null),eu=(0,k.useRef)({activatorEvent:null,active:null,activeNode:el,collisionRect:null,collisions:null,droppableRects:er,draggableNodes:P,draggingNode:null,draggingNodeRect:null,droppableContainers:W,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eh=W.getNodeFor(null==(t=eu.current.over)?void 0:t.id),em=function(e){let{measure:t}=e,[r,n]=(0,k.useState)(null),a=r_({callback:(0,k.useCallback)(e=>{for(let{target:r}of e)if(tR(r)){n(e=>{let n=t(r);return e?{...e,width:n.width,height:n.height}:n});break}},[t])}),[l,s]=tz((0,k.useCallback)(e=>{let r=rW(e);null==a||a.disconnect(),r&&(null==a||a.observe(r)),n(r?t(r):null)},[t,a]));return(0,k.useMemo)(()=>({nodeRef:l,rect:r,setRef:s}),[r,l,s])}({measure:et.dragOverlay.measure}),ef=null!=(r=em.nodeRef.current)?r:el,ex=$?null!=(n=em.rect)?n:ec:null,ep=!!(em.nodeRef.current&&em.rect),eg=(b=rB(l=ep?null:ec),rr(l,b)),eX=rP(ef?tM(ef):null),eb=(s=$?null!=eh?eh:el:null,v=(0,k.useRef)(s),w=t_(e=>s?e&&e!==r$&&s&&v.current&&s.parentNode===v.current.parentNode?e:ro(s):r$,[s]),(0,k.useEffect)(()=>{v.current=s},[s]),w),ey=function(e,t){void 0===t&&(t=rs);let[r]=e,n=rP(r?tM(r):null),[a,l]=(0,k.useState)(rF);function s(){l(()=>e.length?e.map(e=>rf(e)?n:new ry(t(e),e)):rF)}let i=r_({callback:s});return tD(()=>{null==i||i.disconnect(),s(),e.forEach(e=>null==i?void 0:i.observe(e))},[e]),a}(eb),ev=r1(A,{transform:{x:F.x-eg.x,y:F.y-eg.y,scaleX:1,scaleY:1},activatorEvent:q,active:H,activeNodeRect:ec,containerNodeRect:ed,draggingNodeRect:ex,over:eu.current.over,overlayNodeRect:em.rect,scrollableAncestors:eb,scrollableAncestorRects:ey,windowRect:eX}),ew=es?tF(es,F):null,ej=function(e){let[t,r]=(0,k.useState)(null),n=(0,k.useRef)(e),a=(0,k.useCallback)(e=>{let t=rd(e.target);t&&r(e=>e?(e.set(t,rm(t)),new Map(e)):null)},[]);return(0,k.useEffect)(()=>{let t=n.current;if(e!==t){l(t);let s=e.map(e=>{let t=rd(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,rm(t)]):null}).filter(e=>null!=e);r(s.length?new Map(s):null),n.current=e}return()=>{l(e),l(t)};function l(e){e.forEach(e=>{let t=rd(e);null==t||t.removeEventListener("scroll",a)})}},[a,e]),(0,k.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>tF(e,t),t4):rg(e):t4,[e,t])}(eb),eC=rO(ej),ek=rO(ej,[ec]),eN=tF(ev,eC),eS=ex?rn(ex,ev):null,eM=H&&eS?E({active:H,collisionRect:eS,droppableRects:er,droppableContainers:ee,pointerCoordinates:ew}):null,eE=t7(eM,"id"),[eR,eA]=(0,k.useState)(null),eL=(i=ep?ev:tF(ev,ek),o=null!=(a=null==eR?void 0:eR.rect)?a:null,{...i,scaleX:o&&ec?o.width/ec.width:1,scaleY:o&&ec?o.height/ec.height:1}),eD=(0,k.useRef)(null),eI=(0,k.useCallback)((e,t)=>{let{sensor:r,options:n}=t;if(null==G.current)return;let a=P.get(G.current);if(!a)return;let l=e.nativeEvent,s=new r({active:G.current,activeNode:a,event:l,options:n,context:eu,onAbort(e){if(!P.get(e))return;let{onDragAbort:t}=Z.current,r={id:e};null==t||t(r),B({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!P.get(e))return;let{onDragPending:a}=Z.current,l={id:e,constraint:t,initialCoordinates:r,offset:n};null==a||a(l),B({type:"onDragPending",event:l})},onStart(e){let t=G.current;if(null==t)return;let r=P.get(t);if(!r)return;let{onDragStart:n}=Z.current,a={activatorEvent:l,active:{id:t,data:r.data,rect:U}};(0,tC.unstable_batchedUpdates)(()=>{null==n||n(a),T(y.Initializing),I({type:u.DragStart,initialCoordinates:e,active:t}),B({type:"onDragStart",event:a}),Y(eD.current),J(l)})},onMove(e){I({type:u.DragMove,coordinates:e})},onEnd:i(u.DragEnd),onCancel:i(u.DragCancel)});function i(e){return async function(){let{active:t,collisions:r,over:n,scrollAdjustedTranslate:a}=eu.current,s=null;if(t&&a){let{cancelDrop:i}=Z.current;s={activatorEvent:l,active:t,collisions:r,delta:a,over:n},e===u.DragEnd&&"function"==typeof i&&await Promise.resolve(i(s))&&(e=u.DragCancel)}G.current=null,(0,tC.unstable_batchedUpdates)(()=>{I({type:e}),T(y.Uninitialized),eA(null),Y(null),J(null),eD.current=null;let t=e===u.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=Z.current[t];null==e||e(s),B({type:t,event:s})}})}}eD.current=s},[P]),eB=(0,k.useCallback)((e,t)=>(r,n)=>{let a=r.nativeEvent,l=P.get(n);null!==G.current||!l||a.dndKit||a.defaultPrevented||!0===e(r,t.options,{active:l})&&(a.dndKit={capturedBy:t.sensor},G.current=n,eI(r,t))},[P,eI]),e_=(0,k.useMemo)(()=>M.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:eB(e.handler,t)}))]},[]),[M,eB]);(0,k.useEffect)(()=>{if(!tk)return;let e=M.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},M.map(e=>{let{sensor:t}=e;return t})),tD(()=>{ec&&z===y.Initializing&&T(y.Initialized)},[ec,z]),(0,k.useEffect)(()=>{let{onDragMove:e}=Z.current,{active:t,activatorEvent:r,collisions:n,over:a}=eu.current;if(!t||!r)return;let l={active:t,activatorEvent:r,collisions:n,delta:{x:eN.x,y:eN.y},over:a};(0,tC.unstable_batchedUpdates)(()=>{null==e||e(l),B({type:"onDragMove",event:l})})},[eN.x,eN.y]),(0,k.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:a}=eu.current;if(!e||null==G.current||!t||!a)return;let{onDragOver:l}=Z.current,s=n.get(eE),i=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:a.x,y:a.y},over:i};(0,tC.unstable_batchedUpdates)(()=>{eA(i),null==l||l(o),B({type:"onDragOver",event:o})})},[eE]),tD(()=>{eu.current={activatorEvent:q,active:H,activeNode:el,collisionRect:eS,collisions:eM,droppableRects:er,draggableNodes:P,draggingNode:ef,draggingNodeRect:ex,droppableContainers:W,over:eR,scrollableAncestors:eb,scrollAdjustedTranslate:eN},U.current={initial:ex,translated:eS}},[H,el,eM,eS,P,ef,ex,er,W,eR,eb,eN]),function(e){let t,{acceleration:r,activator:n=p.Pointer,canScroll:a,draggingRect:l,enabled:s,interval:i=5,order:o=g.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:m,threshold:f}=e,x=function(e){let{delta:t,disabled:r}=e,n=tT(t);return t_(e=>{if(r||!n||!e)return rD;let a={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[h.Backward]:e.x[h.Backward]||-1===a.x,[h.Forward]:e.x[h.Forward]||1===a.x},y:{[h.Backward]:e.y[h.Backward]||-1===a.y,[h.Forward]:e.y[h.Forward]||1===a.y}}},[r,t,n])}({delta:m,disabled:!s}),[X,b]=(t=(0,k.useRef)(null),[(0,k.useCallback)((e,r)=>{t.current=setInterval(e,r)},[]),(0,k.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),y=(0,k.useRef)({x:0,y:0}),v=(0,k.useRef)({x:0,y:0}),w=(0,k.useMemo)(()=>{switch(n){case p.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case p.DraggableRect:return l}},[n,l,c]),j=(0,k.useRef)(null),C=(0,k.useCallback)(()=>{let e=j.current;if(!e)return;let t=y.current.x*v.current.x,r=y.current.y*v.current.y;e.scrollBy(t,r)},[]),N=(0,k.useMemo)(()=>o===g.TreeOrder?[...d].reverse():d,[o,d]);(0,k.useEffect)(()=>{if(!s||!d.length||!w)return void b();for(let e of N){if((null==a?void 0:a(e))===!1)continue;let t=u[d.indexOf(e)];if(!t)continue;let{direction:n,speed:l}=function(e,t,r,n,a){let{top:l,left:s,right:i,bottom:o}=r;void 0===n&&(n=10),void 0===a&&(a=rp);let{isTop:c,isBottom:d,isLeft:u,isRight:m}=rx(e),f={x:0,y:0},x={x:0,y:0},p={height:t.height*a.y,width:t.width*a.x};return!c&&l<=t.top+p.height?(f.y=h.Backward,x.y=n*Math.abs((t.top+p.height-l)/p.height)):!d&&o>=t.bottom-p.height&&(f.y=h.Forward,x.y=n*Math.abs((t.bottom-p.height-o)/p.height)),!m&&i>=t.right-p.width?(f.x=h.Forward,x.x=n*Math.abs((t.right-p.width-i)/p.width)):!u&&s<=t.left+p.width&&(f.x=h.Backward,x.x=n*Math.abs((t.left+p.width-s)/p.width)),{direction:f,speed:x}}(e,t,w,r,f);for(let e of["x","y"])x[e][n[e]]||(l[e]=0,n[e]=0);if(l.x>0||l.y>0){b(),j.current=e,X(C,i),y.current=l,v.current=n;return}}y.current={x:0,y:0},v.current={x:0,y:0},b()},[r,C,a,b,s,i,JSON.stringify(w),JSON.stringify(x),X,d,N,u,JSON.stringify(f)])}({...ei,delta:F,draggingRect:eS,pointerCoordinates:ew,scrollableAncestors:eb,scrollableAncestorRects:ey});let ez=(0,k.useMemo)(()=>({active:H,activeNode:el,activeNodeRect:ec,activatorEvent:q,collisions:eM,containerNodeRect:ed,dragOverlay:em,draggableNodes:P,droppableContainers:W,droppableRects:er,over:eR,measureDroppableContainers:en,scrollableAncestors:eb,scrollableAncestorRects:ey,measuringConfiguration:et,measuringScheduled:ea,windowRect:eX}),[H,el,ec,q,eM,ed,em,P,W,er,eR,en,eb,ey,et,ea,eX]),eT=(0,k.useMemo)(()=>({activatorEvent:q,activators:e_,active:H,activeNodeRect:ec,ariaDescribedById:{draggable:Q},dispatch:I,draggableNodes:P,over:eR,measureDroppableContainers:en}),[q,e_,H,ec,I,Q,P,eR,en]);return k.default.createElement(tJ.Provider,{value:_},k.default.createElement(rq.Provider,{value:eT},k.default.createElement(rJ.Provider,{value:ez},k.default.createElement(r2.Provider,{value:eL},S)),k.default.createElement(r0,{disabled:(null==C?void 0:C.restoreFocus)===!1})),k.default.createElement(t0,{...C,hiddenTextDescribedById:Q}))}),r5=(0,k.createContext)(null),r3="button";function r8(){return(0,k.useContext)(rJ)}let r6={timeout:25};function r7(e){let{animation:t,children:r}=e,[n,a]=(0,k.useState)(null),[l,s]=(0,k.useState)(null),i=tT(r);return r||n||!i||a(i),tD(()=>{if(!l)return;let e=null==n?void 0:n.key,r=null==n?void 0:n.props.id;null==e||null==r?a(null):Promise.resolve(t(r,l)).then(()=>{a(null)})},[t,n,l]),k.default.createElement(k.default.Fragment,null,r,n?(0,k.cloneElement)(n,{ref:s}):null)}let r9={x:0,y:0,scaleX:1,scaleY:1};function ne(e){let{children:t}=e;return k.default.createElement(rq.Provider,{value:rY},k.default.createElement(r2.Provider,{value:r9},t))}let nt={position:"fixed",touchAction:"none"},nr=e=>tK(e)?"transform 250ms ease":void 0,nn=(0,k.forwardRef)((e,t)=>{let{as:r,activatorEvent:n,adjustScale:a,children:l,className:s,rect:i,style:o,transform:c,transition:d=nr}=e;if(!i)return null;let u=a?c:{...c,scaleX:1,scaleY:1},h={...nt,width:i.width,height:i.height,top:i.top,left:i.left,transform:tH.Transform.toString(u),transformOrigin:a&&n?function(e,t){let r=tU(e);if(!r)return"0 0";let n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}(n,i):void 0,transition:"function"==typeof d?d(n):d,...o};return k.default.createElement(r,{className:s,style:h,ref:t},l)}),na={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:tH.Transform.toString(t)},{transform:tH.Transform.toString(r)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:r,dragOverlay:n}=e,a={},{styles:l,className:s}=t;if(null!=l&&l.active)for(let[e,t]of Object.entries(l.active))void 0!==t&&(a[e]=r.node.style.getPropertyValue(e),r.node.style.setProperty(e,t));if(null!=l&&l.dragOverlay)for(let[e,t]of Object.entries(l.dragOverlay))void 0!==t&&n.node.style.setProperty(e,t);return null!=s&&s.active&&r.node.classList.add(s.active),null!=s&&s.dragOverlay&&n.node.classList.add(s.dragOverlay),function(){for(let[e,t]of Object.entries(a))r.node.style.setProperty(e,t);null!=s&&s.active&&r.node.classList.remove(s.active)}})},nl=0,ns=k.default.memo(e=>{var t;let{adjustScale:r=!1,children:n,dropAnimation:a,style:l,transition:s,modifiers:i,wrapperElement:o="div",className:c,zIndex:d=999}=e,{activatorEvent:u,active:h,activeNodeRect:m,containerNodeRect:f,draggableNodes:x,droppableContainers:p,dragOverlay:g,over:X,measuringConfiguration:b,scrollableAncestors:y,scrollableAncestorRects:v,windowRect:w}=r8(),j=(0,k.useContext)(r2),C=(t=null==h?void 0:h.id,(0,k.useMemo)(()=>{if(null!=t)return++nl},[t])),N=r1(i,{activatorEvent:u,active:h,activeNodeRect:m,containerNodeRect:f,draggingNodeRect:g.rect,over:X,overlayNodeRect:g.rect,scrollableAncestors:y,scrollableAncestorRects:v,transform:j,windowRect:w}),S=rB(m),M=function(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=e;return tI((e,l)=>{if(null===t)return;let s=r.get(e);if(!s)return;let i=s.node.current;if(!i)return;let o=rW(l);if(!o)return;let{transform:c}=tM(l).getComputedStyle(l),d=ra(c);if(!d)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:n,keyframes:a}={...na,...e};return e=>{let{active:l,dragOverlay:s,transform:i,...o}=e;if(!t)return;let c={x:s.rect.left-l.rect.left,y:s.rect.top-l.rect.top},d={scaleX:1!==i.scaleX?l.rect.width*i.scaleX/s.rect.width:1,scaleY:1!==i.scaleY?l.rect.height*i.scaleY/s.rect.height:1},u={x:i.x-c.x,y:i.y-c.y,...d},h=a({...o,active:l,dragOverlay:s,transform:{initial:i,final:u}}),[m]=h,f=h[h.length-1];if(JSON.stringify(m)===JSON.stringify(f))return;let x=null==n?void 0:n({active:l,dragOverlay:s,...o}),p=s.node.animate(h,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{p.onfinish=()=>{null==x||x(),e()}})}}(t);return rX(i,a.draggable.measure),u({active:{id:e,data:s.data,node:i,rect:a.draggable.measure(i)},draggableNodes:r,dragOverlay:{node:l,rect:a.dragOverlay.measure(o)},droppableContainers:n,measuringConfiguration:a,transform:d})})}({config:a,draggableNodes:x,droppableContainers:p,measuringConfiguration:b}),E=S?g.setRef:void 0;return k.default.createElement(ne,null,k.default.createElement(r7,{animation:M},h&&C?k.default.createElement(nn,{key:C,id:h.id,ref:E,as:o,activatorEvent:u,adjustScale:r,className:c,transition:s,rect:S,style:{zIndex:d,...l},transform:N},n):null))});function ni(e,t,r){let n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function no(e){return null!==e&&e>=0}let nc=e=>{let{rects:t,activeIndex:r,overIndex:n,index:a}=e,l=ni(t,n,r),s=t[a],i=l[a];return i&&s?{x:i.left-s.left,y:i.top-s.top,scaleX:i.width/s.width,scaleY:i.height/s.height}:null},nd="Sortable",nu=k.default.createContext({activeIndex:-1,containerId:nd,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:nc,disabled:{draggable:!1,droppable:!1}});function nh(e){let{children:t,id:r,items:n,strategy:a=nc,disabled:l=!1}=e,{active:s,dragOverlay:i,droppableRects:o,over:c,measureDroppableContainers:d}=r8(),u=tO(nd,r),h=null!==i.rect,m=(0,k.useMemo)(()=>n.map(e=>"object"==typeof e&&"id"in e?e.id:e),[n]),f=null!=s,x=s?m.indexOf(s.id):-1,p=c?m.indexOf(c.id):-1,g=(0,k.useRef)(m),X=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(m,g.current),b=-1!==p&&-1===x||X,y="boolean"==typeof l?{draggable:l,droppable:l}:l;tD(()=>{X&&f&&d(m)},[X,m,f,d]),(0,k.useEffect)(()=>{g.current=m},[m]);let v=(0,k.useMemo)(()=>({activeIndex:x,containerId:u,disabled:y,disableTransforms:b,items:m,overIndex:p,useDragOverlay:h,sortedRects:m.reduce((e,t,r)=>{let n=o.get(t);return n&&(e[r]=n),e},Array(m.length)),strategy:a}),[x,u,y.draggable,y.droppable,b,m,p,o,h,a]);return k.default.createElement(nu.Provider,{value:v},t)}let nm=e=>{let{id:t,items:r,activeIndex:n,overIndex:a}=e;return ni(r,n,a).indexOf(t)},nf=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:a,items:l,newIndex:s,previousItems:i,previousContainerId:o,transition:c}=e;return!!c&&!!n&&(i===l||a!==s)&&(!!r||s!==a&&t===o)},nx={duration:200,easing:"ease"},np="transform",ng=tH.Transition.toString({property:np,duration:0,easing:"linear"}),nX={roleDescription:"sortable"};function nb(e){if(!e)return!1;let t=e.data.current;return!!t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable}let ny=[f.Down,f.Right,f.Up,f.Left],nv=(e,t)=>{let{context:{active:r,collisionRect:n,droppableRects:a,droppableContainers:l,over:s,scrollableAncestors:i}}=t;if(ny.includes(e.code)){if(e.preventDefault(),!r||!n)return;let t=[];l.getEnabled().forEach(r=>{if(!r||null!=r&&r.disabled)return;let l=a.get(r.id);if(l)switch(e.code){case f.Down:n.top<l.top&&t.push(r);break;case f.Up:n.top>l.top&&t.push(r);break;case f.Left:n.left>l.left&&t.push(r);break;case f.Right:n.left<l.left&&t.push(r)}});let d=(e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e,a=t6(t),l=[];for(let e of n){let{id:t}=e,n=r.get(t);if(n){let r=t6(n),s=Number((a.reduce((e,t,n)=>e+t5(r[n],t),0)/4).toFixed(4));l.push({id:t,data:{droppableContainer:e,value:s}})}}return l.sort(t3)})({active:r,collisionRect:n,droppableRects:a,droppableContainers:t,pointerCoordinates:null}),u=t7(d,"id");if(u===(null==s?void 0:s.id)&&d.length>1&&(u=d[1].id),null!=u){let e=l.get(r.id),t=l.get(u),s=t?a.get(t.id):null,d=null==t?void 0:t.node.current;if(d&&s&&e&&t){var o,c;let r=ro(d).some((e,t)=>i[t]!==e),a=nw(e,t),l=(o=e,c=t,!!nb(o)&&!!nb(c)&&!!nw(o,c)&&o.data.current.sortable.index<c.data.current.sortable.index),u=r||!a?{x:0,y:0}:{x:l?n.width-s.width:0,y:l?n.height-s.height:0},h={x:s.left,y:s.top};return u.x&&u.y?h:tW(h,u)}}}};function nw(e,t){return!!nb(e)&&!!nb(t)&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}function nj({id:e,character:t,index:r}){let{attributes:n,listeners:a,setNodeRef:l,transform:s,transition:i,isDragging:o}=function(e){var t,r,n,a;let{animateLayoutChanges:l=nf,attributes:s,disabled:i,data:o,getNewIndex:c=nm,id:d,strategy:h,resizeObserverConfig:m,transition:f=nx}=e,{items:x,containerId:p,activeIndex:g,disabled:X,disableTransforms:b,sortedRects:y,overIndex:v,useDragOverlay:w,strategy:j}=(0,k.useContext)(nu),C=(t=i,r=X,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(n=null==t?void 0:t.draggable)?n:r.draggable,droppable:null!=(a=null==t?void 0:t.droppable)?a:r.droppable}),N=x.indexOf(d),S=(0,k.useMemo)(()=>({sortable:{containerId:p,index:N,items:x},...o}),[p,o,N,x]),M=(0,k.useMemo)(()=>x.slice(x.indexOf(d)),[x,d]),{rect:E,node:R,isOver:A,setNodeRef:L}=function(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:a}=e,l=tO("Droppable"),{active:s,dispatch:i,over:o,measureDroppableContainers:c}=(0,k.useContext)(rq),d=(0,k.useRef)({disabled:r}),h=(0,k.useRef)(!1),m=(0,k.useRef)(null),f=(0,k.useRef)(null),{disabled:x,updateMeasurementsFor:p,timeout:g}={...r6,...a},X=tB(null!=p?p:n),b=r_({callback:(0,k.useCallback)(()=>{if(!h.current){h.current=!0;return}null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{c(Array.isArray(X.current)?X.current:[X.current]),f.current=null},g)},[g]),disabled:x||!s}),[y,v]=tz((0,k.useCallback)((e,t)=>{b&&(t&&(b.unobserve(t),h.current=!1),e&&b.observe(e))},[b])),w=tB(t);return(0,k.useEffect)(()=>{b&&y.current&&(b.disconnect(),h.current=!1,b.observe(y.current))},[y,b]),(0,k.useEffect)(()=>(i({type:u.RegisterDroppable,element:{id:n,key:l,disabled:r,node:y,rect:m,data:w}}),()=>i({type:u.UnregisterDroppable,key:l,id:n})),[n]),(0,k.useEffect)(()=>{r!==d.current.disabled&&(i({type:u.SetDroppableDisabled,id:n,key:l,disabled:r}),d.current.disabled=r)},[n,l,r,i]),{active:s,rect:m,isOver:(null==o?void 0:o.id)===n,node:y,over:o,setNodeRef:v}}({id:d,data:S,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...m}}),{active:D,activatorEvent:I,activeNodeRect:B,attributes:_,setNodeRef:z,listeners:T,isDragging:$,over:O,setActivatorNodeRef:P,transform:F}=function(e){let{id:t,data:r,disabled:n=!1,attributes:a}=e,l=tO("Draggable"),{activators:s,activatorEvent:i,active:o,activeNodeRect:c,ariaDescribedById:d,draggableNodes:u,over:h}=(0,k.useContext)(rq),{role:m=r3,roleDescription:f="draggable",tabIndex:x=0}=null!=a?a:{},p=(null==o?void 0:o.id)===t,g=(0,k.useContext)(p?r2:r5),[X,b]=tz(),[y,v]=tz(),w=(0,k.useMemo)(()=>s.reduce((e,r)=>{let{eventName:n,handler:a}=r;return e[n]=e=>{a(e,t)},e},{}),[s,t]),j=tB(r);return tD(()=>(u.set(t,{id:t,key:l,node:X,activatorNode:y,data:j}),()=>{let e=u.get(t);e&&e.key===l&&u.delete(t)}),[u,t]),{active:o,activatorEvent:i,activeNodeRect:c,attributes:(0,k.useMemo)(()=>({role:m,tabIndex:x,"aria-disabled":n,"aria-pressed":!!p&&m===r3||void 0,"aria-roledescription":f,"aria-describedby":d.draggable}),[n,m,x,p,f,d.draggable]),isDragging:p,listeners:n?void 0:w,node:X,over:h,setNodeRef:b,setActivatorNodeRef:v,transform:g}}({id:d,data:S,attributes:{...nX,...s},disabled:C.draggable}),W=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,k.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(L,z),K=!!D,U=K&&!b&&no(g)&&no(v),H=!w&&$,G=H&&U?F:null,V=U?null!=G?G:(null!=h?h:j)({rects:y,activeNodeRect:B,activeIndex:g,overIndex:v,index:N}):null,Y=no(g)&&no(v)?c({id:d,items:x,activeIndex:g,overIndex:v}):N,q=null==D?void 0:D.id,J=(0,k.useRef)({activeId:q,items:x,newIndex:Y,containerId:p}),Z=x!==J.current.items,Q=l({active:D,containerId:p,isDragging:$,isSorting:K,id:d,index:N,items:x,newIndex:J.current.newIndex,previousItems:J.current.items,previousContainerId:J.current.containerId,transition:f,wasDragging:null!=J.current.activeId}),ee=function(e){let{disabled:t,index:r,node:n,rect:a}=e,[l,s]=(0,k.useState)(null),i=(0,k.useRef)(r);return tD(()=>{if(!t&&r!==i.current&&n.current){let e=a.current;if(e){let t=rs(n.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&s(r)}}r!==i.current&&(i.current=r)},[t,r,n,a]),(0,k.useEffect)(()=>{l&&s(null)},[l]),l}({disabled:!Q,index:N,node:R,rect:E});return(0,k.useEffect)(()=>{K&&J.current.newIndex!==Y&&(J.current.newIndex=Y),p!==J.current.containerId&&(J.current.containerId=p),x!==J.current.items&&(J.current.items=x)},[K,Y,p,x]),(0,k.useEffect)(()=>{if(q===J.current.activeId)return;if(null!=q&&null==J.current.activeId){J.current.activeId=q;return}let e=setTimeout(()=>{J.current.activeId=q},50);return()=>clearTimeout(e)},[q]),{active:D,activeIndex:g,attributes:_,data:S,rect:E,index:N,newIndex:Y,items:x,isOver:A,isSorting:K,isDragging:$,listeners:T,node:R,overIndex:v,over:O,setNodeRef:W,setActivatorNodeRef:P,setDroppableNodeRef:L,setDraggableNodeRef:z,transform:null!=ee?ee:V,transition:ee||Z&&J.current.newIndex===N?ng:(!H||tK(I))&&f&&(K||Q)?tH.Transition.toString({...f,property:np}):void 0}}({id:e}),c={transform:tH.Transform.toString(s),transition:i};return(0,C.jsxs)("div",{ref:l,style:c,...n,...a,className:`
        p-1.5 rounded border-2 transition-all cursor-grab active:cursor-grabbing
        ${o?"border-retro-cyan bg-retro-cyan/20 opacity-50":"border-retro-grid/30 hover:border-retro-grid/50"}
      `,title:`Character ${r}`,children:[(0,C.jsx)(v.CharacterDisplay,{character:t,mode:"small",smallScale:3}),(0,C.jsx)("div",{className:"text-[8px] text-gray-500 text-center mt-0.5",children:r})]})}function nC({character:e}){return(0,C.jsx)("div",{className:"p-1.5 rounded border-2 border-retro-cyan bg-retro-navy shadow-lg",children:(0,C.jsx)(v.CharacterDisplay,{character:e,mode:"small",smallScale:3})})}function nk({isOpen:e,onClose:t,characters:r,onReorder:n}){let[a,l]=(0,k.useState)([]),[s,i]=(0,k.useState)(null);(0,k.useEffect)(()=>{e&&l([...r])},[e,r]);let o=(0,k.useMemo)(()=>a.map((e,t)=>`char-${t}`),[a]),c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,k.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(t2(rL,{activationConstraint:{distance:8}}),t2(rS,{coordinateGetter:nv})),d=(0,k.useMemo)(()=>s&&a[parseInt(s.replace("char-",""),10)]||null,[s,a]),u=(0,k.useCallback)(e=>{i(e.active.id)},[]),h=(0,k.useCallback)(e=>{let{active:t,over:r}=e;if(i(null),r&&t.id!==r.id){let e=parseInt(t.id.replace("char-",""),10),n=parseInt(r.id.replace("char-",""),10);l(t=>ni(t,e,n))}},[]),m=(0,k.useCallback)(()=>{n(a),t()},[a,n,t]),f=(0,k.useCallback)(e=>{"Escape"===e.key&&t()},[t]),x=(0,k.useMemo)(()=>a.length!==r.length||a.some((e,t)=>e!==r[t]),[a,r]);return e?(0,C.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onKeyDown:f,children:[(0,C.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),(0,C.jsxs)("div",{className:"relative w-full max-w-3xl max-h-[80vh] bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl flex flex-col overflow-hidden",children:[(0,C.jsxs)("div",{className:"flex-shrink-0 p-4 border-b border-retro-grid/30",children:[(0,C.jsx)("h2",{className:"text-lg font-medium text-white",children:"Reorder Characters"}),(0,C.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Drag and drop characters to reorder them"})]}),(0,C.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,C.jsxs)(r4,{sensors:c,collisionDetection:re,onDragStart:u,onDragEnd:h,children:[(0,C.jsx)(nh,{items:o,strategy:nc,children:(0,C.jsx)("div",{className:"grid gap-2 bg-black/30 rounded-lg p-3",style:{gridTemplateColumns:"repeat(auto-fill, minmax(50px, 1fr))"},children:a.map((e,t)=>(0,C.jsx)(nj,{id:o[t],character:e,index:t},o[t]))})}),(0,C.jsx)(ns,{children:d&&(0,C.jsx)(nC,{character:d})})]})}),(0,C.jsxs)("div",{className:"flex-shrink-0 p-4 border-t border-retro-grid/30 flex justify-between",children:[(0,C.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,C.jsx)("button",{onClick:m,disabled:!x,className:"px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply"})]})]})]}):null}function nN({currentStep:e,totalSteps:t,labels:r}){return(0,C.jsx)("div",{className:"flex items-center justify-center gap-2 mb-8",children:Array.from({length:t},(n,a)=>{let l=a+1,s=l===e,i=l<e;return(0,C.jsxs)("div",{className:"flex items-center",children:[(0,C.jsx)("div",{className:`
                flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium
                transition-colors
                ${s?"bg-retro-cyan text-retro-dark":i?"bg-retro-cyan/30 text-retro-cyan":"bg-retro-grid/30 text-gray-500"}
              `,children:i?(0,C.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,C.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}):l}),(0,C.jsx)("span",{className:`
                ml-2 text-sm hidden sm:inline
                ${s?"text-retro-cyan":i?"text-gray-400":"text-gray-500"}
              `,children:r[a]}),l<t&&(0,C.jsx)("div",{className:`
                  w-8 sm:w-12 h-0.5 mx-2 sm:mx-4
                  ${i?"bg-retro-cyan/50":"bg-retro-grid/30"}
                `})]},l)})})}e.s(["ReorderModal",()=>nk],55361),e.s(["ImportStepIndicator",()=>nN],63427),e.s([],3813)}]);