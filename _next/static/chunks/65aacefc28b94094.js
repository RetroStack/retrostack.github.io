(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58234,e=>{"use strict";var t=e.i(43476),r=e.i(22016),a=e.i(28540),o=e.i(85149);function s(){let e=new Date().getFullYear();return(0,t.jsx)("footer",{className:"bg-retro-navy border-t border-retro-grid safe-bottom safe-x",children:(0,t.jsx)(a.Container,{children:(0,t.jsxs)("div",{className:"py-8 sm:py-12",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 mb-8 sm:mb-12",children:[(0,t.jsxs)("div",{className:"sm:col-span-2 lg:col-span-1",children:[(0,t.jsx)(r.default,{href:"/",className:"inline-block touch-target",children:(0,t.jsx)("span",{className:"font-display text-base sm:text-lg text-retro-pink",children:o.SITE_CONFIG.name})}),(0,t.jsx)("p",{className:"mt-3 sm:mt-4 text-sm text-gray-400 max-w-xs",children:o.SITE_CONFIG.description})]}),o.NAV_ITEMS.filter(e=>e.children).map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-ui text-xs sm:text-sm uppercase tracking-wider text-retro-cyan mb-3 sm:mb-4",children:e.label}),(0,t.jsx)("ul",{className:"space-y-1 sm:space-y-2",children:e.children?.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:e.href,className:"inline-flex items-center min-h-[36px] sm:min-h-[32px] text-sm text-gray-400 hover:text-retro-pink transition-colors duration-200",children:e.label})},e.href))})]},e.label))]}),(0,t.jsxs)("div",{className:"pt-6 sm:pt-8 border-t border-retro-grid/50 flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,t.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 text-center sm:text-left",children:["Â© ",e," ",o.SITE_CONFIG.name,". All rights reserved."]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("a",{href:o.SOCIAL_LINKS.github,target:"_blank",rel:"noopener noreferrer",className:"touch-target flex items-center justify-center text-gray-400 hover:text-retro-cyan transition-colors duration-200 rounded-md hover:bg-retro-purple/30","aria-label":"GitHub",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"})})}),(0,t.jsx)("a",{href:o.SOCIAL_LINKS.patreon,target:"_blank",rel:"noopener noreferrer",className:"touch-target flex items-center justify-center text-gray-400 hover:text-retro-pink transition-colors duration-200 rounded-md hover:bg-retro-purple/30","aria-label":"Patreon",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M15.386.524c-4.764 0-8.64 3.876-8.64 8.64 0 4.75 3.876 8.613 8.64 8.613 4.75 0 8.614-3.864 8.614-8.613C24 4.4 20.136.524 15.386.524M.003 23.537h4.22V.524H.003"})})})]})]})]})})})}e.s(["Footer",()=>s])},44254,e=>{"use strict";var t=e.i(71645),r=e.i(70273);function a(){let e=(0,t.useContext)(r.ToastContext);if(!e)throw Error("useToast must be used within a ToastProvider");return e}e.s(["useToast",()=>a])},53454,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),o=e.i(22016),s=e.i(3374),l=e.i(58234),n=e.i(72547);function i(e){return"type"in e&&"separator"===e.type}function c({actions:e,minVisibleItems:a=2,className:o="",sticky:s=!1}){let l=(0,r.useRef)(null),[c,d]=(0,r.useState)(e.length),h=(0,r.useCallback)(()=>{if(!l.current)return;let t=l.current.offsetWidth-16-48,r=0,o=0;for(let s of e){let e=i(s)?16:80;if(r+e>t&&o>=a)break;r+=e,o++}d(Math.max(a,o))},[e,a]);(0,r.useEffect)(()=>{h();let e=new ResizeObserver(()=>{h()});return l.current&&e.observe(l.current),()=>e.disconnect()},[h]);let x=e.slice(0,c),u=e.slice(c).filter(e=>!i(e)).map(e=>({id:e.id,label:e.label,icon:e.icon,onClick:e.onClick,disabled:e.disabled}));return(0,t.jsxs)("div",{ref:l,className:`
        flex items-center justify-between
        bg-retro-navy/80 backdrop-blur-sm
        border-b border-retro-grid/50
        px-2 sm:px-4
        ${s?"sticky top-[var(--header-height)] z-40":""}
        ${o}
      `,style:{minHeight:"var(--toolbar-height)"},children:[(0,t.jsx)("div",{className:"flex items-center gap-1 sm:gap-2",children:x.map(e=>i(e)?(0,t.jsx)("div",{className:"h-6 w-px bg-retro-grid/50 mx-1","aria-hidden":"true"},e.id):(0,t.jsxs)("button",{onClick:e.onClick,disabled:e.disabled,className:`
                touch-target flex items-center gap-2 px-2 sm:px-3 py-2 rounded-md
                text-sm font-ui transition-colors
                ${e.disabled?"text-gray-600 cursor-not-allowed":e.active?"text-retro-cyan bg-retro-purple/40":"text-gray-300 hover:text-retro-cyan hover:bg-retro-purple/30"}
              `,title:e.label,children:[(0,t.jsx)("span",{className:"w-5 h-5 flex-shrink-0",children:e.icon}),!e.hideLabel&&(0,t.jsx)("span",{className:"hidden sm:inline",children:e.label})]},e.id))}),u.length>0&&(0,t.jsx)(n.OverflowMenu,{items:u,align:"right",label:"More actions"})]})}function d({title:e,children:r,toolbar:a,showFooter:o=!1,fullHeight:n=!0,className:i=""}){return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col safe-top",children:[(0,t.jsx)(s.Header,{}),a&&a.length>0&&(0,t.jsx)(c,{actions:a,sticky:!0,className:"mt-[var(--header-height)]"}),(0,t.jsxs)("main",{className:`
          flex-1 bg-retro-dark
          ${!a?"mt-[var(--header-height)]":""}
          ${n?"tool-canvas overflow-hidden":""}
          ${i}
        `,children:[(0,t.jsx)("h1",{className:"sr-only",children:e}),r]}),o&&(0,t.jsx)(l.Footer,{})]})}function h({children:e,sidebar:r,sidebarPosition:a="left",sidebarWidth:o="280px",leftSidebar:s,leftSidebarWidth:l="220px",rightSidebar:n,rightSidebarWidth:i="80px",leftSidebarCollapsible:c=!0,rightSidebarCollapsible:d=!0,className:h=""}){let x=s??("left"===a?r:void 0),u=n??("right"===a?r:void 0),m=s?l:o,g=n?i:o;return x||u?(0,t.jsxs)("div",{className:"h-full flex flex-col lg:flex-row",children:[x&&(0,t.jsx)("aside",{className:`
            w-full lg:w-auto lg:flex-shrink-0
            ${c?"border-b lg:border-b-0":""}
            lg:border-r border-retro-grid/50
            bg-retro-navy/50
            overflow-y-auto
            ${c?"max-h-[30vh] lg:max-h-none":""}
          `,style:{"--sidebar-width":m},children:(0,t.jsx)("div",{className:"lg:w-[var(--sidebar-width)] h-full",children:x})}),(0,t.jsx)("div",{className:`
          flex-1 overflow-auto
          flex items-center justify-center
          ${h}
        `,children:e}),u&&(0,t.jsx)("aside",{className:`
            w-full lg:w-auto lg:flex-shrink-0
            ${d?"border-t lg:border-t-0":""}
            lg:border-l border-retro-grid/50
            bg-retro-navy/50
            overflow-y-auto
            ${d?"max-h-[30vh] lg:max-h-none":""}
          `,style:{"--sidebar-width":g},children:(0,t.jsx)("div",{className:"lg:w-[var(--sidebar-width)] h-full",children:u})})]}):(0,t.jsx)("div",{className:`h-full overflow-auto ${h}`,children:e})}e.i(3813);var x=e.i(60441),u=e.i(42187),m=e.i(87355),g=e.i(45835),b=e.i(43237),p=e.i(99401),f=e.i(16244),v=e.i(46628),k=e.i(78071),C=e.i(35052),j=e.i(55361),y=e.i(48026),S=e.i(64721),w=e.i(53444),N=e.i(1164),M=e.i(75052),I=e.i(28827),L=e.i(80364),A=e.i(26089);e.i(7259);var D=e.i(66811),R=e.i(54750),B=e.i(3573),z=e.i(69771),T=e.i(80184),E=e.i(83621);e.i(79086);var H=e.i(82906),W=e.i(38152),F=e.i(44254);function O(){let e=(0,a.useRouter)(),s=(0,a.useSearchParams)().get("id"),{getById:l,save:n,deleteSet:i}=(0,D.useCharacterLibrary)(),c=(0,F.useToast)(),[O,$]=(0,r.useState)(!0),[V,P]=(0,r.useState)(null),[_,U]=(0,r.useState)(!1),[G,K]=(0,r.useState)(null),Z=(0,E.useCharacterEditor)(G),[Y,q]=(0,r.useState)((0,H.getActiveColors)()),[J,Q]=(0,r.useState)(20),[X,ee]=(0,r.useState)(null),[et,er]=(0,r.useState)(!1),[ea,eo]=(0,r.useState)(!1),[es,el]=(0,r.useState)(!1),[en,ei]=(0,r.useState)(!1),[ec,ed]=(0,r.useState)(!1),[eh,ex]=(0,r.useState)(!1),[eu,em]=(0,r.useState)(""),[eg,eb]=(0,r.useState)(!1),[ep,ef]=(0,r.useState)(!1),[ev,ek]=(0,r.useState)(!1),[eC,ej]=(0,r.useState)(!1),[ey,eS]=(0,r.useState)(!1),[ew,eN]=(0,r.useState)(!1),[eM,eI]=(0,r.useState)(!1),[eL,eA]=(0,r.useState)(!1),[eD,eR]=(0,r.useState)(!1),[eB,ez]=(0,r.useState)(!1),[eT,eE]=(0,r.useState)(!1),[eH,eW]=(0,r.useState)(!1),{contextMenu:eF,showContextMenu:eO,hideContextMenu:e$}=(0,M.useContextMenu)(),eV=(0,R.useAutoSave)({characterSetId:s,characters:Z.characters,config:Z.config,selectedIndex:Z.selectedIndex,isDirty:Z.isDirty,enabled:!!G}),eP=(0,z.useSnapshots)({characterSetId:s,enabled:!!G}),e_=(0,T.useChangeLog)({maxEntries:100,enabled:!!G}),eU=(0,r.useCallback)(async e=>{let t=await eP.saveNewSnapshot(e,Z.characters,Z.config);return t&&c.success("Snapshot saved"),t},[eP,Z.characters,Z.config,c]),eG=(0,r.useCallback)(e=>{G&&(Z.reset({...G,characters:e}),c.info("Snapshot restored"))},[G,Z,c]);(0,r.useEffect)(()=>{!async function(){if(!s){P("No character set ID provided"),$(!1);return}try{let e=await l(s);e?(K(e),Z.reset(e)):P("Character set not found")}catch(e){P(e instanceof Error?e.message:"Failed to load character set")}finally{$(!1)}}()},[s]);let eK=(0,r.useCallback)(async()=>{if(G)try{U(!0);let e={metadata:{...G.metadata,updatedAt:Date.now()},config:Z.config,characters:Z.characters};await n(e),Z.markSaved(),K(e),eV.clearAutoSave(),c.success("Saved successfully")}catch(e){console.error("Failed to save:",e),c.error("Failed to save changes")}finally{U(!1)}},[G,Z,n,eV,c]),eZ=(0,r.useCallback)(()=>{Z.isDirty?confirm("You have unsaved changes. Are you sure you want to leave?")&&(eV.clearAutoSave(),e.push("/tools/character-rom-editor")):e.push("/tools/character-rom-editor")},[Z.isDirty,e,eV]),eY=(0,r.useCallback)(()=>{s&&e.push(`/tools/character-rom-editor/export?id=${s}`)},[s,e]),eq=(0,r.useCallback)(()=>{ed(!0)},[]),eJ=(0,r.useCallback)(()=>{G&&(Z.reset(G),c.info("Changes discarded")),ed(!1)},[G,Z,c]),eQ=(0,r.useCallback)((e,t,r)=>{Z.resizeCharacters(e,t,r)},[Z]),eX=(0,r.useCallback)(()=>{let e=eV.recover();if(e&&G)try{let t=(0,W.base64ToBinary)(e.binaryData),r=(0,W.parseCharacterRom)(t,e.config);Z.reset({...G,characters:r,config:e.config}),Z.setSelectedIndex(e.selectedIndex)}catch(e){console.error("Failed to recover:",e),eV.discard()}},[eV,G,Z]),e0=(0,r.useCallback)(async()=>{if(G&&eu.trim())try{eb(!0);let t={metadata:{...G.metadata,id:crypto.randomUUID(),name:eu.trim(),createdAt:Date.now(),updatedAt:Date.now(),isBuiltIn:!1},config:Z.config,characters:Z.characters};await n(t),eV.clearAutoSave(),c.success(`Saved as "${eu.trim()}"`),e.push(`/tools/character-rom-editor/edit?id=${t.metadata.id}`)}catch(e){console.error("Failed to save as:",e),c.error("Failed to save copy")}finally{eb(!1),ex(!1),em("")}},[G,eu,Z,n,eV,e,c]),e2=(0,r.useCallback)(async()=>{if(s)try{ei(!0),await i(s),c.success("Character set deleted"),e.push("/tools/character-rom-editor")}catch(e){console.error("Failed to delete:",e),c.error("Failed to delete character set")}finally{ei(!1),el(!1)}},[s,i,e,c]),e1=(0,r.useCallback)(async e=>{if(G)try{let t={...G,metadata:{...G.metadata,...e,updatedAt:Date.now()}};await n(t),K(t),c.success("Info updated")}catch(e){console.error("Failed to update metadata:",e),c.error("Failed to update info")}},[G,n,c]),e4=(0,r.useCallback)(()=>{em(G?.metadata.name?`${G.metadata.name} (copy)`:""),ex(!0)},[G?.metadata.name]),e3=Z.characters.length,e5=(0,r.useCallback)(()=>{Z.selectedIndex>0&&Z.setSelectedIndex(Z.selectedIndex-1)},[Z]),e6=(0,r.useCallback)(()=>{Z.selectedIndex<e3-1&&Z.setSelectedIndex(Z.selectedIndex+1)},[Z,e3]),e8=(0,r.useCallback)(()=>{let e=Math.max(0,Z.selectedIndex-16);Z.setSelectedIndex(e)},[Z]),e7=(0,r.useCallback)(()=>{let e=Math.min(e3-1,Z.selectedIndex+16);Z.setSelectedIndex(e)},[Z,e3]),e9=(0,r.useCallback)(()=>{Z.setSelectedIndex(0)},[Z]),te=(0,r.useCallback)(()=>{Z.setSelectedIndex(e3-1)},[Z,e3]),tt=(0,r.useMemo)(()=>(0,B.createEditorShortcuts)({undo:Z.undo,redo:Z.redo,save:eK,rotateLeft:()=>Z.rotateSelected("left"),rotateRight:()=>Z.rotateSelected("right"),shiftUp:()=>Z.shiftSelected("up"),shiftDown:()=>Z.shiftSelected("down"),shiftLeft:()=>Z.shiftSelected("left"),shiftRight:()=>Z.shiftSelected("right"),invert:Z.invertSelected,flipHorizontal:Z.flipSelectedHorizontal,flipVertical:Z.flipSelectedVertical,selectAll:Z.selectAll,deleteSelected:Z.deleteSelected,addCharacter:Z.addCharacter,showHelp:()=>er(!0),navigatePrev:e5,navigateNext:e6,navigatePageUp:e8,navigatePageDown:e7,navigateFirst:e9,navigateLast:te,goToCharacter:()=>eI(!0),showAsciiMap:()=>eA(!0),showTextPreview:()=>eR(!0),showSnapshots:()=>ez(!0)}),[Z,eK,e5,e6,e8,e7,e9,te]);(0,B.useKeyboardShortcuts)(tt,{enabled:!et});let tr=(0,r.useMemo)(()=>{if(!eF)return[];let e=eF.index,t=Z.batchSelection.size>0,r=t?Z.batchSelection.size+1:1;return[{label:"Edit",onClick:()=>Z.setSelectedIndex(e)},{label:"Copy From...",shortcut:"C",onClick:()=>ej(!0)},{label:"",onClick:()=>{},divider:!0},{label:"Invert",shortcut:"I",onClick:()=>Z.invertSelected()},{label:"Clear",onClick:()=>Z.clearSelected()},{label:"Fill",onClick:()=>Z.fillSelected()},{label:"",onClick:()=>{},divider:!0},{label:`Delete${t?` (${r})`:""}`,shortcut:"Del",onClick:()=>{Z.deleteSelected(),c.success(t?`${r} characters deleted`:"Character deleted")},danger:!0}]},[eF,Z,c]),ta=[{id:"undo",label:"Undo",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),onClick:Z.undo,disabled:!Z.canUndo},{id:"redo",label:"Redo",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"})}),onClick:Z.redo,disabled:!Z.canRedo},{type:"separator",id:"sep-1"},{id:"save",label:_?"Saving...":"Save",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),onClick:eK,disabled:_||!Z.isDirty,active:Z.isDirty},{id:"save-as",label:"Save As",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m0 0V4m0 0H9m3 0v3"})}),onClick:e4},{id:"delete",label:"Delete",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),onClick:()=>el(!0),disabled:G?.metadata.isBuiltIn},{type:"separator",id:"sep-2"},{id:"edit-metadata",label:"Edit Info",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),onClick:()=>eo(!0)},{id:"resize",label:"Resize",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),onClick:()=>ef(!0)},{id:"import",label:"Import",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),onClick:()=>ek(!0)},{id:"reorder",label:"Reorder",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),onClick:()=>eS(!0)},{id:"export",label:"Export",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),onClick:eY},{id:"share",label:"Share",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),onClick:()=>eW(!0)},{id:"reset",label:"Reset",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),onClick:eq,disabled:!Z.isDirty},{id:"snapshots",label:`Snapshots (${eP.snapshots.length})`,icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),onClick:()=>ez(!0)},{id:"changelog",label:`Log (${e_.count})`,icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),onClick:()=>eE(!0)},{type:"separator",id:"sep-3"},{id:"help",label:"Shortcuts (?)",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),onClick:()=>er(!0)},{type:"separator",id:"sep-4"},{id:"bug-report",label:"Report Bug",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),onClick:()=>window.open("https://github.com/RetroStack/retrostack-web/issues","_blank")},{id:"github",label:"GitHub",icon:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})}),onClick:()=>window.open("https://github.com/RetroStack/retrostack-web","_blank")}];if(O)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-retro-dark",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-2 border-retro-cyan border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Loading character set..."})]})});if(V)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-retro-dark",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 text-center",children:[(0,t.jsx)("svg",{className:"w-16 h-16 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,t.jsx)("h2",{className:"text-lg font-medium text-red-400",children:V}),(0,t.jsx)(o.default,{href:"/tools/character-rom-editor",className:"text-sm text-retro-cyan hover:text-retro-pink transition-colors",children:"Back to Library"})]})});let to=Z.characters[Z.selectedIndex]||null,ts=Z.batchSelection.size>0;return(0,t.jsxs)(d,{title:G?.metadata.name||"Character Editor",toolbar:ta,children:[(0,t.jsx)(m.EditorHeader,{characterSetName:G?.metadata.name||"Untitled",isDirty:Z.isDirty,characterIndex:Z.selectedIndex,totalCharacters:Z.characters.length,batchMode:ts,zoom:J,onZoomChange:Q,colors:Y,onColorsChange:q,onBack:eZ,hoverCoords:X}),(0,t.jsx)(h,{leftSidebar:(0,t.jsx)(u.EditorSidebar,{characters:Z.characters,config:Z.config,selectedIndex:Z.selectedIndex,batchSelection:Z.batchSelection,onSelect:Z.toggleBatchSelection,onAddCharacter:Z.addCharacter,onDeleteSelected:Z.deleteSelected,onSelectAll:Z.selectAll,onSelectNone:()=>Z.toggleBatchSelection(Z.selectedIndex,!1),onContextMenu:eO,foregroundColor:Y.foreground,backgroundColor:Y.background}),leftSidebarWidth:"240px",rightSidebar:(0,t.jsx)(p.TransformToolbar,{character:to,characterWidth:Z.config.width,characterHeight:Z.config.height,onShift:e=>Z.shiftSelected(e),onRotate:e=>Z.rotateSelected(e),onFlipHorizontal:Z.flipSelectedHorizontal,onFlipVertical:Z.flipSelectedVertical,onInvert:Z.invertSelected,onClear:Z.clearSelected,onFill:Z.fillSelected,onCenter:Z.centerSelected,onScale:()=>eN(!0),onDelete:Z.deleteSelected,onCopy:()=>ej(!0),disabled:!to,className:"h-full"}),rightSidebarWidth:"80px",rightSidebarCollapsible:!1,children:(0,t.jsx)(x.EditorCanvas,{character:to,config:Z.config,onPixelToggle:Z.toggleSelectedPixel,onPixelSet:Z.setSelectedPixel,getPixelState:Z.getSelectedPixelState,batchMode:ts,foregroundColor:Y.foreground,backgroundColor:Y.background,gridColor:Y.gridColor,zoom:J,minZoom:8,maxZoom:40,onZoomChange:Q,onPixelHover:(e,t)=>ee({x:t,y:e}),onPixelLeave:()=>ee(null)})}),(0,t.jsx)(g.EditorFooter,{}),eV.hasRecoveryData&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),(0,t.jsxs)("div",{className:"relative w-full max-w-md bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-white mb-2",children:"Recover Unsaved Changes?"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"We found unsaved changes from a previous session. Would you like to recover them?"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mb-6",children:["Last saved: ",eV.recoveryData&&new Date(eV.recoveryData.timestamp).toLocaleString()]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:eV.discard,className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Discard"}),(0,t.jsx)("button",{onClick:eX,className:"flex-1 px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors",children:"Recover"})]})]})]}),(0,t.jsx)(b.KeyboardShortcutsHelp,{isOpen:et,onClose:()=>er(!1),shortcuts:tt}),G&&(0,t.jsx)(f.MetadataEditModal,{isOpen:ea,onClose:()=>eo(!1),metadata:G.metadata,onSave:e1}),(0,t.jsx)(v.ResizeModal,{isOpen:ep,onClose:()=>ef(!1),currentWidth:Z.config.width,currentHeight:Z.config.height,onResize:eQ}),(0,t.jsx)(k.ImportCharactersModal,{isOpen:ev,onClose:()=>ek(!1),currentConfig:Z.config,onImport:Z.addCharacters}),(0,t.jsx)(C.CopyCharacterModal,{isOpen:eC,onClose:()=>ej(!1),characters:Z.characters,currentIndex:Z.selectedIndex,onCopy:e=>{[Z.selectedIndex,...Array.from(Z.batchSelection)].forEach(t=>{Z.copyCharacter(e,t)})}}),(0,t.jsx)(j.ReorderModal,{isOpen:ey,onClose:()=>eS(!1),characters:Z.characters,onReorder:Z.setCharacters}),(0,t.jsx)(y.ScaleModal,{isOpen:ew,onClose:()=>eN(!1),onScale:(e,t,r)=>{Z.scaleSelected(e,t,r),eN(!1)},characters:Z.characters,selectedIndices:Z.selectedIndices,config:Z.config,foregroundColor:Y.foreground,backgroundColor:Y.background}),(0,t.jsx)(S.GoToCharacterModal,{isOpen:eM,onClose:()=>eI(!1),totalCharacters:e3,currentIndex:Z.selectedIndex,onGoTo:e=>Z.setSelectedIndex(e)}),(0,t.jsx)(w.AsciiMapModal,{isOpen:eL,onClose:()=>eA(!1),characters:Z.characters,selectedIndex:Z.selectedIndex,onSelect:e=>Z.setSelectedIndex(e),foregroundColor:Y.foreground,backgroundColor:Y.background}),(0,t.jsx)(N.TextPreviewModal,{isOpen:eD,onClose:()=>eR(!1),characters:Z.characters,config:Z.config,foregroundColor:Y.foreground,backgroundColor:Y.background}),(0,t.jsx)(I.SnapshotsModal,{isOpen:eB,onClose:()=>ez(!1),snapshots:eP.snapshots,loading:eP.loading,isAtCapacity:eP.isAtCapacity,maxSnapshots:eP.maxSnapshots,currentCharacters:Z.characters,currentConfig:Z.config,foregroundColor:Y.foreground,backgroundColor:Y.background,onSave:eU,onRestore:eP.restore,onDelete:eP.remove,onRename:eP.rename,onRestoreApply:eG}),(0,t.jsx)(L.ChangeLogModal,{isOpen:eT,onClose:()=>eE(!1),entries:e_.entries,onClear:e_.clear,onExport:e_.exportAsText}),G&&(0,t.jsx)(A.ShareModal,{isOpen:eH,onClose:()=>eW(!1),name:G.metadata.name,description:G.metadata.description,characters:Z.characters,config:Z.config}),eF&&(0,t.jsx)(M.CharacterContextMenu,{x:eF.x,y:eF.y,items:tr,onClose:e$}),eh&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>ex(!1)}),(0,t.jsxs)("div",{className:"relative w-full max-w-md bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-white mb-4",children:"Save As"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"New name"}),(0,t.jsx)("input",{type:"text",value:eu,onChange:e=>em(e.target.value),placeholder:"Character set name",className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&eu.trim()?e0():"Escape"===e.key&&ex(!1)}})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>ex(!1),className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:e0,disabled:!eu.trim()||eg,className:"flex-1 px-4 py-2 text-sm bg-retro-cyan/20 border border-retro-cyan rounded text-retro-cyan hover:bg-retro-cyan/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:eg?"Saving...":"Save"})]})]})]}),es&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>el(!1)}),(0,t.jsxs)("div",{className:"relative w-full max-w-md bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-white mb-2",children:"Delete Character Set?"}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:['Are you sure you want to delete "',G?.metadata.name,'"? This action cannot be undone.']}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>el(!1),className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:e2,disabled:en,className:"flex-1 px-4 py-2 text-sm bg-red-500/20 border border-red-500 rounded text-red-400 hover:bg-red-500/30 transition-colors disabled:opacity-50",children:en?"Deleting...":"Delete"})]})]})]}),ec&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>ed(!1)}),(0,t.jsxs)("div",{className:"relative w-full max-w-md bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-white mb-2",children:"Reset to Last Saved?"}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:['This will discard all unsaved changes and restore "',G?.metadata.name,'" to its last saved state. This action cannot be undone.']}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>ed(!1),className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:eJ,className:"flex-1 px-4 py-2 text-sm bg-orange-500/20 border border-orange-500 rounded text-orange-400 hover:bg-orange-500/30 transition-colors",children:"Reset"})]})]})]})]})}e.s(["EditView",()=>O],53454)}]);