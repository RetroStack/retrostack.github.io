(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80710,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566),s=e.i(22016),l=e.i(3374),o=e.i(58234),n=e.i(28540),i=e.i(59544),c=e.i(93733),d=e.i(76849);function u({characterSets:e,loading:a=!1,onEdit:r,onExport:s,onDelete:l,onDuplicate:o,onRename:n,onEditMetadata:i,onTogglePinned:c,onImport:u,onCreate:h,className:x=""}){return a?(0,t.jsx)("div",{className:`grid-fluid gap-4 ${x}`,children:Array.from({length:4}).map((e,a)=>(0,t.jsx)(m,{},a))}):0===e.length?(0,t.jsx)("div",{className:`flex flex-col items-center justify-center py-12 ${x}`,children:(0,t.jsx)(d.LibraryCardEmpty,{onImport:u,onCreate:h})}):(0,t.jsx)("div",{className:`grid-fluid gap-4 ${x}`,children:e.map(e=>(0,t.jsx)(d.LibraryCard,{characterSet:e,onEdit:r?()=>r(e.metadata.id):void 0,onExport:s?()=>s(e.metadata.id):void 0,onDelete:l?()=>l(e.metadata.id):void 0,onDuplicate:o?()=>o(e.metadata.id):void 0,onRename:n?()=>n(e.metadata.id):void 0,onEditMetadata:i?()=>i(e.metadata.id):void 0,onTogglePinned:c?()=>c(e.metadata.id):void 0},e.metadata.id))})}function m(){return(0,t.jsxs)("div",{className:"card-retro p-4 animate-pulse",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-4 bg-retro-grid/30 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-3 bg-retro-grid/20 rounded w-full mt-2"})]}),(0,t.jsx)("div",{className:"w-6 h-6 bg-retro-grid/20 rounded"})]}),(0,t.jsx)("div",{className:"h-16 bg-black/30 rounded mb-3"}),(0,t.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,t.jsx)("div",{className:"h-4 w-12 bg-retro-grid/20 rounded"}),(0,t.jsx)("div",{className:"h-4 w-16 bg-retro-grid/20 rounded"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-retro-grid/30",children:[(0,t.jsx)("div",{className:"h-3 w-20 bg-retro-grid/20 rounded"}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("div",{className:"h-6 w-12 bg-retro-grid/20 rounded"}),(0,t.jsx)("div",{className:"h-6 w-14 bg-retro-grid/20 rounded"})]})]})]})}function h({onClearFilters:e}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-retro-navy/50 flex items-center justify-center mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"No results found"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Try adjusting your search or filters"}),e&&(0,t.jsx)("button",{onClick:e,className:"px-4 py-2 text-sm bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Clear all filters"})]})}function x({error:e,onRetry:a}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Failed to load library"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:e}),a&&(0,t.jsx)("button",{onClick:a,className:"px-4 py-2 text-sm bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors",children:"Try again"})]})}var p=e.i(37559),g=e.i(7540);function b({label:e,options:r,selected:s,onChange:l,placeholder:o="All",className:n="",showAllOption:i=!0,allOptionLabel:c="All",numericSort:d=!1}){let{ref:u,isOpen:m,toggle:h}=(0,g.useDropdown)(),[x,p]=(0,a.useState)(""),b=(0,a.useCallback)(()=>{m||p(""),h()},[m,h]),f=(0,a.useCallback)(e=>{s.includes(e)?l(s.filter(t=>t!==e)):l([...s,e])},[s,l]),j=(0,a.useCallback)(()=>{l([])},[l]),v=(0,a.useCallback)((e,t)=>{t.stopPropagation(),l(s.filter(t=>t!==e))},[s,l]),y=e=>{let t=r.find(t=>t.value===e);return t?.label??String(e)},C=(0,a.useMemo)(()=>{let e=[...r].sort((e,t)=>{if(d){let a=parseFloat(e.label),r=parseFloat(t.label);if(!isNaN(a)&&!isNaN(r))return a-r}return e.label.localeCompare(t.label)});if(!x.trim())return e;let t=x.toLowerCase().trim();return e.filter(e=>e.label.toLowerCase().includes(t))},[r,x,d]),k=s.length>0;return(0,t.jsxs)("div",{className:`relative ${n}`,ref:u,children:[(0,t.jsxs)("button",{type:"button",onClick:b,className:`
          flex items-center justify-between gap-2 w-full px-3 py-1.5
          bg-retro-navy/50 border rounded text-sm text-left
          transition-colors
          ${m?"border-retro-cyan":"border-retro-grid/50 hover:border-retro-grid"}
          ${k?"text-gray-200":"text-gray-400"}
        `,"aria-expanded":m,"aria-haspopup":"listbox",children:[(0,t.jsx)("span",{className:"truncate",children:k?`${e} (${s.length})`:o}),(0,t.jsx)("svg",{className:`w-4 h-4 flex-shrink-0 transition-transform ${m?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),k&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:s.map(e=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-retro-cyan/20 text-retro-cyan rounded text-xs",children:[y(e),(0,t.jsx)("button",{type:"button",onClick:t=>v(e,t),className:"hover:text-white transition-colors","aria-label":`Remove ${y(e)}`,children:(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},String(e)))}),m&&(0,t.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl overflow-hidden",children:[(0,t.jsx)("div",{className:"sticky top-0 z-10 p-2 border-b border-retro-grid/30 bg-retro-navy",children:(0,t.jsx)("input",{type:"text",value:x,onChange:e=>p(e.target.value),placeholder:"Search...",autoFocus:!0,className:"w-full px-3 py-1.5 text-sm bg-retro-dark border border-retro-grid/50 rounded text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan"})}),(0,t.jsxs)("div",{className:"max-h-60 overflow-y-auto py-1",children:[i&&!x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{type:"button",onClick:j,className:`
                    w-full flex items-center gap-2 px-3 py-2 text-sm text-left
                    transition-colors
                    ${!k?"bg-retro-cyan/10 text-retro-cyan":"text-gray-300 hover:bg-retro-purple/20"}
                  `,children:[(0,t.jsx)("span",{className:"w-4 h-4 flex items-center justify-center",children:!k&&(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})})}),c]}),(0,t.jsx)("div",{className:"h-px bg-retro-grid/30 mx-2 my-1"})]}),C.map(e=>{let a=s.includes(e.value);return(0,t.jsxs)("button",{type:"button",onClick:()=>f(e.value),className:`
                    w-full flex items-center gap-2 px-3 py-2 text-sm text-left
                    transition-colors
                    ${a?"bg-retro-cyan/10 text-retro-cyan":"text-gray-300 hover:bg-retro-purple/20"}
                  `,role:"option","aria-selected":a,children:[(0,t.jsx)("span",{className:`
                      w-4 h-4 flex items-center justify-center rounded border
                      ${a?"bg-retro-cyan border-retro-cyan":"border-gray-500"}
                    `,children:a&&(0,t.jsx)("svg",{className:"w-3 h-3 text-retro-dark",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.label]},String(e.value))}),0===C.length&&(0,t.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:x?"No matches found":"No options available"})]})]})]})}var f=e.i(30717),j=e.i(33712);function v(e,t){let a=new Set;for(let r of t&&t.length>0?e.filter(e=>e.metadata.manufacturer&&t.includes(e.metadata.manufacturer)):e)r.metadata.system&&a.add(r.metadata.system);return Array.from(a).sort()}let y=[20,50,100,"all"],C=[{value:"updatedAt",label:"Date Modified"},{value:"createdAt",label:"Date Created"},{value:"name",label:"Name"},{value:"description",label:"Description"},{value:"source",label:"Source"},{value:"width",label:"Width"},{value:"height",label:"Height"},{value:"size",label:"Size (W×H)"},{value:"characters",label:"Count"},{value:"manufacturer",label:"Manufacturer"},{value:"system",label:"System"},{value:"chip",label:"Chip"},{value:"locale",label:"Locale"}],k=[{value:"pinned",label:"Pinned"},{value:"not-pinned",label:"Not Pinned"}],w=[{value:"built-in",label:"Built-in"},{value:"created",label:"Created"},{value:"binary",label:"Binary Import"},{value:"text",label:"Text Import"},{value:"font",label:"Font Import"},{value:"image",label:"Image Import"},{value:"shared",label:"Shared Link"},{value:"copied",label:"Copied"}];function N({searchQuery:e,onSearchChange:r,availableSizes:s,widthFilters:l,heightFilters:o,onSizeFilterChange:n,availableCharacterCounts:i=[],characterCountFilters:c=[],onCharacterCountFilterChange:d,availableManufacturers:u=[],availableSystems:m=[],manufacturerFilters:h=[],systemFilters:x=[],onManufacturerFilterChange:p,onSystemFilterChange:g,availableChips:j=[],chipFilters:v=[],onChipFilterChange:N,availableLocales:S=[],localeFilters:L=[],onLocaleFilterChange:A,availableTags:M=[],tagFilters:F=[],onTagFilterChange:T,availableSources:E=[],sourceFilters:R=[],onSourceFilterChange:I,isPinnedFilters:P=[],onIsPinnedFiltersChange:O,availableOrigins:D=[],originFilters:B=[],onOriginFilterChange:_,sortField:z="updatedAt",sortDirection:H="desc",onSortFieldChange:W,onSortDirectionToggle:$,totalCount:G,filteredCount:V,pagination:K,onPageSizeChange:Y,onPageChange:U}){let[Z,J]=(0,a.useState)(!1),Q=(0,a.useMemo)(()=>[...u].sort(),[u]),q=(0,a.useMemo)(()=>[...m].sort(),[m]),X=(0,a.useMemo)(()=>Array.from(new Set(s.map(e=>e.width))).sort((e,t)=>e-t),[s]),ee=(0,a.useMemo)(()=>Array.from(new Set(s.map(e=>e.height))).sort((e,t)=>e-t),[s]),et=(0,a.useCallback)(()=>{r(""),n([],[]),d?.([]),p?.([]),g?.([]),N?.([]),A?.([]),T?.([]),I?.([]),O?.([]),_?.([])},[r,n,d,p,g,N,A,T,I,O,_]),ea=e.length>0||l.length>0||o.length>0||c.length>0||h.length>0||x.length>0||v.length>0||L.length>0||F.length>0||R.length>0||P.length>0||B.length>0,er=l.length>0||o.length>0||c.length>0||h.length>0||x.length>0||v.length>0||L.length>0||F.length>0||R.length>0||P.length>0||B.length>0,es=[l.length>0,o.length>0,c.length>0,h.length>0,x.length>0,v.length>0,L.length>0,F.length>0,R.length>0,P.length>0,B.length>0].filter(Boolean).length;return(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("input",{type:"text",value:e,onChange:e=>r(e.target.value),placeholder:"Search character sets...",className:"w-full px-3 py-2 pl-10 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white placeholder-gray-500 focus:outline-none focus:border-retro-cyan transition-colors","aria-label":"Search character sets"}),(0,t.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e&&(0,t.jsx)("button",{type:"button",onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300","aria-label":"Clear search",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>J(!Z),className:`flex items-center gap-1 px-3 py-2 border rounded-lg transition-colors ${Z?"bg-amber-500/20 border-amber-500/50 text-amber-400":er?"bg-retro-cyan/20 border-retro-cyan text-retro-cyan":"bg-retro-navy/50 border-retro-grid/50 text-gray-400 hover:text-gray-200 hover:border-retro-grid"}`,"aria-expanded":Z,"aria-label":Z?"Hide filters":"Show filters",title:Z?"Hide filters":"Show filters",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),es>0&&(0,t.jsx)("span",{className:"text-xs font-medium",children:es})]}),W&&$&&(0,t.jsx)("div",{className:"w-px bg-retro-grid/50 mx-2 self-stretch"}),W&&$&&(0,t.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,t.jsx)("span",{className:"text-xs text-gray-400 mr-1",children:"Sort:"}),(0,t.jsx)(f.SingleSelectDropdown,{options:C,value:z,onChange:W,ariaLabel:"Sort by",className:"min-w-[180px]"}),(0,t.jsx)("button",{type:"button",onClick:$,className:`px-3 py-2 border rounded-lg text-xs font-mono transition-colors ${"desc"===H?"bg-amber-500/20 border-amber-500/50 text-amber-400":"bg-retro-navy/50 border-retro-grid/50 text-gray-400 hover:text-gray-200 hover:border-retro-cyan/50"}`,"aria-label":"asc"===H?"Sort ascending (A to Z)":"Sort descending (Z to A)",title:"asc"===H?"Ascending (A→Z)":"Descending (Z→A)",children:"asc"===H?"abc":"cba"})]})]}),(0,t.jsx)("div",{className:`transition-all duration-300 ease-in-out ${Z?"opacity-100":"max-h-0 opacity-0 overflow-hidden"}`,children:(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 pt-1",children:[_&&(0,t.jsx)(b,{label:"Origin",options:w.filter(e=>D.includes(e.value)),selected:B,onChange:_,placeholder:"Origin",allOptionLabel:"Any origin",className:"min-w-[200px]"}),(0,t.jsx)(b,{label:"Width",options:X.map(e=>({value:e,label:`${e}px`})),selected:l,onChange:e=>n(e,o),placeholder:"Width",allOptionLabel:"Any width",className:"min-w-[200px]",numericSort:!0}),(0,t.jsx)(b,{label:"Height",options:ee.map(e=>({value:e,label:`${e}px`})),selected:o,onChange:e=>n(l,e),placeholder:"Height",allOptionLabel:"Any height",className:"min-w-[200px]",numericSort:!0}),d&&(0,t.jsx)(b,{label:"Count",options:i.map(e=>({value:e,label:`${e} chars`})),selected:c,onChange:d,placeholder:"Count",allOptionLabel:"Any count",className:"min-w-[200px]",numericSort:!0}),p&&(0,t.jsx)(b,{label:"Manufacturer",options:Q.map(e=>({value:e,label:e})),selected:h,onChange:p,placeholder:"Manufacturer",allOptionLabel:"Any manufacturer",className:"min-w-[200px]"}),g&&(0,t.jsx)(b,{label:"System",options:q.map(e=>({value:e,label:e})),selected:x,onChange:g,placeholder:"System",allOptionLabel:"Any system",className:"min-w-[200px]"}),N&&(0,t.jsx)(b,{label:"Chip",options:j.map(e=>({value:e,label:e})),selected:v,onChange:N,placeholder:"Chip",allOptionLabel:"Any chip",className:"min-w-[200px]"}),A&&(0,t.jsx)(b,{label:"Locale",options:S.map(e=>({value:e,label:e})),selected:L,onChange:A,placeholder:"Locale",allOptionLabel:"Any locale",className:"min-w-[200px]"}),T&&M.length>0&&(0,t.jsx)(b,{label:"Tags",options:M.map(e=>({value:e,label:e})),selected:F,onChange:T,placeholder:"Tags",allOptionLabel:"Any tag",className:"min-w-[200px]"}),I&&E.length>0&&(0,t.jsx)(b,{label:"Source",options:E.map(e=>({value:e,label:e})),selected:R,onChange:I,placeholder:"Source",allOptionLabel:"Any source",className:"min-w-[200px]"}),O&&(0,t.jsx)(b,{label:"Pinned",options:k,selected:P,onChange:O,placeholder:"Pinned",allOptionLabel:"Any",className:"min-w-[200px]"})]})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 text-xs text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:ea?`Showing ${V} of ${G} character sets`:`${G} character set${1!==G?"s":""}`}),ea&&(0,t.jsx)("button",{onClick:et,className:"text-retro-cyan hover:text-retro-pink transition-colors",children:"Clear filters"})]}),K&&Y&&U&&K.totalItems>=20&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Show:"}),(0,t.jsx)(f.SingleSelectDropdown,{options:y.map(e=>({value:e,label:"all"===e?"All":String(e)})),value:K.pageSize,onChange:e=>Y(e),ariaLabel:"Items per page",className:"min-w-[70px]"})]}),K.totalPages>1&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>U(1),disabled:!K.hasPreviousPage,className:"p-1 text-gray-400 hover:text-retro-cyan disabled:text-gray-600 disabled:cursor-not-allowed transition-colors","aria-label":"First page",title:"First page",children:(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),(0,t.jsx)("button",{onClick:()=>U(K.currentPage-1),disabled:!K.hasPreviousPage,className:"p-1 text-gray-400 hover:text-retro-cyan disabled:text-gray-600 disabled:cursor-not-allowed transition-colors","aria-label":"Previous page",title:"Previous page",children:(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,t.jsxs)("span",{className:"px-2 text-gray-300",children:[K.currentPage," / ",K.totalPages]}),(0,t.jsx)("button",{onClick:()=>U(K.currentPage+1),disabled:!K.hasNextPage,className:"p-1 text-gray-400 hover:text-retro-cyan disabled:text-gray-600 disabled:cursor-not-allowed transition-colors","aria-label":"Next page",title:"Next page",children:(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,t.jsx)("button",{onClick:()=>U(K.totalPages),disabled:!K.hasNextPage,className:"p-1 text-gray-400 hover:text-retro-cyan disabled:text-gray-600 disabled:cursor-not-allowed transition-colors","aria-label":"Last page",title:"Last page",children:(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]})]})]})]})}var S=e.i(37902);function L({isActive:e,currentStep:r,stepIndex:s,totalSteps:l,isFirstStep:o,isLastStep:n,onNext:c,onPrev:d,onSkip:u}){let m=(0,a.useCallback)(e=>{"Escape"===e.key?u():"ArrowRight"===e.key||"Enter"===e.key?c():"ArrowLeft"===e.key&&d()},[c,d,u]);return e&&r?(0,t.jsxs)("div",{onKeyDown:m,tabIndex:0,className:"jsx-9adf730429c9eab6 fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,t.jsx)("div",{onClick:u,className:"jsx-9adf730429c9eab6 absolute inset-0 bg-black/80 backdrop-blur-sm"}),(0,t.jsxs)("div",{className:"jsx-9adf730429c9eab6 relative w-full max-w-md bg-retro-navy border border-retro-cyan/50 rounded-lg shadow-2xl overflow-hidden animate-fade-in",children:[(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 flex gap-1 p-2 bg-retro-dark/30",children:Array.from({length:l}).map((e,a)=>(0,t.jsx)("div",{className:`jsx-9adf730429c9eab6 flex-1 h-1 rounded-full transition-colors ${a<=s?"bg-retro-cyan":"bg-retro-grid"}`},a))}),(0,t.jsxs)("div",{className:"jsx-9adf730429c9eab6 p-6",children:[(0,t.jsxs)("div",{className:"jsx-9adf730429c9eab6 flex items-center justify-between mb-4",children:[(0,t.jsxs)("span",{className:"jsx-9adf730429c9eab6 text-xs text-retro-cyan font-medium uppercase tracking-wide",children:["Step ",s+1," of ",l]}),(0,t.jsx)("button",{onClick:u,className:"jsx-9adf730429c9eab6 text-xs text-gray-500 hover:text-white transition-colors",children:"Skip tour"})]}),(0,t.jsx)("h2",{className:"jsx-9adf730429c9eab6 text-xl font-medium text-white mb-3",children:r.title}),(0,t.jsx)("p",{className:"jsx-9adf730429c9eab6 text-gray-300 leading-relaxed",children:r.description}),(0,t.jsxs)("div",{className:"jsx-9adf730429c9eab6 flex justify-center my-6",children:[0===s&&(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-retro-cyan/10 border border-retro-cyan/30 flex items-center justify-center",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-retro-cyan",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",className:"jsx-9adf730429c9eab6"})})}),1===s&&(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-retro-pink/10 border border-retro-pink/30 flex items-center justify-center",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-retro-pink",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",className:"jsx-9adf730429c9eab6"})})}),2===s&&(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-retro-violet/10 border border-retro-violet/30 flex items-center justify-center",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-retro-violet",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12",className:"jsx-9adf730429c9eab6"})})}),3===s&&(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-green-500/10 border border-green-500/30 flex items-center justify-center",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-green-400",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",className:"jsx-9adf730429c9eab6"})})}),4===s&&(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-sky-500/10 border border-sky-500/30 flex items-center justify-center",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-sky-400",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4",className:"jsx-9adf730429c9eab6"})})}),5===s&&(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-orange-500/10 border border-orange-500/30 flex items-center justify-center",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-orange-400",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",className:"jsx-9adf730429c9eab6"})})}),6===s&&(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-teal-500/10 border border-teal-500/30 flex items-center justify-center",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-teal-400",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10",className:"jsx-9adf730429c9eab6"})})}),7===s&&(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-indigo-500/10 border border-indigo-500/30 flex items-center justify-center",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-indigo-400",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z",className:"jsx-9adf730429c9eab6"})})}),8===s&&(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-emerald-500/10 border border-emerald-500/30 flex items-center justify-center",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-emerald-400",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4",className:"jsx-9adf730429c9eab6"})})}),9===s&&(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-purple-500/10 border border-purple-500/30 flex items-center justify-center",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-purple-400",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",className:"jsx-9adf730429c9eab6"})})}),10===s&&(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-amber-500/10 border border-amber-500/30 flex items-center justify-center",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-amber-400",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",className:"jsx-9adf730429c9eab6"})})}),11===s&&(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-blue-500/10 border border-blue-500/30 flex items-center justify-center",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-blue-400",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z",className:"jsx-9adf730429c9eab6"})})}),12===s&&(0,t.jsx)("div",{className:"jsx-9adf730429c9eab6 w-20 h-20 rounded-full bg-retro-cyan/10 border border-retro-cyan/30 flex items-center justify-center",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-9adf730429c9eab6 w-10 h-10 text-retro-cyan",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 13l4 4L19 7",className:"jsx-9adf730429c9eab6"})})})]})]}),(0,t.jsxs)("div",{className:"jsx-9adf730429c9eab6 flex items-center justify-between p-4 border-t border-retro-grid/30 bg-retro-dark/30",children:[(0,t.jsx)(i.Button,{onClick:d,disabled:o,variant:"ghost",size:"sm",children:"Previous"}),(0,t.jsx)(i.Button,{onClick:c,variant:"cyan",size:"sm",children:n?"Get Started":"Next"})]})]}),(0,t.jsx)(S.default,{id:"9adf730429c9eab6",children:"@keyframes fade-in{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.animate-fade-in.jsx-9adf730429c9eab6{animation:.2s ease-out fade-in}"})]}):null}var A=e.i(21745),M=e.i(66811),F=e.i(92832),T=e.i(44254),E=e.i(60951);let R={getItem:e=>localStorage.getItem(e),setItem:(e,t)=>{localStorage.setItem(e,t)},removeItem:e=>{localStorage.removeItem(e)}};function I(){return{completed:!1,dismissed:!1,updatedAt:Date.now()}}function P(e,t){try{e.setItem(E.CHARACTER_EDITOR_STORAGE_KEY_ONBOARDING,JSON.stringify(t))}catch{}}let O=[{id:"welcome",title:"Welcome to Character ROM Editor",description:"Design and edit character sets for retro computers like the C64, Apple II, Atari, and more. This tool supports binary ROMs, pixel editing, and multiple export formats. Let's take a quick tour!",position:"center"},{id:"library",title:"Character Set Library",description:"Browse built-in and custom character sets. Use filters to find sets by dimensions, manufacturer, system, or chip. Pin your favorites with the star icon and sort by name, date, or size.",position:"center"},{id:"import",title:"Import Your Data",description:"Click 'Import' to load from binary ROM files (.bin), PNG image grids, font files (TTF/OTF/WOFF), or paste code directly from C, JavaScript, or Assembly. The wizard guides you through each format.",position:"center"},{id:"editor",title:"Pixel Editor",description:"Click to toggle pixels, drag to paint multiple pixels, and right-click to erase. Use the zoom slider or scroll wheel to adjust the view. Pick a color preset to match your target system's CRT look.",position:"center"},{id:"navigation",title:"Character Navigation",description:"Use arrow keys to move between characters, Page Up/Down to jump 16 at a time, or Home/End to jump to the start or end. Press G to go to a specific character by index, hex, or ASCII code. Press M to open the ASCII Map for a visual overview.",position:"center"},{id:"transforms",title:"Transform Tools",description:"Rotate characters with [ and ], flip with H (horizontal) or V (vertical), shift pixels with Shift+Arrow keys, and invert colors with I. Use the Scale tool to resize characters with optional smoothing.",position:"center"},{id:"overlays",title:"Overlays & Comparison",description:"Load another character set as an overlay to compare designs. Choose from three modes: 1:1 Pixels, Stretch to fit, or Side by Side. Great for matching your design to a reference set.",position:"center"},{id:"multiselect",title:"Multi-Select & Batch Edit",description:"Hold Shift and click to select a range, or Ctrl/Cmd+click to select individual characters. Use Ctrl/Cmd+A to select all. In selection mode, apply transforms to multiple characters at once.",position:"center"},{id:"saving",title:"Saving & History",description:"Your work auto-saves to recover from unexpected closures. Use Ctrl+S to save explicitly. Create named snapshots to preserve versions. The history slider lets you undo/redo changes with full timestamps.",position:"center"},{id:"export",title:"Export Your Work",description:"Press E to export as binary ROM, C/C++ header, assembly code, or PNG image. Generate printable reference sheets in table or grid layout with customizable colors, available as PNG or PDF.",position:"center"},{id:"crt",title:"CRT Effects",description:"Enable authentic retro visuals with scanlines and bloom effects. Adjust intensity to taste. Set the pixel aspect ratio to None (square), PAL, or NTSC for accurate display simulation.",position:"center"},{id:"help",title:"Help & Tips",description:"Press ? anytime to see all keyboard shortcuts. Click the lightbulb icon for categorized Tips & Tricks covering every feature. Press N to add notes to any character set.",position:"center"},{id:"done",title:"You're Ready!",description:"Start by selecting a character set from the library, or click 'New' to create your own. Built-in sets are read-only—use 'Save As' to create an editable copy. Happy designing!",position:"center"}];var D=e.i(93582);function B({isOpen:e,errorMessage:r}){let[s,l]=(0,a.useState)(!1),o=async()=>{l(!0);try{await (0,F.resetDatabase)()}catch(e){console.error("Failed to reset database:",e),l(!1)}};return(0,t.jsx)(D.ConfirmDialog,{isOpen:e,title:"Database Error Detected",message:"The local database appears to be corrupted and cannot be read. This can happen due to browser issues or incomplete updates.",details:(0,t.jsxs)("div",{className:"space-y-3",children:[r&&(0,t.jsxs)("p",{className:"text-red-400/80 font-mono text-xs break-all",children:["Error: ",r]}),(0,t.jsx)("p",{children:"To recover, the database needs to be reset. This will:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,t.jsx)("li",{children:"Delete all locally stored character sets"}),(0,t.jsx)("li",{children:"Reload the page to reinitialize the database"}),(0,t.jsx)("li",{children:"Restore built-in character sets automatically"})]}),(0,t.jsx)("p",{className:"text-retro-amber",children:"Any custom character sets you created will be lost. Consider exporting important work before this happens."})]}),confirmLabel:s?"Resetting...":"Reset Database",cancelLabel:"Keep Trying",variant:"danger",onConfirm:o,onCancel:()=>{}})}function _(){let e=(0,r.useRouter)(),d=(0,T.useToast)(),{isCorrupted:m,errorMessage:g}=function(){let[e,t]=(0,a.useState)(()=>(0,F.getDatabaseCorruptionState)());return(0,a.useEffect)(()=>(0,F.onDatabaseCorruption)(e=>{t(e)}),[]),{isCorrupted:e.isCorrupted,errorMessage:e.errorMessage}}(),{characterSets:b,loading:f,error:C,refresh:k,deleteSet:w,saveAs:S,rename:D,updateMetadata:_,togglePinned:z,availableSizes:H,getById:W}=(0,M.useCharacterLibrary)(),$=function(e){let{steps:t,enabled:r=!0,storage:s=R}=e,[l,o]=(0,a.useState)(!1),[n,i]=(0,a.useState)(0),[c,d]=(0,a.useState)(I),[u,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{d(function(e){try{let t=e.getItem(E.CHARACTER_EDITOR_STORAGE_KEY_ONBOARDING);if(t)return JSON.parse(t)}catch{}return I()}(s)),m(!0)},[s]),(0,a.useEffect)(()=>{if(u&&r&&!c.completed&&!c.dismissed&&t.length>0){let e=setTimeout(()=>{o(!0)},1e3);return()=>clearTimeout(e)}},[u,r,c.completed,c.dismissed,t.length]);let h=(0,a.useCallback)(()=>{i(0),o(!0)},[]),x=(0,a.useCallback)(()=>{if(n<t.length-1)i(e=>e+1);else{o(!1);let e={completed:!0,dismissed:!1,updatedAt:Date.now()};d(e),P(s,e)}},[n,t.length,s]),p=(0,a.useCallback)(()=>{n>0&&i(e=>e-1)},[n]),g=(0,a.useCallback)(()=>{o(!1);let e={completed:!1,dismissed:!0,updatedAt:Date.now()};d(e),P(s,e)},[s]),b=(0,a.useCallback)(()=>{o(!1);let e={completed:!0,dismissed:!1,updatedAt:Date.now()};d(e),P(s,e)},[s]),f=(0,a.useCallback)(()=>{i(0);let e=I();d(e),P(s,e)},[s]);return{isActive:l,currentStep:n,currentStepData:t[n]||null,totalSteps:t.length,isFirstStep:0===n,isLastStep:n===t.length-1,start:h,next:x,prev:p,skip:g,complete:b,reset:f,hasCompleted:c.completed,hasDismissed:c.dismissed,shouldShowAutomatically:!c.completed&&!c.dismissed}}({steps:O,enabled:!0}),[G,V]=(0,a.useState)(""),[K,Y]=(0,a.useState)([]),[U,Z]=(0,a.useState)([]),[J,Q]=(0,a.useState)([]),[q,X]=(0,a.useState)([]),[ee,et]=(0,a.useState)([]),[ea,er]=(0,a.useState)([]),[es,el]=(0,a.useState)([]),[eo,en]=(0,a.useState)([]),[ei,ec]=(0,a.useState)([]),[ed,eu]=(0,a.useState)([]),[em,eh]=(0,a.useState)([]),[ex,ep]=(0,a.useState)("name"),[eg,eb]=(0,a.useState)("asc"),[ef,ej]=(0,a.useState)(1),[ev,ey]=(0,a.useState)(20);(0,a.useEffect)(()=>{try{let e=localStorage.getItem(E.CHARACTER_EDITOR_STORAGE_KEY_SORT_FIELD),t=localStorage.getItem(E.CHARACTER_EDITOR_STORAGE_KEY_SORT_DIRECTION),a=localStorage.getItem(E.CHARACTER_EDITOR_STORAGE_KEY_PAGE_SIZE);e&&ep(e),t&&eb(t),a&&ey(function(e){if(!e)return 20;if("all"===e)return"all";let t=parseInt(e,10);return y.includes(t)?t:20}(a))}catch{}},[]);let eC=(0,a.useMemo)(()=>(function(e){let t=new Set;for(let a of e)a.metadata.manufacturer&&t.add(a.metadata.manufacturer);return Array.from(t).sort()})(b),[b]),ek=(0,a.useMemo)(()=>v(b,q),[b,q]),ew=(0,a.useMemo)(()=>(function(e){let t=new Set;for(let a of e)a.metadata.chip&&t.add(a.metadata.chip);return Array.from(t).sort()})(b),[b]),eN=(0,a.useMemo)(()=>(function(e){let t=new Set;for(let a of e)a.metadata.locale&&t.add(a.metadata.locale);return Array.from(t).sort()})(b),[b]),eS=(0,a.useMemo)(()=>(function(e){let t=new Set;for(let a of e)t.add((0,j.getCharacterCount)(a));return Array.from(t).sort((e,t)=>e-t)})(b),[b]),eL=(0,a.useMemo)(()=>(function(e){let t=new Set;for(let a of e)for(let e of a.metadata.tags??[])t.add(e);return Array.from(t).sort()})(b),[b]),eA=(0,a.useMemo)(()=>(function(e){let t=new Set;for(let a of e)a.metadata.source&&t.add(a.metadata.source);return Array.from(t).sort()})(b),[b]),eM=(0,a.useMemo)(()=>(function(e){let t=new Set;for(let a of e)a.metadata.isBuiltIn?t.add("built-in"):t.add(a.metadata.origin??"created");return Array.from(t).sort()})(b),[b]),[eF,eT]=(0,a.useState)(null),[eE,eR]=(0,a.useState)(!1),[eI,eP]=(0,a.useState)(null),[eO,eD]=(0,a.useState)(""),[eB,e_]=(0,a.useState)(!1),[ez,eH]=(0,a.useState)(null),eW=(0,a.useMemo)(()=>({searchQuery:G,widthFilters:K,heightFilters:U,characterCountFilters:J,manufacturerFilters:q,systemFilters:ee,chipFilters:ea,localeFilters:es,tagFilters:eo,sourceFilters:ei,isPinnedFilters:ed,originFilters:em}),[G,K,U,J,q,ee,ea,es,eo,ei,ed,em]),e$=(0,a.useMemo)(()=>{var e;return e=b.filter(e=>{var t,a,r,s,l,o,n,i;return function(e,t){if(!t.trim())return!0;let a=t.toLowerCase(),r=(e.metadata.tags??[]).some(e=>e.toLowerCase().includes(a)),s=(e.metadata.notes??[]).some(e=>e.text.toLowerCase().includes(a)),l=e.metadata.isBuiltIn?["built-in","builtin","built in"].some(e=>e.includes(a)||a.includes(e)):["user","custom","user-created"].some(e=>e.includes(a)||a.includes(e));return e.metadata.name.toLowerCase().includes(a)||e.metadata.description.toLowerCase().includes(a)||e.metadata.source.toLowerCase().includes(a)||(e.metadata.manufacturer?.toLowerCase().includes(a)??!1)||(e.metadata.system?.toLowerCase().includes(a)??!1)||(e.metadata.chip?.toLowerCase().includes(a)??!1)||(e.metadata.locale?.toLowerCase().includes(a)??!1)||r||s||l}(e,eW.searchQuery)&&(t=eW.widthFilters,a=eW.heightFilters,(!(t.length>0)||!!t.includes(e.config.width))&&(!(a.length>0)||!!a.includes(e.config.height)))&&(0===(r=eW.manufacturerFilters).length||!!e.metadata.manufacturer&&r.includes(e.metadata.manufacturer))&&(0===(s=eW.systemFilters).length||!!e.metadata.system&&s.includes(e.metadata.system))&&(0===(l=eW.chipFilters).length||!!e.metadata.chip&&l.includes(e.metadata.chip))&&(0===(o=eW.localeFilters).length||!!e.metadata.locale&&o.includes(e.metadata.locale))&&(0===(n=eW.characterCountFilters).length||n.includes((0,j.getCharacterCount)(e)))&&function(e,t){if(0===t.length)return!0;let a=e.metadata.tags??[];return t.some(e=>a.includes(e))}(e,eW.tagFilters)&&(0===(i=eW.sourceFilters).length||!!e.metadata.source&&i.includes(e.metadata.source))&&function(e,t){if(0===t.length)return!0;let a=e.metadata.isPinned??!1;return t.some(e=>"pinned"===e?!0===a:"not-pinned"===e&&!1===a)}(e,eW.isPinnedFilters)&&function(e,t){if(0===t.length)return!0;if(e.metadata.isBuiltIn)return t.includes("built-in");let a=e.metadata.origin??"created";return t.includes(a)}(e,eW.originFilters)}),[...e].sort((e,t)=>{let a=+!!e.metadata.isPinned,r=+!!t.metadata.isPinned;if(a!==r)return r-a;let s=function(e,t,a){switch(a){case"name":return e.metadata.name.localeCompare(t.metadata.name);case"description":return(e.metadata.description||"").localeCompare(t.metadata.description||"");case"source":return(e.metadata.source||"").localeCompare(t.metadata.source||"");case"updatedAt":return e.metadata.updatedAt-t.metadata.updatedAt;case"createdAt":return e.metadata.createdAt-t.metadata.createdAt;case"width":return e.config.width-t.config.width;case"height":return e.config.height-t.config.height;case"size":return e.config.width*e.config.height-t.config.width*t.config.height;case"characters":return(0,j.getCharacterCount)(e)-(0,j.getCharacterCount)(t);case"manufacturer":return(e.metadata.manufacturer||"").localeCompare(t.metadata.manufacturer||"");case"system":return(e.metadata.system||"").localeCompare(t.metadata.system||"");case"chip":return(e.metadata.chip||"").localeCompare(t.metadata.chip||"");case"locale":return(e.metadata.locale||"").localeCompare(t.metadata.locale||"");default:return 0}}(e,t,ex);return"asc"===eg?s:-s})},[b,eW,ex,eg]),eG=(0,a.useMemo)(()=>(function(e,t,a){let r=e.length;if("all"===a)return{items:e,totalItems:r,totalPages:1,currentPage:1,pageSize:a,hasNextPage:!1,hasPreviousPage:!1};let s=Math.max(1,Math.ceil(r/a)),l=Math.max(1,Math.min(t,s)),o=(l-1)*a;return{items:e.slice(o,o+a),totalItems:r,totalPages:s,currentPage:l,pageSize:a,hasNextPage:l<s,hasPreviousPage:l>1}})(e$,ef,ev),[e$,ef,ev]);(0,a.useEffect)(()=>{ej(1)},[eW]);let eV=(0,a.useCallback)(t=>{e.push(`/tools/character-rom-editor/edit?id=${t}`)},[e]),eK=(0,a.useCallback)(t=>{e.push(`/tools/character-rom-editor/export?id=${t}`)},[e]),eY=(0,a.useCallback)(async e=>{eT(e)},[]),eU=(0,a.useCallback)(async()=>{if(eF)try{eR(!0),await w(eF),d.success("Character set deleted")}catch(e){console.error("Failed to delete:",e),d.error("Failed to delete character set")}finally{eR(!1),eT(null)}},[eF,w,d]),eZ=(0,a.useCallback)(async t=>{try{let a=await W(t);if(a){let t=`${a.metadata.name} (Copy)`,r=await S(a,t);d.success("Character set duplicated"),e.push(`/tools/character-rom-editor/edit?id=${r}`)}}catch(e){console.error("Failed to duplicate:",e),d.error("Failed to duplicate character set")}},[W,S,e,d]),eJ=(0,a.useCallback)(()=>{e.push("/tools/character-rom-editor/import")},[e]),eQ=(0,a.useCallback)(()=>{e.push("/tools/character-rom-editor/add")},[e]),eq=(0,a.useCallback)(e=>{let t=b.find(t=>t.metadata.id===e);t&&(eP(e),eD(t.metadata.name))},[b]),eX=(0,a.useCallback)(async e=>{try{await z(e)}catch(e){console.error("Failed to toggle pinned:",e)}},[z]),e0=(0,a.useCallback)(e=>{eH(e)},[]),e2=(0,a.useCallback)(async e=>{if(ez)try{await _(ez,e),d.success("Metadata updated")}catch(e){console.error("Failed to update metadata:",e),d.error("Failed to update metadata")}},[ez,_,d]),e1=(0,a.useCallback)(async()=>{if(eI&&eO.trim())try{e_(!0),await D(eI,eO.trim()),d.success("Character set renamed")}catch(e){console.error("Failed to rename:",e),d.error("Failed to rename character set")}finally{e_(!1),eP(null),eD("")}},[eI,eO,D,d]),e4=(0,a.useCallback)((e,t)=>{Y(e),Z(t)},[]),e3=(0,a.useCallback)(e=>{X(e),e.length>0&&et(t=>(function(e,t,a){if(0===a.length)return e;let r=function(e,t){if(0===t.length)return new Set(v(e));let a=new Set;for(let r of e)r.metadata.manufacturer&&t.includes(r.metadata.manufacturer)&&r.metadata.system&&a.add(r.metadata.system);return a}(t,a);return e.filter(e=>r.has(e))})(t,b,e))},[b]),e9=(0,a.useCallback)(e=>{et(e)},[]),e5=(0,a.useCallback)(e=>{er(e)},[]),e7=(0,a.useCallback)(e=>{el(e)},[]),e6=(0,a.useCallback)(e=>{Q(e)},[]),e8=(0,a.useCallback)(e=>{en(e)},[]),te=(0,a.useCallback)(e=>{ec(e)},[]),tt=(0,a.useCallback)(e=>{eu(e)},[]),ta=(0,a.useCallback)(e=>{eh(e)},[]),tr=(0,a.useCallback)(e=>{ep(e);try{localStorage.setItem(E.CHARACTER_EDITOR_STORAGE_KEY_SORT_FIELD,e)}catch{}},[]),ts=(0,a.useCallback)(()=>{eb(e=>{let t="asc"===e?"desc":"asc";try{localStorage.setItem(E.CHARACTER_EDITOR_STORAGE_KEY_SORT_DIRECTION,t)}catch{}return t})},[]),tl=(0,a.useCallback)(e=>{ey(e),ej(1);try{localStorage.setItem(E.CHARACTER_EDITOR_STORAGE_KEY_PAGE_SIZE,String(e))}catch{}},[]),to=(0,a.useCallback)(e=>{ej(e)},[]),tn=(0,a.useCallback)(()=>{V(""),Y([]),Z([]),Q([]),X([]),et([]),er([]),el([]),en([]),ec([]),eu([]),eh([])},[]),ti=eW.searchQuery.length>0||eW.widthFilters.length>0||eW.heightFilters.length>0||eW.characterCountFilters.length>0||eW.manufacturerFilters.length>0||eW.systemFilters.length>0||eW.chipFilters.length>0||eW.localeFilters.length>0||eW.tagFilters.length>0||eW.sourceFilters.length>0||eW.isPinnedFilters.length>0||eW.originFilters.length>0,tc=eF?b.find(e=>e.metadata.id===eF):null,td=eI?b.find(e=>e.metadata.id===eI):null,tu=ez?b.find(e=>e.metadata.id===ez):null;return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col safe-top",children:[(0,t.jsx)(l.Header,{}),(0,t.jsx)("main",{className:"flex-1 bg-retro-dark pt-24 pb-12",children:(0,t.jsxs)(n.Container,{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(s.default,{href:"/tools",className:"text-xs text-gray-500 hover:text-retro-cyan transition-colors mb-2 inline-flex items-center gap-1",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Tools"]}),(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-display",children:(0,t.jsx)(c.NeonText,{color:"pink",children:"Character ROM Editor"})}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Design, edit, and export character sets for vintage computer systems"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[$.hasCompleted||$.hasDismissed?(0,t.jsx)(A.Tooltip,{content:"Restart onboarding tour",position:"bottom",children:(0,t.jsxs)("button",{onClick:$.start,className:"text-xs text-gray-500 hover:text-retro-cyan transition-colors flex items-center mr-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4 min-[1120px]:mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("span",{className:"hidden min-[1120px]:inline",children:"Tour"})]})}):null,(0,t.jsx)(A.Tooltip,{content:"Create a new character set from scratch",position:"bottom",children:(0,t.jsxs)(i.Button,{href:"/tools/character-rom-editor/add",variant:"pink",children:[(0,t.jsx)("svg",{className:"w-4 h-4 min-[1120px]:mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,t.jsx)("span",{className:"hidden min-[1120px]:inline",children:"Add ROM"})]})}),(0,t.jsx)(A.Tooltip,{content:"Import from binary, image, font, or code",position:"bottom",children:(0,t.jsxs)(i.Button,{href:"/tools/character-rom-editor/import",variant:"cyan",children:[(0,t.jsx)("svg",{className:"w-4 h-4 min-[1120px]:mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,t.jsx)("span",{className:"hidden min-[1120px]:inline",children:"Import ROM"})]})})]})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(N,{searchQuery:G,onSearchChange:V,availableSizes:H,widthFilters:K,heightFilters:U,onSizeFilterChange:e4,availableCharacterCounts:eS,characterCountFilters:J,onCharacterCountFilterChange:e6,availableManufacturers:eC,availableSystems:ek,manufacturerFilters:q,systemFilters:ee,onManufacturerFilterChange:e3,onSystemFilterChange:e9,availableChips:ew,chipFilters:ea,onChipFilterChange:e5,availableLocales:eN,localeFilters:es,onLocaleFilterChange:e7,availableTags:eL,tagFilters:eo,onTagFilterChange:e8,availableSources:eA,sourceFilters:ei,onSourceFilterChange:te,isPinnedFilters:ed,onIsPinnedFiltersChange:tt,availableOrigins:eM,originFilters:em,onOriginFilterChange:ta,sortField:ex,sortDirection:eg,onSortFieldChange:tr,onSortDirectionToggle:ts,totalCount:b.length,filteredCount:e$.length,pagination:eG,onPageSizeChange:tl,onPageChange:to})}),C?(0,t.jsx)(x,{error:C,onRetry:k}):ti&&0===e$.length?(0,t.jsx)(h,{onClearFilters:tn}):(0,t.jsx)(u,{characterSets:eG.items,loading:f,onEdit:eV,onExport:eK,onDelete:eY,onDuplicate:eZ,onRename:eq,onEditMetadata:e0,onTogglePinned:eX,onImport:eJ,onCreate:eQ})]})}),(0,t.jsx)(o.Footer,{}),eF&&tc&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>eT(null)}),(0,t.jsxs)("div",{className:"relative bg-retro-navy border border-retro-grid/50 rounded-lg p-6 max-w-md w-full shadow-xl",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-200 mb-2",children:"Delete Character Set"}),(0,t.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:['Are you sure you want to delete "',tc.metadata.name,'"? This action cannot be undone.']}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>eT(null),className:"px-4 py-2 text-sm text-gray-400 hover:text-gray-200 transition-colors",disabled:eE,children:"Cancel"}),(0,t.jsx)("button",{onClick:eU,className:"px-4 py-2 text-sm bg-red-500/20 text-red-400 rounded hover:bg-red-500/30 transition-colors disabled:opacity-50",disabled:eE,children:eE?"Deleting...":"Delete"})]})]})]}),eI&&td&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>{eP(null),eD("")}}),(0,t.jsxs)("div",{className:"relative bg-retro-navy border border-retro-grid/50 rounded-lg p-6 max-w-md w-full shadow-xl",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-200 mb-4",children:"Rename Character Set"}),(0,t.jsx)("input",{type:"text",value:eO,onChange:e=>eD(e.target.value),onKeyDown:e=>{"Enter"===e.key&&eO.trim()?e1():"Escape"===e.key&&(eP(null),eD(""))},className:"w-full px-3 py-2 bg-retro-dark border border-retro-grid/50 rounded text-gray-200 text-sm focus:outline-none focus:border-retro-cyan transition-colors",placeholder:"Enter new name...",autoFocus:!0,disabled:eB}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,t.jsx)("button",{onClick:()=>{eP(null),eD("")},className:"px-4 py-2 text-sm text-gray-400 hover:text-gray-200 transition-colors",disabled:eB,children:"Cancel"}),(0,t.jsx)("button",{onClick:e1,className:"px-4 py-2 text-sm bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors disabled:opacity-50",disabled:eB||!eO.trim(),children:eB?"Renaming...":"Rename"})]})]})]}),tu&&(0,t.jsx)(p.MetadataEditModal,{isOpen:!!ez,onClose:()=>eH(null),metadata:tu.metadata,onSave:e2}),(0,t.jsx)(L,{isActive:$.isActive,currentStep:$.currentStepData,stepIndex:$.currentStep,totalSteps:$.totalSteps,isFirstStep:$.isFirstStep,isLastStep:$.isLastStep,onNext:$.next,onPrev:$.prev,onSkip:$.skip}),(0,t.jsx)(B,{isOpen:m,errorMessage:g})]})}e.s(["CharacterEditorLibrary",()=>_],80710)}]);