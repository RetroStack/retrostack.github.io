(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38749,e=>{"use strict";var t=e.i(43476);function r({checked:e,onChange:r,id:n,disabled:i=!1,className:s=""}){return(0,t.jsx)("button",{type:"button",id:n,role:"switch","aria-checked":e,disabled:i,onClick:()=>r(!e),className:`
        relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full
        border-2 transition-colors duration-200 ease-in-out
        focus:outline-none focus:ring-2 focus:ring-retro-cyan focus:ring-offset-2 focus:ring-offset-retro-dark
        ${e?"bg-retro-pink border-retro-pink":"bg-retro-purple/50 border-retro-purple"}
        ${i?"opacity-50 cursor-not-allowed":""}
        ${s}
      `,children:(0,t.jsx)("span",{className:`
          pointer-events-none inline-block h-5 w-5 transform rounded-full
          shadow ring-0 transition duration-200 ease-in-out
          ${e?"translate-x-5 bg-white":"translate-x-0 bg-gray-400"}
        `})})}e.s(["ToggleSwitch",()=>r])},47509,e=>{"use strict";let t=[{width:5,height:7,label:"5x7",examples:["Apple II","TRS-80 CoCo","Dragon 32","MC6847"],recommendedFontSize:6,priority:3},{width:5,height:8,label:"5x8",examples:["TRS-80 Model I","MCM6673"],recommendedFontSize:7,priority:2},{width:5,height:9,label:"5x9",examples:["BBC Micro Mode 7","Philips P2000","SAA5050 Teletext"],recommendedFontSize:8,priority:2},{width:6,height:8,label:"6x8",examples:["Custom"],recommendedFontSize:7,priority:0},{width:8,height:8,label:"8x8",examples:["C64","VIC-20","Atari 400/800","ZX Spectrum","TI-99/4A","MSX","ColecoVision"],recommendedFontSize:8,priority:3},{width:5,height:10,label:"5x10",examples:["HD44780U LCD"],recommendedFontSize:9,priority:1},{width:6,height:10,label:"6x10",examples:[],recommendedFontSize:9,priority:0},{width:5,height:12,label:"5x12",examples:[],recommendedFontSize:10,priority:0},{width:7,height:12,label:"7x12",examples:[],recommendedFontSize:11,priority:0},{width:8,height:12,label:"8x12",examples:["EGA 43-line mode"],recommendedFontSize:11,priority:0},{width:8,height:14,label:"8x14",examples:["IBM EGA","VGA 25-line"],recommendedFontSize:13,priority:1},{width:5,height:16,label:"5x16",examples:[],recommendedFontSize:14,priority:0},{width:8,height:16,label:"8x16",examples:["IBM VGA","PC BIOS"],recommendedFontSize:14,priority:2},{width:16,height:16,label:"16x16",examples:["CJK Characters","Icons"],recommendedFontSize:14,priority:1},{width:32,height:32,label:"32x32",examples:["Large Icons","Sprites"],recommendedFontSize:28,priority:0}];t.find(e=>"8x8"===e.label),t.find(e=>"8x16"===e.label),t.find(e=>"5x7"===e.label),t.find(e=>"8x8"===e.label),t.find(e=>"8x16"===e.label),t.find(e=>"6x8"===e.label),t.find(e=>"16x16"===e.label);let r=[{position:"tl",label:"Top Left",shortLabel:"TL"},{position:"tc",label:"Top Center",shortLabel:"TC"},{position:"tr",label:"Top Right",shortLabel:"TR"},{position:"ml",label:"Middle Left",shortLabel:"ML"},{position:"mc",label:"Middle Center",shortLabel:"MC"},{position:"mr",label:"Middle Right",shortLabel:"MR"},{position:"bl",label:"Bottom Left",shortLabel:"BL"},{position:"bc",label:"Bottom Center",shortLabel:"BC"},{position:"br",label:"Bottom Right",shortLabel:"BR"}];function n(){return r.map(e=>e.position)}function i(e){let t=r.find(t=>t.position===e);return t?.label??e}e.s(["CHARACTER_RANGE_PRESETS",0,[{name:"Printable ASCII",startCode:32,endCode:126,count:95,description:"Space through tilde (~)"},{name:"Extended ASCII",startCode:32,endCode:255,count:224,description:"Includes accented characters"},{name:"Uppercase Only",startCode:65,endCode:90,count:26,description:"A-Z"},{name:"Lowercase Only",startCode:97,endCode:122,count:26,description:"a-z"},{name:"Digits Only",startCode:48,endCode:57,count:10,description:"0-9"},{name:"Full 256",startCode:0,endCode:255,count:256,description:"All 256 codes with blanks"}],"UNIFIED_CHARACTER_COUNT_PRESETS",0,[{count:64,label:"64",examples:["Apple II","TRS-80 CoCo","Dragon 32","MC6847"],description:"Quarter ROM",priority:2},{count:96,label:"96",examples:["ZX Spectrum","BBC Micro Mode 7","SAA5050"],description:"Printable ASCII / Teletext",priority:2},{count:128,label:"128",examples:["Atari 400/800","TRS-80 Model I"],description:"Half ROM",priority:3},{count:213,label:"213",examples:["Intellivision GROM"],description:"Intellivision",priority:1},{count:256,label:"256",examples:["C64","VIC-20","TI-99/4A","MSX","ColecoVision"],description:"Full Set",priority:3},{count:512,label:"512",examples:["Extended ROM"],description:"Extended",priority:0}],"UNIFIED_DIMENSION_PRESETS",0,t,"getAnchorPositionLabel",()=>i,"getAnchorPositions",()=>n])},7506,e=>{"use strict";var t=e.i(71645);function r(e){let r=(0,t.useRef)(null),[n,i]=(0,t.useState)({width:0,height:0}),s=(0,t.useCallback)(t=>{i(t),e?.(t)},[e]);return(0,t.useEffect)(()=>{let e=r.current;if(e){let t,r;return(t=new ResizeObserver(e=>{for(let t of e){let{width:e,height:r}=t.contentRect;s({width:e,height:r})}})).observe(e),s({width:(r=e.getBoundingClientRect()).width,height:r.height}),()=>t.disconnect()}},[s]),{ref:r,size:n}}e.s(["useResizeObserver",()=>r])},92921,e=>{"use strict";function t(e){return e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`}function r(e){return`${e.width}x${e.height}`}function n(e){let t=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");return`${t||"charset"}.bin`}function i(e){let t=e.name.toLowerCase().substring(e.name.lastIndexOf("."));return[".bin",".rom",".chr",".fnt",".dat"].includes(t)||!t||t===e.name.toLowerCase()}function s(e,t){return Math.floor(e/(Math.ceil(t.width/8)*t.height))}function o(e){let t=new Date(e),r=Math.floor((new Date().getTime()-e)/864e5);return 0===r?"Today":1===r?"Yesterday":r<7?`${r} days ago`:t.toLocaleDateString()}function l(e,t){if(e.pixels.length!==t.pixels.length)return!1;if(0===e.pixels.length)return!0;if(e.pixels[0].length!==t.pixels[0].length)return!1;for(let r=0;r<e.pixels.length;r++)for(let n=0;n<e.pixels[0].length;n++)if(e.pixels[r][n]!==t.pixels[r][n])return!1;return!0}function a(e,t){let r=new Set,n=Math.max(e.length,t.length);for(let i=0;i<n;i++)i>=e.length||i>=t.length?r.add(i):l(e[i],t[i])||r.add(i);return r}function c(e,t){let r=new Set,n=Math.max(e.pixels.length,t.pixels.length),i=Math.max(e.pixels[0]?.length||0,t.pixels[0]?.length||0);for(let s=0;s<n;s++)for(let n=0;n<i;n++)(e.pixels[s]?.[n]??!1)!==(t.pixels[s]?.[n]??!1)&&r.add(`${s},${n}`);return r}e.s(["areCharactersEqual",()=>l,"calculateCharacterCount",()=>s,"findChangedCharacterIndices",()=>a,"findDifferingPixels",()=>c,"formatFileSize",()=>t,"formatSize",()=>r,"formatTimestamp",()=>o,"getSuggestedFilename",()=>n,"isValidBinaryFile",()=>i])},76849,72547,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(19208),i=e.i(22016),s=e.i(7540);function o({items:e,trigger:r,align:n="right",className:o="",label:l="More options"}){let{ref:a,isOpen:c,toggle:d,close:u}=(0,s.useDropdown)(),h=e=>{e.disabled||(e.onClick?.(),u())};return 0===e.length?null:(0,t.jsxs)("div",{ref:a,className:`relative ${o}`,children:[(0,t.jsx)("button",{onClick:d,className:"touch-target flex items-center justify-center p-2 text-gray-400 hover:text-white bg-retro-dark/50 hover:bg-retro-dark rounded-md transition-colors","aria-label":l,"aria-expanded":c,"aria-haspopup":"menu",children:r||(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),c&&(0,t.jsx)("div",{className:`absolute top-full mt-2 z-50 min-w-[180px] bg-retro-navy/95 backdrop-blur-md border border-retro-grid/50 rounded-lg py-1 shadow-xl shadow-black/50 ${"right"===n?"right-0":"left-0"}`,role:"menu","aria-orientation":"vertical",children:e.map(e=>{let r=`
              w-full flex items-center gap-3 px-4 py-3 text-sm text-left
              transition-colors touch-target
              ${e.disabled?"text-gray-500 cursor-not-allowed":"danger"===e.variant?"text-red-400 hover:bg-red-500/20 hover:text-red-300":"text-gray-200 hover:bg-retro-purple/40 hover:text-retro-cyan"}
            `;return e.href&&!e.disabled?(0,t.jsxs)(i.default,{href:e.href,className:r,role:"menuitem",onClick:u,children:[e.icon&&(0,t.jsx)("span",{className:"w-5 h-5 flex-shrink-0",children:e.icon}),(0,t.jsx)("span",{children:e.label})]},e.id):(0,t.jsxs)("button",{className:r,role:"menuitem",disabled:e.disabled,onClick:()=>h(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),h(e))},children:[e.icon&&(0,t.jsx)("span",{className:"w-5 h-5 flex-shrink-0",children:e.icon}),(0,t.jsx)("span",{children:e.label})]},e.id)})})]})}e.s(["OverflowMenu",()=>o],72547);var l=e.i(74080),a=e.i(32098),c=e.i(92921);function d({isOpen:e,onClose:r,notes:n,characterSetName:i}){if("undefined"==typeof document||!e)return null;let s=(0,t.jsxs)(a.Modal,{isOpen:e,onClose:r,size:"md",maxHeight:"70vh",children:[(0,t.jsx)(a.ModalHeader,{onClose:r,showCloseButton:!0,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-white",children:"Notes"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[n.length," note",1!==n.length?"s":""," for ",i]})]})}),(0,t.jsx)(a.ModalContent,{className:"p-4",children:0===n.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("svg",{className:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),(0,t.jsx)("p",{className:"text-sm",children:"No notes"})]}):(0,t.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,t.jsxs)("div",{className:"p-3 rounded border bg-retro-dark/30 border-retro-grid/30",children:[(0,t.jsx)("p",{className:"text-sm text-gray-200 whitespace-pre-wrap",children:e.text}),(0,t.jsxs)("div",{className:"mt-2 pt-2 border-t border-retro-grid/20 text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["Created ",(0,c.formatTimestamp)(e.createdAt)]}),e.updatedAt!==e.createdAt&&(0,t.jsxs)("span",{className:"ml-2",children:["(edited ",(0,c.formatTimestamp)(e.updatedAt),")"]})]})]},e.id))})})]});return(0,l.createPortal)(s,document.body)}var u=e.i(94136);function h({characterSet:e,onEdit:i,onExport:s,onDelete:l,onDuplicate:a,onRename:h,onEditMetadata:m,onTogglePinned:f}){let{metadata:p,config:x}=e,g=(0,r.useMemo)(()=>{try{return(0,u.deserializeCharacterSet)(e).characters}catch{return[]}},[e]),b=g.length,[v,y]=(0,r.useState)(!1),C=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),w=(0,r.useMemo)(()=>{let e=[];return f&&e.push({id:"pin",label:p.isPinned?"Unpin":"Pin to top",onClick:f}),i&&e.push({id:"edit",label:"Edit",onClick:i}),h&&!p.isBuiltIn&&e.push({id:"rename",label:"Rename",onClick:h}),m&&!p.isBuiltIn&&e.push({id:"edit-metadata",label:"Edit Metadata",onClick:m}),s&&e.push({id:"export",label:"Export",onClick:s}),a&&e.push({id:"duplicate",label:"Duplicate",onClick:a}),l&&!p.isBuiltIn&&e.push({id:"delete",label:"Delete",onClick:l,variant:"danger"}),e},[i,h,m,s,a,l,f,p.isBuiltIn,p.isPinned]);return(0,t.jsxs)("div",{className:`card-retro p-4 flex flex-col gap-3 hover-glow-cyan transition-all h-full relative has-[[aria-expanded=true]]:z-50 ${p.isPinned?"ring-1 ring-retro-yellow/50":""}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-retro-cyan truncate flex items-center gap-1.5",children:[p.isPinned&&(0,t.jsx)("svg",{className:"w-3.5 h-3.5 text-retro-yellow flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2z"})}),p.notes&&p.notes.length>0&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),y(!0)},className:"flex items-center gap-0.5 text-retro-amber flex-shrink-0 hover:text-retro-amber/80 transition-colors",title:`${p.notes.length} note${1!==p.notes.length?"s":""} - Click to view`,children:(0,t.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),p.name]}),(p.manufacturer||p.system||p.chip||p.locale)&&(0,t.jsxs)("p",{className:"text-[10px] text-gray-500 mt-0.5",children:[p.manufacturer,p.manufacturer&&p.system?" ":"",p.system,p.chip&&(p.manufacturer||p.system)?" · ":"",p.chip,p.locale&&(p.manufacturer||p.system||p.chip)?" · ":"",p.locale]}),p.description&&(0,t.jsx)("p",{className:"text-xs text-gray-400 line-clamp-2 mt-0.5",children:p.description}),p.tags&&p.tags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:p.tags.map((e,r)=>(0,t.jsx)("span",{className:"px-1.5 py-0.5 bg-retro-amber/15 text-retro-amber/80 rounded text-[10px]",children:e},`tag-${r}`))})]}),(0,t.jsx)("div",{className:"flex-shrink-0",children:w.length>0&&(0,t.jsx)(o,{items:w,align:"right",label:"Character set actions"})})]}),(0,t.jsx)("div",{className:"flex justify-center py-2 bg-black/30 rounded mt-auto",children:(0,t.jsx)(n.CharacterPreview,{characters:g,config:x,maxCharacters:512,maxWidth:256,maxHeight:4096})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 pt-2 border-t border-retro-grid/30 text-[10px]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"px-1.5 py-0.5 bg-retro-purple/30 text-retro-pink rounded",children:(0,c.formatSize)(x)}),(0,t.jsxs)("span",{className:"text-gray-500",children:[b," char",1!==b?"s":""]}),p.isBuiltIn&&(0,t.jsx)("span",{className:"px-1.5 py-0.5 bg-retro-navy text-gray-400 rounded",children:"Built-in"})]}),i&&(0,t.jsx)("button",{onClick:i,className:"px-2 py-1 text-xs bg-retro-amber/20 text-retro-amber rounded transition-all shadow-[0_0_8px_rgba(255,184,0,0.25)] hover:bg-retro-amber hover:text-retro-dark hover:shadow-[0_0_8px_var(--retro-amber),0_0_15px_var(--retro-amber),0_0_30px_var(--retro-amber)]",children:"Edit"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-gray-500",children:[(0,t.jsxs)("span",{title:"Date created",children:[(0,t.jsx)("span",{className:"text-[8px] text-gray-600",children:"Created:"})," ",C(p.createdAt)]}),(0,t.jsxs)("span",{title:"Date modified",children:[(0,t.jsx)("span",{className:"text-[8px] text-gray-600",children:"Modified:"})," ",C(p.updatedAt)]})]})]}),(0,t.jsx)(d,{isOpen:v,onClose:()=>y(!1),notes:p.notes??[],characterSetName:p.name})]})}function m({characterSet:e,selected:i=!1,onClick:s}){let{metadata:o,config:l}=e,a=(0,r.useMemo)(()=>{try{return(0,u.deserializeCharacterSet)(e).characters}catch{return[]}},[e]);return(0,t.jsx)("button",{onClick:s,className:`
        w-full p-3 rounded border text-left transition-all
        ${i?"border-retro-cyan bg-retro-cyan/10":"border-retro-grid/30 bg-retro-navy/30 hover:border-retro-grid/50"}
      `,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0 bg-black/30 p-1 rounded",children:(0,t.jsx)(n.CharacterPreview,{characters:a,config:l,maxCharacters:8,maxWidth:48,maxHeight:24})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-200 truncate",children:o.name}),(0,t.jsxs)("div",{className:"text-[10px] text-gray-500",children:[(0,c.formatSize)(l)," - ",a.length," chars"]})]}),i&&(0,t.jsx)("svg",{className:"w-4 h-4 text-retro-cyan flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})})]})})}function f({onImport:e,onCreate:r}){return(0,t.jsxs)("div",{className:"card-retro p-6 flex flex-col items-center justify-center gap-4 border-dashed",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-retro-cyan/20 flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-retro-cyan",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-gray-300",children:"Add a character set"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Import a ROM file or create from scratch"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[r&&(0,t.jsxs)("button",{onClick:r,className:"px-3 py-1.5 text-xs bg-retro-pink/20 text-retro-pink rounded hover:bg-retro-pink/30 transition-colors flex items-center gap-1",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]}),e&&(0,t.jsxs)("button",{onClick:e,className:"px-3 py-1.5 text-xs bg-retro-cyan/20 text-retro-cyan rounded hover:bg-retro-cyan/30 transition-colors flex items-center gap-1",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import"]})]})]})}e.s(["LibraryCard",()=>h,"LibraryCardCompact",()=>m,"LibraryCardEmpty",()=>f],76849)},20371,e=>{"use strict";var t=e.i(33712);function r(e,t){let r=e.pixels.length,n=e.pixels[0]?.length||0,i=[];for(let s=0;s<r;s++){let o=[];for(let i=0;i<n;i++){let l,a;"right"===t?(l=n-1-i,a=s):(l=i,a=r-1-s),l>=0&&l<r&&a>=0&&a<n?o.push(e.pixels[l]?.[a]||!1):o.push(!1)}i.push(o)}return{pixels:i}}function n(e,t,r=!0){let i=e.pixels.length,s=e.pixels[0]?.length||0,o=[];for(let n=0;n<i;n++){let l=[];for(let o=0;o<s;o++){let a=n,c=o;switch(t){case"up":if((a=n+1)>=i&&(a=r?0:i-1,!r)){l.push(!1);continue}break;case"down":if((a=n-1)<0&&(a=r?i-1:0,!r)){l.push(!1);continue}break;case"left":if((c=o+1)>=s&&(c=r?0:s-1,!r)){l.push(!1);continue}break;case"right":if((c=o-1)<0&&(c=r?s-1:0,!r)){l.push(!1);continue}}l.push(e.pixels[a]?.[c]||!1)}o.push(l)}return{pixels:o}}function i(e,t,r,n){let i=e.pixels.length,s=e.pixels[0]?.length||0,o=0,l=0;n.endsWith("l")?o=0:n.endsWith("c")?o=Math.floor((t-s)/2):n.endsWith("r")&&(o=t-s),n.startsWith("t")?l=0:n.startsWith("m")?l=Math.floor((r-i)/2):n.startsWith("b")&&(l=r-i);let a=[];for(let n=0;n<r;n++){let r=[];for(let a=0;a<t;a++){let t=n-l,c=a-o;t>=0&&t<i&&c>=0&&c<s?r.push(e.pixels[t][c]):r.push(!1)}a.push(r)}return{pixels:a}}function s(e){return{pixels:e.pixels.map(e=>e.map(e=>!e))}}function o(e){return{pixels:e.pixels.map(e=>[...e].reverse())}}function l(e){return{pixels:[...e.pixels].reverse().map(e=>[...e])}}function a(e,r){return(0,t.createEmptyCharacter)(e,r)}function c(e,t){let r=[];for(let n=0;n<t;n++)r.push(Array(e).fill(!0));return{pixels:r}}function d(e,t,r){return{pixels:e.pixels.map((e,n)=>n===t?e.map((e,t)=>t===r?!e:e):[...e])}}function u(e,t,r,n){return{pixels:e.pixels.map((e,i)=>i===t?e.map((e,t)=>t===r?n:e):[...e])}}function h(e,t,r){return e.map((e,n)=>t.has(n)?r(e):e)}function m(e,t,r,n){let i=Array.from(t).map(t=>e[t]);if(0===i.length)return"same-off";let s=i[0]?.pixels[r]?.[n]||!1;for(let e=1;e<i.length;e++)if((i[e]?.pixels[r]?.[n]||!1)!==s)return"mixed";return s?"same-on":"same-off"}function f(e,t,r,n){let i="same-on"!==m(e,t,r,n);return e.map((e,s)=>t.has(s)?u(e,r,n,i):e)}function p(e){let t=e.pixels.length,r=e.pixels[0]?.length||0,n=t,i=-1,s=r,o=-1;for(let l=0;l<t;l++)for(let t=0;t<r;t++)e.pixels[l][t]&&(n=Math.min(n,l),i=Math.max(i,l),s=Math.min(s,t),o=Math.max(o,t));return -1===i?null:{minRow:n,maxRow:i,minCol:s,maxCol:o}}function x(e){let t=e.pixels.length,r=e.pixels[0]?.length||0,n=p(e);if(!n)return e;let i=n.maxCol-n.minCol+1,s=Math.floor((t-(n.maxRow-n.minRow+1))/2),o=Math.floor((r-i)/2)-n.minCol,l=s-n.minRow;if(0===o&&0===l)return e;let a=[];for(let n=0;n<t;n++){let i=[];for(let s=0;s<r;s++){let a=n-l,c=s-o;a>=0&&a<t&&c>=0&&c<r?i.push(e.pixels[a][c]):i.push(!1)}a.push(i)}return{pixels:a}}function g(e,t,r,n){return 1===t?e:"nearest"===n?function(e,t,r){let n=e.pixels.length,i=e.pixels[0]?.length||0,s=Math.round(i*t),o=Math.round(n*t),l=[];for(let r=0;r<o;r++){let o=[];for(let l=0;l<s;l++){let s=Math.min(Math.floor(r/t),n-1),a=Math.min(Math.floor(l/t),i-1);o.push(e.pixels[s]?.[a]||!1)}l.push(o)}let a=i-s,c=n-o,d=0,u=0;r.endsWith("l")?d=0:r.endsWith("c")?d=Math.floor(a/2):r.endsWith("r")&&(d=a),r.startsWith("t")?u=0:r.startsWith("m")?u=Math.floor(c/2):r.startsWith("b")&&(u=c);let h=[];for(let e=0;e<n;e++){let t=[];for(let r=0;r<i;r++){let n=e-u,i=r-d;n>=0&&n<o&&i>=0&&i<s?t.push(l[n][i]):t.push(!1)}h.push(t)}return{pixels:h}}(e,t,r):function(e,t,r,n=.5){let i=e.pixels.length,s=e.pixels[0]?.length||0,o=Math.round(s*t),l=Math.round(i*t),a=[];for(let r=0;r<l;r++){let i=[];for(let s=0;s<o;s++){let o=r/t,l=(r+1)/t,a=s/t,c=(s+1)/t,d=function(e,t,r,n,i){let s=e.length,o=e[0]?.length||0,l=0,a=0,c=Math.max(0,Math.floor(t)),d=Math.min(s-1,Math.floor(r)),u=Math.max(0,Math.floor(n)),h=Math.min(o-1,Math.floor(i));for(let s=c;s<=d;s++)for(let o=u;o<=h;o++){let c=Math.max(s,t),d=Math.max(o,n),u=(Math.min(s+1,r)-c)*(Math.min(o+1,i)-d);l+=u,e[s][o]&&(a+=u)}return 0===l?0:a/l}(e.pixels,o,l,a,c);i.push(d>=n)}a.push(i)}let c=s-o,d=i-l,u=0,h=0;r.endsWith("l")?u=0:r.endsWith("c")?u=Math.floor(c/2):r.endsWith("r")&&(u=c),r.startsWith("t")?h=0:r.startsWith("m")?h=Math.floor(d/2):r.startsWith("b")&&(h=d);let m=[];for(let e=0;e<i;e++){let t=[];for(let r=0;r<s;r++){let n=e-h,i=r-u;n>=0&&n<l&&i>=0&&i<o?t.push(a[n][i]):t.push(!1)}m.push(t)}return{pixels:m}}(e,t,r)}e.s(["batchTogglePixel",()=>f,"batchTransform",()=>h,"centerCharacter",()=>x,"clearCharacter",()=>a,"fillCharacter",()=>c,"flipHorizontal",()=>o,"flipVertical",()=>l,"getBoundingBox",()=>p,"getPixelState",()=>m,"invertCharacter",()=>s,"resizeCharacter",()=>i,"rotateCharacter",()=>r,"scaleCharacter",()=>g,"setPixel",()=>u,"shiftCharacter",()=>n,"togglePixel",()=>d])},16015,(e,t,r)=>{},98547,(e,t,r)=>{var n=e.i(47167);e.r(16015);var i=e.r(71645),s=i&&"object"==typeof i&&"default"in i?i:{default:i},o=void 0!==n.default&&n.default.env&&!0,l=function(e){return"[object String]"===Object.prototype.toString.call(e)},a=function(){function e(e){var t=void 0===e?{}:e,r=t.name,n=void 0===r?"stylesheet":r,i=t.optimizeForSpeed,s=void 0===i?o:i;c(l(n),"`name` must be a string"),this._name=n,this._deletedRulePlaceholder="#"+n+"-deleted-rule____{}",c("boolean"==typeof s,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=s,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var a="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=a?a.getAttribute("content"):null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(o||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){if(c(l(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return o||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var n=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,n))}return this._rulesCount++},r.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var r="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(n){o||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var n=this._tags[e];c(n,"old rule at index `"+e+"` not found"),n.textContent=t}return e},r.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},r.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},r.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},r.makeStyleTag=function(e,t,r){t&&c(l(t),"makeStyleTag accepts only strings as second parameter");var n=document.createElement("style");this._nonce&&n.setAttribute("nonce",this._nonce),n.type="text/css",n.setAttribute("data-"+e,""),t&&n.appendChild(document.createTextNode(t));var i=document.head||document.getElementsByTagName("head")[0];return r?i.insertBefore(n,r):i.appendChild(n),n},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},u={};function h(e,t){if(!t)return"jsx-"+e;var r=String(t),n=e+r;return u[n]||(u[n]="jsx-"+d(e+"-"+r)),u[n]}function m(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var r=e+t;return u[r]||(u[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[r]}var f=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,n=void 0===r?null:r,i=t.optimizeForSpeed,s=void 0!==i&&i;this._sheet=n||new a({name:"styled-jsx",optimizeForSpeed:s}),this._sheet.inject(),n&&"boolean"==typeof s&&(this._sheet.setOptimizeForSpeed(s),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),n=r.styleId,i=r.rules;if(n in this._instancesCounts){this._instancesCounts[n]+=1;return}var s=i.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[n]=s,this._instancesCounts[n]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var n=this._fromServer&&this._fromServer[r];n?(n.parentNode.removeChild(n),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],n=e[1];return s.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:n}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,n=e.id;if(r){var i=h(n,r);return{styleId:i,rules:Array.isArray(t)?t.map(function(e){return m(i,e)}):[m(i,t)]}}return{styleId:h(n),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),p=i.createContext(null);function x(){return new f}function g(){return i.useContext(p)}p.displayName="StyleSheetContext";var b=s.default.useInsertionEffect||s.default.useLayoutEffect,v="undefined"!=typeof window?x():void 0;function y(e){var t=v||g();return t&&("undefined"==typeof window?t.add(e):b(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}y.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},r.StyleRegistry=function(e){var t=e.registry,r=e.children,n=i.useContext(p),o=i.useState(function(){return n||t||x()})[0];return s.default.createElement(p.Provider,{value:o},r)},r.createStyleRegistry=x,r.style=y,r.useStyleRegistry=g},37902,(e,t,r)=>{t.exports=e.r(98547).style},37559,93582,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(38749),i=e.i(32098),s=e.i(28339);function o({isOpen:e,onClose:o,metadata:l,onSave:a}){let[c,d]=(0,r.useState)(l.name),[u,h]=(0,r.useState)(l.description),[m,f]=(0,r.useState)(l.source),[p,x]=(0,r.useState)(l.manufacturer),[g,b]=(0,r.useState)(l.system),[v,y]=(0,r.useState)(l.chip),[C,w]=(0,r.useState)(l.locale),[j,S]=(0,r.useState)(l.tags??[]),[k,M]=(0,r.useState)(l.isPinned??!1),[N,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&(d(l.name),h(l.description),f(l.source),x(l.manufacturer),b(l.system),y(l.chip),w(l.locale),S(l.tags??[]),M(l.isPinned??!1))},[e,l]);let R=async()=>{if(c.trim()){_(!0);try{await a({name:c.trim(),description:u.trim(),source:m.trim()||"yourself",manufacturer:p,system:g,chip:v,locale:C.trim(),tags:j,isPinned:k}),o()}finally{_(!1)}}};return(0,t.jsxs)(i.Modal,{isOpen:e,onClose:o,size:"md",children:[(0,t.jsx)(i.ModalHeader,{onClose:o,showCloseButton:!0,children:(0,t.jsx)("h2",{className:"text-lg font-medium text-white",children:"Edit Metadata"})}),(0,t.jsxs)(i.ModalContent,{children:[(0,t.jsx)(s.MetadataFormFields,{name:c,onNameChange:d,description:u,onDescriptionChange:h,manufacturer:p,onManufacturerChange:x,system:g,onSystemChange:b,chip:v,onChipChange:y,locale:C,onLocaleChange:w,source:m,onSourceChange:f,tags:j,onTagsChange:S,autoFocusName:!0,compact:!0,idPrefix:"metadata-edit"}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-gray-300",children:"Pin to top"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Pinned items appear first in search results"})]}),(0,t.jsx)(n.ToggleSwitch,{checked:k,onChange:M})]})]}),(0,t.jsx)(i.ModalActions,{onCancel:o,onConfirm:R,confirmLabel:N?"Saving...":"Save",confirmDisabled:!c.trim()||N})]})}e.s(["MetadataEditModal",()=>o],37559);var l=e.i(18645);let a={danger:"bg-red-500/20 border-red-500 text-red-400 hover:bg-red-500/30",warning:"bg-orange-500/20 border-orange-500 text-orange-400 hover:bg-orange-500/30",info:"bg-retro-cyan/20 border-retro-cyan text-retro-cyan hover:bg-retro-cyan/30"};function c({isOpen:e,title:n,message:i,details:s,confirmLabel:o="Confirm",cancelLabel:c="Cancel",variant:d="info",onConfirm:u,onCancel:h}){let m=(0,r.useRef)(null),f=(0,l.useFocusTrap)({isActive:e,restoreFocus:!0,autoFocus:!1});return((0,r.useEffect)(()=>{e&&m.current&&m.current.focus()},[e]),(0,r.useEffect)(()=>{if(!e)return;let t=e=>{"Escape"===e.key&&h()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,h]),e)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:h,"aria-hidden":"true"}),(0,t.jsxs)("div",{ref:f,className:"relative w-full max-w-md bg-retro-navy border border-retro-grid/50 rounded-lg shadow-xl p-6",role:"alertdialog","aria-modal":"true","aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-message",children:[(0,t.jsx)("h2",{id:"confirm-dialog-title",className:"text-lg font-medium text-white mb-2",children:n}),(0,t.jsx)("p",{id:"confirm-dialog-message",className:"text-sm text-gray-400 mb-4",children:i}),s&&(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-6",children:s}),(0,t.jsxs)("div",{className:`flex gap-3 ${!s?"mt-2":""}`,children:[(0,t.jsx)("button",{onClick:h,className:"flex-1 px-4 py-2 text-sm border border-retro-grid/50 rounded text-gray-400 hover:border-retro-grid hover:text-white transition-colors",children:c}),(0,t.jsx)("button",{ref:m,onClick:u,className:`flex-1 px-4 py-2 text-sm border rounded transition-colors ${a[d]}`,children:o})]})]})]}):null}e.s(["ConfirmDialog",()=>c],93582)},81074,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(3374),i=e.i(58234),s=e.i(72547),o=e.i(21745);function l(e){return"type"in e&&"separator"===e.type}function a({actions:e,minVisibleItems:n=2,className:i="",sticky:a=!1}){let c=(0,r.useRef)(null),[d,u]=(0,r.useState)(new Set),h=(0,r.useCallback)(()=>{if(!c.current)return;let t=c.current.offsetWidth-32-48,r=e.filter(e=>!l(e)).map(e=>({item:e,priority:e.priority??1})),i=[...r].sort((e,t)=>e.priority-t.priority),s=0;for(let t of e)s+=l(t)?16:48;let o=new Set,a=s,d=r.length;for(let{item:e}of i){if(a<=t||d<=n)break;o.add(e.id),a-=48,d--}u(o)},[e,n]);(0,r.useEffect)(()=>{h();let e=new ResizeObserver(()=>{h()});return c.current&&e.observe(c.current),()=>e.disconnect()},[h]);let m=[],f=[];for(let t of e)if(l(t)){let r=e.slice(e.indexOf(t)+1).some(e=>!l(e)&&!d.has(e.id)),n=e.slice(0,e.indexOf(t)).some(e=>!l(e)&&!d.has(e.id));r&&n&&m.push(t)}else d.has(t.id)?f.push(t):m.push(t);let p=f.map(e=>({id:e.id,label:e.label,icon:e.icon,onClick:e.onClick,disabled:e.disabled}));return(0,t.jsxs)("div",{ref:c,className:`
        flex items-center justify-between
        bg-retro-navy/80 backdrop-blur-sm
        border-b border-retro-grid/50
        px-2 sm:px-4
        ${a?"sticky top-[var(--header-height)] z-40":""}
        ${i}
      `,style:{minHeight:"var(--toolbar-height)"},children:[(0,t.jsx)("div",{className:"flex items-center gap-1 sm:gap-2 flex-nowrap overflow-hidden",children:m.map(e=>l(e)?(0,t.jsx)("div",{className:"h-6 w-px bg-retro-grid/50 mx-1","aria-hidden":"true"},e.id):(0,t.jsx)(o.Tooltip,{content:e.tooltip||e.label,shortcut:e.shortcut,position:"bottom",children:(0,t.jsx)("button",{onClick:e.onClick,disabled:e.disabled,"aria-label":e.label,className:`
                  touch-target flex items-center justify-center p-2 rounded-md
                  text-sm font-ui transition-colors flex-shrink-0
                  ${e.disabled?"text-gray-600 cursor-not-allowed":e.active?"amber"===e.activeVariant?"text-retro-amber bg-retro-amber/20":"text-retro-cyan bg-retro-purple/40":"text-gray-300 hover:text-retro-cyan hover:bg-retro-purple/30"}
                `,children:(0,t.jsx)("span",{className:"w-6 h-6 flex-shrink-0 [&>svg]:w-full [&>svg]:h-full",children:e.icon})})},e.id))}),p.length>0&&(0,t.jsx)(s.OverflowMenu,{items:p,align:"right",label:"More actions"})]})}var c=e.i(74080);let d=()=>()=>{},u=()=>!0,h=()=>!1;function m({isOpen:e,onClose:n,children:i,title:s,initialSnap:o="expanded",collapsedHeight:l="30vh",expandedHeight:a="60vh",allowFullHeight:m=!0,className:f=""}){let[p,x]=(0,r.useState)(o),[g,b]=(0,r.useState)(!1),[v,y]=(0,r.useState)(0),C=(0,r.useRef)(null),w=(0,r.useRef)(0),j=(0,r.useRef)(0),S=(0,r.useSyncExternalStore)(d,u,h),k=(0,r.useCallback)(e=>{switch(e){case"collapsed":return l;case"expanded":default:return a;case"full":return"calc(100vh - 60px)"}},[l,a]),M=(0,r.useCallback)(e=>{b(!0),w.current=e,C.current&&(j.current=C.current.getBoundingClientRect().height)},[]),N=(0,r.useCallback)(e=>{g&&y(w.current-e)},[g]),_=(0,r.useCallback)(()=>{g&&(b(!1),v<-50?"collapsed"===p||"expanded"===p?n():x("expanded"):v>50&&("collapsed"===p?x("expanded"):"expanded"===p&&m&&x("full")),y(0))},[g,v,p,m,n]),R=(0,r.useCallback)(e=>{e.preventDefault(),M(e.clientY)},[M]),E=(0,r.useCallback)(e=>{M(e.touches[0].clientY)},[M]),A=(0,r.useCallback)(e=>{N(e.touches[0].clientY)},[N]);if((0,r.useEffect)(()=>{if(!g)return;let e=e=>{N(e.clientY)},t=()=>{_()};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[g,N,_]),(0,r.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),(0,r.useEffect)(()=>{if(!e)return;let t=e=>{"Escape"===e.key&&n()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,n]),!S)return null;let T=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`
          fixed inset-0 bg-black/50 z-40
          transition-opacity duration-300
          ${e?"opacity-100":"opacity-0 pointer-events-none"}
        `,onClick:n,"aria-hidden":"true"}),(0,t.jsxs)("div",{ref:C,className:`
          fixed bottom-0 left-0 right-0 z-50
          bg-retro-navy border-t border-retro-grid/50
          rounded-t-2xl shadow-2xl
          transition-transform duration-300 ease-out
          ${e?"translate-y-0":"translate-y-full"}
          ${g?"transition-none":""}
          ${f}
        `,style:{height:k(p),transform:g?`translateY(${e?-v:0}px)`:e?"translateY(0)":"translateY(100%)"},role:"dialog","aria-modal":"true","aria-label":s||"Bottom sheet",children:[(0,t.jsx)("div",{className:"flex justify-center py-3 cursor-grab active:cursor-grabbing touch-none",onMouseDown:R,onTouchStart:E,onTouchMove:A,onTouchEnd:_,children:(0,t.jsx)("div",{className:"w-10 h-1 bg-gray-500 rounded-full"})}),s&&(0,t.jsx)("div",{className:"px-4 pb-2 border-b border-retro-grid/30",children:(0,t.jsx)("h2",{className:"text-sm font-medium text-gray-300",children:s})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto px-4 pb-safe",children:i})]})]});return(0,c.createPortal)(T,document.body)}function f({title:e,children:r,toolbar:s,showFooter:o=!1,fullHeight:l=!0,className:c=""}){return(0,t.jsxs)("div",{className:`flex flex-col safe-top ${l?"viewport-locked":"min-h-screen"}`,children:[(0,t.jsx)(n.Header,{}),s&&s.length>0&&(0,t.jsx)(a,{actions:s,sticky:!0,className:"mt-[var(--header-height)]"}),(0,t.jsxs)("main",{className:`
          flex-1 bg-retro-dark
          ${!s?"mt-[var(--header-height)]":""}
          ${l?"tool-canvas overflow-hidden":""}
          ${c}
        `,children:[(0,t.jsx)("h1",{className:"sr-only",children:e}),r]}),o&&(0,t.jsx)(i.Footer,{})]})}function p({children:e,sidebar:n,sidebarPosition:i="left",sidebarWidth:s="280px",leftSidebar:o,leftSidebarWidth:l="220px",leftSidebarTitle:a="Panel",rightSidebar:c,rightSidebarWidth:d="80px",rightSidebarTitle:u="Tools",leftSidebarCollapsible:h=!0,rightSidebarCollapsible:f=!0,useBottomSheets:p=!0,className:x=""}){let g=function(e){let[t,n]=(0,r.useState)(()=>window.matchMedia(e).matches);return(0,r.useEffect)(()=>{let r=window.matchMedia(e);r.matches!==t&&n(r.matches);let i=e=>{n(e.matches)};return r.addEventListener("change",i),()=>{r.removeEventListener("change",i)}},[e,t]),t}("(max-width: 639px)"),[b,v]=(0,r.useState)(null),y=o??("left"===i?n:void 0),C=c??("right"===i?n:void 0),w=o?l:s,j=c?d:s,S=(0,r.useCallback)(()=>v("left"),[]),k=(0,r.useCallback)(()=>v("right"),[]),M=(0,r.useCallback)(()=>v(null),[]);return y||C?g&&p&&(h||f)?(0,t.jsxs)("div",{className:"h-full flex flex-col relative",children:[(0,t.jsx)("div",{className:`
            flex-1 overflow-auto
            flex items-center justify-center
            pb-14
            ${x}
          `,children:e}),(0,t.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-30 bg-retro-navy border-t border-retro-grid/50 safe-bottom",children:(0,t.jsxs)("div",{className:"flex justify-around py-2 px-4",children:[y&&h&&(0,t.jsxs)("button",{onClick:S,className:`
                  flex flex-col items-center gap-1 px-4 py-2 rounded-lg
                  transition-colors min-w-[80px]
                  ${"left"===b?"bg-retro-cyan/20 text-retro-cyan":"text-gray-400 hover:text-gray-200"}
                `,"aria-label":`Open ${a}`,children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})}),(0,t.jsx)("span",{className:"text-xs",children:a})]}),C&&f&&(0,t.jsxs)("button",{onClick:k,className:`
                  flex flex-col items-center gap-1 px-4 py-2 rounded-lg
                  transition-colors min-w-[80px]
                  ${"right"===b?"bg-retro-pink/20 text-retro-pink":"text-gray-400 hover:text-gray-200"}
                `,"aria-label":`Open ${u}`,children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),(0,t.jsx)("span",{className:"text-xs",children:u})]})]})}),y&&h&&(0,t.jsx)(m,{isOpen:"left"===b,onClose:M,title:a,expandedHeight:"70vh",collapsedHeight:"40vh",children:y}),C&&f&&(0,t.jsx)(m,{isOpen:"right"===b,onClose:M,title:u,expandedHeight:"60vh",collapsedHeight:"35vh",children:C})]}):(0,t.jsxs)("div",{className:"h-full flex flex-col lg:flex-row",children:[y&&(0,t.jsx)("aside",{className:`
            w-full lg:w-auto lg:flex-shrink-0
            ${h?"border-b lg:border-b-0":""}
            lg:border-r border-retro-grid/50
            bg-retro-navy/50
            overflow-y-auto
            ${h?"max-h-[30vh] lg:max-h-none":""}
          `,style:{"--sidebar-width":w},children:(0,t.jsx)("div",{className:"lg:w-[var(--sidebar-width)] h-full",children:y})}),(0,t.jsx)("div",{className:`
          flex-1 overflow-auto
          flex items-center justify-center
          ${x}
        `,children:e}),C&&(0,t.jsx)("aside",{className:`
            w-full lg:w-auto lg:flex-shrink-0
            ${f?"border-t lg:border-t-0":""}
            lg:border-l border-retro-grid/50
            bg-retro-navy/50
            overflow-y-auto
            ${f?"max-h-[30vh] lg:max-h-none":""}
          `,style:{"--sidebar-width":j},children:(0,t.jsx)("div",{className:"lg:w-[var(--sidebar-width)] h-full",children:C})})]}):(0,t.jsx)("div",{className:`h-full overflow-auto ${x}`,children:e})}e.s(["ToolContent",()=>p,"ToolLayout",()=>f],81074)},85984,88419,98603,64358,81553,40674,96174,33491,e=>{"use strict";var t=e.i(43476);e.i(37902);var r=e.i(71645),n=e.i(20446);function i({character:e,mode:i="small",scale:s=20,smallScale:o=2,selected:l=!1,batchSelected:a=!1,onClick:c,onPixelClick:d,onPixelDrag:u,onDragEnd:h,onPixelHover:m,onPixelLeave:f,foregroundColor:p="#ffffff",backgroundColor:x="#000000",gridColor:g="#4a4a4a",gridThickness:b=1,interactive:v=!0,className:y="",mixedPixels:C,index:w,showIndex:j=!1}){let S="large"===i,k=S?s:o,M=["relative inline-block",!S&&v?"cursor-pointer":"",!S&&v?"hover:opacity-80 transition-opacity":"",(0,r.useMemo)(()=>l?"ring-2 ring-retro-cyan ring-offset-2 ring-offset-retro-dark":a?"ring-2 ring-retro-pink/50 ring-offset-1 ring-offset-retro-dark":"",[l,a]),y].filter(Boolean).join(" ");return(0,t.jsxs)("div",{className:M,onClick:e=>{c&&!S&&(e.stopPropagation(),c())},onKeyDown:e=>{c&&!S&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c())},role:!S&&v?"button":void 0,tabIndex:!S&&v?0:void 0,"aria-pressed":l||a,"aria-label":void 0!==w?`Character ${w}`:"Character",children:[(0,t.jsx)(n.PixelGrid,{pixels:e.pixels,scale:k,showGrid:S,gridColor:g,gridThickness:S?b:0,foregroundColor:p,backgroundColor:x,onPixelClick:S?d:void 0,onPixelDrag:S?u:void 0,onDragEnd:S?h:void 0,onPixelHover:S?m:void 0,onPixelLeave:S?f:void 0,interactive:S&&v,mixedPixels:C}),j&&void 0!==w&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 bg-retro-navy/90 text-[8px] text-gray-400 px-1 rounded font-mono",children:w})]})}function s({width:e,height:r,mode:n="small",scale:i=20,smallScale:s=2,onClick:o,className:l=""}){let a="large"===n,c=a?i:s;return(0,t.jsx)("div",{className:`relative inline-flex items-center justify-center bg-retro-navy/50 border border-dashed border-retro-grid/50 cursor-pointer hover:border-retro-cyan/50 transition-colors ${l}`,style:{width:e*c+(a?(e+1)*1:0),height:r*c+(a?(r+1)*1:0)},onClick:o,role:"button",tabIndex:0,onKeyDown:e=>{o&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),o())},"aria-label":"Add new character",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}e.s(["CharacterDisplay",()=>i,"EmptyCharacterDisplay",()=>s],88419);var o=e.i(7506);function l({characters:e,config:r,maxCharacters:n=16,foregroundColor:s="#ffffff",backgroundColor:o="#000000",smallScale:l=1,className:a=""}){let c=e.slice(0,n),d=e.length-n,u=Math.ceil(Math.sqrt(n)),h=r.width*l;return(0,t.jsxs)("div",{className:`relative ${a}`,children:[(0,t.jsx)("div",{className:"grid gap-0.5",style:{gridTemplateColumns:`repeat(${u}, ${h}px)`},children:c.map((e,r)=>(0,t.jsx)(i,{character:e,mode:"small",smallScale:l,foregroundColor:s,backgroundColor:o,interactive:!1},r))}),d>0&&(0,t.jsxs)("div",{className:"absolute bottom-0 right-0 bg-retro-navy/90 text-[10px] text-gray-400 px-1 rounded",children:["+",d]})]})}function a(){let e=(0,r.useRef)(null),t=(0,r.useRef)(!1),n=(0,r.useCallback)(()=>{null!==e.current&&(clearTimeout(e.current),e.current=null,t.current=!1)},[]),i=(0,r.useCallback)((r,i)=>{n(),t.current=!0,e.current=setTimeout(()=>{t.current=!1,e.current=null,r()},i)},[n]);return(0,r.useEffect)(()=>()=>{n()},[n]),{set:i,clear:n,get isActive(){return t.current}}}function c({threshold:e=500,onLongPress:t,onPress:n,disabled:i=!1,moveThreshold:s=10}){let o=a(),l=(0,r.useRef)(!1),c=(0,r.useRef)(null),d=(0,r.useRef)(!1),u=(0,r.useCallback)((r,n)=>{i||(l.current=!1,c.current={x:r,y:n},d.current=!1,o.set(()=>{l.current=!0,d.current=!0,t()},e))},[i,e,t,o]),h=(0,r.useCallback)(()=>{o.clear(),!l.current&&n&&c.current&&n(),c.current=null},[o,n]),m=(0,r.useCallback)(()=>{o.clear(),c.current=null},[o]),f=(0,r.useCallback)((e,t)=>{if(!c.current)return;let r=Math.abs(e-c.current.x),n=Math.abs(t-c.current.y);(r>s||n>s)&&m()},[s,m]),p=(0,r.useCallback)(e=>{0===e.button&&u(e.clientX,e.clientY)},[u]),x=(0,r.useCallback)(()=>{h()},[h]),g=(0,r.useCallback)(()=>{m()},[m]),b=(0,r.useCallback)(e=>{if(1!==e.touches.length)return void m();let t=e.touches[0];u(t.clientX,t.clientY)},[u,m]),v=(0,r.useCallback)(()=>{h()},[h]);return{onMouseDown:p,onMouseUp:x,onMouseLeave:g,onTouchStart:b,onTouchEnd:v,onTouchMove:(0,r.useCallback)(e=>{if(1!==e.touches.length)return void m();let t=e.touches[0];f(t.clientX,t.clientY)},[f,m]),onContextMenu:(0,r.useCallback)(e=>{d.current&&e.preventDefault()},[])}}function d({character:e,index:n,selectedIndex:s,batchSelection:o,onSelect:l,onContextMenu:a,onLongPress:d,isSelectionMode:u,smallScale:h,foregroundColor:m,backgroundColor:f,showIndices:p}){let x=s===n||o?.has(n),g=(0,r.useCallback)(e=>{l?.(n,e.shiftKey,e.metaKey||e.ctrlKey)},[n,l]),b=c({onLongPress:(0,r.useCallback)(()=>{d?.(n)},[n,d]),disabled:!d}),v=(0,r.useCallback)(e=>{a&&(e.preventDefault(),s===n||o?.has(n)||l?.(n,!1,!1),a(e.clientX,e.clientY,n))},[n,s,o,l,a]),y=(0,r.useCallback)(e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),l?.(n,e.shiftKey,e.metaKey||e.ctrlKey))},[n,l]),C=(0,r.useCallback)(e=>{b.onContextMenu(e),e.defaultPrevented||v(e)},[b,v]);return(0,t.jsxs)("div",{onClick:g,onContextMenu:C,onKeyDown:y,onMouseDown:b.onMouseDown,onMouseUp:b.onMouseUp,onMouseLeave:b.onMouseLeave,onTouchStart:b.onTouchStart,onTouchEnd:b.onTouchEnd,onTouchMove:b.onTouchMove,role:"option","aria-selected":x,tabIndex:0,"data-grid-index":n,className:"focus:outline-none focus-visible:ring-1 focus-visible:ring-retro-cyan rounded relative touch-manipulation",style:{touchAction:"manipulation"},children:[(0,t.jsx)(i,{character:e,mode:"small",smallScale:h,selected:s===n,batchSelected:o?.has(n)&&s!==n,foregroundColor:m,backgroundColor:f,interactive:!1,index:n,showIndex:p}),u&&x&&(0,t.jsx)("div",{className:"absolute top-0 right-0 w-3 h-3 bg-retro-cyan rounded-bl flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-2 h-2 text-retro-dark",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})}function u({enabled:e,onItemTouched:t,getIndexFromPoint:n,onDragStart:i,onDragEnd:s,dragThreshold:o=5}){let[l,a]=(0,r.useState)(!1),c=(0,r.useRef)({startPos:null,touchedIndices:new Set,isActive:!1,hasMoved:!1}),d=(0,r.useRef)(!1),u=(0,r.useRef)(!1),h=(0,r.useCallback)((t,r)=>{if(!e)return;let i=n(t,r);c.current={startPos:{x:t,y:r},touchedIndices:new Set,isActive:!0,hasMoved:!1},null!==i&&c.current.touchedIndices.add(i)},[e,n]),m=(0,r.useCallback)((r,s)=>{let l=c.current;if(!e||!l.isActive||!l.startPos)return;if(!l.hasMoved){let e=Math.abs(r-l.startPos.x),n=Math.abs(s-l.startPos.y);if(e<o&&n<o)return;l.hasMoved=!0,a(!0),i?.();let c=Array.from(l.touchedIndices)[0];void 0!==c&&t(c)}let d=n(r,s);null===d||l.touchedIndices.has(d)||(l.touchedIndices.add(d),t(d))},[e,o,n,t,i]),f=(0,r.useCallback)(()=>{c.current.hasMoved&&(a(!1),s?.(),d.current=!0),c.current={startPos:null,touchedIndices:new Set,isActive:!1,hasMoved:!1}},[s]),p=(0,r.useCallback)(e=>{if(1!==e.touches.length)return void f();let t=e.touches[0];h(t.clientX,t.clientY)},[h,f]),x=(0,r.useCallback)(e=>{if(1!==e.touches.length)return void f();let t=e.touches[0];m(t.clientX,t.clientY)},[m,f]),g=(0,r.useCallback)(()=>{f()},[f]),b=(0,r.useCallback)(t=>{0===t.button&&(u.current=!0,e&&t.preventDefault(),h(t.clientX,t.clientY))},[h,e]),v=(0,r.useCallback)(e=>{u.current&&m(e.clientX,e.clientY)},[m]);return{onTouchStart:p,onTouchMove:x,onTouchEnd:g,onMouseDown:b,onMouseMove:v,onMouseUp:(0,r.useCallback)(()=>{u.current=!1,f()},[f]),onClickCapture:(0,r.useCallback)(e=>{d.current&&(e.stopPropagation(),e.preventDefault(),d.current=!1)},[]),isDragging:l}}function h({characters:e,config:n,selectedIndex:i,batchSelection:l,onSelect:a,showAddButton:c=!1,onAdd:h,foregroundColor:m="#ffffff",backgroundColor:f="#000000",showIndices:p=!1,minColumns:x=8,maxColumns:g=32,gap:b=4,className:v="",smallScale:y=2,onContextMenu:C,isSelectionMode:w=!1,onLongPress:j}){let S=(0,r.useRef)(null),k=(0,r.useRef)(null),{size:M}=(0,o.useResizeObserver)(),N=n.width*y+b+8,_=(0,r.useMemo)(()=>M.width?Math.max(x,Math.min(g,Math.floor((M.width-b)/N))):x,[M.width,N,b,x,g]),R=(0,r.useCallback)((e,t)=>{a?.(e,t,!1)},[a]),{handleKeyDown:E,focusItem:A}=function({itemCount:e,columns:t,currentIndex:n,onNavigate:i,pageSize:s,itemSelector:o='[role="option"]',containerRef:l}){let a=(0,r.useRef)(null),c=l??a,d=s??3*t,u=(0,r.useCallback)(e=>{if(!c.current)return;let t=c.current.querySelectorAll(o)[e];t&&t.focus()},[c,o]),h=(0,r.useCallback)((r,n)=>{if(0===e)return null;let i=n%t,s=Math.ceil(e/t);switch(r){case"ArrowRight":{let t=n+1;return t<e?t:n}case"ArrowLeft":{let e=n-1;return e>=0?e:n}case"ArrowDown":{let r=n+t;if(r>=e){let r=(s-1)*t+i;return r<e?r:e-1}return r}case"ArrowUp":{let e=n-t;return e>=0?e:i}case"Home":return 0;case"End":return e-1;case"PageDown":return Math.min(n+d,e-1);case"PageUp":return Math.max(n-d,0);default:return null}},[e,t,d]);return{handleKeyDown:(0,r.useCallback)(e=>{if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].includes(e.key))return;let t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName)return;let r=h(e.key,n);null!==r&&r!==n&&(e.preventDefault(),i(r,e.shiftKey),u(r))},[n,h,i,u]),containerRef:c,focusItem:u}}({itemCount:e.length,columns:_,currentIndex:i??0,onNavigate:R,containerRef:S});(0,r.useEffect)(()=>{void 0!==i&&document.activeElement?.closest('[role="listbox"]')===S.current&&A(i)},[i,A]);let T=u({enabled:w,onItemTouched:e=>a?.(e,!1,!0),getIndexFromPoint:(0,r.useCallback)((t,r)=>{let n=document.elementFromPoint(t,r);if(!n)return null;let i=n;for(;i&&i!==document.body;){let t=i.getAttribute("data-grid-index");if(null!==t){let r=parseInt(t,10);return r>=0&&r<e.length?r:null}i=i.parentElement}return null},[e.length])});return(0,t.jsx)("div",{ref:S,className:`overflow-auto p-2 ${v} ${w?"ring-4 ring-retro-cyan rounded bg-retro-cyan/10":""} ${T.isDragging?"ring-4 ring-retro-pink bg-retro-pink/20":""}`,role:"listbox","aria-label":"Character selection grid","aria-multiselectable":w||void 0!==l,onKeyDown:E,children:(0,t.jsxs)("div",{ref:k,className:"grid select-none",style:{gridTemplateColumns:`repeat(${_}, auto)`,gap:`${b}px`},onTouchStartCapture:T.onTouchStart,onTouchMoveCapture:T.onTouchMove,onTouchEndCapture:T.onTouchEnd,onMouseDownCapture:T.onMouseDown,onMouseMoveCapture:T.onMouseMove,onMouseUpCapture:T.onMouseUp,onClickCapture:T.onClickCapture,children:[e.map((e,r)=>(0,t.jsx)(d,{character:e,index:r,selectedIndex:i,batchSelection:l,onSelect:a,onContextMenu:C,onLongPress:j,isSelectionMode:w,smallScale:y,foregroundColor:m,backgroundColor:f,showIndices:p},r)),c&&(0,t.jsx)(s,{width:n.width,height:n.height,mode:"small",smallScale:y,onClick:h})]})})}e.s(["CharacterPreviewGrid",()=>l],98603),e.s(["useTimer",()=>a],64358),e.s(["useLongPress",()=>c],81553),e.s(["useDragSelect",()=>u],40674),e.s(["InteractiveCharacterGrid",()=>h],96174),e.s([],85984);var m=e.i(94136),f=e.i(29969);function p(e,t,r,n){let i=(0,m.serializeCharacterRom)(r,n),s=new TextEncoder,o=s.encode(e),l=s.encode(t),a="left"===n.padding|2*("lsb"===n.bitDirection),c=new Uint8Array(3+o.length+1+l.length+1+i.length),d=0;return c[d++]=n.width,c[d++]=n.height,c[d++]=a,c.set(o,d),d+=o.length,c[d++]=0,c.set(l,d),d+=l.length,c[d++]=0,c.set(i,d),"2:"+function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}((0,f.deflateSync)(c,{level:9}))}function x(e){try{var t;if(!e.startsWith("2:"))throw Error("Invalid share format: missing version prefix");let r=e.slice(2),n=(t=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4,n=atob(t+="=".repeat(r)),i=new Uint8Array(n.length);for(let e=0;e<n.length;e++)i[e]=n.charCodeAt(e);return i}(r),(0,f.inflateSync)(t)),i=n[0],s=n[1],o=n[2],l=new TextDecoder,a=3,c=n.indexOf(0,a);if(-1===c)throw Error("Invalid share format: name not terminated");let d=l.decode(n.slice(a,c));a=c+1;let u=n.indexOf(0,a);if(-1===u)throw Error("Invalid share format: description not terminated");let h=l.decode(n.slice(a,u));a=u+1;let p=n.slice(a),x={width:i,height:s,padding:1&o?"left":"right",bitDirection:2&o?"lsb":"msb"},g=(0,m.parseCharacterRom)(p,x);return{name:d,description:h,characters:g,config:x}}catch(e){throw Error(`Failed to decode shared character set: ${e}`)}}function g(e){let t=`${window.location.origin}/tools/character-rom-editor/shared`;return`${t}#${e}`}function b(){let e=window.location.hash;return e?e.slice(1):null}function v(e){return e.length<=2e3?"ok":e.length<=8e3?"warning":"error"}function y(e,t,r){let n=Math.ceil(1.34*Math.ceil((e*Math.ceil(t*r/8)+53)*.5))+2+50;return n<=2e3?{canShare:!0,estimatedLength:n,status:"ok",message:"Character set can be shared"}:n<=8e3?{canShare:!0,estimatedLength:n,status:"warning",message:"URL may be too long for some platforms. Consider reducing characters."}:{canShare:!1,estimatedLength:n,status:"error",message:`Character set is too large to share (${e} characters). Maximum shareable size depends on character dimensions.`}}e.s(["canShare",()=>y,"createShareUrl",()=>g,"decodeCharacterSet",()=>x,"encodeCharacterSet",()=>p,"getHashFromUrl",()=>b,"getUrlLengthStatus",()=>v],33491)}]);