(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7317,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(22016),i=e.i(3374),l=e.i(58234),n=e.i(28540),o=e.i(59544),c=e.i(38749),d=e.i(93733),x=e.i(19208),h=e.i(58882),m=e.i(39364),g=e.i(71721),p=e.i(66811),u=e.i(61839),f=e.i(7506);async function j(e){return new Promise((t,r)=>{let s=new Image,a=URL.createObjectURL(e);s.onload=()=>{URL.revokeObjectURL(a);let e=document.createElement("canvas");e.width=s.width,e.height=s.height;let i=e.getContext("2d");i?(i.fillStyle="white",i.fillRect(0,0,e.width,e.height),i.drawImage(s,0,0),t(i.getImageData(0,0,e.width,e.height))):r(Error("Failed to create canvas context"))},s.onerror=()=>{URL.revokeObjectURL(a),r(Error("Failed to load image"))},s.src=a})}function b(e,t){if(0===t)return e;let r=-t*Math.PI/180,s=Math.cos(r),a=Math.sin(r),{width:i,height:l}=e,n=[{x:0,y:0},{x:i*s,y:-i*a},{x:l*a,y:l*s},{x:i*s+l*a,y:-i*a+l*s}],o=Math.min(...n.map(e=>e.x)),c=Math.max(...n.map(e=>e.x)),d=Math.min(...n.map(e=>e.y)),x=Math.max(...n.map(e=>e.y)),h=Math.ceil(c-o),m=Math.ceil(x-d),g=document.createElement("canvas");g.width=h,g.height=m;let p=g.getContext("2d");if(!p)return e;let u=document.createElement("canvas");u.width=i,u.height=l;let f=u.getContext("2d");return f?(f.putImageData(e,0,0),p.fillStyle="white",p.fillRect(0,0,h,m),p.translate(-o,-d),p.rotate(r),p.drawImage(u,0,0),p.getImageData(0,0,h,m)):e}function v(e,t,r,s,a,i,l,n=1,o=1){let c=[];for(let d=0;d<a;d++){let a=[];for(let c=0;c<s;c++){let s=function(e,t,r,s,a){let i=0,l=0;for(let n=0;n<a;n++)for(let a=0;a<s;a++){let s=t+a,o=r+n;if(s<0||s>=e.width||o<0||o>=e.height){i+=255,l++;continue}i+=function(e,t,r){let s=(r*e.width+t)*4,a=e.data[s],i=e.data[s+1],l=e.data[s+2];return 0===e.data[s+3]?255:Math.round(.299*a+.587*i+.114*l)}(e,s,o),l++}return 0===l?255:Math.round(i/l)}(e,t+c*n,r+d*o,n,o)<i;l&&(s=!s),a.push(s)}c.push(a)}return{pixels:c}}function y(){return".png, .jpg, .jpeg, .gif, .webp"}var N=e.i(33712);let k=["Configure","Metadata","Save"];function w(){let e=(0,s.useRouter)(),{save:w}=(0,p.useCharacterLibrary)(),{buildEditorReturnParams:C}=(0,u.useEditorReturn)(),M=C(),S=M?`/tools/character-rom-editor/import?${M}`:"/tools/character-rom-editor/import",W=(0,r.useRef)(null),{ref:D,size:R}=(0,f.useResizeObserver)(),[L,H]=(0,r.useState)(1),[,I]=(0,r.useState)(null),[B,$]=(0,r.useState)(null),[z,O]=(0,r.useState)(null),[X,Y]=(0,r.useState)(!1),[P,A]=(0,r.useState)(null),[T,F]=(0,r.useState)({charWidth:8,charHeight:8,offsetX:0,offsetY:0,gapX:0,gapY:0,forceColumns:0,forceRows:0,threshold:128,invert:!1,maxCharacters:256,pixelWidth:1,pixelHeight:1,rotation:0,readingOrder:"ltr-ttb"}),[U,E]=(0,r.useState)(""),[G,V]=(0,r.useState)(""),[K,q]=(0,r.useState)(""),[J,Q]=(0,r.useState)(""),[Z,_]=(0,r.useState)(""),[ee,et]=(0,r.useState)(""),[er,es]=(0,r.useState)(""),[ea,ei]=(0,r.useState)([]),[el,en]=(0,r.useState)(!1),[eo,ec]=(0,r.useState)(null),[ed,ex]=(0,r.useState)({mode:null,step:0,points:[]}),[eh,em]=(0,r.useState)(0),[eg,ep]=(0,r.useState)(0),eu=(0,r.useCallback)(e=>{ex({mode:e,step:1,points:[]})},[]),ef=(0,r.useCallback)(()=>{ex({mode:null,step:0,points:[]})},[]),ej=(0,r.useMemo)(()=>B?function(e,t){let{charWidth:r,charHeight:s,offsetX:a,offsetY:i,gapX:l,gapY:n,forceColumns:o,forceRows:c,threshold:d,invert:x,maxCharacters:h=256,pixelWidth:m=1,pixelHeight:g=1,rotation:p=0,readingOrder:u="ltr-ttb"}=t,f=0!==p?b(e,p):e,j=f.width-a,y=f.height-i,N=r*m+l,k=s*g+n,w=o>0?o:Math.floor(j/N),C=c>0?c:Math.floor(y/k),M=[],S=u.startsWith("ltr")||u.startsWith("rtl"),W=u.includes("ltr"),D=u.includes("ttb")?Array.from({length:C},(e,t)=>t):Array.from({length:C},(e,t)=>C-1-t),R=W?Array.from({length:w},(e,t)=>t):Array.from({length:w},(e,t)=>w-1-t);if(S)for(let e of D){if(M.length>=h)break;for(let t of R){if(M.length>=h)break;let l=v(f,a+t*N,i+e*k,r,s,d,x,m,g);M.push(l)}}else for(let e of R){if(M.length>=h)break;for(let t of D){if(M.length>=h)break;let l=v(f,a+e*N,i+t*k,r,s,d,x,m,g);M.push(l)}}return{characters:M,columns:w,rows:C,imageWidth:f.width,imageHeight:f.height}}(B,T):null,[B,T]),eb=(0,r.useCallback)((e,t,r,s)=>{let a=T.readingOrder,i=a.startsWith("ltr")||a.startsWith("rtl"),l=a.includes("ltr"),n=a.includes("ttb")?e:r-1-e,o=l?t:s-1-t;return i?n*s+o:o*r+n},[T.readingOrder]),ev=(0,r.useMemo)(()=>{if(!B||0===T.rotation)return{imageData:B,url:z};let e=b(B,T.rotation),t=document.createElement("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");return r?(r.putImageData(e,0,0),{imageData:e,url:t.toDataURL()}):{imageData:B,url:z}},[B,T.rotation,z]),ey=ej?.characters||[],eN=(0,r.useMemo)(()=>({width:T.charWidth,height:T.charHeight,padding:"right",bitDirection:"msb"}),[T.charWidth,T.charHeight]),ek=(0,r.useMemo)(()=>{let e=R.width||400,t=R.height||500;if(!ej||0===ej.characters.length)return{scale:2,maxWidth:e-16,maxHeight:t-16};let r=ej.columns*T.charWidth,s=ej.rows*T.charHeight,a=e-16,i=t-16;return{scale:Math.max(1,Math.min(4,Math.floor(Math.min(a/r,i/s)))),maxWidth:a,maxHeight:i}},[R,ej,T.charWidth,T.charHeight]),ew=B&&ej&&ej.characters.length>0,eC=U.trim().length>0,eM=ew&&eC,eS=(0,r.useCallback)(async e=>{if(A(null),!["image/png","image/jpeg","image/gif","image/webp"].includes(e.type))return void A(`Invalid file type. Please select an image file (${y()})`);if(e.size>0xa00000)return void A("File too large. Maximum size is 10MB.");I(e),Y(!0);try{let t=URL.createObjectURL(e);O(t);let r=await j(e);$(r);let s=e.name.replace(/\.[^/.]+$/,"");E(s)}catch(e){A(e instanceof Error?e.message:"Failed to load image")}finally{Y(!1)}},[]),eW=(0,r.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer.files;t.length>0&&eS(t[0])},[eS]),eD=(0,r.useCallback)(e=>{e.preventDefault()},[]),eR=(0,r.useCallback)(e=>{let t=e.target.files;t&&t.length>0&&eS(t[0])},[eS]),eL=(0,r.useCallback)((e,t)=>{F(r=>({...r,[e]:t}))},[]),eH=(0,r.useCallback)(e=>{if(!ed.mode||!B)return;let t=e.currentTarget.getBoundingClientRect(),r=e.currentTarget.scrollLeft,s=e.currentTarget.scrollTop,a=Math.round(e.clientX-t.left+r),i=Math.round(e.clientY-t.top+s),l=[...ed.points,{x:a,y:i}];if("offset"===ed.mode)F(e=>({...e,offsetX:a,offsetY:i})),ex({mode:null,step:0,points:[]});else if("pixelSize"===ed.mode){if(1===ed.step)ex({mode:"pixelSize",step:2,points:l});else if(2===ed.step){let e=ed.points[0],t=Math.max(1,Math.abs(a-e.x)),r=Math.max(1,Math.abs(i-e.y));F(e=>({...e,pixelWidth:t,pixelHeight:r})),ex({mode:null,step:0,points:[]})}}else if("gap"===ed.mode){if(ed.step<4&&ex({mode:"gap",step:ed.step+1,points:l}),4===ed.step){let e=ed.points[0],t=ed.points[1],r=ed.points[2],s=Math.abs(t.x-e.x),l=Math.abs({x:a,y:i}.y-r.y);F(e=>({...e,gapX:s,gapY:l})),ex({mode:null,step:0,points:[]})}}else"gridLineOffset"===ed.mode&&(em(a),ep(i),ex({mode:null,step:0,points:[]}))},[ed,B]),eI=(0,r.useCallback)(()=>{if(!ed.mode)return null;if("offset"===ed.mode)return"Click on the top-left corner of the first character";if("pixelSize"===ed.mode){if(1===ed.step)return"Click on the top-left corner of a pixel";if(2===ed.step)return"Click on the bottom-right corner of the same pixel"}else if("gap"===ed.mode){if(1===ed.step)return"Click on a point at the right edge of a character";if(2===ed.step)return"Click on the corresponding point at the left edge of the next character";if(3===ed.step)return"Click on a point at the bottom edge of a character";if(4===ed.step)return"Click on the corresponding point at the top edge of the character below"}else if("gridLineOffset"===ed.mode)return"Click where the first grid line intersection should appear";return null},[ed]),eB=(0,r.useCallback)(()=>{L<3&&H(L+1)},[L]),e$=(0,r.useCallback)(()=>{L>1&&H(L-1)},[L]),ez=(0,r.useCallback)(async(t=!1)=>{if(!ej||!U.trim())return void ec("Please provide a name for the character set");try{en(!0),ec(null);let r=Date.now(),s=(0,N.generateId)(),a={metadata:{id:s,name:U.trim(),description:G.trim(),source:er.trim()||"yourself",manufacturer:K.trim(),system:J.trim(),chip:Z.trim(),locale:ee.trim(),tags:ea,createdAt:r,updatedAt:r,isBuiltIn:!1,origin:"image"},config:eN,characters:ej.characters};await w(a),t?e.push(`/tools/character-rom-editor/edit?id=${s}`):e.push("/tools/character-rom-editor")}catch(e){ec(e instanceof Error?e.message:"Failed to save character set")}finally{en(!1)}},[ej,U,G,er,K,J,Z,ee,ea,eN,w,e]);return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col safe-top",children:[(0,t.jsx)(i.Header,{}),(0,t.jsx)("main",{className:"flex-1 bg-retro-dark pt-24 pb-12",children:(0,t.jsxs)(n.Container,{size:"default",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)(a.default,{href:S,className:"text-xs text-gray-500 hover:text-retro-cyan transition-colors mb-2 inline-flex items-center gap-1",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Import"]}),(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-display",children:(0,t.jsx)(d.NeonText,{color:"pink",children:"Import from Image"})})]}),(0,t.jsx)(h.ImportStepIndicator,{currentStep:L,totalSteps:3,labels:k}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[1===L&&(0,t.jsxs)("div",{className:"space-y-6",children:[B?(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,t.jsx)("div",{className:"space-y-4 lg:w-80 lg:flex-shrink-0",children:(0,t.jsxs)("div",{className:"card-retro p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-300",children:"Grid Settings"}),(0,t.jsx)("button",{onClick:()=>{I(null),$(null),O(null)},className:"text-xs text-retro-cyan hover:text-retro-pink",children:"Change Image"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Reading Order"}),"ltr-ttb"!==T.readingOrder&&(0,t.jsx)("button",{onClick:()=>eL("readingOrder","ltr-ttb"),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]}),(0,t.jsxs)("select",{value:T.readingOrder,onChange:e=>eL("readingOrder",e.target.value),title:"Order in which characters are read from the image",className:"w-full px-3 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan",children:[(0,t.jsx)("option",{value:"ltr-ttb",children:"→ ↓ Left to right, top to bottom"}),(0,t.jsx)("option",{value:"rtl-ttb",children:"← ↓ Right to left, top to bottom"}),(0,t.jsx)("option",{value:"ltr-btt",children:"→ ↑ Left to right, bottom to top"}),(0,t.jsx)("option",{value:"rtl-btt",children:"← ↑ Right to left, bottom to top"}),(0,t.jsx)("option",{value:"ttb-ltr",children:"↓ → Top to bottom, left to right"}),(0,t.jsx)("option",{value:"ttb-rtl",children:"↓ ← Top to bottom, right to left"}),(0,t.jsx)("option",{value:"btt-ltr",children:"↑ → Bottom to top, left to right"}),(0,t.jsx)("option",{value:"btt-rtl",children:"↑ ← Bottom to top, right to left"})]})]}),(0,t.jsx)("div",{className:"border-t border-retro-grid/30"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-2",children:"Character Size"}),(0,t.jsx)(g.DimensionPresetSelector,{currentWidth:T.charWidth,currentHeight:T.charHeight,onSelect:(e,t)=>{eL("charWidth",e),eL("charHeight",t)}})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Char Width"}),8!==T.charWidth&&(0,t.jsx)("button",{onClick:()=>eL("charWidth",8),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]}),(0,t.jsx)("input",{type:"number",min:1,max:32,value:T.charWidth,onChange:e=>eL("charWidth",parseInt(e.target.value)||8),title:"Width of each character in logical pixels (not source pixels)",className:"w-full px-3 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Char Height"}),8!==T.charHeight&&(0,t.jsx)("button",{onClick:()=>eL("charHeight",8),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]}),(0,t.jsx)("input",{type:"number",min:1,max:32,value:T.charHeight,onChange:e=>eL("charHeight",parseInt(e.target.value)||8),title:"Height of each character in logical pixels (not source pixels)",className:"w-full px-3 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]})]}),(0,t.jsx)("div",{className:"border-t border-retro-grid/30"}),"gridLineOffset"===ed.mode?(0,t.jsxs)("div",{className:"p-3 bg-retro-pink/20 border border-retro-pink/50 rounded",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-retro-pink",children:"Setting Grid Line Offset"}),(0,t.jsx)("button",{onClick:ef,className:"text-[10px] text-gray-400 hover:text-white",children:"Cancel"})]}),(0,t.jsx)("p",{className:"text-[10px] text-gray-300",children:eI()})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Grid Line Offset"}),(0,t.jsxs)("button",{onClick:()=>eu("gridLineOffset"),className:"flex items-center gap-1 px-2 py-0.5 text-[10px] bg-retro-pink/20 text-retro-pink hover:bg-retro-pink/30 rounded border border-retro-pink/50",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),"Pick from image"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"X"}),0!==eh&&(0,t.jsx)("button",{onClick:()=>em(0),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]}),(0,t.jsx)("input",{type:"number",value:eh,onChange:e=>em(parseInt(e.target.value)||0),title:"Horizontal offset for alignment grid lines",className:"w-full px-3 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Y"}),0!==eg&&(0,t.jsx)("button",{onClick:()=>ep(0),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]}),(0,t.jsx)("input",{type:"number",value:eg,onChange:e=>ep(parseInt(e.target.value)||0),title:"Vertical offset for alignment grid lines",className:"w-full px-3 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Rotation"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:[T.rotation.toFixed(2),"°"]}),0!==T.rotation&&(0,t.jsx)("button",{onClick:()=>eL("rotation",0),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]})]}),(0,t.jsx)("input",{type:"range",min:-2,max:2,step:.05,value:T.rotation,onChange:e=>eL("rotation",parseFloat(e.target.value)),title:"Rotate the image around the top-left corner to align skewed scans",className:"w-full accent-retro-pink"}),(0,t.jsxs)("div",{className:"flex justify-between text-[10px] text-gray-600 mt-1",children:[(0,t.jsx)("span",{children:"-2°"}),(0,t.jsx)("span",{children:"0°"}),(0,t.jsx)("span",{children:"+2°"})]})]}),(0,t.jsx)("div",{className:"border-t border-retro-grid/30"}),"offset"===ed.mode?(0,t.jsxs)("div",{className:"p-3 bg-retro-pink/20 border border-retro-pink/50 rounded",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-retro-pink",children:"Setting Offset"}),(0,t.jsx)("button",{onClick:ef,className:"text-[10px] text-gray-400 hover:text-white",children:"Cancel"})]}),(0,t.jsx)("p",{className:"text-[10px] text-gray-300",children:eI()})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Offset"}),(0,t.jsxs)("button",{onClick:()=>eu("offset"),className:"flex items-center gap-1 px-2 py-0.5 text-[10px] bg-retro-pink/20 text-retro-pink hover:bg-retro-pink/30 rounded border border-retro-pink/50",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),"Pick from image"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"X"}),0!==T.offsetX&&(0,t.jsx)("button",{onClick:()=>eL("offsetX",0),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]}),(0,t.jsx)("input",{type:"number",min:0,value:T.offsetX,onChange:e=>eL("offsetX",parseInt(e.target.value)||0),title:"Horizontal offset from the left edge to the first character (in source pixels)",className:"w-full px-3 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Y"}),0!==T.offsetY&&(0,t.jsx)("button",{onClick:()=>eL("offsetY",0),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]}),(0,t.jsx)("input",{type:"number",min:0,value:T.offsetY,onChange:e=>eL("offsetY",parseInt(e.target.value)||0),title:"Vertical offset from the top edge to the first character (in source pixels)",className:"w-full px-3 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]})]})]}),(0,t.jsx)("div",{className:"border-t border-retro-grid/30"}),"pixelSize"===ed.mode?(0,t.jsxs)("div",{className:"p-3 bg-retro-pink/20 border border-retro-pink/50 rounded",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-xs font-medium text-retro-pink",children:["Setting Pixel Size (",ed.step,"/2)"]}),(0,t.jsx)("button",{onClick:ef,className:"text-[10px] text-gray-400 hover:text-white",children:"Cancel"})]}),(0,t.jsx)("p",{className:"text-[10px] text-gray-300",children:eI()}),ed.points.length>0&&(0,t.jsxs)("div",{className:"mt-2 text-[10px] text-gray-400",children:["First point: (",ed.points[0].x,", ",ed.points[0].y,")"]})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Pixel Size"}),(0,t.jsxs)("button",{onClick:()=>eu("pixelSize"),className:"flex items-center gap-1 px-2 py-0.5 text-[10px] bg-retro-pink/20 text-retro-pink hover:bg-retro-pink/30 rounded border border-retro-pink/50",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),"Pick from image"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Width"}),1!==T.pixelWidth&&(0,t.jsx)("button",{onClick:()=>eL("pixelWidth",1),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]}),(0,t.jsx)("input",{type:"number",min:1,max:100,value:T.pixelWidth,onChange:e=>eL("pixelWidth",Math.max(1,Math.min(100,parseInt(e.target.value)||1))),title:"Source pixels per logical pixel width. Use >1 for scaled/zoomed images",className:"w-full px-3 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Height"}),1!==T.pixelHeight&&(0,t.jsx)("button",{onClick:()=>eL("pixelHeight",1),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]}),(0,t.jsx)("input",{type:"number",min:1,max:100,value:T.pixelHeight,onChange:e=>eL("pixelHeight",Math.max(1,Math.min(100,parseInt(e.target.value)||1))),title:"Source pixels per logical pixel height. Use >1 for scaled/zoomed images",className:"w-full px-3 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]})]})]}),(0,t.jsx)("div",{className:"border-t border-retro-grid/30"}),"gap"===ed.mode?(0,t.jsxs)("div",{className:"p-3 bg-retro-pink/20 border border-retro-pink/50 rounded",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-xs font-medium text-retro-pink",children:["Setting Gap (",ed.step,"/4)"]}),(0,t.jsx)("button",{onClick:ef,className:"text-[10px] text-gray-400 hover:text-white",children:"Cancel"})]}),(0,t.jsx)("p",{className:"text-[10px] text-gray-300",children:eI()}),ed.points.length>0&&(0,t.jsxs)("div",{className:"mt-2 text-[10px] text-gray-400",children:["Points: ",ed.points.map(e=>`(${e.x}, ${e.y})`).join(" → ")]})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Gap"}),(0,t.jsxs)("button",{onClick:()=>eu("gap"),className:"flex items-center gap-1 px-2 py-0.5 text-[10px] bg-retro-pink/20 text-retro-pink hover:bg-retro-pink/30 rounded border border-retro-pink/50",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),"Pick from image"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"X"}),0!==T.gapX&&(0,t.jsx)("button",{onClick:()=>eL("gapX",0),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]}),(0,t.jsx)("input",{type:"number",min:0,value:T.gapX,onChange:e=>eL("gapX",parseInt(e.target.value)||0),title:"Horizontal gap between characters in source pixels",className:"w-full px-3 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Y"}),0!==T.gapY&&(0,t.jsx)("button",{onClick:()=>eL("gapY",0),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]}),(0,t.jsx)("input",{type:"number",min:0,value:T.gapY,onChange:e=>eL("gapY",parseInt(e.target.value)||0),title:"Vertical gap between characters in source pixels",className:"w-full px-3 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]})]})]}),(0,t.jsx)("div",{className:"border-t border-retro-grid/30"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Columns"}),0!==T.forceColumns&&(0,t.jsx)("button",{onClick:()=>eL("forceColumns",0),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]}),(0,t.jsx)("input",{type:"number",min:0,max:256,value:T.forceColumns,onChange:e=>eL("forceColumns",parseInt(e.target.value)||0),title:"Force number of columns. Set to 0 for automatic detection based on image width",className:"w-full px-3 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Rows"}),0!==T.forceRows&&(0,t.jsx)("button",{onClick:()=>eL("forceRows",0),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]}),(0,t.jsx)("input",{type:"number",min:0,max:256,value:T.forceRows,onChange:e=>eL("forceRows",parseInt(e.target.value)||0),title:"Force number of rows. Set to 0 for automatic detection based on image height",className:"w-full px-3 py-1.5 bg-retro-dark border border-retro-grid/50 rounded text-sm text-white focus:outline-none focus:border-retro-cyan"})]})]}),(0,t.jsx)("div",{className:"border-t border-retro-grid/30"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs text-gray-500",children:"Threshold"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-gray-400",children:T.threshold}),128!==T.threshold&&(0,t.jsx)("button",{onClick:()=>eL("threshold",128),className:"text-[10px] text-retro-cyan hover:text-retro-pink",children:"Reset"})]})]}),(0,t.jsx)("input",{type:"range",min:0,max:255,value:T.threshold,onChange:e=>eL("threshold",parseInt(e.target.value)),title:"Brightness threshold for converting to black/white. Lower values = more black pixels",className:"w-full accent-retro-pink"}),(0,t.jsxs)("div",{className:"flex justify-between text-[10px] text-gray-600 mt-1",children:[(0,t.jsx)("span",{children:"Dark (0)"}),(0,t.jsx)("span",{children:"Light (255)"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.ToggleSwitch,{id:"invert",checked:T.invert,onChange:e=>eL("invert",e)}),(0,t.jsx)("label",{htmlFor:"invert",className:"text-xs text-gray-400 cursor-pointer",onClick:()=>eL("invert",!T.invert),children:"Invert colors"})]})]})}),(0,t.jsxs)("div",{className:"flex flex-col min-h-0 flex-1 gap-4",children:[z&&(0,t.jsxs)("div",{className:"card-retro p-3 flex-shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-xs font-medium text-gray-400",children:["Source Image",ed.mode&&(0,t.jsx)("span",{className:"ml-2 text-retro-pink animate-pulse",children:"— Click to pick point"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[ej&&(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[ej.columns," × ",ej.rows]}),ev.imageData&&(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[ev.imageData.width," x ",ev.imageData.height," px",0!==T.rotation&&` (rotated ${T.rotation.toFixed(2)}\xb0)`]})]})]}),(0,t.jsx)("div",{className:`relative overflow-auto rounded bg-black/50 ${ed.mode?"cursor-crosshair ring-2 ring-retro-pink/50":""}`,style:{width:"510px",height:"700px"},onClick:ed.mode?eH:void 0,children:(0,t.jsxs)("div",{className:"relative",style:{width:ev.imageData?ev.imageData.width:"100%",height:ev.imageData?ev.imageData.height:"100%",minWidth:"100%",minHeight:"100%"},children:[(0,t.jsx)("img",{src:ev.url||"",alt:"Source image",className:"block",style:{imageRendering:"pixelated",width:ev.imageData?ev.imageData.width:"auto",height:ev.imageData?ev.imageData.height:"auto"}}),ev.imageData&&(0,t.jsxs)("svg",{className:"absolute top-0 left-0 pointer-events-none",style:{width:ev.imageData.width,height:ev.imageData.height},viewBox:`0 0 ${ev.imageData.width} ${ev.imageData.height}`,children:[Array.from({length:Math.ceil((ev.imageData.height+50)/50)}).map((e,r)=>{let s=eg+50*r;return s<0||s>ev.imageData.height?null:(0,t.jsx)("line",{x1:0,y1:s,x2:ev.imageData.width,y2:s,stroke:r%2==0?"rgba(0, 255, 255, 0.8)":"rgba(0, 255, 255, 0.5)",strokeWidth:r%2==0?2:1,strokeDasharray:r%2==0?"none":"4,4"},`h-line-${r}`)}),Array.from({length:Math.ceil((ev.imageData.width+50)/50)}).map((e,r)=>{let s=eh+50*r;return s<0||s>ev.imageData.width?null:(0,t.jsx)("line",{x1:s,y1:0,x2:s,y2:ev.imageData.height,stroke:r%2==0?"rgba(0, 255, 255, 0.8)":"rgba(0, 255, 255, 0.5)",strokeWidth:r%2==0?2:1,strokeDasharray:r%2==0?"none":"4,4"},`v-line-${r}`)})]}),ev.imageData&&ej&&(0,t.jsx)("svg",{className:"absolute top-0 left-0 pointer-events-none",style:{width:ev.imageData.width,height:ev.imageData.height},viewBox:`0 0 ${ev.imageData.width} ${ev.imageData.height}`,children:Array.from({length:ej.rows}).map((e,r)=>Array.from({length:ej.columns}).map((e,s)=>{let a=eb(r,s,ej.rows,ej.columns);if(a>=ej.characters.length)return null;let i=ej.characters[a],l=T.charWidth*T.pixelWidth,n=T.charHeight*T.pixelHeight,o=T.gapX,c=T.gapY,d=T.offsetX+s*(l+o),x=T.offsetY+r*(n+c);return i.pixels.map((e,r)=>e.map((e,s)=>e?(0,t.jsx)("rect",{x:d+s*T.pixelWidth,y:x+r*T.pixelHeight,width:T.pixelWidth,height:T.pixelHeight,fill:"rgba(0, 255, 0, 0.5)"},`recognized-${a}-${r}-${s}`):null))}))}),ev.imageData&&ej&&(0,t.jsx)("svg",{className:"absolute top-0 left-0 pointer-events-none",style:{width:ev.imageData.width,height:ev.imageData.height},viewBox:`0 0 ${ev.imageData.width} ${ev.imageData.height}`,children:Array.from({length:ej.rows}).map((e,r)=>Array.from({length:ej.columns}).map((e,s)=>{if(eb(r,s,ej.rows,ej.columns)>=ej.characters.length)return null;let a=T.charWidth*T.pixelWidth,i=T.charHeight*T.pixelHeight,l=T.gapX,n=T.gapY,o=T.offsetX+s*(a+l),c=T.offsetY+r*(i+n);return(0,t.jsxs)("g",{children:[(0,t.jsx)("rect",{x:o,y:c,width:a,height:i,fill:"rgba(236, 72, 153, 0.25)",stroke:"rgba(236, 72, 153, 0.85)",strokeWidth:1}),(T.pixelWidth>1||T.pixelHeight>1)&&Array.from({length:T.charHeight}).map((e,r)=>Array.from({length:T.charWidth}).map((e,s)=>(0,t.jsx)("rect",{x:o+s*T.pixelWidth,y:c+r*T.pixelHeight,width:T.pixelWidth,height:T.pixelHeight,fill:"none",stroke:"rgba(80, 200, 220, 0.6)",strokeWidth:.5},`pixel-${r}-${s}`)))]},`char-${r}-${s}`)}))}),ed.mode&&ed.points.length>0&&ev.imageData&&(0,t.jsx)("svg",{className:"absolute top-0 left-0 pointer-events-none",style:{width:ev.imageData.width,height:ev.imageData.height},viewBox:`0 0 ${ev.imageData.width} ${ev.imageData.height}`,children:ed.points.map((e,r)=>(0,t.jsxs)("g",{children:[(0,t.jsx)("line",{x1:e.x-10,y1:e.y,x2:e.x+10,y2:e.y,stroke:"#00ff00",strokeWidth:2}),(0,t.jsx)("line",{x1:e.x,y1:e.y-10,x2:e.x,y2:e.y+10,stroke:"#00ff00",strokeWidth:2}),(0,t.jsx)("circle",{cx:e.x,cy:e.y,r:4,fill:"#00ff00",stroke:"white",strokeWidth:1}),(0,t.jsx)("text",{x:e.x+8,y:e.y-8,fill:"#00ff00",fontSize:12,fontWeight:"bold",children:r+1})]},`picker-point-${r}`))})]})})]}),(0,t.jsxs)("div",{className:"card-retro p-3 flex flex-col flex-1 min-h-[300px] lg:min-h-[400px]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2 flex-shrink-0",children:[(0,t.jsxs)("span",{className:"text-xs font-medium text-gray-400",children:["Preview (",ej?.characters.length||0," characters)"]}),ej&&(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[ej.columns," x ",ej.rows," grid",ek.scale>1&&` - ${ek.scale}x`]})]}),ej&&ej.characters.length>0?(0,t.jsx)("div",{ref:D,className:"bg-black/50 rounded p-2 flex-1 overflow-auto flex items-start justify-center",children:(0,t.jsx)(x.CharacterPreview,{characters:ej.characters,config:eN,maxCharacters:512,maxWidth:ek.maxWidth,maxHeight:ek.maxHeight,scale:ek.scale,forceColumns:ej.columns,showCharacterBorders:!0,characterBorderColor:"rgba(236, 72, 153, 0.4)"})}):(0,t.jsx)("div",{ref:D,className:"flex-1 flex items-center justify-center text-center text-gray-500",children:(0,t.jsx)("p",{className:"text-sm",children:"No characters detected"})})]}),ej&&ej.characters.length>0&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 space-y-1 flex-shrink-0",children:[(0,t.jsxs)("p",{children:["Characters will be imported at ",T.charWidth,"x",T.charHeight," pixels."]}),(0,t.jsx)("p",{children:"Adjust threshold if characters appear too light or too dark."})]})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-200 mb-2",children:"Upload Image"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Select an image with a character grid"})]}),(0,t.jsx)("input",{ref:W,type:"file",accept:"image/*",onChange:eR,className:"hidden"}),(0,t.jsx)("div",{onClick:()=>W.current?.click(),onDrop:eW,onDragOver:eD,className:`
                        flex flex-col items-center justify-center p-12
                        border-2 border-dashed rounded-lg cursor-pointer
                        transition-colors
                        ${X?"pointer-events-none opacity-50":""}
                        border-retro-grid/50 hover:border-retro-pink/50 bg-retro-navy/30
                      `,children:X?(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-2 border-retro-pink border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Loading image..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-retro-pink/20 flex items-center justify-center mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-retro-pink",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,t.jsx)("p",{className:"text-sm text-gray-300 mb-1",children:"Drag and drop an image here"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"or click to browse"}),(0,t.jsxs)("p",{className:"text-[10px] text-gray-600",children:["Supports: ",y()]})]})}),P&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-400",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,t.jsx)("span",{children:P})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Tip:"})," For best results, use a monochrome image with characters arranged in a grid."]}),(0,t.jsx)("p",{children:"The importer will auto-detect common character sizes like 8x8, 8x16, etc."})]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4",children:(0,t.jsx)(o.Button,{onClick:eB,disabled:!ew,variant:"pink",children:"Next"})})]}),2===L&&(0,t.jsxs)("div",{className:"space-y-6 max-w-2xl mx-auto",children:[(0,t.jsx)(m.MetadataStep,{name:U,onNameChange:E,description:G,onDescriptionChange:V,manufacturer:K,onManufacturerChange:q,system:J,onSystemChange:Q,chip:Z,onChipChange:_,locale:ee,onLocaleChange:et,source:er,onSourceChange:es,tags:ea,onTagsChange:ei}),(0,t.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,t.jsx)(o.Button,{onClick:e$,variant:"ghost",children:"Back"}),(0,t.jsx)(o.Button,{onClick:eB,disabled:!eC,variant:"pink",children:"Next"})]})]}),3===L&&(0,t.jsxs)("div",{className:"space-y-6 max-w-2xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-200 mb-2",children:"Review & Save"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Review your character set and save to library"})]}),(0,t.jsx)("div",{className:"card-retro p-4 space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Name:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-200",children:U})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Characters:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-200",children:ey.length})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Dimensions:"}),(0,t.jsxs)("span",{className:"ml-2 text-gray-200",children:[eN.width,"x",eN.height]})]}),G&&(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Description:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-200",children:G})]})]})}),(0,t.jsxs)("div",{className:"card-retro p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Preview"}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[eN.width,"x",eN.height," - ",ey.length," characters"]})]}),(0,t.jsx)("div",{className:"bg-black/50 rounded-lg p-4",children:(0,t.jsx)(x.CharacterPreview,{characters:ey,config:eN,maxCharacters:256,maxWidth:600,maxHeight:400,scale:2})})]}),eo&&(0,t.jsx)("div",{className:"text-sm text-red-400 text-center",children:eo}),(0,t.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,t.jsx)(o.Button,{onClick:e$,variant:"ghost",children:"Back"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(o.Button,{onClick:()=>ez(!1),disabled:!eM||el,variant:"cyan",children:el?"Saving...":"Save to Library"}),(0,t.jsx)(o.Button,{onClick:()=>ez(!0),disabled:!eM||el,variant:"pink",children:el?"Saving...":"Save & Edit"})]})]})]})]})]})}),(0,t.jsx)(l.Footer,{})]})}e.s(["ImageImportView",()=>w],7317)}]);